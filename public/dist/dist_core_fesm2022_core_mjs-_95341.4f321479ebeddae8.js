(self.webpackChunkshell=self.webpackChunkshell||[]).push([["dist_core_fesm2022_core_mjs-_95341","dist_core_fesm2022_core_mjs-_95340"],{1241:function(we,oe){var t;!function(S){"use strict";var D=Math.cosh||function(F){return Math.abs(F)<1e-9?1-F:.5*(Math.exp(F)+Math.exp(-F))},v=Math.sinh||function(F){return Math.abs(F)<1e-9?F:.5*(Math.exp(F)-Math.exp(-F))},ce=function(){throw SyntaxError("Invalid Param")};function ae(F,j){var U=Math.abs(F),z=Math.abs(j);return 0===F?Math.log(z):0===j?Math.log(U):U<3e3&&z<3e3?.5*Math.log(F*F+j*j):(F/=2,j/=2,.5*Math.log(F*F+j*j)+Math.LN2)}function V(F,j){if(!(this instanceof V))return new V(F,j);var U=function(F,j){var U={re:0,im:0};if(null==F)U.re=U.im=0;else if(void 0!==j)U.re=F,U.im=j;else switch(typeof F){case"object":if("im"in F&&"re"in F)U.re=F.re,U.im=F.im;else if("abs"in F&&"arg"in F){if(!Number.isFinite(F.abs)&&Number.isFinite(F.arg))return V.INFINITY;U.re=F.abs*Math.cos(F.arg),U.im=F.abs*Math.sin(F.arg)}else if("r"in F&&"phi"in F){if(!Number.isFinite(F.r)&&Number.isFinite(F.phi))return V.INFINITY;U.re=F.r*Math.cos(F.phi),U.im=F.r*Math.sin(F.phi)}else 2===F.length?(U.re=F[0],U.im=F[1]):ce();break;case"string":U.im=U.re=0;var z=F.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),ee=1,de=0;null===z&&ce();for(var ie=0;ie<z.length;ie++){var I=z[ie];" "===I||"\t"===I||"\n"===I||("+"===I?ee++:"-"===I?de++:"i"===I||"I"===I?(ee+de===0&&ce()," "===z[ie+1]||isNaN(z[ie+1])?U.im+=parseFloat((de%2?"-":"")+"1"):(U.im+=parseFloat((de%2?"-":"")+z[ie+1]),ie++),ee=de=0):((ee+de===0||isNaN(I))&&ce(),"i"===z[ie+1]||"I"===z[ie+1]?(U.im+=parseFloat((de%2?"-":"")+I),ie++):U.re+=parseFloat((de%2?"-":"")+I),ee=de=0))}ee+de>0&&ce();break;case"number":U.im=0,U.re=F;break;default:ce()}return isNaN(U.re)||isNaN(U.im),U}(F,j);this.re=U.re,this.im=U.im}V.prototype={re:0,im:0,sign:function(){var F=this.abs();return new V(this.re/F,this.im/F)},add:function(F,j){var U=new V(F,j);return this.isInfinite()&&U.isInfinite()?V.NAN:this.isInfinite()||U.isInfinite()?V.INFINITY:new V(this.re+U.re,this.im+U.im)},sub:function(F,j){var U=new V(F,j);return this.isInfinite()&&U.isInfinite()?V.NAN:this.isInfinite()||U.isInfinite()?V.INFINITY:new V(this.re-U.re,this.im-U.im)},mul:function(F,j){var U=new V(F,j);return this.isInfinite()&&U.isZero()||this.isZero()&&U.isInfinite()?V.NAN:this.isInfinite()||U.isInfinite()?V.INFINITY:0===U.im&&0===this.im?new V(this.re*U.re,0):new V(this.re*U.re-this.im*U.im,this.re*U.im+this.im*U.re)},div:function(F,j){var U=new V(F,j);if(this.isZero()&&U.isZero()||this.isInfinite()&&U.isInfinite())return V.NAN;if(this.isInfinite()||U.isZero())return V.INFINITY;if(this.isZero()||U.isInfinite())return V.ZERO;F=this.re,j=this.im;var de,ie,z=U.re,ee=U.im;return 0===ee?new V(F/z,j/z):Math.abs(z)<Math.abs(ee)?new V((F*(ie=z/ee)+j)/(de=z*ie+ee),(j*ie-F)/de):new V((F+j*(ie=ee/z))/(de=ee*ie+z),(j-F*ie)/de)},pow:function(F,j){var U=new V(F,j);if(F=this.re,j=this.im,U.isZero())return V.ONE;if(0===U.im){if(0===j&&F>0)return new V(Math.pow(F,U.re),0);if(0===F)switch((U.re%4+4)%4){case 0:return new V(Math.pow(j,U.re),0);case 1:return new V(0,Math.pow(j,U.re));case 2:return new V(-Math.pow(j,U.re),0);case 3:return new V(0,-Math.pow(j,U.re))}}if(0===F&&0===j&&U.re>0&&U.im>=0)return V.ZERO;var z=Math.atan2(j,F),ee=ae(F,j);return F=Math.exp(U.re*ee-U.im*z),j=U.im*ee+U.re*z,new V(F*Math.cos(j),F*Math.sin(j))},sqrt:function(){var z,ee,F=this.re,j=this.im,U=this.abs();if(F>=0){if(0===j)return new V(Math.sqrt(F),0);z=.5*Math.sqrt(2*(U+F))}else z=Math.abs(j)/Math.sqrt(2*(U-F));return ee=F<=0?.5*Math.sqrt(2*(U-F)):Math.abs(j)/Math.sqrt(2*(U+F)),new V(z,j<0?-ee:ee)},exp:function(){var F=Math.exp(this.re);return new V(F*Math.cos(this.im),F*Math.sin(this.im))},expm1:function(){var F=this.re,j=this.im;return new V(Math.expm1(F)*Math.cos(j)+function(F){var j=Math.PI/4;if(-j>F||F>j)return Math.cos(F)-1;var U=F*F;return U*(U*(U*(U*(U*(U*(U*(U/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)}(j),Math.exp(F)*Math.sin(j))},log:function(){var F=this.re,j=this.im;return new V(ae(F,j),Math.atan2(j,F))},abs:function(){return F=this.re,j=this.im,U=Math.abs(F),z=Math.abs(j),U<3e3&&z<3e3?Math.sqrt(U*U+z*z):(U<z?(U=z,z=F/j):z=j/F,U*Math.sqrt(1+z*z));var F,j,U,z},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var F=this.re,j=this.im;return new V(Math.sin(F)*D(j),Math.cos(F)*v(j))},cos:function(){var F=this.re,j=this.im;return new V(Math.cos(F)*D(j),-Math.sin(F)*v(j))},tan:function(){var F=2*this.re,j=2*this.im,U=Math.cos(F)+D(j);return new V(Math.sin(F)/U,v(j)/U)},cot:function(){var F=2*this.re,j=2*this.im,U=Math.cos(F)-D(j);return new V(-Math.sin(F)/U,v(j)/U)},sec:function(){var F=this.re,j=this.im,U=.5*D(2*j)+.5*Math.cos(2*F);return new V(Math.cos(F)*D(j)/U,Math.sin(F)*v(j)/U)},csc:function(){var F=this.re,j=this.im,U=.5*D(2*j)-.5*Math.cos(2*F);return new V(Math.sin(F)*D(j)/U,-Math.cos(F)*v(j)/U)},asin:function(){var F=this.re,j=this.im,U=new V(j*j-F*F+1,-2*F*j).sqrt(),z=new V(U.re-j,U.im+F).log();return new V(z.im,-z.re)},acos:function(){var F=this.re,j=this.im,U=new V(j*j-F*F+1,-2*F*j).sqrt(),z=new V(U.re-j,U.im+F).log();return new V(Math.PI/2-z.im,z.re)},atan:function(){var F=this.re,j=this.im;if(0===F){if(1===j)return new V(0,1/0);if(-1===j)return new V(0,-1/0)}var U=F*F+(1-j)*(1-j),z=new V((1-j*j-F*F)/U,-2*F/U).log();return new V(-.5*z.im,.5*z.re)},acot:function(){var F=this.re,j=this.im;if(0===j)return new V(Math.atan2(1,F),0);var U=F*F+j*j;return 0!==U?new V(F/U,-j/U).atan():new V(0!==F?F/0:0,0!==j?-j/0:0).atan()},asec:function(){var F=this.re,j=this.im;if(0===F&&0===j)return new V(0,1/0);var U=F*F+j*j;return 0!==U?new V(F/U,-j/U).acos():new V(0!==F?F/0:0,0!==j?-j/0:0).acos()},acsc:function(){var F=this.re,j=this.im;if(0===F&&0===j)return new V(Math.PI/2,1/0);var U=F*F+j*j;return 0!==U?new V(F/U,-j/U).asin():new V(0!==F?F/0:0,0!==j?-j/0:0).asin()},sinh:function(){var F=this.re,j=this.im;return new V(v(F)*Math.cos(j),D(F)*Math.sin(j))},cosh:function(){var F=this.re,j=this.im;return new V(D(F)*Math.cos(j),v(F)*Math.sin(j))},tanh:function(){var F=2*this.re,j=2*this.im,U=D(F)+Math.cos(j);return new V(v(F)/U,Math.sin(j)/U)},coth:function(){var F=2*this.re,j=2*this.im,U=D(F)-Math.cos(j);return new V(v(F)/U,-Math.sin(j)/U)},csch:function(){var F=this.re,j=this.im,U=Math.cos(2*j)-D(2*F);return new V(-2*v(F)*Math.cos(j)/U,2*D(F)*Math.sin(j)/U)},sech:function(){var F=this.re,j=this.im,U=Math.cos(2*j)+D(2*F);return new V(2*D(F)*Math.cos(j)/U,-2*v(F)*Math.sin(j)/U)},asinh:function(){var F=this.im;this.im=-this.re,this.re=F;var j=this.asin();return this.re=-this.im,this.im=F,F=j.re,j.re=-j.im,j.im=F,j},acosh:function(){var F=this.acos();if(F.im<=0){var j=F.re;F.re=-F.im,F.im=j}else j=F.im,F.im=-F.re,F.re=j;return F},atanh:function(){var F=this.re,j=this.im,U=F>1&&0===j,z=1-F,ee=1+F,de=z*z+j*j,ie=0!==de?new V((ee*z-j*j)/de,(j*z+ee*j)/de):new V(-1!==F?F/0:0,0!==j?j/0:0),I=ie.re;return ie.re=ae(ie.re,ie.im)/2,ie.im=Math.atan2(ie.im,I)/2,U&&(ie.im=-ie.im),ie},acoth:function(){var F=this.re,j=this.im;if(0===F&&0===j)return new V(0,Math.PI/2);var U=F*F+j*j;return 0!==U?new V(F/U,-j/U).atanh():new V(0!==F?F/0:0,0!==j?-j/0:0).atanh()},acsch:function(){var F=this.re,j=this.im;if(0===j)return new V(0!==F?Math.log(F+Math.sqrt(F*F+1)):1/0,0);var U=F*F+j*j;return 0!==U?new V(F/U,-j/U).asinh():new V(0!==F?F/0:0,0!==j?-j/0:0).asinh()},asech:function(){var F=this.re,j=this.im;if(this.isZero())return V.INFINITY;var U=F*F+j*j;return 0!==U?new V(F/U,-j/U).acosh():new V(0!==F?F/0:0,0!==j?-j/0:0).acosh()},inverse:function(){if(this.isZero())return V.INFINITY;if(this.isInfinite())return V.ZERO;var F=this.re,j=this.im,U=F*F+j*j;return new V(F/U,-j/U)},conjugate:function(){return new V(this.re,-this.im)},neg:function(){return new V(-this.re,-this.im)},ceil:function(F){return F=Math.pow(10,F||0),new V(Math.ceil(this.re*F)/F,Math.ceil(this.im*F)/F)},floor:function(F){return F=Math.pow(10,F||0),new V(Math.floor(this.re*F)/F,Math.floor(this.im*F)/F)},round:function(F){return F=Math.pow(10,F||0),new V(Math.round(this.re*F)/F,Math.round(this.im*F)/F)},equals:function(F,j){var U=new V(F,j);return Math.abs(U.re-this.re)<=V.EPSILON&&Math.abs(U.im-this.im)<=V.EPSILON},clone:function(){return new V(this.re,this.im)},toString:function(){var F=this.re,j=this.im,U="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(F)<V.EPSILON&&(F=0),Math.abs(j)<V.EPSILON&&(j=0),0===j?U+F:(0!==F?(U+=F,U+=" ",j<0?(j=-j,U+="-"):U+="+",U+=" "):j<0&&(j=-j,U+="-"),1!==j&&(U+=j),U+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return 0===this.im&&0===this.re},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},V.ZERO=new V(0,0),V.ONE=new V(1,0),V.I=new V(0,1),V.PI=new V(Math.PI,0),V.E=new V(Math.E,0),V.INFINITY=new V(1/0,1/0),V.NAN=new V(NaN,NaN),V.EPSILON=1e-15,void 0!==(t=function(){return V}.apply(oe,[]))&&(we.exports=t)}()},8170:we=>{we.exports=function oe(L,t){"use strict";var z,ee,S=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,D=/(^[ ]*|[ ]*$)/g,v=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,W=/^0x[0-9a-f]+$/i,H=/^0/,ce=function(I){return oe.insensitive&&(""+I).toLowerCase()||""+I},ae=ce(L).replace(D,"")||"",$=ce(t).replace(D,"")||"",V=ae.replace(S,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),F=$.replace(S,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),j=parseInt(ae.match(W),16)||1!==V.length&&ae.match(v)&&Date.parse(ae),U=parseInt($.match(W),16)||j&&$.match(v)&&Date.parse($)||null;if(U){if(j<U)return-1;if(j>U)return 1}for(var de=0,ie=Math.max(V.length,F.length);de<ie;de++){if(z=!(V[de]||"").match(H)&&parseFloat(V[de])||V[de]||0,ee=!(F[de]||"").match(H)&&parseFloat(F[de])||F[de]||0,isNaN(z)!==isNaN(ee))return isNaN(z)?1:-1;if(typeof z!=typeof ee&&(z+="",ee+=""),z<ee)return-1;if(z>ee)return 1}return 0}},7780:function(we){!function(oe){"use strict";var t={s:1,n:0,d:1};function S(z,ee){if(isNaN(z=parseInt(z,10)))throw j();return z*ee}function D(z,ee){if(0===ee)throw F();var de=Object.create(V.prototype);de.s=z<0?-1:1;var ie=$(z=z<0?-z:z,ee);return de.n=z/ie,de.d=ee/ie,de}function v(z){for(var ee={},de=z,ie=2,I=4;I<=de;){for(;de%ie==0;)de/=ie,ee[ie]=(ee[ie]||0)+1;I+=1+2*ie++}return de!==z?de>1&&(ee[de]=(ee[de]||0)+1):ee[z]=(ee[z]||0)+1,ee}var W=function(z,ee){var rn,de=0,ie=1,I=1,Ge=0,me=0,tt=0,je=1,ut=1,Pe=0,Re=1,it=1,st=1,et=1e7;if(null!=z)if(void 0!==ee){if(I=(de=z)*(ie=ee),de%1!=0||ie%1!=0)throw U()}else switch(typeof z){case"object":if("d"in z&&"n"in z)de=z.n,ie=z.d,"s"in z&&(de*=z.s);else{if(!(0 in z))throw j();de=z[0],1 in z&&(ie=z[1])}I=de*ie;break;case"number":if(z<0&&(I=z,z=-z),z%1==0)de=z;else if(z>0){for(z>=1&&(z/=ut=Math.pow(10,Math.floor(1+Math.log(z)/Math.LN10)));Re<=et&&st<=et;){if(z===(rn=(Pe+it)/(Re+st))){Re+st<=et?(de=Pe+it,ie=Re+st):st>Re?(de=it,ie=st):(de=Pe,ie=Re);break}z>rn?(Pe+=it,Re+=st):(it+=Pe,st+=Re),Re>et?(de=it,ie=st):(de=Pe,ie=Re)}de*=ut}else(isNaN(z)||isNaN(ee))&&(ie=de=NaN);break;case"string":if(null===(Re=z.match(/\d+|./g)))throw j();if("-"===Re[Pe]?(I=-1,Pe++):"+"===Re[Pe]&&Pe++,Re.length===Pe+1?me=S(Re[Pe++],I):"."===Re[Pe+1]||"."===Re[Pe]?("."!==Re[Pe]&&(Ge=S(Re[Pe++],I)),(1+ ++Pe===Re.length||"("===Re[Pe+1]&&")"===Re[Pe+3]||"'"===Re[Pe+1]&&"'"===Re[Pe+3])&&(me=S(Re[Pe],I),je=Math.pow(10,Re[Pe].length),Pe++),("("===Re[Pe]&&")"===Re[Pe+2]||"'"===Re[Pe]&&"'"===Re[Pe+2])&&(tt=S(Re[Pe+1],I),ut=Math.pow(10,Re[Pe+1].length)-1,Pe+=3)):"/"===Re[Pe+1]||":"===Re[Pe+1]?(me=S(Re[Pe],I),je=S(Re[Pe+2],1),Pe+=3):"/"===Re[Pe+3]&&" "===Re[Pe+1]&&(Ge=S(Re[Pe],I),me=S(Re[Pe+2],I),je=S(Re[Pe+4],1),Pe+=5),Re.length<=Pe){I=de=tt+(ie=je*ut)*Ge+ut*me;break}default:throw j()}if(0===ie)throw F();t.s=I<0?-1:1,t.n=Math.abs(de),t.d=Math.abs(ie)};function $(z,ee){if(!z)return ee;if(!ee)return z;for(;;){if(!(z%=ee))return ee;if(!(ee%=z))return z}}function V(z,ee){if(W(z,ee),!(this instanceof V))return D(t.s*t.n,t.d);z=$(t.d,t.n),this.s=t.s,this.n=t.n/z,this.d=t.d/z}var F=function(){return new Error("Division by Zero")},j=function(){return new Error("Invalid argument")},U=function(){return new Error("Parameters must be integer")};V.prototype={s:1,n:0,d:1,abs:function(){return D(this.n,this.d)},neg:function(){return D(-this.s*this.n,this.d)},add:function(z,ee){return W(z,ee),D(this.s*this.n*t.d+t.s*this.d*t.n,this.d*t.d)},sub:function(z,ee){return W(z,ee),D(this.s*this.n*t.d-t.s*this.d*t.n,this.d*t.d)},mul:function(z,ee){return W(z,ee),D(this.s*t.s*this.n*t.n,this.d*t.d)},div:function(z,ee){return W(z,ee),D(this.s*t.s*this.n*t.d,this.d*t.n)},clone:function(){return D(this.s*this.n,this.d)},mod:function(z,ee){if(isNaN(this.n)||isNaN(this.d))return new V(NaN);if(void 0===z)return D(this.s*this.n%this.d,1);if(W(z,ee),0===t.n&&0===this.d)throw F();return D(this.s*(t.d*this.n)%(t.n*this.d),t.d*this.d)},gcd:function(z,ee){return W(z,ee),D($(t.n,this.n)*$(t.d,this.d),t.d*this.d)},lcm:function(z,ee){return W(z,ee),0===t.n&&0===this.n?D(0,1):D(t.n*this.n,$(t.n,this.n)*$(t.d,this.d))},ceil:function(z){return z=Math.pow(10,z||0),isNaN(this.n)||isNaN(this.d)?new V(NaN):D(Math.ceil(z*this.s*this.n/this.d),z)},floor:function(z){return z=Math.pow(10,z||0),isNaN(this.n)||isNaN(this.d)?new V(NaN):D(Math.floor(z*this.s*this.n/this.d),z)},round:function(z){return z=Math.pow(10,z||0),isNaN(this.n)||isNaN(this.d)?new V(NaN):D(Math.round(z*this.s*this.n/this.d),z)},inverse:function(){return D(this.s*this.d,this.n)},pow:function(z,ee){if(W(z,ee),1===t.d)return t.s<0?D(Math.pow(this.s*this.d,t.n),Math.pow(this.n,t.n)):D(Math.pow(this.s*this.n,t.n),Math.pow(this.d,t.n));if(this.s<0)return null;var de=v(this.n),ie=v(this.d),I=1,Ge=1;for(var me in de)if("1"!==me){if("0"===me){I=0;break}if(de[me]*=t.n,de[me]%t.d!=0)return null;de[me]/=t.d,I*=Math.pow(me,de[me])}for(var me in ie)if("1"!==me){if(ie[me]*=t.n,ie[me]%t.d!=0)return null;ie[me]/=t.d,Ge*=Math.pow(me,ie[me])}return t.s<0?D(Ge,I):D(I,Ge)},equals:function(z,ee){return W(z,ee),this.s*this.n*t.d==t.s*t.n*this.d},compare:function(z,ee){W(z,ee);var de=this.s*this.n*t.d-t.s*t.n*this.d;return(0<de)-(de<0)},simplify:function(z){if(isNaN(this.n)||isNaN(this.d))return this;z=z||.001;for(var ee=this.abs(),de=ee.toContinued(),ie=1;ie<de.length;ie++){for(var I=D(de[ie-1],1),Ge=ie-2;Ge>=0;Ge--)I=I.inverse().add(de[Ge]);if(Math.abs(I.sub(ee).valueOf())<z)return I.mul(this.s)}return this},divisible:function(z,ee){return W(z,ee),!(!(t.n*this.d)||this.n*t.d%(t.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(z){var ee,de="",ie=this.n,I=this.d;return this.s<0&&(de+="-"),1===I?de+=ie:(z&&(ee=Math.floor(ie/I))>0&&(de+=ee,de+=" ",ie%=I),de+=ie,de+="/",de+=I),de},toLatex:function(z){var ee,de="",ie=this.n,I=this.d;return this.s<0&&(de+="-"),1===I?de+=ie:(z&&(ee=Math.floor(ie/I))>0&&(de+=ee,ie%=I),de+="\\frac{",de+=ie,de+="}{",de+=I,de+="}"),de},toContinued:function(){var z,ee=this.n,de=this.d,ie=[];if(isNaN(ee)||isNaN(de))return ie;do{ie.push(Math.floor(ee/de)),z=ee%de,ee=de,de=z}while(1!==ee);return ie},toString:function(z){var ee=this.n,de=this.d;if(isNaN(ee)||isNaN(de))return"NaN";z=z||15;var ie=function ce(z,ee){for(;ee%2==0;ee/=2);for(;ee%5==0;ee/=5);if(1===ee)return 0;for(var de=10%ee,ie=1;1!==de;ie++)if(de=10*de%ee,ie>2e3)return 0;return ie}(0,de),I=function ae(z,ee,de){for(var ie=1,I=function H(z,ee,de){for(var ie=1;ee>0;z=z*z%de,ee>>=1)1&ee&&(ie=ie*z%de);return ie}(10,de,ee),Ge=0;Ge<300;Ge++){if(ie===I)return Ge;ie=10*ie%ee,I=10*I%ee}return 0}(0,de,ie),Ge=this.s<0?"-":"";if(Ge+=ee/de|0,ee%=de,(ee*=10)&&(Ge+="."),ie){for(var me=I;me--;)Ge+=ee/de|0,ee%=de,ee*=10;for(Ge+="(",me=ie;me--;)Ge+=ee/de|0,ee%=de,ee*=10;Ge+=")"}else for(me=z;ee&&me--;)Ge+=ee/de|0,ee%=de,ee*=10;return Ge}},Object.defineProperty(V,"__esModule",{value:!0}),V.default=V,V.Fraction=V,we.exports=V}()},9128:(we,oe,L)=>{var t=L(9864),S=L(3919),D=L(3263),v=L(5353),W=L(3358),H=L(3789),ce=L(2508);ce.alea=t,ce.xor128=S,ce.xorwow=D,ce.xorshift7=v,ce.xor4096=W,ce.tychei=H,we.exports=ce},9864:function(we,oe,L){var t;!function(S,D,v){function W($){var V=this,F=function ae(){var $=4022871197;return function(F){F=String(F);for(var j=0;j<F.length;j++){var U=.02519603282416938*($+=F.charCodeAt(j));U-=$=U>>>0,$=(U*=$)>>>0,$+=4294967296*(U-=$)}return 2.3283064365386963e-10*($>>>0)}}();V.next=function(){var j=2091639*V.s0+2.3283064365386963e-10*V.c;return V.s0=V.s1,V.s1=V.s2,V.s2=j-(V.c=0|j)},V.c=1,V.s0=F(" "),V.s1=F(" "),V.s2=F(" "),V.s0-=F($),V.s0<0&&(V.s0+=1),V.s1-=F($),V.s1<0&&(V.s1+=1),V.s2-=F($),V.s2<0&&(V.s2+=1),F=null}function H($,V){return V.c=$.c,V.s0=$.s0,V.s1=$.s1,V.s2=$.s2,V}function ce($,V){var F=new W($),j=V&&V.state,U=F.next;return U.int32=function(){return 4294967296*F.next()|0},U.double=function(){return U()+11102230246251565e-32*(2097152*U()|0)},U.quick=U,j&&("object"==typeof j&&H(j,F),U.state=function(){return H(F,{})}),U}D&&D.exports?D.exports=ce:L.amdD&&L.amdO?void 0!==(t=function(){return ce}.call(oe,L,oe,D))&&(D.exports=t):this.alea=ce}(0,we=L.nmd(we))},3789:function(we,oe,L){var t;!function(S,D,v){function W(ae){var $=this,V="";$.next=function(){var j=$.b,U=$.c,z=$.d,ee=$.a;return j=j<<25^j>>>7^U,U=U-z|0,z=z<<24^z>>>8^ee,ee=ee-j|0,$.b=j=j<<20^j>>>12^U,$.c=U=U-z|0,$.d=z<<16^U>>>16^ee,$.a=ee-j|0},$.a=0,$.b=0,$.c=-1640531527,$.d=1367130551,ae===Math.floor(ae)?($.a=ae/4294967296|0,$.b=0|ae):V+=ae;for(var F=0;F<V.length+20;F++)$.b^=0|V.charCodeAt(F),$.next()}function H(ae,$){return $.a=ae.a,$.b=ae.b,$.c=ae.c,$.d=ae.d,$}function ce(ae,$){var V=new W(ae),F=$&&$.state,j=function(){return(V.next()>>>0)/4294967296};return j.double=function(){do{var ee=((V.next()>>>11)+(V.next()>>>0)/4294967296)/(1<<21)}while(0===ee);return ee},j.int32=V.next,j.quick=j,F&&("object"==typeof F&&H(F,V),j.state=function(){return H(V,{})}),j}D&&D.exports?D.exports=ce:L.amdD&&L.amdO?void 0!==(t=function(){return ce}.call(oe,L,oe,D))&&(D.exports=t):this.tychei=ce}(0,we=L.nmd(we))},3919:function(we,oe,L){var t;!function(S,D,v){function W(ae){var $=this,V="";$.x=0,$.y=0,$.z=0,$.w=0,$.next=function(){var j=$.x^$.x<<11;return $.x=$.y,$.y=$.z,$.z=$.w,$.w^=$.w>>>19^j^j>>>8},ae===(0|ae)?$.x=ae:V+=ae;for(var F=0;F<V.length+64;F++)$.x^=0|V.charCodeAt(F),$.next()}function H(ae,$){return $.x=ae.x,$.y=ae.y,$.z=ae.z,$.w=ae.w,$}function ce(ae,$){var V=new W(ae),F=$&&$.state,j=function(){return(V.next()>>>0)/4294967296};return j.double=function(){do{var ee=((V.next()>>>11)+(V.next()>>>0)/4294967296)/(1<<21)}while(0===ee);return ee},j.int32=V.next,j.quick=j,F&&("object"==typeof F&&H(F,V),j.state=function(){return H(V,{})}),j}D&&D.exports?D.exports=ce:L.amdD&&L.amdO?void 0!==(t=function(){return ce}.call(oe,L,oe,D))&&(D.exports=t):this.xor128=ce}(0,we=L.nmd(we))},3358:function(we,oe,L){var t;!function(S,D,v){function W(ae){var $=this;$.next=function(){var z,ee,F=$.w,j=$.X,U=$.i;return $.w=F=F+1640531527|0,ee=j[U+34&127],z=j[U=U+1&127],ee^=ee<<13,z^=z<<17,ee=j[U]=(ee^=ee>>>15)^(z^=z>>>12),$.i=U,ee+(F^F>>>16)|0},function V(F,j){var U,z,ee,de,ie,I=[],Ge=128;for(j===(0|j)?(z=j,j=null):(j+="\0",z=0,Ge=Math.max(Ge,j.length)),ee=0,de=-32;de<Ge;++de)j&&(z^=j.charCodeAt((de+32)%j.length)),0===de&&(ie=z),z^=z<<10,z^=z>>>15,z^=z<<4,z^=z>>>13,de>=0&&(ee=0==(U=I[127&de]^=z+(ie=ie+1640531527|0))?ee+1:0);for(ee>=128&&(I[127&(j&&j.length||0)]=-1),ee=127,de=512;de>0;--de)z=I[ee+34&127],U=I[ee=ee+1&127],z^=z<<13,U^=U<<17,I[ee]=(z^=z>>>15)^(U^=U>>>12);F.w=ie,F.X=I,F.i=ee}($,ae)}function H(ae,$){return $.i=ae.i,$.w=ae.w,$.X=ae.X.slice(),$}function ce(ae,$){null==ae&&(ae=+new Date);var V=new W(ae),F=$&&$.state,j=function(){return(V.next()>>>0)/4294967296};return j.double=function(){do{var ee=((V.next()>>>11)+(V.next()>>>0)/4294967296)/(1<<21)}while(0===ee);return ee},j.int32=V.next,j.quick=j,F&&(F.X&&H(F,V),j.state=function(){return H(V,{})}),j}D&&D.exports?D.exports=ce:L.amdD&&L.amdO?void 0!==(t=function(){return ce}.call(oe,L,oe,D))&&(D.exports=t):this.xor4096=ce}(0,we=L.nmd(we))},5353:function(we,oe,L){var t;!function(S,D,v){function W(ae){var $=this;$.next=function(){var U,z,F=$.x,j=$.i;return U=F[j],z=(U^=U>>>7)^U<<24,z^=(U=F[j+1&7])^U>>>10,z^=(U=F[j+3&7])^U>>>3,z^=(U=F[j+4&7])^U<<7,U=F[j+7&7],F[j]=z^=(U^=U<<13)^U<<9,$.i=j+1&7,z},function V(F,j){var U,ee=[];if(j===(0|j))ee[0]=j;else for(j=""+j,U=0;U<j.length;++U)ee[7&U]=ee[7&U]<<15^j.charCodeAt(U)+ee[U+1&7]<<13;for(;ee.length<8;)ee.push(0);for(U=0;U<8&&0===ee[U];++U);for(8==U&&(ee[7]=-1),F.x=ee,F.i=0,U=256;U>0;--U)F.next()}($,ae)}function H(ae,$){return $.x=ae.x.slice(),$.i=ae.i,$}function ce(ae,$){null==ae&&(ae=+new Date);var V=new W(ae),F=$&&$.state,j=function(){return(V.next()>>>0)/4294967296};return j.double=function(){do{var ee=((V.next()>>>11)+(V.next()>>>0)/4294967296)/(1<<21)}while(0===ee);return ee},j.int32=V.next,j.quick=j,F&&(F.x&&H(F,V),j.state=function(){return H(V,{})}),j}D&&D.exports?D.exports=ce:L.amdD&&L.amdO?void 0!==(t=function(){return ce}.call(oe,L,oe,D))&&(D.exports=t):this.xorshift7=ce}(0,we=L.nmd(we))},3263:function(we,oe,L){var t;!function(S,D,v){function W(ae){var $=this,V="";$.next=function(){var j=$.x^$.x>>>2;return $.x=$.y,$.y=$.z,$.z=$.w,$.w=$.v,($.d=$.d+362437|0)+($.v=$.v^$.v<<4^j^j<<1)|0},$.x=0,$.y=0,$.z=0,$.w=0,$.v=0,ae===(0|ae)?$.x=ae:V+=ae;for(var F=0;F<V.length+64;F++)$.x^=0|V.charCodeAt(F),F==V.length&&($.d=$.x<<10^$.x>>>4),$.next()}function H(ae,$){return $.x=ae.x,$.y=ae.y,$.z=ae.z,$.w=ae.w,$.v=ae.v,$.d=ae.d,$}function ce(ae,$){var V=new W(ae),F=$&&$.state,j=function(){return(V.next()>>>0)/4294967296};return j.double=function(){do{var ee=((V.next()>>>11)+(V.next()>>>0)/4294967296)/(1<<21)}while(0===ee);return ee},j.int32=V.next,j.quick=j,F&&("object"==typeof F&&H(F,V),j.state=function(){return H(V,{})}),j}D&&D.exports?D.exports=ce:L.amdD&&L.amdO?void 0!==(t=function(){return ce}.call(oe,L,oe,D))&&(D.exports=t):this.xorwow=ce}(0,we=L.nmd(we))},2508:function(we,oe,L){var t;!function(S,D,v){var U,W=256,$=v.pow(W,6),V=v.pow(2,52),F=2*V,j=W-1;function z(tt,je,ut){var Pe=[],Re=I(ie((je=1==je?{entropy:!0}:je||{}).entropy?[tt,me(D)]:tt??function Ge(){try{var tt;return U&&(tt=U.randomBytes)?tt=tt(W):(tt=new Uint8Array(W),(S.crypto||S.msCrypto).getRandomValues(tt)),me(tt)}catch{var je=S.navigator,ut=je&&je.plugins;return[+new Date,S,ut,S.screen,me(D)]}}(),3),Pe),it=new ee(Pe),st=function(){for(var et=it.g(6),rn=$,Ye=0;et<V;)et=(et+Ye)*W,rn*=W,Ye=it.g(1);for(;et>=F;)et/=2,rn/=2,Ye>>>=1;return(et+Ye)/rn};return st.int32=function(){return 0|it.g(4)},st.quick=function(){return it.g(4)/4294967296},st.double=st,I(me(it.S),D),(je.pass||ut||function(et,rn,Ye,Lt){return Lt&&(Lt.S&&de(Lt,it),et.state=function(){return de(it,{})}),Ye?(v.random=et,rn):et})(st,Re,"global"in je?je.global:this==v,je.state)}function ee(tt){var je,ut=tt.length,Pe=this,Re=0,it=Pe.i=Pe.j=0,st=Pe.S=[];for(ut||(tt=[ut++]);Re<W;)st[Re]=Re++;for(Re=0;Re<W;Re++)st[Re]=st[it=j&it+tt[Re%ut]+(je=st[Re])],st[it]=je;(Pe.g=function(et){for(var rn,Ye=0,Lt=Pe.i,re=Pe.j,Se=Pe.S;et--;)rn=Se[Lt=j&Lt+1],Ye=Ye*W+Se[j&(Se[Lt]=Se[re=j&re+rn])+(Se[re]=rn)];return Pe.i=Lt,Pe.j=re,Ye})(W)}function de(tt,je){return je.i=tt.i,je.j=tt.j,je.S=tt.S.slice(),je}function ie(tt,je){var Re,ut=[],Pe=typeof tt;if(je&&"object"==Pe)for(Re in tt)try{ut.push(ie(tt[Re],je-1))}catch{}return ut.length?ut:"string"==Pe?tt:tt+"\0"}function I(tt,je){for(var Pe,ut=tt+"",Re=0;Re<ut.length;)je[j&Re]=j&(Pe^=19*je[j&Re])+ut.charCodeAt(Re++);return me(je)}function me(tt){return String.fromCharCode.apply(0,tt)}if(I(v.random(),D),we.exports){we.exports=z;try{U=L(5042)}catch{}}else void 0!==(t=function(){return z}.call(oe,L,oe,we))&&(we.exports=t)}(typeof self<"u"?self:this,[],Math)},5042:()=>{},9634:function(we){we.exports=function(){"use strict";function oe(){return!0}function L(){return!1}function t(){}const S="Argument is not a typed-function.";return function D(){function W(Y){return"object"==typeof Y&&null!==Y&&Y.constructor===Object}const H=[{name:"number",test:function(Y){return"number"==typeof Y}},{name:"string",test:function(Y){return"string"==typeof Y}},{name:"boolean",test:function(Y){return"boolean"==typeof Y}},{name:"Function",test:function(Y){return"function"==typeof Y}},{name:"Array",test:Array.isArray},{name:"Date",test:function(Y){return Y instanceof Date}},{name:"RegExp",test:function(Y){return Y instanceof RegExp}},{name:"Object",test:W},{name:"null",test:function(Y){return null===Y}},{name:"undefined",test:function(Y){return void 0===Y}}],ce={name:"any",test:oe,isAny:!0};let ae,$,V=0,F={createCount:0};function j(Y){const ve=ae.get(Y);if(ve)return ve;let Me='Unknown type "'+Y+'"';const Oe=Y.toLowerCase();let $e;for($e of $)if($e.toLowerCase()===Oe){Me+='. Did you mean "'+$e+'" ?';break}throw new TypeError(Me)}function U(Y){let ve=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any";const Me=ve?j(ve).index:$.length,Oe=[];for(let ke=0;ke<Y.length;++ke){if(!Y[ke]||"string"!=typeof Y[ke].name||"function"!=typeof Y[ke].test)throw new TypeError("Object with properties {name: string, test: function} expected");const rt=Y[ke].name;if(ae.has(rt))throw new TypeError('Duplicate type name "'+rt+'"');Oe.push(rt),ae.set(rt,{name:rt,test:Y[ke].test,isAny:Y[ke].isAny,index:Me+ke,conversionsTo:[]})}const $e=$.slice(Me);$=$.slice(0,Me).concat(Oe).concat($e);for(let ke=Me+Oe.length;ke<$.length;++ke)ae.get($[ke]).index=ke}function z(){ae=new Map,$=[],V=0,U([ce],!1)}function de(Y){const ve=$.filter(Me=>{const Oe=ae.get(Me);return!Oe.isAny&&Oe.test(Y)});return ve.length?ve:["any"]}function ie(Y){return Y&&"function"==typeof Y&&"_typedFunctionData"in Y}function I(Y,ve,Me){if(!ie(Y))throw new TypeError(S);const Oe=Me&&Me.exact,ke=Re(Array.isArray(ve)?ve.join(","):ve),rt=tt(ke);if(!Oe||rt in Y.signatures){const cn=Y._typedFunctionData.signatureMap.get(rt);if(cn)return cn}const qe=ke.length;let ot,We;if(Oe){let cn;for(cn in ot=[],Y.signatures)ot.push(Y._typedFunctionData.signatureMap.get(cn))}else ot=Y._typedFunctionData.signatures;for(let cn=0;cn<qe;++cn){const vn=ke[cn],Nn=[];let qn;for(qn of ot){const Yn=rn(qn.params,cn);if(Yn&&(!vn.restParam||Yn.restParam)){if(!Yn.hasAny){const Di=Pe(Yn);if(vn.types.some(xi=>!Di.has(xi.name)))continue}Nn.push(qn)}}if(ot=Nn,0===ot.length)break}for(We of ot)if(We.params.length<=qe)return We;throw new TypeError("Signature not found (signature: "+(Y.name||"unnamed")+"("+tt(ke,", ")+"))")}function tt(Y){let ve=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return Y.map(Me=>Me.name).join(ve)}function je(Y){const ve=0===Y.indexOf("..."),Oe=(ve?Y.length>3?Y.slice(3):"any":Y).split("|").map(qe=>j(qe.trim()));let $e=!1,ke=ve?"...":"";return{types:Oe.map(function(qe){return $e=qe.isAny||$e,ke+=qe.name+"|",{name:qe.name,typeIndex:qe.index,test:qe.test,isAny:qe.isAny,conversion:null,conversionIndex:-1}}),name:ke.slice(0,-1),hasAny:$e,hasConversion:!1,restParam:ve}}function ut(Y){const Me=function Kt(Y){if(0===Y.length)return[];const ve=Y.map(j);Y.length>1&&ve.sort(($e,ke)=>$e.index-ke.index);let Me=ve[0].conversionsTo;if(1===Y.length)return Me;Me=Me.concat([]);const Oe=new Set(Y);for(let $e=1;$e<ve.length;++$e){let ke;for(ke of ve[$e].conversionsTo)Oe.has(ke.from)||(Me.push(ke),Oe.add(ke.from))}return Me}(Y.types.map(rt=>rt.name));let Oe=Y.hasAny,$e=Y.name;const ke=Me.map(function(rt){const qe=j(rt.from);return Oe=qe.isAny||Oe,$e+="|"+rt.from,{name:rt.from,typeIndex:qe.index,test:qe.test,isAny:qe.isAny,conversion:rt,conversionIndex:rt.index}});return{types:Y.types.concat(ke),name:$e,hasAny:Oe,hasConversion:ke.length>0,restParam:Y.restParam}}function Pe(Y){return Y.typeSet||(Y.typeSet=new Set,Y.types.forEach(ve=>Y.typeSet.add(ve.name))),Y.typeSet}function Re(Y){const ve=[];if("string"!=typeof Y)throw new TypeError("Signatures must be strings");const Me=Y.trim();if(""===Me)return ve;const Oe=Me.split(",");for(let $e=0;$e<Oe.length;++$e){const ke=je(Oe[$e].trim());if(ke.restParam&&$e!==Oe.length-1)throw new SyntaxError('Unexpected rest parameter "'+Oe[$e]+'": only allowed for the last parameter');if(0===ke.types.length)return null;ve.push(ke)}return ve}function it(Y){const ve=Pt(Y);return!!ve&&ve.restParam}function st(Y){if(!Y||0===Y.types.length)return oe;if(1===Y.types.length)return j(Y.types[0].name).test;if(2===Y.types.length){const ve=j(Y.types[0].name).test,Me=j(Y.types[1].name).test;return function($e){return ve($e)||Me($e)}}{const ve=Y.types.map(function(Me){return j(Me.name).test});return function(Oe){for(let $e=0;$e<ve.length;$e++)if(ve[$e](Oe))return!0;return!1}}}function et(Y){let ve,Me,Oe;if(it(Y)){ve=Tn(Y).map(st);const $e=ve.length,ke=st(Pt(Y)),rt=function(qe){for(let ot=$e;ot<qe.length;ot++)if(!ke(qe[ot]))return!1;return!0};return function(ot){for(let We=0;We<ve.length;We++)if(!ve[We](ot[We]))return!1;return rt(ot)&&ot.length>=$e+1}}return 0===Y.length?function(ke){return 0===ke.length}:1===Y.length?(Me=st(Y[0]),function(ke){return Me(ke[0])&&1===ke.length}):2===Y.length?(Me=st(Y[0]),Oe=st(Y[1]),function(ke){return Me(ke[0])&&Oe(ke[1])&&2===ke.length}):(ve=Y.map(st),function(ke){for(let rt=0;rt<ve.length;rt++)if(!ve[rt](ke[rt]))return!1;return ke.length===ve.length})}function rn(Y,ve){return ve<Y.length?Y[ve]:it(Y)?Pt(Y):null}function Ye(Y,ve){const Me=rn(Y,ve);return Me?Pe(Me):new Set}function Lt(Y){return null==Y.conversion}function re(Y,ve){const Me=new Set;return Y.forEach(Oe=>{const $e=Ye(Oe.params,ve);let ke;for(ke of $e)Me.add(ke)}),Me.has("any")?["any"]:Array.from(Me)}function Se(Y,ve,Me){let Oe,$e;const ke=Y||"unnamed";let qe,rt=Me;for(qe=0;qe<ve.length;qe++){const vn=[];if(rt.forEach(Nn=>{const Yn=st(rn(Nn.params,qe));(qe<Nn.params.length||it(Nn.params))&&Yn(ve[qe])&&vn.push(Nn)}),0===vn.length){if($e=re(rt,qe),$e.length>0){const Nn=de(ve[qe]);return Oe=new TypeError("Unexpected type of argument in function "+ke+" (expected: "+$e.join(" or ")+", actual: "+Nn.join(" | ")+", index: "+qe+")"),Oe.data={category:"wrongType",fn:ke,index:qe,actual:Nn,expected:$e},Oe}}else rt=vn}const ot=rt.map(function(vn){return it(vn.params)?1/0:vn.params.length});if(ve.length<Math.min.apply(null,ot))return $e=re(rt,qe),Oe=new TypeError("Too few arguments in function "+ke+" (expected: "+$e.join(" or ")+", index: "+ve.length+")"),Oe.data={category:"tooFewArgs",fn:ke,index:ve.length,expected:$e},Oe;const We=Math.max.apply(null,ot);if(ve.length>We)return Oe=new TypeError("Too many arguments in function "+ke+" (expected: "+We+", actual: "+ve.length+")"),Oe.data={category:"tooManyArgs",fn:ke,index:ve.length,expectedLength:We},Oe;const cn=[];for(let vn=0;vn<ve.length;++vn)cn.push(de(ve[vn]).join("|"));return Oe=new TypeError('Arguments of type "'+cn.join(", ")+'" do not match any of the defined signatures of function '+ke+"."),Oe.data={category:"mismatch",actual:cn},Oe}function Ze(Y){let ve=$.length+1;for(let Me=0;Me<Y.types.length;Me++)Lt(Y.types[Me])&&(ve=Math.min(ve,Y.types[Me].typeIndex));return ve}function nt(Y){let ve=V+1;for(let Me=0;Me<Y.types.length;Me++)Lt(Y.types[Me])||(ve=Math.min(ve,Y.types[Me].conversionIndex));return ve}function It(Y,ve){if(Y.hasAny){if(!ve.hasAny)return 1}else if(ve.hasAny)return-1;if(Y.restParam){if(!ve.restParam)return 1}else if(ve.restParam)return-1;if(Y.hasConversion){if(!ve.hasConversion)return 1}else if(ve.hasConversion)return-1;const Me=Ze(Y)-Ze(ve);if(Me<0)return-1;if(Me>0)return 1;const Oe=nt(Y)-nt(ve);return Oe<0?-1:Oe>0?1:0}function Gt(Y,ve){const Me=Y.params,Oe=ve.params,$e=Pt(Me),ke=Pt(Oe),rt=it(Me),qe=it(Oe);if(rt&&$e.hasAny){if(!qe||!ke.hasAny)return 1}else if(qe&&ke.hasAny)return-1;let cn,ot=0,We=0;for(cn of Me)cn.hasAny&&++ot,cn.hasConversion&&++We;let vn=0,Nn=0;for(cn of Oe)cn.hasAny&&++vn,cn.hasConversion&&++Nn;if(ot!==vn)return ot-vn;if(rt&&$e.hasConversion){if(!qe||!ke.hasConversion)return 1}else if(qe&&ke.hasConversion)return-1;if(We!==Nn)return We-Nn;if(rt){if(!qe)return 1}else if(qe)return-1;const qn=(Me.length-Oe.length)*(rt?-1:1);if(0!==qn)return qn;const Yn=[];let xi,Di=0;for(let Vr=0;Vr<Me.length;++Vr){const Bo=It(Me[Vr],Oe[Vr]);Yn.push(Bo),Di+=Bo}if(0!==Di)return Di;for(xi of Yn)if(0!==xi)return xi;return 0}function $t(Y,ve){let Me=ve;if(Y.some($e=>$e.hasConversion)){const $e=it(Y),ke=Y.map(vt);Me=function(){const qe=[],ot=$e?arguments.length-1:arguments.length;for(let We=0;We<ot;We++)qe[We]=ke[We](arguments[We]);return $e&&(qe[ot]=arguments[ot].map(ke[ot])),ve.apply(this,qe)}}let Oe=Me;if(it(Y)){const $e=Y.length-1;Oe=function(){return Me.apply(this,An(arguments,0,$e).concat([An(arguments,$e)]))}}return Oe}function vt(Y){let ve,Me,Oe,$e;const ke=[],rt=[];switch(Y.types.forEach(function(qe){qe.conversion&&(ke.push(j(qe.conversion.from).test),rt.push(qe.conversion.convert))}),rt.length){case 0:return function(ot){return ot};case 1:return ve=ke[0],Oe=rt[0],function(ot){return ve(ot)?Oe(ot):ot};case 2:return ve=ke[0],Me=ke[1],Oe=rt[0],$e=rt[1],function(ot){return ve(ot)?Oe(ot):Me(ot)?$e(ot):ot};default:return function(ot){for(let We=0;We<rt.length;We++)if(ke[We](ot))return rt[We](ot);return ot}}}function xt(Y){return function ve(Me,Oe,$e){if(Oe<Me.length){const ke=Me[Oe];let rt=[];if(ke.restParam){const qe=ke.types.filter(Lt);qe.length<ke.types.length&&rt.push({types:qe,name:"..."+qe.map(ot=>ot.name).join("|"),hasAny:qe.some(ot=>ot.isAny),hasConversion:!1,restParam:!0}),rt.push(ke)}else rt=ke.types.map(function(qe){return{types:[qe],name:qe.name,hasAny:qe.isAny,hasConversion:qe.conversion,restParam:!1}});return function Yi(Y,ve){return Array.prototype.concat.apply([],Y.map(ve))}(rt,function(qe){return ve(Me,Oe+1,$e.concat([qe]))})}return[$e]}(Y,0,[])}function wn(Y,ve){const Me=Math.max(Y.length,ve.length);for(let qe=0;qe<Me;qe++){const ot=Ye(Y,qe),We=Ye(ve,qe);let vn,cn=!1;for(vn of We)if(ot.has(vn)){cn=!0;break}if(!cn)return!1}const Oe=Y.length,$e=ve.length,ke=it(Y),rt=it(ve);return ke?rt?Oe===$e:$e>=Oe:rt?Oe>=$e:Oe===$e}function Nt(Y,ve,Me){const Oe=[];let $e;for($e of Y){let ke=Me[$e];if("number"!=typeof ke)throw new TypeError('No definition for referenced signature "'+$e+'"');if(ke=ve[ke],"function"!=typeof ke)return!1;Oe.push(ke)}return Oe}function Ln(Y,ve,Me){const Oe=function Ct(Y){return Y.map(ve=>_r(ve)?Zn(ve.referToSelf.callback):Oi(ve)?er(ve.referTo.references,ve.referTo.callback):ve)}(Y),$e=new Array(Oe.length).fill(!1);let ke=!0;for(;ke;){ke=!1;let rt=!0;for(let qe=0;qe<Oe.length;++qe){if($e[qe])continue;const ot=Oe[qe];if(_r(ot))Oe[qe]=ot.referToSelf.callback(Me),Oe[qe].referToSelf=ot.referToSelf,$e[qe]=!0,rt=!1;else if(Oi(ot)){const We=Nt(ot.referTo.references,Oe,ve);We?(Oe[qe]=ot.referTo.callback.apply(this,We),Oe[qe].referTo=ot.referTo,$e[qe]=!0,rt=!1):ke=!0}}if(rt&&ke)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return Oe}function dn(Y,ve){if(F.createCount++,0===Object.keys(ve).length)throw new SyntaxError("No signatures provided");F.warnAgainstDeprecatedThis&&function mn(Y){const ve=/\bthis(\(|\.signatures\b)/;Object.keys(Y).forEach(Me=>{if(ve.test(Y[Me].toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}(ve);const Me=[],Oe=[],$e={},ke=[];let rt;for(rt in ve){if(!Object.prototype.hasOwnProperty.call(ve,rt))continue;const hn=Re(rt);if(!hn)continue;Me.forEach(function(Po){if(wn(Po,hn))throw new TypeError('Conflicting signatures "'+tt(Po)+'" and "'+tt(hn)+'".')}),Me.push(hn);const ui=Oe.length;Oe.push(ve[rt]);const $f=hn.map(ut);let jo;for(jo of xt($f)){const Po=tt(jo);ke.push({params:jo,name:Po,fn:ui}),jo.every(zf=>!zf.hasConversion)&&($e[Po]=ui)}}ke.sort(Gt);const qe=Ln(Oe,$e,ko);let ot;for(ot in $e)Object.prototype.hasOwnProperty.call($e,ot)&&($e[ot]=qe[$e[ot]]);const We=[],cn=new Map;for(ot of ke)cn.has(ot.name)||(ot.fn=qe[ot.fn],We.push(ot),cn.set(ot.name,ot));const vn=We[0]&&We[0].params.length<=2&&!it(We[0].params),Nn=We[1]&&We[1].params.length<=2&&!it(We[1].params),qn=We[2]&&We[2].params.length<=2&&!it(We[2].params),Yn=We[3]&&We[3].params.length<=2&&!it(We[3].params),Di=We[4]&&We[4].params.length<=2&&!it(We[4].params),xi=We[5]&&We[5].params.length<=2&&!it(We[5].params),Vr=vn&&Nn&&qn&&Yn&&Di&&xi;for(let hn=0;hn<We.length;++hn)We[hn].test=et(We[hn].params);const Bo=vn?st(We[0].params[0]):L,Pc=Nn?st(We[1].params[0]):L,Vc=qn?st(We[2].params[0]):L,xe=Yn?st(We[3].params[0]):L,_e=Di?st(We[4].params[0]):L,te=xi?st(We[5].params[0]):L,pe=vn?st(We[0].params[1]):L,Ae=Nn?st(We[1].params[1]):L,gt=qn?st(We[2].params[1]):L,Rt=Yn?st(We[3].params[1]):L,bn=Di?st(We[4].params[1]):L,_n=xi?st(We[5].params[1]):L;for(let hn=0;hn<We.length;++hn)We[hn].implementation=$t(We[hn].params,We[hn].fn);const Xn=vn?We[0].implementation:t,tr=Nn?We[1].implementation:t,nr=qn?We[2].implementation:t,If=Yn?We[3].implementation:t,Ff=Di?We[4].implementation:t,Af=xi?We[5].implementation:t,Tf=vn?We[0].params.length:-1,Of=Nn?We[1].params.length:-1,Lf=qn?We[2].params.length:-1,Nf=Yn?We[3].params.length:-1,Rf=Di?We[4].params.length:-1,Bf=xi?We[5].params.length:-1,kf=Vr?6:0,jf=We.length,Pf=We.map(hn=>hn.test),Vf=We.map(hn=>hn.implementation),Uf=function(){for(let ui=kf;ui<jf;ui++)if(Pf[ui](arguments))return Vf[ui].apply(this,arguments);return F.onMismatch(Y,arguments,We)};function ko(hn,ui){return arguments.length===Tf&&Bo(hn)&&pe(ui)?Xn.apply(this,arguments):arguments.length===Of&&Pc(hn)&&Ae(ui)?tr.apply(this,arguments):arguments.length===Lf&&Vc(hn)&&gt(ui)?nr.apply(this,arguments):arguments.length===Nf&&xe(hn)&&Rt(ui)?If.apply(this,arguments):arguments.length===Rf&&_e(hn)&&bn(ui)?Ff.apply(this,arguments):arguments.length===Bf&&te(hn)&&_n(ui)?Af.apply(this,arguments):Uf.apply(this,arguments)}try{Object.defineProperty(ko,"name",{value:Y})}catch{}return ko.signatures=$e,ko._typedFunctionData={signatures:We,signatureMap:cn},ko}function Vn(Y,ve,Me){throw Se(Y,ve,Me)}function Tn(Y){return An(Y,0,Y.length-1)}function Pt(Y){return Y[Y.length-1]}function An(Y,ve,Me){return Array.prototype.slice.call(Y,ve,Me)}function er(Y,ve){return{referTo:{references:Y,callback:ve}}}function Zn(Y){if("function"!=typeof Y)throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:Y}}}function Oi(Y){return Y&&"object"==typeof Y.referTo&&Array.isArray(Y.referTo.references)&&"function"==typeof Y.referTo.callback}function _r(Y){return Y&&"object"==typeof Y.referToSelf&&"function"==typeof Y.referToSelf.callback}function Li(Y,ve){if(!Y)return ve;if(ve&&ve!==Y){const Me=new Error("Function names do not match (expected: "+Y+", actual: "+ve+")");throw Me.data={actual:ve,expected:Y},Me}return Y}function Oa(Y){let ve;for(const Me in Y)Object.prototype.hasOwnProperty.call(Y,Me)&&(ie(Y[Me])||"string"==typeof Y[Me].signature)&&(ve=Li(ve,Y[Me].name));return ve}function La(Y,ve){let Me;for(Me in ve)if(Object.prototype.hasOwnProperty.call(ve,Me)){if(Me in Y&&ve[Me]!==Y[Me]){const Oe=new Error('Signature "'+Me+'" is defined twice');throw Oe.data={signature:Me,sourceFunction:ve[Me],destFunction:Y[Me]},Oe}Y[Me]=ve[Me]}}z(),U(H);const No=F;function Ro(Y){if(!Y||"string"!=typeof Y.from||"string"!=typeof Y.to||"function"!=typeof Y.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(Y.to===Y.from)throw new SyntaxError('Illegal to define conversion from "'+Y.from+'" to itself.')}return F=function(Y){const ve="string"==typeof Y;let Oe=ve?Y:"";const $e={};for(let ke=ve?1:0;ke<arguments.length;++ke){const rt=arguments[ke];let ot,qe={};if("function"==typeof rt?(ot=rt.name,"string"==typeof rt.signature?qe[rt.signature]=rt:ie(rt)&&(qe=rt.signatures)):W(rt)&&(qe=rt,ve||(ot=Oa(rt))),0===Object.keys(qe).length){const We=new TypeError("Argument to 'typed' at index "+ke+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw We.data={index:ke,argument:rt},We}ve||(Oe=Li(Oe,ot)),La($e,qe)}return dn(Oe||"",$e)},F.create=D,F.createCount=No.createCount,F.onMismatch=Vn,F.throwMismatchError=Vn,F.createError=Se,F.clear=z,F.clearConversions=function ee(){let Y;for(Y of $)ae.get(Y).conversionsTo=[];V=0},F.addTypes=U,F._findType=j,F.referTo=function Xi(){const Y=Tn(arguments).map(Me=>tt(Re(Me))),ve=Pt(arguments);if("function"!=typeof ve)throw new TypeError("Callback function expected as last argument");return er(Y,ve)},F.referToSelf=Zn,F.convert=function me(Y,ve){const Me=j(ve);if(Me.test(Y))return Y;const Oe=Me.conversionsTo;if(0===Oe.length)throw new Error("There are no conversions to "+ve+" defined.");for(let $e=0;$e<Oe.length;$e++)if(j(Oe[$e].from).test(Y))return Oe[$e].convert(Y);throw new Error("Cannot convert "+Y+" to "+ve)},F.findSignature=I,F.find=function Ge(Y,ve,Me){return I(Y,ve,Me).implementation},F.isTypedFunction=ie,F.warnAgainstDeprecatedThis=!0,F.addType=function(Y,ve){let Me="any";!1!==ve&&ae.has("Object")&&(Me="Object"),F.addTypes([Y],Me)},F.addConversion=function(Y){Ro(Y);const ve=j(Y.to);if(!ve.conversionsTo.every(function(Me){return Me.from!==Y.from}))throw new Error('There is already a conversion from "'+Y.from+'" to "'+ve.name+'"');ve.conversionsTo.push({from:Y.from,convert:Y.convert,index:V++})},F.addConversions=function(Y){Y.forEach(F.addConversion)},F.removeConversion=function(Y){Ro(Y);const ve=j(Y.to),Me=function oi(Y,ve){for(let Me=0;Me<Y.length;Me++)if(ve(Y[Me]))return Y[Me]}(ve.conversionsTo,$e=>$e.from===Y.from);if(!Me)throw new Error("Attempt to remove nonexistent conversion from "+Y.from+" to "+Y.to);if(Me.convert!==Y.convert)throw new Error("Conversion to remove does not match existing conversion");const Oe=ve.conversionsTo.indexOf(Me);ve.conversionsTo.splice(Oe,1)},F.resolve=function(Y,ve){if(!ie(Y))throw new TypeError(S);const Me=Y._typedFunctionData.signatures;for(let Oe=0;Oe<Me.length;++Oe)if(Me[Oe].test(ve))return Me[Oe];return null},F}()}()},6876:(we,oe,L)=>{L.r(oe),L.d(oe,{ActionGroupMenuComponent:()=>Ar,ActionGroupMenuModule:()=>Lr,ActionLogicHandler:()=>Fw,ActionMenuComponent:()=>HW,ActionMenuModule:()=>Np,ActionNameMapper:()=>Eo,ActiveFieldsChecker:()=>Ms,AdminCardComponent:()=>Ow,AdminCardModule:()=>Lw,AdminMetadataStore:()=>ep,AdminPanelComponent:()=>QG,AdminPanelModule:()=>JG,AppMetadataStore:()=>Fn,AppStateStore:()=>Ht,AsyncActionHandler:()=>fa,AsyncActionService:()=>nn,AsyncProcessLineAction:()=>EM,AsyncProcessRecordAction:()=>Uw,AsyncProcessRecordThreadItemAction:()=>_S,AsyncProcessRecordThreadListAction:()=>hS,AsyncProcessSubpanelAction:()=>eS,AsyncProcessSubpanelLineAction:()=>hw,AsyncProcessTableAction:()=>nD,AttributeBuilder:()=>Gd,AuthGuard:()=>BG,AuthService:()=>ci,BaseActionManager:()=>Ci,BaseActionsAdapter:()=>fp,BaseBooleanComponent:()=>xd,BaseChartComponent:()=>Hl,BaseChartModule:()=>k6,BaseComposite:()=>LC,BaseDateComponent:()=>yd,BaseDateTimeComponent:()=>ma,BaseEnumComponent:()=>to,BaseFavoritesComponent:()=>yp,BaseFieldComponent:()=>Mn,BaseFieldGridComponent:()=>fd,BaseFieldModule:()=>TG,BaseFieldRegistry:()=>Fi,BaseGroupedMenuItemComponent:()=>jS,BaseHomeMenuItemComponent:()=>RS,BaseLineActionsAdapter:()=>IM,BaseLineItemsComponent:()=>BC,BaseMenuFavoritesComponent:()=>qS,BaseMenuItemComponent:()=>LS,BaseMenuItemLinkComponent:()=>ES,BaseMenuItemsListComponent:()=>US,BaseMenuRecentlyViewedComponent:()=>GS,BaseMetadataResolver:()=>tf,BaseModuleResolver:()=>Aw,BaseMultiEnumComponent:()=>Kl,BaseNameComponent:()=>o1,BaseNavbarComponent:()=>WS,BaseNumberComponent:()=>Ql,BaseRecordActionsAdapter:()=>vr,BaseRecordContainerStore:()=>ip,BaseRecordResolver:()=>UG,BaseRelateComponent:()=>Rd,BaseRouteService:()=>HC,BaseSaveRecordMapper:()=>ws,BaseSubMenuFavoritesComponent:()=>TS,BaseSubMenuRecentlyViewedComponent:()=>FS,BaseWidgetComponent:()=>lo,BaseWidgetModule:()=>AG,BooleanDetailFieldComponent:()=>Is,BooleanDetailFieldModule:()=>k1,BooleanEditFieldComponent:()=>dc,BooleanEditFieldModule:()=>R1,BottomWidgetAdapter:()=>lf,BulkActionMenuComponent:()=>cd,BulkActionMenuModule:()=>ud,BulkActionsAdapter:()=>Xw,BulkActionsAdapterFactory:()=>eD,ButtonComponent:()=>Un,ButtonGroupComponent:()=>yo,ButtonGroupModule:()=>Or,ButtonLoadingDirective:()=>Ew,ButtonLoadingUiModule:()=>Iw,ButtonModule:()=>an,ButtonUtils:()=>_b,CancelCreateAction:()=>Vw,CancelRecordPanelAction:()=>Jw,ChangelogAsyncAction:()=>Jb,ChartComponent:()=>Eb,ChartDataStore:()=>JM,ChartDataStoreFactory:()=>YM,ChartMessageAreaComponent:()=>bs,ChartMessageAreaModule:()=>Cs,ChartModule:()=>Ib,ChartRegistry:()=>xb,ChartSidebarWidgetComponent:()=>XM,ChartSidebarWidgetModule:()=>ew,ClassicModalComponent:()=>Qb,ClassicModalModule:()=>s$,ClassicViewResolver:()=>tZ,ClassicViewUiComponent:()=>XG,ClassicViewUiModule:()=>eZ,CloseButtonComponent:()=>pd,CloseButtonModule:()=>da,CollectionGQL:()=>od,ColumnChooserComponent:()=>Ab,ColumnChooserModule:()=>Tb,CompositeComponent:()=>Ls,CompositeModule:()=>NC,ConditionOperatorActionHandler:()=>xo,ConditionOperatorManager:()=>md,ConfirmationModalService:()=>Bn,CreateRecordComponent:()=>DZ,CreateRecordModule:()=>FZ,CreateRelatedLineAction:()=>xM,CreateViewStore:()=>kc,CurrencyDetailFieldComponent:()=>Jl,CurrencyDetailFieldModule:()=>u1,CurrencyFormatter:()=>ad,CurrencyService:()=>pa,CurrencyUnitConverter:()=>ZM,CurrencyValidator:()=>aC,DataTypeFormatter:()=>mt,DataTypeSeriesMapper:()=>QM,DataTypeUnitConverter:()=>qM,DateAdapter:()=>wd,DateDetailFieldComponent:()=>ql,DateDetailFieldModule:()=>a1,DateEditFieldComponent:()=>Yl,DateEditFieldModule:()=>T1,DateFilterFieldComponent:()=>Xl,DateFilterFieldModule:()=>$1,DateFormatter:()=>eo,DateParserFormatter:()=>Md,DateTimeDetailFieldComponent:()=>ec,DateTimeDetailFieldModule:()=>p1,DateTimeEditFieldComponent:()=>Sd,DateTimeEditFieldModule:()=>d1,DateTimeFilterFieldComponent:()=>f1,DateTimeFilterFieldModule:()=>m1,DateTimeModel:()=>mr,DateTimeValidator:()=>dC,DateValidator:()=>cC,DatetimeFormatter:()=>Fr,DisplayTypeAction:()=>t1,DisplayTypeBackendAction:()=>Xb,DropdownButtonComponent:()=>Ul,DropdownButtonModule:()=>Tr,DropdownEnumDetailFieldComponent:()=>no,DropdownEnumDetailFieldModule:()=>W1,DropdownEnumEditFieldComponent:()=>ha,DropdownEnumEditFieldModule:()=>H1,DropdownSubmenuComponent:()=>pb,DropdownSubmenuModule:()=>gb,DuplicateEmailValidator:()=>EC,DynamicFieldComponent:()=>va,DynamicFieldModule:()=>_a,DynamicLabelComponent:()=>So,DynamicLabelModule:()=>Mo,DynamicLabelService:()=>$l,EmailDetailFieldsComponent:()=>OG,EmailDetailFieldsModule:()=>LG,EmailFormatter:()=>gC,EmailListFieldsComponent:()=>ic,EmailListFieldsModule:()=>h1,EmailPrimarySelectAction:()=>Pb,EmailValidator:()=>_C,EntityGQL:()=>vs,EntityMutationGQL:()=>sb,EnumDetailFieldComponent:()=>Gl,EnumDetailFieldModule:()=>r1,EnumEditFieldComponent:()=>Dd,EnumEditFieldModule:()=>g1,ErrorInterceptor:()=>kG,ExportAsyncAction:()=>Zb,ExtensionLoader:()=>VG,FavoriteToggleComponent:()=>TM,FavoriteToggleModule:()=>OM,FavoritesService:()=>FM,FieldBuilder:()=>ya,FieldComponent:()=>hr,FieldGridComponent:()=>Qd,FieldGridModule:()=>Oo,FieldLayoutComponent:()=>PC,FieldLayoutModule:()=>Jd,FieldLogicActionHandler:()=>fr,FieldLogicDisplayActionHandler:()=>e1,FieldLogicDisplayManager:()=>Dt,FieldLogicDisplayTypeAction:()=>jb,FieldLogicManager:()=>wt,FieldManager:()=>hi,FieldModule:()=>Jn,FieldObjectRegistry:()=>To,FieldRegistry:()=>gc,FileDetailFieldComponent:()=>Id,FileDetailFieldModule:()=>y1,FilterAdapter:()=>_f,FilterAttributeBuilder:()=>TC,FilterFieldBuilder:()=>Zd,FilterListStore:()=>pM,FilterListStoreFactory:()=>Fc,FiltersListGQL:()=>Ip,FloatDetailFieldComponent:()=>rc,FloatDetailFieldModule:()=>b1,FloatValidator:()=>fC,FooterUiComponent:()=>dU,FooterUiModule:()=>pU,FormControlUtils:()=>bo,FormatCurrencyModule:()=>c1,FormatCurrencyPipe:()=>l1,FormatNumberModule:()=>Ad,FormatNumberPipe:()=>Fd,FullNameDetailFieldsComponent:()=>Zl,FullNameDetailFieldsModule:()=>s1,FullPageSpinnerComponent:()=>fU,FullPageSpinnerModule:()=>mU,GlobalRecentlyViewedStore:()=>_c,GlobalSearch:()=>fS,GreaterThanAction:()=>Ob,GridWidgetComponent:()=>lp,GridWidgetModule:()=>cp,GroupFieldBuilder:()=>AC,GroupFieldComponent:()=>Os,GroupFieldModule:()=>oC,GroupedButtonComponent:()=>mb,GroupedButtonModule:()=>vb,GroupedMenuItemComponent:()=>VS,GroupedMenuItemRegistry:()=>PS,HistorySidebarWidgetComponent:()=>iw,HistorySidebarWidgetModule:()=>rw,HistoryTimelineAdapter:()=>Zp,HistoryTimelineAdapterFactory:()=>nw,HistoryTimelineStore:()=>tw,HistoryTimelineStoreFactory:()=>Gp,HomeMenuItemComponent:()=>kS,HomeMenuItemRegistry:()=>BS,HtmlDetailFieldComponent:()=>Z1,HtmlDetailFieldModule:()=>q1,HtmlSanitizeModule:()=>RG,HtmlSanitizePipe:()=>NG,IconDetailFieldComponent:()=>ga,IconListFieldModule:()=>eC,IframePageChangeObserver:()=>vd,IframeResizeHandlerHandler:()=>gd,ImageComponent:()=>ln,ImageModule:()=>sn,ImmediateDebounce:()=>AM,InlineLoadingSpinnerComponent:()=>zl,InlineLoadingSpinnerModule:()=>wo,InstallAction:()=>Ww,InstallActionManager:()=>ff,InstallActionsAdapter:()=>mf,InstallAuthGuard:()=>jG,InstallContainerComponent:()=>Gw,InstallContainerModule:()=>Zw,InstallContentAdapter:()=>hf,InstallErrorModalComponent:()=>up,InstallErrorModalModule:()=>qU,InstallHeaderComponent:()=>qw,InstallHeaderModule:()=>Qw,InstallViewActionHandler:()=>Hw,InstallViewComponent:()=>OZ,InstallViewModule:()=>LZ,InstallViewStore:()=>Us,IntDetailFieldComponent:()=>pc,IntDetailFieldModule:()=>V1,IntValidator:()=>hC,IsEmptyAction:()=>Rb,IsEqualAction:()=>Bb,LabelComponent:()=>qt,LabelModule:()=>Vt,LanguageStore:()=>Ue,LegacyEntrypointLinkBuilder:()=>_1,LessThanAction:()=>Lb,LineActionActionHandler:()=>kp,LineActionActionManager:()=>Oc,LineActionMenuComponent:()=>iS,LineActionModule:()=>rS,LineActionsAdapter:()=>tD,LineChartComponent:()=>Mb,LineChartModule:()=>wb,LineItemBuilder:()=>OC,LineItemsComponent:()=>kC,LineItemsModule:()=>jC,LinkModel:()=>l$,LinkRouteAsyncActionService:()=>rC,LinkTarget:()=>Ea,ListComponent:()=>HZ,ListContainerComponent:()=>lD,ListContainerModule:()=>cD,ListFilterComponent:()=>Lc,ListFilterModule:()=>Nc,ListFilterStore:()=>zp,ListFilterStoreFactory:()=>$M,ListGQL:()=>sc,ListHeaderComponent:()=>uD,ListHeaderModule:()=>dD,ListModule:()=>WZ,ListViewRecordPanelActionAdapterFactory:()=>aD,ListViewRecordPanelActionHandler:()=>gf,ListViewRecordPanelActionsAdapter:()=>sD,ListViewSidebarWidgetAdapter:()=>Sf,ListViewSidebarWidgetService:()=>jc,ListViewStore:()=>ri,ListViewTableActionsAdapter:()=>rD,ListViewUrlQueryService:()=>gM,ListviewTableActionsAdapterFactory:()=>oD,LoadMoreComponent:()=>oS,LoadMoreModule:()=>sS,LoadingBuffer:()=>cb,LoadingBufferFactory:()=>sd,LoadingSpinnerComponent:()=>Nr,LoadingSpinnerModule:()=>Rr,LocalStorageService:()=>bi,LoginAuthGuard:()=>PG,LoginUiComponent:()=>pD,LoginUiModule:()=>nq,LoginUiRoutes:()=>fD,LogoAbstract:()=>aS,LogoUiComponent:()=>wc,LogoUiModule:()=>Dc,LogoutComponent:()=>iq,LogoutModule:()=>rq,LogoutUiComponent:()=>lS,LogoutUiModule:()=>cS,MaxColumnsCalculator:()=>Fo,MenuFavoritesComponent:()=>tW,MenuFavoritesRegistry:()=>QS,MenuItemComponent:()=>Cp,MenuItemLinkComponent:()=>js,MenuItemLinkRegistry:()=>IS,MenuItemRegistry:()=>NS,MenuItemsListComponent:()=>zS,MenuItemsListRegistry:()=>$S,MenuRecentlyViewedComponent:()=>qH,MenuRecentlyViewedRegistry:()=>ZS,MessageModalComponent:()=>Da,MessageModalModule:()=>a$,MessageService:()=>dt,MessageUiComponent:()=>r$,MessageUiModule:()=>o$,MetadataStore:()=>bt,MinimiseButtonComponent:()=>QC,MinimiseButtonModule:()=>JC,MobileMenuComponent:()=>cM,ModalButtonGroupComponent:()=>uS,ModalButtonGroupModule:()=>dS,ModalComponent:()=>Ss,ModalModule:()=>Do,ModalRecordFilterAdapter:()=>S1,ModalRecordListTableAdapter:()=>M1,ModuleNameMapper:()=>En,ModuleNavigation:()=>In,ModuleTitleComponent:()=>dp,ModuleTitleModule:()=>xa,MultiEnumDetailFieldComponent:()=>tc,MultiEnumDetailFieldModule:()=>v1,MultiEnumEditFieldComponent:()=>jd,MultiEnumEditFieldModule:()=>P1,MultiEnumField:()=>IC,MultiEnumFilterFieldComponent:()=>Ds,MultiEnumFilterFieldModule:()=>O1,NavbarAbstract:()=>pS,NavbarRegistry:()=>KS,NavbarUiComponent:()=>zH,NavbarUiModule:()=>oW,NavigationStore:()=>Ai,NoopAsyncAction:()=>qb,NotEmptyAction:()=>Nb,NotEqualAction:()=>kb,NotificationStore:()=>Rs,NotificationsComponent:()=>xS,NotificationsModule:()=>YS,NotificationsService:()=>sp,NumberFormatter:()=>Co,PaginationComponent:()=>wp,PaginationModule:()=>Dp,PanelComponent:()=>Bs,PanelLogicActionHandler:()=>XS,PanelLogicDisplayTypeAction:()=>eM,PanelLogicManager:()=>Ic,PanelModule:()=>so,PasswordDetailFieldComponent:()=>mc,PasswordDetailFieldModule:()=>Q1,PasswordEditFieldComponent:()=>Ud,PasswordEditFieldModule:()=>J1,PhoneDetailFieldComponent:()=>Wl,PhoneDetailFieldModule:()=>A1,PhoneFormatter:()=>ld,PhoneValidator:()=>bC,PieGridChartComponent:()=>yb,PieGridChartModule:()=>Sb,PopupButtonComponent:()=>tM,PopupButtonModule:()=>nM,PrimaryEmailValidator:()=>DC,ProcessService:()=>qi,QuickFiltersService:()=>Aa,RadioEnumDetailFieldComponent:()=>fc,RadioEnumDetailFieldModule:()=>K1,RadioEnumEditFieldComponent:()=>Vd,RadioEnumEditFieldModule:()=>G1,RangeValidator:()=>MC,RecentlyViewedComponent:()=>vp,RecentlyViewedService:()=>Bc,RecordActionDisplayTypeLogic:()=>$w,RecordActionHandler:()=>jr,RecordActionManager:()=>nf,RecordActionsAdapter:()=>Vs,RecordCancelAction:()=>Nw,RecordComponent:()=>IZ,RecordContainerComponent:()=>cf,RecordContainerModule:()=>df,RecordContentAdapter:()=>sf,RecordContentComponent:()=>xp,RecordContentModule:()=>Ep,RecordContentSkeletonComponent:()=>aM,RecordContentSkeletonModule:()=>lM,RecordCreateAction:()=>jw,RecordDetailsPopupButtonComponent:()=>iM,RecordDetailsPopupButtonModule:()=>rM,RecordEditAction:()=>kw,RecordFetchGQL:()=>io,RecordFlexboxComponent:()=>wS,RecordFlexboxModule:()=>JS,RecordGridComponent:()=>Sp,RecordGridModule:()=>Fa,RecordHeaderComponent:()=>uf,RecordHeaderModule:()=>pf,RecordListModalComponent:()=>As,RecordListModalModule:()=>TK,RecordListModalStore:()=>x1,RecordListModalStoreFactory:()=>E1,RecordListStore:()=>Ld,RecordListStoreFactory:()=>Qi,RecordManager:()=>Si,RecordModule:()=>zw,RecordPanelActionHandler:()=>HM,RecordPanelActionManager:()=>vf,RecordPanelAdapter:()=>Cf,RecordPanelComponent:()=>zM,RecordPanelModule:()=>WM,RecordPanelStore:()=>Hp,RecordPanelStoreFactory:()=>KM,RecordSaveAction:()=>Rw,RecordSaveGQL:()=>ro,RecordSaveNewAction:()=>Pw,RecordStore:()=>rp,RecordStoreFactory:()=>oo,RecordStoreList:()=>WC,RecordThreadComponent:()=>gp,RecordThreadItemActionHandler:()=>Ia,RecordThreadItemActionManager:()=>hp,RecordThreadItemActionsAdapter:()=>SS,RecordThreadItemActionsAdapterFactory:()=>MS,RecordThreadItemCancelAction:()=>yS,RecordThreadItemComponent:()=>DS,RecordThreadItemEditAction:()=>bS,RecordThreadItemModule:()=>xc,RecordThreadItemSaveAction:()=>CS,RecordThreadItemStore:()=>op,RecordThreadItemStoreFactory:()=>bc,RecordThreadListActionHandler:()=>mS,RecordThreadListActionManager:()=>mp,RecordThreadListActionsAdapter:()=>gS,RecordThreadListActionsAdapterFactory:()=>vS,RecordThreadModule:()=>Mp,RecordThreadSidebarWidgetComponent:()=>ow,RecordThreadSidebarWidgetModule:()=>eG,RecordThreadStore:()=>Cc,RecordThreadStoreFactory:()=>Sc,RecordToggleWidgetsAction:()=>Bw,RecordViewSidebarWidgetService:()=>Ta,RecordViewStore:()=>Mi,RecoverPasswordService:()=>Tw,RedirectAsyncAction:()=>Gb,RelateDetailFieldComponent:()=>oc,RelateDetailFieldsModule:()=>L1,RelateEditFieldComponent:()=>Bd,RelateEditFieldModule:()=>I1,RelateFilterFieldComponent:()=>kd,RelateFilterFieldModule:()=>N1,RelateService:()=>Ts,RequiredAction:()=>$b,RequiredValidator:()=>hd,RouteConverter:()=>ao,RunBulkActionRecordPanelAction:()=>Yw,SaveFilterStoreFactory:()=>$p,SavedFilterActionAdapterFactory:()=>UM,SavedFilterActionHandler:()=>jp,SavedFilterActionManager:()=>Pp,SavedFilterActionsAdapter:()=>VM,SavedFilterDeleteAction:()=>NM,SavedFilterRecordStore:()=>BM,SavedFilterRecordStoreFactory:()=>Vp,SavedFilterSaveAction:()=>LM,SavedFilterSaveGQL:()=>jM,SavedFilterStore:()=>Up,SavedSearchRecordMapper:()=>PM,ScreenSize:()=>ii,ScreenSizeObserverService:()=>li,SearchBarComponent:()=>pp,SearchBarModule:()=>Ec,SelectColumnsTableAction:()=>iD,SelectModalService:()=>$n,SeriesMapper:()=>Kp,SeriesStatisticsStore:()=>Wp,SeriesStatisticsStoreFactory:()=>HG,SeriesTraverser:()=>GM,SettingsMenuComponent:()=>yM,SettingsMenuModule:()=>Rp,SidebarComponent:()=>PW,SidebarWidgetAdapter:()=>rf,SidebarWidgetComponent:()=>Qp,SidebarWidgetModule:()=>Jp,SidebarWidgetRegistry:()=>cw,SingleValueStatisticsStore:()=>qC,SingleValueStatisticsStoreFactory:()=>Ca,SortButtonComponent:()=>uM,SortButtonModule:()=>dM,StandardFieldRegistry:()=>hc,StateManager:()=>ba,StatisticsBatch:()=>Tp,StatisticsFetchGQL:()=>gr,StatisticsSidebarWidgetComponent:()=>sw,StatisticsSidebarWidgetModule:()=>aw,StatisticsStore:()=>Mc,StatisticsStoreFactory:()=>WG,StatisticsTopWidgetComponent:()=>Cw,StatisticsTopWidgetModule:()=>Sw,StatusBarComponent:()=>Op,StatusBarModule:()=>Bp,SubMenuFavoritesComponent:()=>bp,SubMenuFavoritesRegistry:()=>OS,SubMenuRecentlyViewedComponent:()=>_p,SubMenuRecentlyViewedRegistry:()=>AS,SubpanelActionAdapterFactory:()=>dw,SubpanelActionHandler:()=>ks,SubpanelActionManager:()=>wa,SubpanelActionsAdapter:()=>uw,SubpanelClearFilterAction:()=>nS,SubpanelComponent:()=>_w,SubpanelContainerComponent:()=>yw,SubpanelContainerModule:()=>bw,SubpanelCreateAction:()=>YC,SubpanelFilterAdapter:()=>pw,SubpanelFilterAdapterFactory:()=>fw,SubpanelLineActionHandler:()=>mw,SubpanelLineActionManager:()=>Yp,SubpanelLineActionsAdapter:()=>gw,SubpanelLineActionsAdapterFactory:()=>Xp,SubpanelModule:()=>Rc,SubpanelSelectAction:()=>XC,SubpanelShowFilterAction:()=>tS,SubpanelStore:()=>Ps,SubpanelStoreFactory:()=>Fp,SubpanelTableAdapter:()=>ef,SubpanelTableAdapterFactory:()=>vw,SystemConfigStore:()=>ht,SystemNameService:()=>$G,TableActionHandler:()=>yf,TableActionManager:()=>bf,TableAdapter:()=>Mf,TableBodyComponent:()=>CM,TableBodyModule:()=>wM,TableComponent:()=>Ac,TableFooterComponent:()=>SM,TableFooterModule:()=>DM,TableHeaderComponent:()=>bM,TableHeaderModule:()=>MM,TableModule:()=>Tc,TextDetailFieldComponent:()=>bd,TextDetailFieldModule:()=>F1,TextEditFieldComponent:()=>Pd,TextEditFieldModule:()=>z1,TextListFieldComponent:()=>Hd,TextListFieldModule:()=>tC,ThemeImagesStore:()=>Xr,TinymceDetailFieldComponent:()=>$d,TinymceDetailFieldModule:()=>Y1,TinymceEditFieldComponent:()=>zd,TinymceEditFieldModule:()=>X1,ToObservableModule:()=>sM,ToObservablePipe:()=>oM,TopWidgetAdapter:()=>af,TopWidgetComponent:()=>Dw,TopWidgetModule:()=>xw,UpdateBaseCurrencyAction:()=>zb,UpdateCurrencyAction:()=>Hb,UpdateFlexRelateModuleAction:()=>Wb,UpdateValueAction:()=>Kb,UpdateValueBackendAction:()=>Yb,UrlDetailFieldComponent:()=>Es,UrlDetailFieldModule:()=>j1,UserPreferenceStore:()=>Xt,UserService:()=>zG,ValidationManager:()=>Ao,VarcharDetailFieldComponent:()=>xs,VarcharDetailFieldModule:()=>U1,VarcharEditFieldComponent:()=>Cd,VarcharEditFieldModule:()=>B1,VarcharFilterFieldComponent:()=>Ed,VarcharFilterFieldModule:()=>C1,VerticalBarChartComponent:()=>bb,VerticalBarChartModule:()=>Cb,ViewStore:()=>Ap,WidgetPanelComponent:()=>Sa,WidgetPanelModule:()=>kr,alertTypes:()=>Ma,baseFieldComponents:()=>iC,baseFieldModules:()=>nC,baseObjectFieldsTypeMap:()=>FC,baseViewFieldsMap:()=>Wd,booleanRequiredValidator:()=>Ub,chartModules:()=>Db,chartTypeMap:()=>dd,componentTypeMap:()=>qp,currencyValidator:()=>sC,dateTimeValidator:()=>uC,dateValidator:()=>lC,duplicateEmailValidator:()=>xC,emailValidator:()=>vC,fieldComponents:()=>x7,fieldModules:()=>RC,floatValidator:()=>pC,intValidator:()=>mC,maxValidator:()=>SC,minValidator:()=>CC,phoneValidator:()=>yC,primaryEmailValidator:()=>wC,requiredValidator:()=>Vb,sidebarWidgetModules:()=>lw,topWidgetComponentTypeMap:()=>ww,topWidgetModules:()=>Mw,viewFieldsMap:()=>qd});var t=L(2611),S=L(1320),D=L(8303),v=L(8103),W=L(8592),H=L(2495),ce=L(2831);const $=new Set;let V,F=(()=>{class i{constructor(e,n){this._platform=e,this._nonce=n,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):U}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function j(i,s){if(!$.has(i))try{V||(V=document.createElement("style"),s&&(V.nonce=s),V.setAttribute("type","text/css"),document.head.appendChild(V)),V.sheet&&(V.sheet.insertRule(`@media ${i} {body{ }}`,0),$.add(i))}catch(e){console.error(e)}}(e,this._nonce),this._matchMedia(e)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ce.t4),t.\u0275\u0275inject(t.CSP_NONCE,8))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function U(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let z=(()=>{class i{constructor(e,n){this._mediaMatcher=e,this._zone=n,this._queries=new Map,this._destroySubject=new D.Subject}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return ee((0,H.Eq)(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){const r=ee((0,H.Eq)(e)).map(a=>this._registerQuery(a).observable);let o=(0,D.combineLatest)(r);return o=(0,D.concat)(o.pipe((0,v.take)(1)),o.pipe((0,v.skip)(1),(0,v.debounceTime)(0))),o.pipe((0,v.map)(a=>{const l={matches:!1,breakpoints:{}};return a.forEach(({matches:c,query:u})=>{l.matches=l.matches||c,l.breakpoints[u]=c}),l}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const n=this._mediaMatcher.matchMedia(e),o={observable:new D.Observable(a=>{const l=c=>this._zone.run(()=>a.next(c));return n.addListener(l),()=>{n.removeListener(l)}}).pipe((0,v.startWith)(n),(0,v.map)(({matches:a})=>({query:e,matches:a})),(0,v.takeUntil)(this._destroySubject)),mql:n};return this._queries.set(e,o),o}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(F),t.\u0275\u0275inject(t.NgZone))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function ee(i){return i.map(s=>s.split(",")).reduce((s,e)=>s.concat(e)).map(s=>s.trim())}var ie=L(9298),I=L(4187),Ge=L(7109),me=L(3821),tt=L(5248),je=L(3068),ut=L(9812),Pe=L(9002);const it=new t.InjectionToken("EventArgument",{providedIn:"root",factory:function Re(){return"$event"}}),et=new t.InjectionToken("IoEventContext"),rn=new t.InjectionToken("IoEventContextProvider"),Ye=new t.InjectionToken("DynamicComponentInjector");let Lt=(()=>{class i{constructor(){this.trackOutputChanges=!1}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),re=(()=>{class i{constructor(e,n,r,o,a,l,c,u){if(this.injector=e,this.differs=n,this.cfr=r,this.options=o,this.compInjector=a,this.eventArgument=l,this.cdr=c,this.eventContextProvider=u,this.lastComponentInst=null,this.lastChangedInputs=new Set,this.inputsDiffer=this.differs.find({}).create(),this.compFactory=null,this.outputsShouldDisconnect$=new D.Subject,this.inputs={},this.outputs={},this.outputsChanged=()=>!1,this.options.trackOutputChanges){const d=this.differs.find({}).create();this.outputsChanged=p=>!!d.diff(p)}}get compRef(){return this.compInjector.componentRef}get componentInst(){return this.compRef?this.compRef.instance:null}get componentInstChanged(){return this.lastComponentInst!==this.componentInst&&(this.lastComponentInst=this.componentInst,!0)}ngOnDestroy(){this.disconnectOutputs()}update(e,n){if(!this.compRef)return void this.disconnectOutputs();const r=this.updateIO(e,n),o=this.componentInstChanged,a=this.getInputsChanges(o),l=this.outputsChanged(this.outputs);a&&this.updateChangedInputs(a),(o||a)&&this.updateInputs(o||!this.lastChangedInputs.size),(o||l||r.outputsChanged)&&this.bindOutputs()}updateIO(e,n){e||(e={}),n||(n={});const r=this.inputs!==e,o=this.outputs!==n;return this.inputs=e,this.outputs=n,{inputsChanged:r,outputsChanged:o}}updateInputs(e=!1){e&&this.updateCompFactory();const n=this.compRef,r=this.inputs;if(!r||!n)return;const o=this.lastChangedInputs.size?a=>this.lastChangedInputs.has(a):()=>!0;Object.keys(r).filter(o).forEach(a=>n.setInput(a,r[a]))}bindOutputs(){this.disconnectOutputs();const e=this.componentInst;let n=this.outputs;!n||!e||(n=this.resolveOutputs(n),Object.keys(n).filter(r=>e[r]).forEach(r=>e[r].pipe((0,v.takeUntil)(this.outputsShouldDisconnect$)).subscribe(o=>(this.cdr.markForCheck(),n[r](o)))))}disconnectOutputs(){this.outputsShouldDisconnect$.next()}getInputsChanges(e){return e&&this.inputsDiffer.diff({}),this.inputsDiffer.diff(this.inputs)}updateChangedInputs(e){this.lastChangedInputs.clear();const n=r=>this.lastChangedInputs.add(r.key);e.forEachAddedItem(n),e.forEachChangedItem(n),e.forEachRemovedItem(n)}resolveCompFactory(){if(!this.compRef)return null;try{try{return this.cfr.resolveComponentFactory(this.compRef.componentType)}catch{return this.cfr.resolveComponentFactory(this.compRef.instance.constructor)}}catch{return null}}updateCompFactory(){this.compFactory=this.resolveCompFactory()}resolveOutputs(e){return this.updateOutputsEventContext(),e=this.processOutputs(e),this.compFactory?this.remapIO(e,this.compFactory.outputs):e}updateOutputsEventContext(){if(this.eventContextProvider){const e=t.Injector.create({name:"EventContext",parent:this.injector,providers:[this.eventContextProvider]});this.outputsEventContext=e.get(et)}else this.outputsEventContext=this.injector.get(et,null)}processOutputs(e){const n={};return Object.keys(e).forEach(r=>{const o=e[r];let a;a="function"==typeof o?o:o&&this.processOutputArgs(o),this.outputsEventContext&&a&&(a=a.bind(this.outputsEventContext)),n[r]=a}),n}processOutputArgs(e){const n=this.eventArgument,r="args"in e?e.args||[]:[n],o=r.indexOf(n),a=e.handler;return-1===o?function(){return a.apply(this,r)}:function(l){const c=[...r];return c[o]=l,a.apply(this,c)}}remapIO(e,n){const r={};return Object.keys(e).forEach(o=>{const a=this.findPropByTplInMapping(o,n)||o;r[a]=e[o]}),r}findPropByTplInMapping(e,n){for(const r of n)if(r.templateName===e)return r.propName;return null}}return i.\u0275fac=function(e){return new(e||i)(t.\u0275\u0275inject(t.Injector),t.\u0275\u0275inject(t.KeyValueDiffers),t.\u0275\u0275inject(t.ComponentFactoryResolver),t.\u0275\u0275inject(Lt),t.\u0275\u0275inject(Ye),t.\u0275\u0275inject(it),t.\u0275\u0275inject(t.ChangeDetectorRef),t.\u0275\u0275inject(rn,8))},i.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac}),i})(),It=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=t.\u0275\u0275defineInjector({}),i})(),Gt=(()=>{class i{constructor(e){this.ioService=e}ngDoCheck(){this.ioService.update(this.ndcDynamicInputs,this.ndcDynamicOutputs)}}return i.\u0275fac=function(e){return new(e||i)(t.\u0275\u0275directiveInject(re))},i.\u0275dir=t.\u0275\u0275defineDirective({type:i,selectors:[["","ndcDynamicInputs",""],["","ndcDynamicOutputs",""]],inputs:{ndcDynamicInputs:"ndcDynamicInputs",ndcDynamicOutputs:"ndcDynamicOutputs"},exportAs:["ndcDynamicIo"],standalone:!0,features:[t.\u0275\u0275ProvidersFeature([re])]}),i})(),Kt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=t.\u0275\u0275defineInjector({imports:[It]}),i})(),$t=(()=>{class i{constructor(e){this.vcr=e,this.ndcDynamicCreated=new t.EventEmitter,this.componentRef=null}ngOnChanges(e){i.UpdateOnInputs.some(n=>e.hasOwnProperty(n))&&this.createDynamicComponent()}createDynamicComponent(){this.vcr.clear(),this.componentRef=null,this.ndcDynamicComponent&&(this.componentRef=this.vcr.createComponent(this.ndcDynamicComponent,{index:0,injector:this._resolveInjector(),projectableNodes:this.ndcDynamicContent,ngModuleRef:this.ndcDynamicNgModuleRef,environmentInjector:this.ndcDynamicEnvironmentInjector}),this.ndcDynamicCreated.emit(this.componentRef))}_resolveInjector(){let e=this.ndcDynamicInjector||this.vcr.injector;return this.ndcDynamicProviders&&(e=t.Injector.create({providers:this.ndcDynamicProviders,parent:e})),e}}return i.UpdateOnInputs=["ndcDynamicComponent","ndcDynamicInjector","ndcDynamicProviders","ndcDynamicContent","ndcDynamicNgModuleRef","ndcDynamicEnvironmentInjector"],i.\u0275fac=function(e){return new(e||i)(t.\u0275\u0275directiveInject(t.ViewContainerRef))},i.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["ndc-dynamic"]],inputs:{ndcDynamicComponent:"ndcDynamicComponent",ndcDynamicInjector:"ndcDynamicInjector",ndcDynamicProviders:"ndcDynamicProviders",ndcDynamicContent:"ndcDynamicContent",ndcDynamicNgModuleRef:"ndcDynamicNgModuleRef",ndcDynamicEnvironmentInjector:"ndcDynamicEnvironmentInjector"},outputs:{ndcDynamicCreated:"ndcDynamicCreated"},standalone:!0,features:[t.\u0275\u0275ProvidersFeature([{provide:Ye,useExisting:i}]),t.\u0275\u0275NgOnChangesFeature,t.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(e,n){},encapsulation:2}),i})(),vt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=t.\u0275\u0275defineInjector({imports:[Kt,$t,Kt]}),i})();new t.InjectionToken("ReflectRef",{providedIn:"root",factory:()=>window.Reflect});var Pt=L(6672),vD=L(6478),Gf=L(9388);function Uc(i,s,e){for(let n in s)if(s.hasOwnProperty(n)){const r=s[n];r?i.setProperty(n,r,e?.has(n)?"important":""):i.removeProperty(n)}return i}function Vo(i,s){const e=s?"":"none";Uc(i.style,{"touch-action":s?"":"none","-webkit-user-drag":s?"":"none","-webkit-tap-highlight-color":s?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function Zf(i,s,e){Uc(i.style,{position:s?"":"fixed",top:s?"":"0",opacity:s?"":"0",left:s?"":"-999em"},e)}function Na(i,s){return s&&"none"!=s?i+" "+s:i}function qf(i){const s=i.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(i)*s}function $c(i,s){return i.getPropertyValue(s).split(",").map(n=>n.trim())}function zc(i){const s=i.getBoundingClientRect();return{top:s.top,right:s.right,bottom:s.bottom,left:s.left,width:s.width,height:s.height,x:s.x,y:s.y}}function Hc(i,s,e){const{top:n,bottom:r,left:o,right:a}=i;return e>=n&&e<=r&&s>=o&&s<=a}function zs(i,s,e){i.top+=s,i.bottom=i.top+i.height,i.left+=e,i.right=i.left+i.width}function Qf(i,s,e,n){const{top:r,right:o,bottom:a,left:l,width:c,height:u}=i,d=c*s,p=u*s;return n>r-p&&n<a+p&&e>l-d&&e<o+d}class Jf{constructor(s){this._document=s,this.positions=new Map}clear(){this.positions.clear()}cache(s){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),s.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:zc(e)})})}handleScroll(s){const e=(0,ce.sA)(s),n=this.positions.get(e);if(!n)return null;const r=n.scrollPosition;let o,a;if(e===this._document){const u=this.getViewportScrollPosition();o=u.top,a=u.left}else o=e.scrollTop,a=e.scrollLeft;const l=r.top-o,c=r.left-a;return this.positions.forEach((u,d)=>{u.clientRect&&e!==d&&e.contains(d)&&zs(u.clientRect,l,c)}),r.top=o,r.left=a,{top:l,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function Yf(i){const s=i.cloneNode(!0),e=s.querySelectorAll("[id]"),n=i.nodeName.toLowerCase();s.removeAttribute("id");for(let r=0;r<e.length;r++)e[r].removeAttribute("id");return"canvas"===n?tm(i,s):("input"===n||"select"===n||"textarea"===n)&&em(i,s),Xf("canvas",i,s,tm),Xf("input, textarea, select",i,s,em),s}function Xf(i,s,e,n){const r=s.querySelectorAll(i);if(r.length){const o=e.querySelectorAll(i);for(let a=0;a<r.length;a++)n(r[a],o[a])}}let FD=0;function em(i,s){"file"!==s.type&&(s.value=i.value),"radio"===s.type&&s.name&&(s.name=`mat-clone-${s.name}-${FD++}`)}function tm(i,s){const e=s.getContext("2d");if(e)try{e.drawImage(i,0,0)}catch{}}const nm=(0,ce.i$)({passive:!0}),Ra=(0,ce.i$)({passive:!1}),Wc=new Set(["position"]);class TD{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(s){const e=(0,H.Ig)(s);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(n=>Vo(n,e)))}constructor(s,e,n,r,o,a){this._config=e,this._document=n,this._ngZone=r,this._viewportRuler=o,this._dragDropRegistry=a,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new D.Subject,this._pointerMoveSubscription=D.Subscription.EMPTY,this._pointerUpSubscription=D.Subscription.EMPTY,this._scrollSubscription=D.Subscription.EMPTY,this._resizeSubscription=D.Subscription.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new D.Subject,this.started=new D.Subject,this.released=new D.Subject,this.ended=new D.Subject,this.entered=new D.Subject,this.exited=new D.Subject,this.dropped=new D.Subject,this.moved=this._moveEvents,this._pointerDown=l=>{if(this.beforeStarted.next(),this._handles.length){const c=this._getTargetHandle(l);c&&!this._disabledHandles.has(c)&&!this.disabled&&this._initializeDragSequence(c,l)}else this.disabled||this._initializeDragSequence(this._rootElement,l)},this._pointerMove=l=>{const c=this._getPointerPositionOnPage(l);if(!this._hasStartedDragging){if(Math.abs(c.x-this._pickupPositionOnPage.x)+Math.abs(c.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const m=Date.now()>=this._dragStartTime+this._getDragStartDelay(l),g=this._dropContainer;if(!m)return void this._endDragSequence(l);(!g||!g.isDragging()&&!g.isReceiving())&&(l.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(l)))}return}l.preventDefault();const u=this._getConstrainedPointerPosition(c);if(this._hasMoved=!0,this._lastKnownPointerPosition=c,this._updatePointerDirectionDelta(u),this._dropContainer)this._updateActiveDropContainer(u,c);else{const d=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,p=this._activeTransform;p.x=u.x-d.x+this._passiveTransform.x,p.y=u.y-d.y+this._passiveTransform.y,this._applyRootElementTransform(p.x,p.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:u,event:l,distance:this._getDragDistance(u),delta:this._pointerDirectionDelta})})},this._pointerUp=l=>{this._endDragSequence(l)},this._nativeDragStart=l=>{if(this._handles.length){const c=this._getTargetHandle(l);c&&!this._disabledHandles.has(c)&&!this.disabled&&l.preventDefault()}else this.disabled||l.preventDefault()},this.withRootElement(s).withParent(e.parentDragRef||null),this._parentPositions=new Jf(n),a.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(s){this._handles=s.map(n=>(0,H.fI)(n)),this._handles.forEach(n=>Vo(n,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(n=>{this._handles.indexOf(n)>-1&&e.add(n)}),this._disabledHandles=e,this}withPreviewTemplate(s){return this._previewTemplate=s,this}withPlaceholderTemplate(s){return this._placeholderTemplate=s,this}withRootElement(s){const e=(0,H.fI)(s);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,Ra),e.addEventListener("touchstart",this._pointerDown,nm),e.addEventListener("dragstart",this._nativeDragStart,Ra)}),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(s){return this._boundaryElement=s?(0,H.fI)(s):null,this._resizeSubscription.unsubscribe(),s&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(s){return this._parentDragRef=s,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(s){!this._disabledHandles.has(s)&&this._handles.indexOf(s)>-1&&(this._disabledHandles.add(s),Vo(s,!0))}enableHandle(s){this._disabledHandles.has(s)&&(this._disabledHandles.delete(s),Vo(s,this.disabled))}withDirection(s){return this._direction=s,this}_withDropContainer(s){this._dropContainer=s}getFreeDragPosition(){const s=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:s.x,y:s.y}}setFreeDragPosition(s){return this._activeTransform={x:0,y:0},this._passiveTransform.x=s.x,this._passiveTransform.y=s.y,this._dropContainer||this._applyRootElementTransform(s.x,s.y),this}withPreviewContainer(s){return this._previewContainer=s,this}_sortFromLastPointerPosition(){const s=this._lastKnownPointerPosition;s&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(s),s)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(s){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:s}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(s),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(s);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:s})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(s){Hs(s)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const n=this._rootElement,r=n.parentNode,o=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment(""),l=this._getShadowRoot();r.insertBefore(a,n),this._initialTransform=n.style.transform||"",this._preview=this._createPreviewElement(),Zf(n,!1,Wc),this._document.body.appendChild(r.replaceChild(o,n)),this._getPreviewInsertionPoint(r,l).appendChild(this._preview),this.started.next({source:this,event:s}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this,event:s}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(s,e){this._parentDragRef&&e.stopPropagation();const n=this.isDragging(),r=Hs(e),o=!r&&0!==e.button,a=this._rootElement,l=(0,ce.sA)(e),c=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),u=r?function xD(i){const s=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!s||-1!==s.identifier||null!=s.radiusX&&1!==s.radiusX||null!=s.radiusY&&1!==s.radiusY)}(e):function DD(i){return 0===i.buttons||0===i.detail}(e);if(l&&l.draggable&&"mousedown"===e.type&&e.preventDefault(),n||o||c||u)return;if(this._handles.length){const f=a.style;this._rootElementTapHighlight=f.webkitTapHighlightColor||"",f.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(f=>this._updateOnScroll(f)),this._boundaryElement&&(this._boundaryRect=zc(this._boundaryElement));const d=this._previewTemplate;this._pickupPositionInElement=d&&d.template&&!d.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,s,e);const p=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:p.x,y:p.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(s){Zf(this._rootElement,!0,Wc),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const e=this._dropContainer,n=e.getItemIndex(this),r=this._getPointerPositionOnPage(s),o=this._getDragDistance(r),a=e._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:o,dropPoint:r,event:s}),this.dropped.next({item:this,currentIndex:n,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:a,distance:o,dropPoint:r,event:s}),e.drop(this,n,this._initialIndex,this._initialContainer,a,o,r,s),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:s,y:e},{x:n,y:r}){let o=this._initialContainer._getSiblingContainerFromPosition(this,s,e);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(s,e)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=o,this._dropContainer.enter(this,s,e,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(n,r),this._dropContainer._sortItem(this,s,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(s,e):this._applyPreviewTransform(s-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_createPreviewElement(){const s=this._previewTemplate,e=this.previewClass,n=s?s.template:null;let r;if(n&&s){const o=s.matchSize?this._initialClientRect:null,a=s.viewContainer.createEmbeddedView(n,s.context);a.detectChanges(),r=rm(a,this._document),this._previewRef=a,s.matchSize?om(r,o):r.style.transform=Ba(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=Yf(this._rootElement),om(r,this._initialClientRect),this._initialTransform&&(r.style.transform=this._initialTransform);return Uc(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},Wc),Vo(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(o=>r.classList.add(o)):r.classList.add(e)),r}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const s=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(s.left,s.top);const e=function ID(i){const s=getComputedStyle(i),e=$c(s,"transition-property"),n=e.find(l=>"transform"===l||"all"===l);if(!n)return 0;const r=e.indexOf(n),o=$c(s,"transition-duration"),a=$c(s,"transition-delay");return qf(o[r])+qf(a[r])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(n=>{const r=a=>{(!a||(0,ce.sA)(a)===this._preview&&"transform"===a.propertyName)&&(this._preview?.removeEventListener("transitionend",r),n(),clearTimeout(o))},o=setTimeout(r,1.5*e);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){const s=this._placeholderTemplate,e=s?s.template:null;let n;return e?(this._placeholderRef=s.viewContainer.createEmbeddedView(e,s.context),this._placeholderRef.detectChanges(),n=rm(this._placeholderRef,this._document)):n=Yf(this._rootElement),n.style.pointerEvents="none",n.classList.add("cdk-drag-placeholder"),n}_getPointerPositionInElement(s,e,n){const r=e===this._rootElement?null:e,o=r?r.getBoundingClientRect():s,a=Hs(n)?n.targetTouches[0]:n,l=this._getViewportScrollPosition();return{x:o.left-s.left+(a.pageX-o.left-l.left),y:o.top-s.top+(a.pageY-o.top-l.top)}}_getPointerPositionOnPage(s){const e=this._getViewportScrollPosition(),n=Hs(s)?s.touches[0]||s.changedTouches[0]||{pageX:0,pageY:0}:s,r=n.pageX-e.left,o=n.pageY-e.top;if(this._ownerSVGElement){const a=this._ownerSVGElement.getScreenCTM();if(a){const l=this._ownerSVGElement.createSVGPoint();return l.x=r,l.y=o,l.matrixTransform(a.inverse())}}return{x:r,y:o}}_getConstrainedPointerPosition(s){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:n,y:r}=this.constrainPosition?this.constrainPosition(s,this,this._initialClientRect,this._pickupPositionInElement):s;if("x"===this.lockAxis||"x"===e?r=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):("y"===this.lockAxis||"y"===e)&&(n=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){const{x:o,y:a}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,l=this._boundaryRect,{width:c,height:u}=this._getPreviewRect(),d=l.top+a,p=l.bottom-(u-a);n=im(n,l.left+o,l.right-(c-o)),r=im(r,d,p)}return{x:n,y:r}}_updatePointerDirectionDelta(s){const{x:e,y:n}=s,r=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,a=Math.abs(e-o.x),l=Math.abs(n-o.y);return a>this._config.pointerDirectionChangeThreshold&&(r.x=e>o.x?1:-1,o.x=e),l>this._config.pointerDirectionChangeThreshold&&(r.y=n>o.y?1:-1,o.y=n),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const s=this._handles.length>0||!this.isDragging();s!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=s,Vo(this._rootElement,s))}_removeRootElementListeners(s){s.removeEventListener("mousedown",this._pointerDown,Ra),s.removeEventListener("touchstart",this._pointerDown,nm),s.removeEventListener("dragstart",this._nativeDragStart,Ra)}_applyRootElementTransform(s,e){const n=Ba(s,e),r=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=r.transform&&"none"!=r.transform?r.transform:""),r.transform=Na(n,this._initialTransform)}_applyPreviewTransform(s,e){const n=this._previewTemplate?.template?void 0:this._initialTransform,r=Ba(s,e);this._preview.style.transform=Na(r,n)}_getDragDistance(s){const e=this._pickupPositionOnPage;return e?{x:s.x-e.x,y:s.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:s,y:e}=this._passiveTransform;if(0===s&&0===e||this.isDragging()||!this._boundaryElement)return;const n=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(0===r.width&&0===r.height||0===n.width&&0===n.height)return;const o=r.left-n.left,a=n.right-r.right,l=r.top-n.top,c=n.bottom-r.bottom;r.width>n.width?(o>0&&(s+=o),a>0&&(s-=a)):s=0,r.height>n.height?(l>0&&(e+=l),c>0&&(e-=c)):e=0,(s!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:s})}_getDragStartDelay(s){const e=this.dragStartDelay;return"number"==typeof e?e:Hs(s)?e.touch:e?e.mouse:0}_updateOnScroll(s){const e=this._parentPositions.handleScroll(s);if(e){const n=(0,ce.sA)(s);this._boundaryRect&&n!==this._boundaryElement&&n.contains(this._boundaryElement)&&zs(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,ce.kV)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(s,e){const n=this._previewContainer||"global";if("parent"===n)return s;if("global"===n){const r=this._document;return e||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return(0,H.fI)(n)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(s){return this._handles.find(e=>s.target&&(s.target===e||e.contains(s.target)))}}function Ba(i,s){return`translate3d(${Math.round(i)}px, ${Math.round(s)}px, 0)`}function im(i,s,e){return Math.max(s,Math.min(e,i))}function Hs(i){return"t"===i.type[0]}function rm(i,s){const e=i.rootNodes;if(1===e.length&&e[0].nodeType===s.ELEMENT_NODE)return e[0];const n=s.createElement("div");return e.forEach(r=>n.appendChild(r)),n}function om(i,s){i.style.width=`${s.width}px`,i.style.height=`${s.height}px`,i.style.transform=Ba(s.left,s.top)}function sm(i,s,e){const n=Ws(s,i.length-1),r=Ws(e,i.length-1);if(n===r)return;const o=i[n],a=r<n?-1:1;for(let l=n;l!==r;l+=a)i[l]=i[l+a];i[r]=o}function Ws(i,s){return Math.max(0,Math.min(s,i))}class LD{constructor(s,e){this._element=s,this._dragDropRegistry=e,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(s){this.withItems(s)}sort(s,e,n,r){const o=this._itemPositions,a=this._getItemIndexFromPointerPosition(s,e,n,r);if(-1===a&&o.length>0)return null;const l="horizontal"===this.orientation,c=o.findIndex(_=>_.drag===s),u=o[a],p=u.clientRect,f=c>a?1:-1,m=this._getItemOffsetPx(o[c].clientRect,p,f),g=this._getSiblingOffsetPx(c,o,f),h=o.slice();return sm(o,c,a),o.forEach((_,b)=>{if(h[b]===_)return;const M=_.drag===s,y=M?m:g,w=M?s.getPlaceholderElement():_.drag.getRootElement();_.offset+=y,l?(w.style.transform=Na(`translate3d(${Math.round(_.offset)}px, 0, 0)`,_.initialTransform),zs(_.clientRect,0,y)):(w.style.transform=Na(`translate3d(0, ${Math.round(_.offset)}px, 0)`,_.initialTransform),zs(_.clientRect,y,0))}),this._previousSwap.overlaps=Hc(p,e,n),this._previousSwap.drag=u.drag,this._previousSwap.delta=l?r.x:r.y,{previousIndex:c,currentIndex:a}}enter(s,e,n,r){const o=null==r||r<0?this._getItemIndexFromPointerPosition(s,e,n):r,a=this._activeDraggables,l=a.indexOf(s),c=s.getPlaceholderElement();let u=a[o];if(u===s&&(u=a[o+1]),!u&&(null==o||-1===o||o<a.length-1)&&this._shouldEnterAsFirstChild(e,n)&&(u=a[0]),l>-1&&a.splice(l,1),u&&!this._dragDropRegistry.isDragging(u)){const d=u.getRootElement();d.parentElement.insertBefore(c,d),a.splice(o,0,s)}else(0,H.fI)(this._element).appendChild(c),a.push(s);c.style.transform="",this._cacheItemPositions()}withItems(s){this._activeDraggables=s.slice(),this._cacheItemPositions()}withSortPredicate(s){this._sortPredicate=s}reset(){this._activeDraggables.forEach(s=>{const e=s.getRootElement();if(e){const n=this._itemPositions.find(r=>r.drag===s)?.initialTransform;e.style.transform=n||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(s){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(n=>n.drag===s)}updateOnScroll(s,e){this._itemPositions.forEach(({clientRect:n})=>{zs(n,s,e)}),this._itemPositions.forEach(({drag:n})=>{this._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()})}_cacheItemPositions(){const s="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(e=>{const n=e.getVisibleElement();return{drag:e,offset:0,initialTransform:n.style.transform||"",clientRect:zc(n)}}).sort((e,n)=>s?e.clientRect.left-n.clientRect.left:e.clientRect.top-n.clientRect.top)}_getItemOffsetPx(s,e,n){const r="horizontal"===this.orientation;let o=r?e.left-s.left:e.top-s.top;return-1===n&&(o+=r?e.width-s.width:e.height-s.height),o}_getSiblingOffsetPx(s,e,n){const r="horizontal"===this.orientation,o=e[s].clientRect,a=e[s+-1*n];let l=o[r?"width":"height"]*n;if(a){const c=r?"left":"top",u=r?"right":"bottom";-1===n?l-=a.clientRect[c]-o[u]:l+=o[c]-a.clientRect[u]}return l}_shouldEnterAsFirstChild(s,e){if(!this._activeDraggables.length)return!1;const n=this._itemPositions,r="horizontal"===this.orientation;if(n[0].drag!==this._activeDraggables[0]){const a=n[n.length-1].clientRect;return r?s>=a.right:e>=a.bottom}{const a=n[0].clientRect;return r?s<=a.left:e<=a.top}}_getItemIndexFromPointerPosition(s,e,n,r){const o="horizontal"===this.orientation,a=this._itemPositions.findIndex(({drag:l,clientRect:c})=>l!==s&&((!r||l!==this._previousSwap.drag||!this._previousSwap.overlaps||(o?r.x:r.y)!==this._previousSwap.delta)&&(o?e>=Math.floor(c.left)&&e<Math.floor(c.right):n>=Math.floor(c.top)&&n<Math.floor(c.bottom))));return-1!==a&&this._sortPredicate(a,s)?a:-1}}class ND{constructor(s,e,n,r,o){this._dragDropRegistry=e,this._ngZone=r,this._viewportRuler=o,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new D.Subject,this.entered=new D.Subject,this.exited=new D.Subject,this.dropped=new D.Subject,this.sorted=new D.Subject,this.receivingStarted=new D.Subject,this.receivingStopped=new D.Subject,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=D.Subscription.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new D.Subject,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),(0,D.interval)(0,D.animationFrameScheduler).pipe((0,v.takeUntil)(this._stopScrollTimers)).subscribe(()=>{const a=this._scrollNode,l=this.autoScrollStep;1===this._verticalScrollDirection?a.scrollBy(0,-l):2===this._verticalScrollDirection&&a.scrollBy(0,l),1===this._horizontalScrollDirection?a.scrollBy(-l,0):2===this._horizontalScrollDirection&&a.scrollBy(l,0)})},this.element=(0,H.fI)(s),this._document=n,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new Jf(n),this._sortStrategy=new LD(this.element,e),this._sortStrategy.withSortPredicate((a,l)=>this.sortPredicate(a,l,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(s,e,n,r){this._draggingStarted(),null==r&&this.sortingDisabled&&(r=this._draggables.indexOf(s)),this._sortStrategy.enter(s,e,n,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:s,container:this,currentIndex:this.getItemIndex(s)})}exit(s){this._reset(),this.exited.next({item:s,container:this})}drop(s,e,n,r,o,a,l,c={}){this._reset(),this.dropped.next({item:s,currentIndex:e,previousIndex:n,container:this,previousContainer:r,isPointerOverContainer:o,distance:a,dropPoint:l,event:c})}withItems(s){const e=this._draggables;return this._draggables=s,s.forEach(n=>n._withDropContainer(this)),this.isDragging()&&(e.filter(r=>r.isDragging()).every(r=>-1===s.indexOf(r))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(s){return this._sortStrategy.direction=s,this}connectedTo(s){return this._siblings=s.slice(),this}withOrientation(s){return this._sortStrategy.orientation=s,this}withScrollableParents(s){const e=(0,H.fI)(this.element);return this._scrollableElements=-1===s.indexOf(e)?[e,...s]:s.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(s){return this._isDragging?this._sortStrategy.getItemIndex(s):this._draggables.indexOf(s)}isReceiving(){return this._activeSiblings.size>0}_sortItem(s,e,n,r){if(this.sortingDisabled||!this._clientRect||!Qf(this._clientRect,.05,e,n))return;const o=this._sortStrategy.sort(s,e,n,r);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:s})}_startScrollingIfNecessary(s,e){if(this.autoScrollDisabled)return;let n,r=0,o=0;if(this._parentPositions.positions.forEach((a,l)=>{l===this._document||!a.clientRect||n||Qf(a.clientRect,.05,s,e)&&([r,o]=function RD(i,s,e,n){const r=cm(s,n),o=um(s,e);let a=0,l=0;if(r){const c=i.scrollTop;1===r?c>0&&(a=1):i.scrollHeight-c>i.clientHeight&&(a=2)}if(o){const c=i.scrollLeft;1===o?c>0&&(l=1):i.scrollWidth-c>i.clientWidth&&(l=2)}return[a,l]}(l,a.clientRect,s,e),(r||o)&&(n=l))}),!r&&!o){const{width:a,height:l}=this._viewportRuler.getViewportSize(),c={width:a,height:l,top:0,right:a,bottom:l,left:0};r=cm(c,e),o=um(c,s),n=window}n&&(r!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||n!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=o,this._scrollNode=n,(r||o)&&n?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const s=(0,H.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=s.msScrollSnapType||s.scrollSnapType||"",s.scrollSnapType=s.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const s=(0,H.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(s).clientRect}_reset(){this._isDragging=!1;const s=(0,H.fI)(this.element).style;s.scrollSnapType=s.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(s,e){return null!=this._clientRect&&Hc(this._clientRect,s,e)}_getSiblingContainerFromPosition(s,e,n){return this._siblings.find(r=>r._canReceive(s,e,n))}_canReceive(s,e,n){if(!this._clientRect||!Hc(this._clientRect,e,n)||!this.enterPredicate(s,this))return!1;const r=this._getShadowRoot().elementFromPoint(e,n);if(!r)return!1;const o=(0,H.fI)(this.element);return r===o||o.contains(r)}_startReceiving(s,e){const n=this._activeSiblings;!n.has(s)&&e.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(n.add(s),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:s,receiver:this,items:e}))}_stopReceiving(s){this._activeSiblings.delete(s),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:s,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(s=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(s);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const s=(0,ce.kV)((0,H.fI)(this.element));this._cachedShadowRoot=s||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const s=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,s))}}function cm(i,s){const{top:e,bottom:n,height:r}=i,o=.05*r;return s>=e-o&&s<=e+o?1:s>=n-o&&s<=n+o?2:0}function um(i,s){const{left:e,right:n,width:r}=i,o=.05*r;return s>=e-o&&s<=e+o?1:s>=n-o&&s<=n+o?2:0}const ka=(0,ce.i$)({passive:!1,capture:!0});let BD=(()=>{class i{constructor(e,n){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=r=>r.isDragging(),this.pointerMove=new D.Subject,this.pointerUp=new D.Subject,this.scroll=new D.Subject,this._preventDefaultWhileDragging=r=>{this._activeDragInstances.length>0&&r.preventDefault()},this._persistentTouchmoveListener=r=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&r.preventDefault(),this.pointerMove.next(r))},this._document=n}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,ka)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,ka)}startDragging(e,n){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const r=n.type.startsWith("touch");this._globalListeners.set(r?"touchend":"mouseup",{handler:o=>this.pointerUp.next(o),options:!0}).set("scroll",{handler:o=>this.scroll.next(o),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:ka}),r||this._globalListeners.set("mousemove",{handler:o=>this.pointerMove.next(o),options:ka}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((o,a)=>{this._document.addEventListener(a,o.handler,o.options)})})}}stopDragging(e){const n=this._activeDragInstances.indexOf(e);n>-1&&(this._activeDragInstances.splice(n,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){const n=[this.scroll];return e&&e!==this._document&&n.push(new D.Observable(r=>this._ngZone.runOutsideAngular(()=>{const a=l=>{this._activeDragInstances.length&&r.next(l)};return e.addEventListener("scroll",a,!0),()=>{e.removeEventListener("scroll",a,!0)}}))),(0,D.merge)(...n)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,n)=>{this._document.removeEventListener(n,e.handler,e.options)}),this._globalListeners.clear()}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(t.NgZone),t.\u0275\u0275inject(I.DOCUMENT))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const kD={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let Kc=(()=>{class i{constructor(e,n,r,o){this._document=e,this._ngZone=n,this._viewportRuler=r,this._dragDropRegistry=o}createDrag(e,n=kD){return new TD(e,n,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new ND(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(I.DOCUMENT),t.\u0275\u0275inject(t.NgZone),t.\u0275\u0275inject(Pt.rL),t.\u0275\u0275inject(BD))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Gc=new t.InjectionToken("CDK_DRAG_PARENT"),Zc=new t.InjectionToken("CdkDragHandle"),dm=new t.InjectionToken("CdkDragPlaceholder"),pm=new t.InjectionToken("CdkDragPreview"),fm=new t.InjectionToken("CDK_DRAG_CONFIG"),mm=new t.InjectionToken("CdkDropList");let hm=(()=>{class i{static#e=this._dragInstances=[];get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=(0,H.Ig)(e),this._dragRef.disabled=this._disabled}constructor(e,n,r,o,a,l,c,u,d,p,f){this.element=e,this.dropContainer=n,this._ngZone=o,this._viewContainerRef=a,this._dir=c,this._changeDetectorRef=d,this._selfHandle=p,this._parentDrag=f,this._destroyed=new D.Subject,this.started=new t.EventEmitter,this.released=new t.EventEmitter,this.ended=new t.EventEmitter,this.entered=new t.EventEmitter,this.exited=new t.EventEmitter,this.dropped=new t.EventEmitter,this.moved=new D.Observable(m=>{const g=this._dragRef.moved.pipe((0,v.map)(h=>({source:this,pointerPosition:h.pointerPosition,event:h.event,delta:h.delta,distance:h.distance}))).subscribe(m);return()=>{g.unsubscribe()}}),this._dragRef=u.createDrag(e,{dragStartThreshold:l&&null!=l.dragStartThreshold?l.dragStartThreshold:5,pointerDirectionChangeThreshold:l&&null!=l.pointerDirectionChangeThreshold?l.pointerDirectionChangeThreshold:5,zIndex:l?.zIndex}),this._dragRef.data=this,i._dragInstances.push(this),l&&this._assignDefaults(l),n&&(this._dragRef._withDropContainer(n._dropListRef),n.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,v.take)(1),(0,v.takeUntil)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(e){const n=e.rootElementSelector,r=e.freeDragPosition;n&&!n.firstChange&&this._updateRootElement(),r&&!r.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const e=i._dragInstances.indexOf(this);e>-1&&i._dragInstances.splice(e,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const e=this.element.nativeElement;let n=e;this.rootElementSelector&&(n=void 0!==e.closest?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(n||e)}_getBoundaryElement(){const e=this.boundaryElement;return e?"string"==typeof e?this.element.nativeElement.closest(e):(0,H.fI)(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){const n=this._dir,r=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,a=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.dragStartDelay="object"==typeof r&&r?r:(0,H.su)(r),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(a).withPreviewContainer(this.previewContainer||"global"),n&&e.withDirection(n.value)}}),e.beforeStarted.pipe((0,v.take)(1)).subscribe(()=>{if(this._parentDrag)return void e.withParent(this._parentDrag._dragRef);let n=this.element.nativeElement.parentElement;for(;n;){if(n.classList.contains("cdk-drag")){e.withParent(i._dragInstances.find(r=>r.element.nativeElement===n)?._dragRef||null);break}n=n.parentElement}})}_handleEvents(e){e.started.subscribe(n=>{this.started.emit({source:this,event:n.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(n=>{this.released.emit({source:this,event:n.event})}),e.ended.subscribe(n=>{this.ended.emit({source:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(n=>{this.entered.emit({container:n.container.data,item:this,currentIndex:n.currentIndex})}),e.exited.subscribe(n=>{this.exited.emit({container:n.container.data,item:this})}),e.dropped.subscribe(n=>{this.dropped.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,previousContainer:n.previousContainer.data,container:n.container.data,isPointerOverContainer:n.isPointerOverContainer,item:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event})})}_assignDefaults(e){const{lockAxis:n,dragStartDelay:r,constrainPosition:o,previewClass:a,boundaryElement:l,draggingDisabled:c,rootElementSelector:u,previewContainer:d}=e;this.disabled=c??!1,this.dragStartDelay=r||0,n&&(this.lockAxis=n),o&&(this.constrainPosition=o),a&&(this.previewClass=a),l&&(this.boundaryElement=l),u&&(this.rootElementSelector=u),d&&(this.previewContainer=d)}_setupHandlesListener(){this._handles.changes.pipe((0,v.startWith)(this._handles),(0,v.tap)(e=>{const n=e.filter(r=>r._parentDrag===this).map(r=>r.element);this._selfHandle&&this.rootElementSelector&&n.push(this.element),this._dragRef.withHandles(n)}),(0,v.switchMap)(e=>(0,D.merge)(...e.map(n=>n._stateChanges.pipe((0,v.startWith)(n))))),(0,v.takeUntil)(this._destroyed)).subscribe(e=>{const n=this._dragRef,r=e.element.nativeElement;e.disabled?n.disableHandle(r):n.enableHandle(r)})}static#t=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(mm,12),t.\u0275\u0275directiveInject(I.DOCUMENT),t.\u0275\u0275directiveInject(t.NgZone),t.\u0275\u0275directiveInject(t.ViewContainerRef),t.\u0275\u0275directiveInject(fm,8),t.\u0275\u0275directiveInject(Gf.Is,8),t.\u0275\u0275directiveInject(Kc),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(Zc,10),t.\u0275\u0275directiveInject(Gc,12))};static#n=this.\u0275dir=t.\u0275\u0275defineDirective({type:i,selectors:[["","cdkDrag",""]],contentQueries:function(n,r,o){if(1&n&&(t.\u0275\u0275contentQuery(o,pm,5),t.\u0275\u0275contentQuery(o,dm,5),t.\u0275\u0275contentQuery(o,Zc,5)),2&n){let a;t.\u0275\u0275queryRefresh(a=t.\u0275\u0275loadQuery())&&(r._previewTemplate=a.first),t.\u0275\u0275queryRefresh(a=t.\u0275\u0275loadQuery())&&(r._placeholderTemplate=a.first),t.\u0275\u0275queryRefresh(a=t.\u0275\u0275loadQuery())&&(r._handles=a)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(n,r){2&n&&t.\u0275\u0275classProp("cdk-drag-disabled",r.disabled)("cdk-drag-dragging",r._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[t.\u0275\u0275ProvidersFeature([{provide:Gc,useExisting:i}]),t.\u0275\u0275NgOnChangesFeature]})}return i})();const qc=new t.InjectionToken("CdkDropListGroup");let zD=0,gm=(()=>{class i{static#e=this._dropLists=[];get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=(0,H.Ig)(e)}constructor(e,n,r,o,a,l,c){this.element=e,this._changeDetectorRef=r,this._scrollDispatcher=o,this._dir=a,this._group=l,this._destroyed=new D.Subject,this.connectedTo=[],this.id="cdk-drop-list-"+zD++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new t.EventEmitter,this.entered=new t.EventEmitter,this.exited=new t.EventEmitter,this.sorted=new t.EventEmitter,this._unsortedItems=new Set,this._dropListRef=n.createDropList(e),this._dropListRef.data=this,c&&this._assignDefaults(c),this._dropListRef.enterPredicate=(u,d)=>this.enterPredicate(u.data,d.data),this._dropListRef.sortPredicate=(u,d,p)=>this.sortPredicate(u,d.data,p.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),i._dropLists.push(this),l&&l._items.add(this)}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((e,n)=>e._dragRef.getVisibleElement().compareDocumentPosition(n._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const e=i._dropLists.indexOf(this);e>-1&&i._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe((0,v.startWith)(this._dir.value),(0,v.takeUntil)(this._destroyed)).subscribe(n=>e.withDirection(n)),e.beforeStarted.subscribe(()=>{const n=(0,H.Eq)(this.connectedTo).map(r=>"string"==typeof r?i._dropLists.find(a=>a.id===r):r);if(this._group&&this._group._items.forEach(r=>{-1===n.indexOf(r)&&n.push(r)}),!this._scrollableParentsResolved){const r=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(o=>o.getElementRef().nativeElement);this._dropListRef.withScrollableParents(r),this._scrollableParentsResolved=!0}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=(0,H.Ig)(this.sortingDisabled),e.autoScrollDisabled=(0,H.Ig)(this.autoScrollDisabled),e.autoScrollStep=(0,H.su)(this.autoScrollStep,2),e.connectedTo(n.filter(r=>r&&r!==this).map(r=>r._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(n=>{this.entered.emit({container:this,item:n.item.data,currentIndex:n.currentIndex})}),e.exited.subscribe(n=>{this.exited.emit({container:this,item:n.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(n=>{this.sorted.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,container:this,item:n.item.data})}),e.dropped.subscribe(n=>{this.dropped.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,previousContainer:n.previousContainer.data,container:n.container.data,item:n.item.data,isPointerOverContainer:n.isPointerOverContainer,distance:n.distance,dropPoint:n.dropPoint,event:n.event}),this._changeDetectorRef.markForCheck()}),(0,D.merge)(e.receivingStarted,e.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(e){const{lockAxis:n,draggingDisabled:r,sortingDisabled:o,listAutoScrollDisabled:a,listOrientation:l}=e;this.disabled=r??!1,this.sortingDisabled=o??!1,this.autoScrollDisabled=a??!1,this.orientation=l||"vertical",n&&(this.lockAxis=n)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(e=>e._dragRef))}static#t=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(Kc),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(Pt.mF),t.\u0275\u0275directiveInject(Gf.Is,8),t.\u0275\u0275directiveInject(qc,12),t.\u0275\u0275directiveInject(fm,8))};static#n=this.\u0275dir=t.\u0275\u0275defineDirective({type:i,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(n,r){2&n&&(t.\u0275\u0275attribute("id",r.id),t.\u0275\u0275classProp("cdk-drop-list-disabled",r.disabled)("cdk-drop-list-dragging",r._dropListRef.isDragging())("cdk-drop-list-receiving",r._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[t.\u0275\u0275ProvidersFeature([{provide:qc,useValue:void 0},{provide:mm,useExisting:i}])]})}return i})(),vm=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({providers:[Kc],imports:[Pt.ZD]})}return i})();function yr(){return yr=Object.assign?Object.assign.bind():function(i){for(var s=1;s<arguments.length;s++){var e=arguments[s];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},yr.apply(this,arguments)}var _m={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null},Le=function(s){if(s)throw new Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(_m)};yr(Le,_m,{MATRIX_OPTIONS:["Matrix","Array"],NUMBER_OPTIONS:["number","BigNumber","Fraction"]});var bm,br,Uo=9e15,Ur=1e9,Yc="0123456789abcdef",ja="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Pa="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Xc={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Uo,maxE:Uo,crypto:!1},Bt=!0,Va="[DecimalError] ",$r=Va+"Invalid argument: ",Cm=Va+"Precision limit exceeded",Sm=Va+"crypto unavailable",Mm="[object Decimal]",si=Math.floor,Kn=Math.pow,WD=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,KD=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,GD=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,wm=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Vi=1e7,Et=7,qD=ja.length-1,eu=Pa.length-1,Ve={toStringTag:Mm};function ei(i){var s,e,n,r=i.length-1,o="",a=i[0];if(r>0){for(o+=a,s=1;s<r;s++)(e=Et-(n=i[s]+"").length)&&(o+=zr(e)),o+=n;(e=Et-(n=(a=i[s])+"").length)&&(o+=zr(e))}else if(0===a)return"0";for(;a%10==0;)a/=10;return o+a}function gi(i,s,e){if(i!==~~i||i<s||i>e)throw Error($r+i)}function Ks(i,s,e,n){var r,o,a,l;for(o=i[0];o>=10;o/=10)--s;return--s<0?(s+=Et,r=0):(r=Math.ceil((s+1)/Et),s%=Et),o=Kn(10,Et-s),l=i[r]%o|0,null==n?s<3?(0==s?l=l/100|0:1==s&&(l=l/10|0),a=e<4&&99999==l||e>3&&49999==l||5e4==l||0==l):a=(e<4&&l+1==o||e>3&&l+1==o/2)&&(i[r+1]/o/100|0)==Kn(10,s-2)-1||(l==o/2||0==l)&&0==(i[r+1]/o/100|0):s<4?(0==s?l=l/1e3|0:1==s?l=l/100|0:2==s&&(l=l/10|0),a=(n||e<4)&&9999==l||!n&&e>3&&4999==l):a=((n||e<4)&&l+1==o||!n&&e>3&&l+1==o/2)&&(i[r+1]/o/1e3|0)==Kn(10,s-3)-1,a}function Ua(i,s,e){for(var n,o,r=[0],a=0,l=i.length;a<l;){for(o=r.length;o--;)r[o]*=s;for(r[0]+=Yc.indexOf(i.charAt(a++)),n=0;n<r.length;n++)r[n]>e-1&&(void 0===r[n+1]&&(r[n+1]=0),r[n+1]+=r[n]/e|0,r[n]%=e)}return r.reverse()}Ve.absoluteValue=Ve.abs=function(){var i=new this.constructor(this);return i.s<0&&(i.s=1),St(i)},Ve.ceil=function(){return St(new this.constructor(this),this.e+1,2)},Ve.clampedTo=Ve.clamp=function(i,s){var n=this,r=n.constructor;if(i=new r(i),s=new r(s),!i.s||!s.s)return new r(NaN);if(i.gt(s))throw Error($r+s);return n.cmp(i)<0?i:n.cmp(s)>0?s:new r(n)},Ve.comparedTo=Ve.cmp=function(i){var s,e,n,r,o=this,a=o.d,l=(i=new o.constructor(i)).d,c=o.s,u=i.s;if(!a||!l)return c&&u?c!==u?c:a===l?0:!a^c<0?1:-1:NaN;if(!a[0]||!l[0])return a[0]?c:l[0]?-u:0;if(c!==u)return c;if(o.e!==i.e)return o.e>i.e^c<0?1:-1;for(s=0,e=(n=a.length)<(r=l.length)?n:r;s<e;++s)if(a[s]!==l[s])return a[s]>l[s]^c<0?1:-1;return n===r?0:n>r^c<0?1:-1},Ve.cosine=Ve.cos=function(){var i,s,e=this,n=e.constructor;return e.d?e.d[0]?(s=n.rounding,n.precision=(i=n.precision)+Math.max(e.e,e.sd())+Et,n.rounding=1,e=function QD(i,s){var e,n,r;if(s.isZero())return s;(n=s.d.length)<32?r=(1/Ha(4,e=Math.ceil(n/3))).toString():(e=16,r="2.3283064365386962890625e-10"),i.precision+=e,s=$o(i,1,s.times(r),new i(1));for(var o=e;o--;){var a=s.times(s);s=a.times(a).minus(a).times(8).plus(1)}return i.precision-=e,s}(n,Am(n,e)),n.precision=i,n.rounding=s,St(2==br||3==br?e.neg():e,i,s,!0)):new n(1):new n(NaN)},Ve.cubeRoot=Ve.cbrt=function(){var i,s,e,n,r,o,a,l,c,u,d=this,p=d.constructor;if(!d.isFinite()||d.isZero())return new p(d);for(Bt=!1,(o=d.s*Kn(d.s*d,1/3))&&Math.abs(o)!=1/0?n=new p(o.toString()):(e=ei(d.d),(o=((i=d.e)-e.length+1)%3)&&(e+=1==o||-2==o?"0":"00"),o=Kn(e,1/3),i=si((i+1)/3)-(i%3==(i<0?-1:2)),(n=new p(e=o==1/0?"5e"+i:(e=o.toExponential()).slice(0,e.indexOf("e")+1)+i)).s=d.s),a=(i=p.precision)+3;;)if(u=(c=(l=n).times(l).times(l)).plus(d),n=Dn(u.plus(d).times(l),u.plus(c),a+2,1),ei(l.d).slice(0,a)===(e=ei(n.d)).slice(0,a)){if("9999"!=(e=e.slice(a-3,a+1))&&(r||"4999"!=e)){(!+e||!+e.slice(1)&&"5"==e.charAt(0))&&(St(n,i+1,1),s=!n.times(n).times(n).eq(d));break}if(!r&&(St(l,i+1,0),l.times(l).times(l).eq(d))){n=l;break}a+=4,r=1}return Bt=!0,St(n,i,p.rounding,s)},Ve.decimalPlaces=Ve.dp=function(){var i,s=this.d,e=NaN;if(s){if(e=((i=s.length-1)-si(this.e/Et))*Et,i=s[i])for(;i%10==0;i/=10)e--;e<0&&(e=0)}return e},Ve.dividedBy=Ve.div=function(i){return Dn(this,new this.constructor(i))},Ve.dividedToIntegerBy=Ve.divToInt=function(i){var e=this.constructor;return St(Dn(this,new e(i),0,1,1),e.precision,e.rounding)},Ve.equals=Ve.eq=function(i){return 0===this.cmp(i)},Ve.floor=function(){return St(new this.constructor(this),this.e+1,3)},Ve.greaterThan=Ve.gt=function(i){return this.cmp(i)>0},Ve.greaterThanOrEqualTo=Ve.gte=function(i){var s=this.cmp(i);return 1==s||0===s},Ve.hyperbolicCosine=Ve.cosh=function(){var i,s,e,n,r,o=this,a=o.constructor,l=new a(1);if(!o.isFinite())return new a(o.s?1/0:NaN);if(o.isZero())return l;n=a.rounding,a.precision=(e=a.precision)+Math.max(o.e,o.sd())+4,a.rounding=1,(r=o.d.length)<32?s=(1/Ha(4,i=Math.ceil(r/3))).toString():(i=16,s="2.3283064365386962890625e-10"),o=$o(a,1,o.times(s),new a(1),!0);for(var c,u=i,d=new a(8);u--;)c=o.times(o),o=l.minus(c.times(d.minus(c.times(d))));return St(o,a.precision=e,a.rounding=n,!0)},Ve.hyperbolicSine=Ve.sinh=function(){var i,s,e,n,r=this,o=r.constructor;if(!r.isFinite()||r.isZero())return new o(r);if(e=o.rounding,o.precision=(s=o.precision)+Math.max(r.e,r.sd())+4,o.rounding=1,(n=r.d.length)<3)r=$o(o,2,r,r,!0);else{i=1.4*Math.sqrt(n),r=$o(o,2,r=r.times(1/Ha(5,i=i>16?16:0|i)),r,!0);for(var a,l=new o(5),c=new o(16),u=new o(20);i--;)a=r.times(r),r=r.times(l.plus(a.times(c.times(a).plus(u))))}return o.precision=s,o.rounding=e,St(r,s,e,!0)},Ve.hyperbolicTangent=Ve.tanh=function(){var i,s,e=this,n=e.constructor;return e.isFinite()?e.isZero()?new n(e):(s=n.rounding,n.precision=(i=n.precision)+7,n.rounding=1,Dn(e.sinh(),e.cosh(),n.precision=i,n.rounding=s)):new n(e.s)},Ve.inverseCosine=Ve.acos=function(){var i,s=this,e=s.constructor,n=s.abs().cmp(1),r=e.precision,o=e.rounding;return-1!==n?0===n?s.isNeg()?Ui(e,r,o):new e(0):new e(NaN):s.isZero()?Ui(e,r+4,o).times(.5):(e.precision=r+6,e.rounding=1,s=s.asin(),i=Ui(e,r+4,o).times(.5),e.precision=r,e.rounding=o,i.minus(s))},Ve.inverseHyperbolicCosine=Ve.acosh=function(){var i,s,e=this,n=e.constructor;return e.lte(1)?new n(e.eq(1)?0:NaN):e.isFinite()?(s=n.rounding,n.precision=(i=n.precision)+Math.max(Math.abs(e.e),e.sd())+4,n.rounding=1,Bt=!1,e=e.times(e).minus(1).sqrt().plus(e),Bt=!0,n.precision=i,n.rounding=s,e.ln()):new n(e)},Ve.inverseHyperbolicSine=Ve.asinh=function(){var i,s,e=this,n=e.constructor;return!e.isFinite()||e.isZero()?new n(e):(s=n.rounding,n.precision=(i=n.precision)+2*Math.max(Math.abs(e.e),e.sd())+6,n.rounding=1,Bt=!1,e=e.times(e).plus(1).sqrt().plus(e),Bt=!0,n.precision=i,n.rounding=s,e.ln())},Ve.inverseHyperbolicTangent=Ve.atanh=function(){var i,s,e,n,r=this,o=r.constructor;return r.isFinite()?r.e>=0?new o(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(i=o.precision,s=o.rounding,n=r.sd(),Math.max(n,i)<2*-r.e-1?St(new o(r),i,s,!0):(o.precision=e=n-r.e,r=Dn(r.plus(1),new o(1).minus(r),e+i,1),o.precision=i+4,o.rounding=1,r=r.ln(),o.precision=i,o.rounding=s,r.times(.5))):new o(NaN)},Ve.inverseSine=Ve.asin=function(){var i,s,e,n,r=this,o=r.constructor;return r.isZero()?new o(r):(s=r.abs().cmp(1),e=o.precision,n=o.rounding,-1!==s?0===s?((i=Ui(o,e+4,n).times(.5)).s=r.s,i):new o(NaN):(o.precision=e+6,o.rounding=1,r=r.div(new o(1).minus(r.times(r)).sqrt().plus(1)).atan(),o.precision=e,o.rounding=n,r.times(2)))},Ve.inverseTangent=Ve.atan=function(){var i,s,e,n,r,o,a,l,c,u=this,d=u.constructor,p=d.precision,f=d.rounding;if(u.isFinite()){if(u.isZero())return new d(u);if(u.abs().eq(1)&&p+4<=eu)return(a=Ui(d,p+4,f).times(.25)).s=u.s,a}else{if(!u.s)return new d(NaN);if(p+4<=eu)return(a=Ui(d,p+4,f).times(.5)).s=u.s,a}for(d.precision=l=p+10,d.rounding=1,i=e=Math.min(28,l/Et+2|0);i;--i)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(Bt=!1,s=Math.ceil(l/Et),n=1,c=u.times(u),a=new d(u),r=u;-1!==i;)if(r=r.times(c),o=a.minus(r.div(n+=2)),r=r.times(c),void 0!==(a=o.plus(r.div(n+=2))).d[s])for(i=s;a.d[i]===o.d[i]&&i--;);return e&&(a=a.times(2<<e-1)),Bt=!0,St(a,d.precision=p,d.rounding=f,!0)},Ve.isFinite=function(){return!!this.d},Ve.isInteger=Ve.isInt=function(){return!!this.d&&si(this.e/Et)>this.d.length-2},Ve.isNaN=function(){return!this.s},Ve.isNegative=Ve.isNeg=function(){return this.s<0},Ve.isPositive=Ve.isPos=function(){return this.s>0},Ve.isZero=function(){return!!this.d&&0===this.d[0]},Ve.lessThan=Ve.lt=function(i){return this.cmp(i)<0},Ve.lessThanOrEqualTo=Ve.lte=function(i){return this.cmp(i)<1},Ve.logarithm=Ve.log=function(i){var s,e,n,r,o,a,l,c,u=this,d=u.constructor,p=d.precision,f=d.rounding;if(null==i)i=new d(10),s=!0;else{if(e=(i=new d(i)).d,i.s<0||!e||!e[0]||i.eq(1))return new d(NaN);s=i.eq(10)}if(e=u.d,u.s<0||!e||!e[0]||u.eq(1))return new d(e&&!e[0]?-1/0:1!=u.s?NaN:e?0:1/0);if(s)if(e.length>1)o=!0;else{for(r=e[0];r%10==0;)r/=10;o=1!==r}if(Bt=!1,a=Hr(u,l=p+5),n=s?za(d,l+10):Hr(i,l),Ks((c=Dn(a,n,l,1)).d,r=p,f))do{if(a=Hr(u,l+=10),n=s?za(d,l+10):Hr(i,l),c=Dn(a,n,l,1),!o){+ei(c.d).slice(r+1,r+15)+1==1e14&&(c=St(c,p+1,0));break}}while(Ks(c.d,r+=10,f));return Bt=!0,St(c,p,f)},Ve.minus=Ve.sub=function(i){var s,e,n,r,o,a,l,c,u,d,p,f,m=this,g=m.constructor;if(i=new g(i),!m.d||!i.d)return m.s&&i.s?m.d?i.s=-i.s:i=new g(i.d||m.s!==i.s?m:NaN):i=new g(NaN),i;if(m.s!=i.s)return i.s=-i.s,m.plus(i);if(f=i.d,l=g.precision,c=g.rounding,!(u=m.d)[0]||!f[0]){if(f[0])i.s=-i.s;else{if(!u[0])return new g(3===c?-0:0);i=new g(m)}return Bt?St(i,l,c):i}if(e=si(i.e/Et),d=si(m.e/Et),u=u.slice(),o=d-e){for((p=o<0)?(s=u,o=-o,a=f.length):(s=f,e=d,a=u.length),o>(n=Math.max(Math.ceil(l/Et),a)+2)&&(o=n,s.length=1),s.reverse(),n=o;n--;)s.push(0);s.reverse()}else{for((p=(n=u.length)<(a=f.length))&&(a=n),n=0;n<a;n++)if(u[n]!=f[n]){p=u[n]<f[n];break}o=0}for(p&&(s=u,u=f,f=s,i.s=-i.s),n=f.length-(a=u.length);n>0;--n)u[a++]=0;for(n=f.length;n>o;){if(u[--n]<f[n]){for(r=n;r&&0===u[--r];)u[r]=Vi-1;--u[r],u[n]+=Vi}u[n]-=f[n]}for(;0===u[--a];)u.pop();for(;0===u[0];u.shift())--e;return u[0]?(i.d=u,i.e=$a(u,e),Bt?St(i,l,c):i):new g(3===c?-0:0)},Ve.modulo=Ve.mod=function(i){var s,e=this,n=e.constructor;return i=new n(i),!e.d||!i.s||i.d&&!i.d[0]?new n(NaN):!i.d||e.d&&!e.d[0]?St(new n(e),n.precision,n.rounding):(Bt=!1,9==n.modulo?(s=Dn(e,i.abs(),0,3,1)).s*=i.s:s=Dn(e,i,0,n.modulo,1),s=s.times(i),Bt=!0,e.minus(s))},Ve.naturalExponential=Ve.exp=function(){return tu(this)},Ve.naturalLogarithm=Ve.ln=function(){return Hr(this)},Ve.negated=Ve.neg=function(){var i=new this.constructor(this);return i.s=-i.s,St(i)},Ve.plus=Ve.add=function(i){var s,e,n,r,o,a,l,c,u,d,p=this,f=p.constructor;if(i=new f(i),!p.d||!i.d)return p.s&&i.s?p.d||(i=new f(i.d||p.s===i.s?p:NaN)):i=new f(NaN),i;if(p.s!=i.s)return i.s=-i.s,p.minus(i);if(d=i.d,l=f.precision,c=f.rounding,!(u=p.d)[0]||!d[0])return d[0]||(i=new f(p)),Bt?St(i,l,c):i;if(o=si(p.e/Et),n=si(i.e/Et),u=u.slice(),r=o-n){for(r<0?(e=u,r=-r,a=d.length):(e=d,n=o,a=u.length),r>(a=(o=Math.ceil(l/Et))>a?o+1:a+1)&&(r=a,e.length=1),e.reverse();r--;)e.push(0);e.reverse()}for((a=u.length)-(r=d.length)<0&&(r=a,e=d,d=u,u=e),s=0;r;)s=(u[--r]=u[r]+d[r]+s)/Vi|0,u[r]%=Vi;for(s&&(u.unshift(s),++n),a=u.length;0==u[--a];)u.pop();return i.d=u,i.e=$a(u,n),Bt?St(i,l,c):i},Ve.precision=Ve.sd=function(i){var s,e=this;if(void 0!==i&&i!==!!i&&1!==i&&0!==i)throw Error($r+i);return e.d?(s=Dm(e.d),i&&e.e+1>s&&(s=e.e+1)):s=NaN,s},Ve.round=function(){var i=this,s=i.constructor;return St(new s(i),i.e+1,s.rounding)},Ve.sine=Ve.sin=function(){var i,s,e=this,n=e.constructor;return e.isFinite()?e.isZero()?new n(e):(s=n.rounding,n.precision=(i=n.precision)+Math.max(e.e,e.sd())+Et,n.rounding=1,e=function YD(i,s){var e,n=s.d.length;if(n<3)return s.isZero()?s:$o(i,2,s,s);e=1.4*Math.sqrt(n),s=$o(i,2,s=s.times(1/Ha(5,e=e>16?16:0|e)),s);for(var r,o=new i(5),a=new i(16),l=new i(20);e--;)r=s.times(s),s=s.times(o.plus(r.times(a.times(r).minus(l))));return s}(n,Am(n,e)),n.precision=i,n.rounding=s,St(br>2?e.neg():e,i,s,!0)):new n(NaN)},Ve.squareRoot=Ve.sqrt=function(){var i,s,e,n,r,o,a=this,l=a.d,c=a.e,u=a.s,d=a.constructor;if(1!==u||!l||!l[0])return new d(!u||u<0&&(!l||l[0])?NaN:l?a:1/0);for(Bt=!1,0==(u=Math.sqrt(+a))||u==1/0?(((s=ei(l)).length+c)%2==0&&(s+="0"),u=Math.sqrt(s),c=si((c+1)/2)-(c<0||c%2),n=new d(s=u==1/0?"5e"+c:(s=u.toExponential()).slice(0,s.indexOf("e")+1)+c)):n=new d(u.toString()),e=(c=d.precision)+3;;)if(n=(o=n).plus(Dn(a,o,e+2,1)).times(.5),ei(o.d).slice(0,e)===(s=ei(n.d)).slice(0,e)){if("9999"!=(s=s.slice(e-3,e+1))&&(r||"4999"!=s)){(!+s||!+s.slice(1)&&"5"==s.charAt(0))&&(St(n,c+1,1),i=!n.times(n).eq(a));break}if(!r&&(St(o,c+1,0),o.times(o).eq(a))){n=o;break}e+=4,r=1}return Bt=!0,St(n,c,d.rounding,i)},Ve.tangent=Ve.tan=function(){var i,s,e=this,n=e.constructor;return e.isFinite()?e.isZero()?new n(e):(s=n.rounding,n.precision=(i=n.precision)+10,n.rounding=1,(e=e.sin()).s=1,e=Dn(e,new n(1).minus(e.times(e)).sqrt(),i+10,0),n.precision=i,n.rounding=s,St(2==br||4==br?e.neg():e,i,s,!0)):new n(NaN)},Ve.times=Ve.mul=function(i){var s,e,n,r,o,a,l,c,u,d=this,p=d.constructor,f=d.d,m=(i=new p(i)).d;if(i.s*=d.s,!(f&&f[0]&&m&&m[0]))return new p(!i.s||f&&!f[0]&&!m||m&&!m[0]&&!f?NaN:f&&m?0*i.s:i.s/0);for(e=si(d.e/Et)+si(i.e/Et),(c=f.length)<(u=m.length)&&(o=f,f=m,m=o,a=c,c=u,u=a),o=[],n=a=c+u;n--;)o.push(0);for(n=u;--n>=0;){for(s=0,r=c+n;r>n;)l=o[r]+m[n]*f[r-n-1]+s,o[r--]=l%Vi|0,s=l/Vi|0;o[r]=(o[r]+s)%Vi|0}for(;!o[--a];)o.pop();return s?++e:o.shift(),i.d=o,i.e=$a(o,e),Bt?St(i,p.precision,p.rounding):i},Ve.toBinary=function(i,s){return iu(this,2,i,s)},Ve.toDecimalPlaces=Ve.toDP=function(i,s){var e=this,n=e.constructor;return e=new n(e),void 0===i?e:(gi(i,0,Ur),void 0===s?s=n.rounding:gi(s,0,8),St(e,i+e.e+1,s))},Ve.toExponential=function(i,s){var e,n=this,r=n.constructor;return void 0===i?e=ir(n,!0):(gi(i,0,Ur),void 0===s?s=r.rounding:gi(s,0,8),e=ir(n=St(new r(n),i+1,s),!0,i+1)),n.isNeg()&&!n.isZero()?"-"+e:e},Ve.toFixed=function(i,s){var e,n,r=this,o=r.constructor;return void 0===i?e=ir(r):(gi(i,0,Ur),void 0===s?s=o.rounding:gi(s,0,8),e=ir(n=St(new o(r),i+r.e+1,s),!1,i+n.e+1)),r.isNeg()&&!r.isZero()?"-"+e:e},Ve.toFraction=function(i){var s,e,n,r,o,a,l,c,u,d,p,f,m=this,g=m.d,h=m.constructor;if(!g)return new h(m);if(u=e=new h(1),n=c=new h(0),o=(s=new h(n)).e=Dm(g)-m.e-1,s.d[0]=Kn(10,(a=o%Et)<0?Et+a:a),null==i)i=o>0?s:u;else{if(!(l=new h(i)).isInt()||l.lt(u))throw Error($r+l);i=l.gt(s)?o>0?s:u:l}for(Bt=!1,l=new h(ei(g)),d=h.precision,h.precision=o=g.length*Et*2;p=Dn(l,s,0,1,1),1!=(r=e.plus(p.times(n))).cmp(i);)e=n,n=r,u=c.plus(p.times(r=u)),c=r,s=l.minus(p.times(r=s)),l=r;return r=Dn(i.minus(e),n,0,1,1),c=c.plus(r.times(u)),e=e.plus(r.times(n)),c.s=u.s=m.s,f=Dn(u,n,o,1).minus(m).abs().cmp(Dn(c,e,o,1).minus(m).abs())<1?[u,n]:[c,e],h.precision=d,Bt=!0,f},Ve.toHexadecimal=Ve.toHex=function(i,s){return iu(this,16,i,s)},Ve.toNearest=function(i,s){var e=this,n=e.constructor;if(e=new n(e),null==i){if(!e.d)return e;i=new n(1),s=n.rounding}else{if(i=new n(i),void 0===s?s=n.rounding:gi(s,0,8),!e.d)return i.s?e:i;if(!i.d)return i.s&&(i.s=e.s),i}return i.d[0]?(Bt=!1,e=Dn(e,i,0,s,1).times(i),Bt=!0,St(e)):(i.s=e.s,e=i),e},Ve.toNumber=function(){return+this},Ve.toOctal=function(i,s){return iu(this,8,i,s)},Ve.toPower=Ve.pow=function(i){var s,e,n,r,o,a,l=this,c=l.constructor,u=+(i=new c(i));if(!(l.d&&i.d&&l.d[0]&&i.d[0]))return new c(Kn(+l,u));if((l=new c(l)).eq(1))return l;if(n=c.precision,o=c.rounding,i.eq(1))return St(l,n,o);if((s=si(i.e/Et))>=i.d.length-1&&(e=u<0?-u:u)<=9007199254740991)return r=xm(c,l,e,n),i.s<0?new c(1).div(r):St(r,n,o);if((a=l.s)<0){if(s<i.d.length-1)return new c(NaN);if(1&i.d[s]||(a=1),0==l.e&&1==l.d[0]&&1==l.d.length)return l.s=a,l}return(s=0!=(e=Kn(+l,u))&&isFinite(e)?new c(e+"").e:si(u*(Math.log("0."+ei(l.d))/Math.LN10+l.e+1)))>c.maxE+1||s<c.minE-1?new c(s>0?a/0:0):(Bt=!1,c.rounding=l.s=1,e=Math.min(12,(s+"").length),(r=tu(i.times(Hr(l,n+e)),n)).d&&Ks((r=St(r,n+5,1)).d,n,o)&&+ei((r=St(tu(i.times(Hr(l,(s=n+10)+e)),s),s+5,1)).d).slice(n+1,n+15)+1==1e14&&(r=St(r,n+1,0)),r.s=a,Bt=!0,c.rounding=o,St(r,n,o))},Ve.toPrecision=function(i,s){var e,n=this,r=n.constructor;return void 0===i?e=ir(n,n.e<=r.toExpNeg||n.e>=r.toExpPos):(gi(i,1,Ur),void 0===s?s=r.rounding:gi(s,0,8),e=ir(n=St(new r(n),i,s),i<=n.e||n.e<=r.toExpNeg,i)),n.isNeg()&&!n.isZero()?"-"+e:e},Ve.toSignificantDigits=Ve.toSD=function(i,s){var n=this.constructor;return void 0===i?(i=n.precision,s=n.rounding):(gi(i,1,Ur),void 0===s?s=n.rounding:gi(s,0,8)),St(new n(this),i,s)},Ve.toString=function(){var i=this,s=i.constructor,e=ir(i,i.e<=s.toExpNeg||i.e>=s.toExpPos);return i.isNeg()&&!i.isZero()?"-"+e:e},Ve.truncated=Ve.trunc=function(){return St(new this.constructor(this),this.e+1,1)},Ve.valueOf=Ve.toJSON=function(){var i=this,s=i.constructor,e=ir(i,i.e<=s.toExpNeg||i.e>=s.toExpPos);return i.isNeg()?"-"+e:e};var Dn=function(){function i(n,r,o){var a,l=0,c=n.length;for(n=n.slice();c--;)n[c]=(a=n[c]*r+l)%o|0,l=a/o|0;return l&&n.unshift(l),n}function s(n,r,o,a){var l,c;if(o!=a)c=o>a?1:-1;else for(l=c=0;l<o;l++)if(n[l]!=r[l]){c=n[l]>r[l]?1:-1;break}return c}function e(n,r,o,a){for(var l=0;o--;)n[o]-=l,n[o]=(l=n[o]<r[o]?1:0)*a+n[o]-r[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,r,o,a,l,c){var u,d,p,f,m,g,h,_,b,M,y,w,x,C,T,O,N,E,k,P,K=n.constructor,J=n.s==r.s?1:-1,X=n.d,Q=r.d;if(!(X&&X[0]&&Q&&Q[0]))return new K(n.s&&r.s&&(X?!Q||X[0]!=Q[0]:Q)?X&&0==X[0]||!Q?0*J:J/0:NaN);for(c?(m=1,d=n.e-r.e):(c=Vi,d=si(n.e/(m=Et))-si(r.e/m)),k=Q.length,N=X.length,M=(b=new K(J)).d=[],p=0;Q[p]==(X[p]||0);p++);if(Q[p]>(X[p]||0)&&d--,null==o?(C=o=K.precision,a=K.rounding):C=l?o+(n.e-r.e)+1:o,C<0)M.push(1),g=!0;else{if(C=C/m+2|0,p=0,1==k){for(f=0,Q=Q[0],C++;(p<N||f)&&C--;p++)M[p]=(T=f*c+(X[p]||0))/Q|0,f=T%Q|0;g=f||p<N}else{for((f=c/(Q[0]+1)|0)>1&&(Q=i(Q,f,c),X=i(X,f,c),k=Q.length,N=X.length),O=k,w=(y=X.slice(0,k)).length;w<k;)y[w++]=0;(P=Q.slice()).unshift(0),E=Q[0],Q[1]>=c/2&&++E;do{f=0,(u=s(Q,y,k,w))<0?(x=y[0],k!=w&&(x=x*c+(y[1]||0)),(f=x/E|0)>1?(f>=c&&(f=c-1),1==(u=s(h=i(Q,f,c),y,_=h.length,w=y.length))&&(f--,e(h,k<_?P:Q,_,c))):(0==f&&(u=f=1),h=Q.slice()),(_=h.length)<w&&h.unshift(0),e(y,h,w,c),-1==u&&(u=s(Q,y,k,w=y.length))<1&&(f++,e(y,k<w?P:Q,w,c)),w=y.length):0===u&&(f++,y=[0]),M[p++]=f,u&&y[0]?y[w++]=X[O]||0:(y=[X[O]],w=1)}while((O++<N||void 0!==y[0])&&C--);g=void 0!==y[0]}M[0]||M.shift()}if(1==m)b.e=d,bm=g;else{for(p=1,f=M[0];f>=10;f/=10)p++;b.e=p+d*m-1,St(b,l?o+b.e+1:o,a,g)}return b}}();function St(i,s,e,n){var r,o,a,l,c,u,d,p,f,m=i.constructor;e:if(null!=s){if(!(p=i.d))return i;for(r=1,l=p[0];l>=10;l/=10)r++;if((o=s-r)<0)o+=Et,c=(d=p[f=0])/Kn(10,r-(a=s)-1)%10|0;else if((f=Math.ceil((o+1)/Et))>=(l=p.length)){if(!n)break e;for(;l++<=f;)p.push(0);d=c=0,r=1,a=(o%=Et)-Et+1}else{for(d=l=p[f],r=1;l>=10;l/=10)r++;c=(a=(o%=Et)-Et+r)<0?0:d/Kn(10,r-a-1)%10|0}if(n=n||s<0||void 0!==p[f+1]||(a<0?d:d%Kn(10,r-a-1)),u=e<4?(c||n)&&(0==e||e==(i.s<0?3:2)):c>5||5==c&&(4==e||n||6==e&&(o>0?a>0?d/Kn(10,r-a):0:p[f-1])%10&1||e==(i.s<0?8:7)),s<1||!p[0])return p.length=0,u?(p[0]=Kn(10,(Et-(s-=i.e+1)%Et)%Et),i.e=-s||0):p[0]=i.e=0,i;if(0==o?(p.length=f,l=1,f--):(p.length=f+1,l=Kn(10,Et-o),p[f]=a>0?(d/Kn(10,r-a)%Kn(10,a)|0)*l:0),u)for(;;){if(0==f){for(o=1,a=p[0];a>=10;a/=10)o++;for(a=p[0]+=l,l=1;a>=10;a/=10)l++;o!=l&&(i.e++,p[0]==Vi&&(p[0]=1));break}if(p[f]+=l,p[f]!=Vi)break;p[f--]=0,l=1}for(o=p.length;0===p[--o];)p.pop()}return Bt&&(i.e>m.maxE?(i.d=null,i.e=NaN):i.e<m.minE&&(i.e=0,i.d=[0])),i}function ir(i,s,e){if(!i.isFinite())return Fm(i);var n,r=i.e,o=ei(i.d),a=o.length;return s?(e&&(n=e-a)>0?o=o.charAt(0)+"."+o.slice(1)+zr(n):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i.e<0?"e":"e+")+i.e):r<0?(o="0."+zr(-r-1)+o,e&&(n=e-a)>0&&(o+=zr(n))):r>=a?(o+=zr(r+1-a),e&&(n=e-r-1)>0&&(o=o+"."+zr(n))):((n=r+1)<a&&(o=o.slice(0,n)+"."+o.slice(n)),e&&(n=e-a)>0&&(r+1===a&&(o+="."),o+=zr(n))),o}function $a(i,s){var e=i[0];for(s*=Et;e>=10;e/=10)s++;return s}function za(i,s,e){if(s>qD)throw Bt=!0,e&&(i.precision=e),Error(Cm);return St(new i(ja),s,1,!0)}function Ui(i,s,e){if(s>eu)throw Error(Cm);return St(new i(Pa),s,e,!0)}function Dm(i){var s=i.length-1,e=s*Et+1;if(s=i[s]){for(;s%10==0;s/=10)e--;for(s=i[0];s>=10;s/=10)e++}return e}function zr(i){for(var s="";i--;)s+="0";return s}function xm(i,s,e,n){var r,o=new i(1),a=Math.ceil(n/Et+4);for(Bt=!1;;){if(e%2&&Tm((o=o.times(s)).d,a)&&(r=!0),0===(e=si(e/2))){e=o.d.length-1,r&&0===o.d[e]&&++o.d[e];break}Tm((s=s.times(s)).d,a)}return Bt=!0,o}function Em(i){return 1&i.d[i.d.length-1]}function Im(i,s,e){for(var n,r=new i(s[0]),o=0;++o<s.length;){if(!(n=new i(s[o])).s){r=n;break}r[e](n)&&(r=n)}return r}function tu(i,s){var e,n,r,o,a,l,c,u=0,d=0,p=0,f=i.constructor,m=f.rounding,g=f.precision;if(!i.d||!i.d[0]||i.e>17)return new f(i.d?i.d[0]?i.s<0?0:1/0:1:i.s?i.s<0?0:i:NaN);for(null==s?(Bt=!1,c=g):c=s,l=new f(.03125);i.e>-2;)i=i.times(l),p+=5;for(c+=n=Math.log(Kn(2,p))/Math.LN10*2+5|0,e=o=a=new f(1),f.precision=c;;){if(o=St(o.times(i),c,1),e=e.times(++d),ei((l=a.plus(Dn(o,e,c,1))).d).slice(0,c)===ei(a.d).slice(0,c)){for(r=p;r--;)a=St(a.times(a),c,1);if(null!=s)return f.precision=g,a;if(!(u<3&&Ks(a.d,c-n,m,u)))return St(a,f.precision=g,m,Bt=!0);f.precision=c+=10,e=o=l=new f(1),d=0,u++}a=l}}function Hr(i,s){var e,n,r,o,a,l,c,u,d,p,f,m=1,h=i,_=h.d,b=h.constructor,M=b.rounding,y=b.precision;if(h.s<0||!_||!_[0]||!h.e&&1==_[0]&&1==_.length)return new b(_&&!_[0]?-1/0:1!=h.s?NaN:_?0:h);if(null==s?(Bt=!1,d=y):d=s,b.precision=d+=10,n=(e=ei(_)).charAt(0),!(Math.abs(o=h.e)<15e14))return u=za(b,d+2,y).times(o+""),h=Hr(new b(n+"."+e.slice(1)),d-10).plus(u),b.precision=y,null==s?St(h,y,M,Bt=!0):h;for(;n<7&&1!=n||1==n&&e.charAt(1)>3;)n=(e=ei((h=h.times(i)).d)).charAt(0),m++;for(o=h.e,n>1?(h=new b("0."+e),o++):h=new b(n+"."+e.slice(1)),p=h,c=a=h=Dn(h.minus(1),h.plus(1),d,1),f=St(h.times(h),d,1),r=3;;){if(a=St(a.times(f),d,1),ei((u=c.plus(Dn(a,new b(r),d,1))).d).slice(0,d)===ei(c.d).slice(0,d)){if(c=c.times(2),0!==o&&(c=c.plus(za(b,d+2,y).times(o+""))),c=Dn(c,new b(m),d,1),null!=s)return b.precision=y,c;if(!Ks(c.d,d-10,M,l))return St(c,b.precision=y,M,Bt=!0);b.precision=d+=10,u=a=h=Dn(p.minus(1),p.plus(1),d,1),f=St(h.times(h),d,1),r=l=1}c=u,r+=2}}function Fm(i){return String(i.s*i.s/0)}function nu(i,s){var e,n,r;for((e=s.indexOf("."))>-1&&(s=s.replace(".","")),(n=s.search(/e/i))>0?(e<0&&(e=n),e+=+s.slice(n+1),s=s.substring(0,n)):e<0&&(e=s.length),n=0;48===s.charCodeAt(n);n++);for(r=s.length;48===s.charCodeAt(r-1);--r);if(s=s.slice(n,r)){if(r-=n,i.e=e=e-n-1,i.d=[],n=(e+1)%Et,e<0&&(n+=Et),n<r){for(n&&i.d.push(+s.slice(0,n)),r-=Et;n<r;)i.d.push(+s.slice(n,n+=Et));s=s.slice(n),n=Et-s.length}else n-=r;for(;n--;)s+="0";i.d.push(+s),Bt&&(i.e>i.constructor.maxE?(i.d=null,i.e=NaN):i.e<i.constructor.minE&&(i.e=0,i.d=[0]))}else i.e=0,i.d=[0];return i}function $o(i,s,e,n,r){var o,a,l,c,d=i.precision,p=Math.ceil(d/Et);for(Bt=!1,c=e.times(e),l=new i(n);;){if(a=Dn(l.times(c),new i(s++*s++),d,1),l=r?n.plus(a):n.minus(a),n=Dn(a.times(c),new i(s++*s++),d,1),void 0!==(a=l.plus(n)).d[p]){for(o=p;a.d[o]===l.d[o]&&o--;);if(-1==o)break}o=l,l=n,n=a,a=o}return Bt=!0,a.d.length=p+1,a}function Ha(i,s){for(var e=i;--s;)e*=i;return e}function Am(i,s){var e,n=s.s<0,r=Ui(i,i.precision,1),o=r.times(.5);if((s=s.abs()).lte(o))return br=n?4:1,s;if((e=s.divToInt(r)).isZero())br=n?3:2;else{if((s=s.minus(e.times(r))).lte(o))return br=Em(e)?n?2:3:n?4:1,s;br=Em(e)?n?1:4:n?3:2}return s.minus(r).abs()}function iu(i,s,e,n){var r,o,a,l,c,u,d,p,f,m=i.constructor,g=void 0!==e;if(g?(gi(e,1,Ur),void 0===n?n=m.rounding:gi(n,0,8)):(e=m.precision,n=m.rounding),i.isFinite()){for(g?(r=2,16==s?e=4*e-3:8==s&&(e=3*e-2)):r=s,(a=(d=ir(i)).indexOf("."))>=0&&(d=d.replace(".",""),(f=new m(1)).e=d.length-a,f.d=Ua(ir(f),10,r),f.e=f.d.length),o=c=(p=Ua(d,10,r)).length;0==p[--c];)p.pop();if(p[0]){if(a<0?o--:((i=new m(i)).d=p,i.e=o,p=(i=Dn(i,f,e,n,0,r)).d,o=i.e,u=bm),a=p[e],l=r/2,u=u||void 0!==p[e+1],u=n<4?(void 0!==a||u)&&(0===n||n===(i.s<0?3:2)):a>l||a===l&&(4===n||u||6===n&&1&p[e-1]||n===(i.s<0?8:7)),p.length=e,u)for(;++p[--e]>r-1;)p[e]=0,e||(++o,p.unshift(1));for(c=p.length;!p[c-1];--c);for(a=0,d="";a<c;a++)d+=Yc.charAt(p[a]);if(g){if(c>1)if(16==s||8==s){for(a=16==s?4:3,--c;c%a;c++)d+="0";for(c=(p=Ua(d,r,s)).length;!p[c-1];--c);for(a=1,d="1.";a<c;a++)d+=Yc.charAt(p[a])}else d=d.charAt(0)+"."+d.slice(1);d=d+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)d="0"+d;d="0."+d}else if(++o>c)for(o-=c;o--;)d+="0";else o<c&&(d=d.slice(0,o)+"."+d.slice(o))}else d=g?"0p+0":"0";d=(16==s?"0x":2==s?"0b":8==s?"0o":"")+d}else d=Fm(i);return i.s<0?"-"+d:d}function Tm(i,s){if(i.length>s)return i.length=s,!0}function XD(i){return new this(i).abs()}function ex(i){return new this(i).acos()}function tx(i){return new this(i).acosh()}function nx(i,s){return new this(i).plus(s)}function ix(i){return new this(i).asin()}function rx(i){return new this(i).asinh()}function ox(i){return new this(i).atan()}function sx(i){return new this(i).atanh()}function ax(i,s){i=new this(i),s=new this(s);var e,n=this.precision,r=this.rounding,o=n+4;return i.s&&s.s?i.d||s.d?!s.d||i.isZero()?(e=s.s<0?Ui(this,n,r):new this(0)).s=i.s:!i.d||s.isZero()?(e=Ui(this,o,1).times(.5)).s=i.s:s.s<0?(this.precision=o,this.rounding=1,e=this.atan(Dn(i,s,o,1)),s=Ui(this,o,1),this.precision=n,this.rounding=r,e=i.s<0?e.minus(s):e.plus(s)):e=this.atan(Dn(i,s,o,1)):(e=Ui(this,o,1).times(s.s>0?.25:.75)).s=i.s:e=new this(NaN),e}function lx(i){return new this(i).cbrt()}function cx(i){return St(i=new this(i),i.e+1,2)}function ux(i,s,e){return new this(i).clamp(s,e)}function dx(i){if(!i||"object"!=typeof i)throw Error(Va+"Object expected");var s,e,n,r=!0===i.defaults,o=["precision",1,Ur,"rounding",0,8,"toExpNeg",-Uo,0,"toExpPos",0,Uo,"maxE",0,Uo,"minE",-Uo,0,"modulo",0,9];for(s=0;s<o.length;s+=3)if(e=o[s],r&&(this[e]=Xc[e]),void 0!==(n=i[e])){if(!(si(n)===n&&n>=o[s+1]&&n<=o[s+2]))throw Error($r+e+": "+n);this[e]=n}if(e="crypto",r&&(this[e]=Xc[e]),void 0!==(n=i[e])){if(!0!==n&&!1!==n&&0!==n&&1!==n)throw Error($r+e+": "+n);if(n){if(!(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes)))throw Error(Sm);this[e]=!0}else this[e]=!1}return this}function px(i){return new this(i).cos()}function fx(i){return new this(i).cosh()}function mx(i,s){return new this(i).div(s)}function hx(i){return new this(i).exp()}function gx(i){return St(i=new this(i),i.e+1,3)}function vx(){var i,s,e=new this(0);for(Bt=!1,i=0;i<arguments.length;)if((s=new this(arguments[i++])).d)e.d&&(e=e.plus(s.times(s)));else{if(s.s)return Bt=!0,new this(1/0);e=s}return Bt=!0,e.sqrt()}function Lm(i){return i instanceof Gs||i&&i.toStringTag===Mm||!1}function _x(i){return new this(i).ln()}function yx(i,s){return new this(i).log(s)}function bx(i){return new this(i).log(2)}function Cx(i){return new this(i).log(10)}function Sx(){return Im(this,arguments,"lt")}function Mx(){return Im(this,arguments,"gt")}function wx(i,s){return new this(i).mod(s)}function Dx(i,s){return new this(i).mul(s)}function xx(i,s){return new this(i).pow(s)}function Ex(i){var s,e,n,r,o=0,a=new this(1),l=[];if(void 0===i?i=this.precision:gi(i,1,Ur),n=Math.ceil(i/Et),this.crypto)if(crypto.getRandomValues)for(s=crypto.getRandomValues(new Uint32Array(n));o<n;)(r=s[o])>=429e7?s[o]=crypto.getRandomValues(new Uint32Array(1))[0]:l[o++]=r%1e7;else{if(!crypto.randomBytes)throw Error(Sm);for(s=crypto.randomBytes(n*=4);o<n;)(r=s[o]+(s[o+1]<<8)+(s[o+2]<<16)+((127&s[o+3])<<24))>=214e7?crypto.randomBytes(4).copy(s,o):(l.push(r%1e7),o+=4);o=n/4}else for(;o<n;)l[o++]=1e7*Math.random()|0;for(n=l[--o],i%=Et,n&&i&&(r=Kn(10,Et-i),l[o]=(n/r|0)*r);0===l[o];o--)l.pop();if(o<0)e=0,l=[0];else{for(e=-1;0===l[0];e-=Et)l.shift();for(n=1,r=l[0];r>=10;r/=10)n++;n<Et&&(e-=Et-n)}return a.e=e,a.d=l,a}function Ix(i){return St(i=new this(i),i.e+1,this.rounding)}function Fx(i){return(i=new this(i)).d?i.d[0]?i.s:0*i.s:i.s||NaN}function Ax(i){return new this(i).sin()}function Tx(i){return new this(i).sinh()}function Ox(i){return new this(i).sqrt()}function Lx(i,s){return new this(i).sub(s)}function Nx(){var i=0,s=arguments,e=new this(s[i]);for(Bt=!1;e.s&&++i<s.length;)e=e.plus(s[i]);return Bt=!0,St(e,this.precision,this.rounding)}function Rx(i){return new this(i).tan()}function Bx(i){return new this(i).tanh()}function kx(i){return St(i=new this(i),i.e+1,1)}Ve[Symbol.for("nodejs.util.inspect.custom")]=Ve.toString,Ve[Symbol.toStringTag]="Decimal";var Gs=Ve.constructor=function Om(i){var s,e,n;function r(o){var a,l,c,u=this;if(!(u instanceof r))return new r(o);if(u.constructor=r,Lm(o))return u.s=o.s,void(Bt?!o.d||o.e>r.maxE?(u.e=NaN,u.d=null):o.e<r.minE?(u.e=0,u.d=[0]):(u.e=o.e,u.d=o.d.slice()):(u.e=o.e,u.d=o.d?o.d.slice():o.d));if("number"==(c=typeof o)){if(0===o)return u.s=1/o<0?-1:1,u.e=0,void(u.d=[0]);if(o<0?(o=-o,u.s=-1):u.s=1,o===~~o&&o<1e7){for(a=0,l=o;l>=10;l/=10)a++;return void(Bt?a>r.maxE?(u.e=NaN,u.d=null):a<r.minE?(u.e=0,u.d=[0]):(u.e=a,u.d=[o]):(u.e=a,u.d=[o]))}return 0*o!=0?(o||(u.s=NaN),u.e=NaN,void(u.d=null)):nu(u,o.toString())}if("string"!==c)throw Error($r+o);return 45===(l=o.charCodeAt(0))?(o=o.slice(1),u.s=-1):(43===l&&(o=o.slice(1)),u.s=1),wm.test(o)?nu(u,o):function JD(i,s){var e,n,r,o,a,l,c,u,d;if(s.indexOf("_")>-1){if(s=s.replace(/(\d)_(?=\d)/g,"$1"),wm.test(s))return nu(i,s)}else if("Infinity"===s||"NaN"===s)return+s||(i.s=NaN),i.e=NaN,i.d=null,i;if(KD.test(s))e=16,s=s.toLowerCase();else if(WD.test(s))e=2;else{if(!GD.test(s))throw Error($r+s);e=8}for((o=s.search(/p/i))>0?(c=+s.slice(o+1),s=s.substring(2,o)):s=s.slice(2),o=s.indexOf("."),n=i.constructor,(a=o>=0)&&(o=(l=(s=s.replace(".","")).length)-o,r=xm(n,new n(e),o,2*o)),o=d=(u=Ua(s,e,Vi)).length-1;0===u[o];--o)u.pop();return o<0?new n(0*i.s):(i.e=$a(u,d),i.d=u,Bt=!1,a&&(i=Dn(i,r,4*l)),c&&(i=i.times(Math.abs(c)<54?Kn(2,c):Gs.pow(2,c))),Bt=!0,i)}(u,o)}if(r.prototype=Ve,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.EUCLID=9,r.config=r.set=dx,r.clone=Om,r.isDecimal=Lm,r.abs=XD,r.acos=ex,r.acosh=tx,r.add=nx,r.asin=ix,r.asinh=rx,r.atan=ox,r.atanh=sx,r.atan2=ax,r.cbrt=lx,r.ceil=cx,r.clamp=ux,r.cos=px,r.cosh=fx,r.div=mx,r.exp=hx,r.floor=gx,r.hypot=vx,r.ln=_x,r.log=yx,r.log10=Cx,r.log2=bx,r.max=Sx,r.min=Mx,r.mod=wx,r.mul=Dx,r.pow=xx,r.random=Ex,r.round=Ix,r.sign=Fx,r.sin=Ax,r.sinh=Tx,r.sqrt=Ox,r.sub=Lx,r.sum=Nx,r.tan=Rx,r.tanh=Bx,r.trunc=kx,void 0===i&&(i={}),i&&!0!==i.defaults)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],s=0;s<n.length;)i.hasOwnProperty(e=n[s++])||(i[e]=this[e]);return r.config(i),r}(Xc);ja=new Gs(ja),Pa=new Gs(Pa);const Wa=Gs;function en(i){return"number"==typeof i}function on(i){return!(!i||"object"!=typeof i||"function"!=typeof i.constructor)&&(!0===i.isBigNumber&&"object"==typeof i.constructor.prototype&&!0===i.constructor.prototype.isBigNumber||"function"==typeof i.constructor.isDecimal&&!0===i.constructor.isDecimal(i))}function Wr(i){return i&&"object"==typeof i&&!0===Object.getPrototypeOf(i).isComplex||!1}function Ka(i){return i&&"object"==typeof i&&!0===Object.getPrototypeOf(i).isFraction||!1}function $i(i){return i&&!0===i.constructor.prototype.isUnit||!1}function di(i){return"string"==typeof i}var pn=Array.isArray;function Ft(i){return i&&!0===i.constructor.prototype.isMatrix||!1}function zo(i){return Array.isArray(i)||Ft(i)}function Ga(i){return i&&i.isDenseMatrix&&!0===i.constructor.prototype.isMatrix||!1}function co(i){return i&&i.isSparseMatrix&&!0===i.constructor.prototype.isMatrix||!1}function Nm(i){return i&&!0===i.constructor.prototype.isRange||!1}function Za(i){return i&&!0===i.constructor.prototype.isIndex||!1}function jx(i){return"boolean"==typeof i}function Px(i){return i&&!0===i.constructor.prototype.isResultSet||!1}function Vx(i){return i&&!0===i.constructor.prototype.isHelp||!1}function Ux(i){return"function"==typeof i}function $x(i){return i instanceof Date}function zx(i){return i instanceof RegExp}function Rm(i){return!(!i||"object"!=typeof i||i.constructor!==Object||Wr(i)||Ka(i))}function Hx(i){return null===i}function Wx(i){return void 0===i}function Kx(i){return i&&!0===i.isAccessorNode&&!0===i.constructor.prototype.isNode||!1}function Gx(i){return i&&!0===i.isArrayNode&&!0===i.constructor.prototype.isNode||!1}function Zx(i){return i&&!0===i.isAssignmentNode&&!0===i.constructor.prototype.isNode||!1}function qx(i){return i&&!0===i.isBlockNode&&!0===i.constructor.prototype.isNode||!1}function Qx(i){return i&&!0===i.isConditionalNode&&!0===i.constructor.prototype.isNode||!1}function ru(i){return i&&!0===i.isConstantNode&&!0===i.constructor.prototype.isNode||!1}function Jx(i){return i&&!0===i.isFunctionAssignmentNode&&!0===i.constructor.prototype.isNode||!1}function Yx(i){return i&&!0===i.isFunctionNode&&!0===i.constructor.prototype.isNode||!1}function Xx(i){return i&&!0===i.isIndexNode&&!0===i.constructor.prototype.isNode||!1}function eE(i){return i&&!0===i.isNode&&!0===i.constructor.prototype.isNode||!1}function tE(i){return i&&!0===i.isObjectNode&&!0===i.constructor.prototype.isNode||!1}function Bm(i){return i&&!0===i.isOperatorNode&&!0===i.constructor.prototype.isNode||!1}function nE(i){return i&&!0===i.isParenthesisNode&&!0===i.constructor.prototype.isNode||!1}function iE(i){return i&&!0===i.isRangeNode&&!0===i.constructor.prototype.isNode||!1}function rE(i){return i&&!0===i.isRelationalNode&&!0===i.constructor.prototype.isNode||!1}function oE(i){return i&&!0===i.isSymbolNode&&!0===i.constructor.prototype.isNode||!1}function sE(i){return i&&!0===i.constructor.prototype.isChain||!1}function kn(i){var s=typeof i;return"object"===s?null===i?"null":on(i)?"BigNumber":i.constructor&&i.constructor.name?i.constructor.name:"Object":s}function At(i){var s=typeof i;if("number"===s||"string"===s||"boolean"===s||null==i)return i;if("function"==typeof i.clone)return i.clone();if(Array.isArray(i))return i.map(function(e){return At(e)});if(i instanceof Date)return new Date(i.valueOf());if(on(i))return i;if(Rm(i))return function aE(i,s){var e={};for(var n in i)gn(i,n)&&(e[n]=s(i[n]));return e}(i,At);throw new TypeError("Cannot clone: unknown type of value (value: ".concat(i,")"))}function Ho(i,s){var e,n,r;if(Array.isArray(i)){if(!Array.isArray(s)||i.length!==s.length)return!1;for(n=0,r=i.length;n<r;n++)if(!Ho(i[n],s[n]))return!1;return!0}if("function"==typeof i)return i===s;if(i instanceof Object){if(Array.isArray(s)||!(s instanceof Object))return!1;for(e in i)if(!(e in s)||!Ho(i[e],s[e]))return!1;for(e in s)if(!(e in i))return!1;return!0}return i===s}function gn(i,s){return i&&Object.hasOwnProperty.call(i,s)}function q(i,s,e,n){function r(o){var a=function uE(i,s){for(var e={},n=0;n<s.length;n++){var r=s[n],o=i[r];void 0!==o&&(e[r]=o)}return e}(o,s.map(mE));return function pE(i,s,e){var n=s.filter(o=>!function fE(i){return i&&"?"===i[0]}(o)).every(o=>void 0!==e[o]);if(!n){var r=s.filter(o=>void 0===e[o]);throw new Error('Cannot create function "'.concat(i,'", ')+"some dependencies are missing: ".concat(r.map(o=>'"'.concat(o,'"')).join(", "),"."))}}(i,s,o),e(a)}return r.isFactory=!0,r.fn=i,r.dependencies=s.slice().sort(),n&&(r.meta=n),r}function mE(i){return i&&"?"===i[0]?i.slice(1):i}var vE=q("BigNumber",["?on","config"],i=>{var{on:s,config:e}=i,n=Wa.clone({precision:e.precision,modulo:Wa.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(r){return new n(r.value)},s&&s("config",function(r,o){r.precision!==o.precision&&n.config({precision:r.precision})}),n},{isClass:!0}),ti=L(1241);function _t(i){return"boolean"==typeof i||!!isFinite(i)&&i===Math.round(i)}Math,Math,Math,Math,Math,Math;function su(i,s,e){var r={2:"0b",8:"0o",16:"0x"}[s],o="";if(e){if(e<1)throw new Error("size must be in greater than 0");if(!_t(e))throw new Error("size must be an integer");if(i>2**(e-1)-1||i<-(2**(e-1)))throw new Error("Value must be in range [-2^".concat(e-1,", 2^").concat(e-1,"-1]"));if(!_t(i))throw new Error("Value must be an integer");i<0&&(i+=2**e),o="i".concat(e)}var a="";return i<0&&(i=-i,a="-"),"".concat(a).concat(r).concat(i.toString(s)).concat(o)}function uo(i,s){if("function"==typeof s)return s(i);if(i===1/0)return"Infinity";if(i===-1/0)return"-Infinity";if(isNaN(i))return"NaN";var n,r,e="auto";if(s&&(s.notation&&(e=s.notation),en(s)?n=s:en(s.precision)&&(n=s.precision),s.wordSize&&"number"!=typeof(r=s.wordSize)))throw new Error('Option "wordSize" must be a number');switch(e){case"fixed":return zm(i,n);case"exponential":return Hm(i,n);case"engineering":return function SE(i,s){if(isNaN(i)||!isFinite(i))return String(i);var n=Qa(qa(i),s),r=n.exponent,o=n.coefficients,a=r%3==0?r:r<0?r-3-r%3:r-r%3;if(en(s))for(;s>o.length||r-a+1>o.length;)o.push(0);else for(var l=Math.abs(r-a)-(o.length-1),c=0;c<l;c++)o.push(0);for(var u=Math.abs(r-a),d=1;u>0;)d++,u--;var p=o.slice(d).join(""),f=en(s)&&p.length||p.match(/[1-9]/)?"."+p:"",m=o.slice(0,d).join("")+f+"e"+(r>=0?"+":"")+a.toString();return n.sign+m}(i,n);case"bin":return su(i,2,r);case"oct":return su(i,8,r);case"hex":return su(i,16,r);case"auto":return function ME(i,s,e){if(isNaN(i)||!isFinite(i))return String(i);var n=e&&void 0!==e.lowerExp?e.lowerExp:-3,r=e&&void 0!==e.upperExp?e.upperExp:5,o=qa(i),a=s?Qa(o,s):o;if(a.exponent<n||a.exponent>=r)return Hm(i,s);var l=a.coefficients,c=a.exponent;l.length<s&&(l=l.concat(Wo(s-l.length))),l=l.concat(Wo(c-l.length+1+(l.length<s?s-l.length:0)));var u=c>0?c:0;return u<(l=Wo(-c).concat(l)).length-1&&l.splice(u+1,0,"."),a.sign+l.join("")}(i,n,s&&s).replace(/((\.\d*?)(0+))($|e)/,function(){var o=arguments[2],a=arguments[4];return"."!==o?o+a:a});default:throw new Error('Unknown notation "'+e+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function qa(i){var s=String(i).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!s)throw new SyntaxError("Invalid number "+i);var e=s[1],n=s[2],r=parseFloat(s[4]||"0"),o=n.indexOf(".");r+=-1!==o?o-1:n.length-1;var a=n.replace(".","").replace(/^0*/,function(l){return r-=l.length,""}).replace(/0*$/,"").split("").map(function(l){return parseInt(l)});return 0===a.length&&(a.push(0),r++),{sign:e,coefficients:a,exponent:r}}function zm(i,s){if(isNaN(i)||!isFinite(i))return String(i);var e=qa(i),n="number"==typeof s?Qa(e,e.exponent+1+s):e,r=n.coefficients,o=n.exponent+1,a=o+(s||0);return r.length<a&&(r=r.concat(Wo(a-r.length))),o<0&&(r=Wo(1-o).concat(r),o=1),o<r.length&&r.splice(o,0,0===o?"0.":"."),n.sign+r.join("")}function Hm(i,s){if(isNaN(i)||!isFinite(i))return String(i);var e=qa(i),n=s?Qa(e,s):e,r=n.coefficients,o=n.exponent;r.length<s&&(r=r.concat(Wo(s-r.length)));var a=r.shift();return n.sign+a+(r.length>0?"."+r.join(""):"")+"e"+(o>=0?"+":"")+o}function Qa(i,s){for(var e={sign:i.sign,coefficients:i.coefficients,exponent:i.exponent},n=e.coefficients;s<=0;)n.unshift(0),e.exponent++,s++;if(n.length>s&&n.splice(s,n.length-s)[0]>=5){var o=s-1;for(n[o]++;10===n[o];)n.pop(),0===o&&(n.unshift(0),e.exponent++,o++),n[--o]++}return e}function Wo(i){for(var s=[],e=0;e<i;e++)s.push(0);return s}var DE=Number.EPSILON||2220446049250313e-31;function Ei(i,s,e){if(null==e)return i===s;if(i===s)return!0;if(isNaN(i)||isNaN(s))return!1;if(isFinite(i)&&isFinite(s)){var n=Math.abs(i-s);return n<DE||n<=Math.max(Math.abs(i),Math.abs(s))*e}return!1}Math,Math,Math,Math,Math;Math;var LE=q("Complex",[],()=>(Object.defineProperty(ti,"name",{value:"Complex"}),ti.prototype.constructor=ti,ti.prototype.type="Complex",ti.prototype.isComplex=!0,ti.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},ti.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},ti.prototype.format=function(i){var e=this.im,n=this.re,r=uo(this.re,i),o=uo(this.im,i),a=en(i)?i:i?i.precision:null;if(null!==a){var l=Math.pow(10,-a);Math.abs(n/e)<l&&(n=0),Math.abs(e/n)<l&&(e=0)}return 0===e?r:0===n?1===e?"i":-1===e?"-i":o+"i":e<0?-1===e?r+" - i":r+" - "+o.substring(1)+"i":1===e?r+" + i":r+" + "+o+"i"},ti.fromPolar=function(i){switch(arguments.length){case 1:var s=arguments[0];if("object"==typeof s)return ti(s);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var e=arguments[0],n=arguments[1];if(en(e)){if($i(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),en(n))return new ti({r:e,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},ti.prototype.valueOf=ti.prototype.toString,ti.fromJSON=function(i){return new ti(i)},ti.compare=function(i,s){return i.re>s.re?1:i.re<s.re?-1:i.im>s.im?1:i.im<s.im?-1:0},ti),{isClass:!0});function RE(i){var s=0,e=1,n=Object.create(null),r=Object.create(null),o=0,a=function(c){var u=r[c];if(u&&(delete n[u],delete r[c],--s,e===u)){if(!s)return o=0,void(e=1);for(;!Object.prototype.hasOwnProperty.call(n,++e););}};return i=Math.abs(i),{hit:function(c){var u=r[c],d=++o;if(n[d]=c,r[c]=d,!u)return++s<=i?void 0:(a(c=n[e]),c);if(delete n[u],e===u)for(;!Object.prototype.hasOwnProperty.call(n,++e););},delete:a,clear:function(){s=o=0,e=1,n=Object.create(null),r=Object.create(null)}}}function Zs(i){var{hasher:s,limit:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=e??Number.POSITIVE_INFINITY,s=s??JSON.stringify,function n(){"object"!=typeof n.cache&&(n.cache={values:new Map,lru:RE(e||Number.POSITIVE_INFINITY)});for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var a=s(r);if(n.cache.values.has(a))return n.cache.lru.hit(a),n.cache.values.get(a);var l=i.apply(i,r);return n.cache.values.set(a,l),n.cache.values.delete(n.cache.lru.hit(a)),l}}function Gm(i){return Object.keys(i.signatures||{}).reduce(function(s,e){var n=(e.match(/,/g)||[]).length+1;return Math.max(s,n)},-1)}Zs(function(i){return new i(1).exp()},{hasher:Ja}),Zs(function(i){return new i(1).plus(new i(5).sqrt()).div(2)},{hasher:Ja});var au=Zs(function(i){return i.acos(-1)},{hasher:Ja});function Ja(i){return i[0].precision}function Ya(i,s){return q(i,["config","BigNumber"],n=>{var{config:r,BigNumber:o}=n;return"BigNumber"===r.number?new o(s):s})}Zs(function(i){return au(i).times(2)},{hasher:Ja}),Math,Math,Math,Ya("fineStructure",.0072973525693),Ya("weakMixingAngle",.2229),Ya("efimovFactor",22.7),Ya("sackurTetrode",-1.16487052358);var Cr=L(7780),oI=q("Fraction",[],()=>(Object.defineProperty(Cr,"name",{value:"Fraction"}),Cr.prototype.constructor=Cr,Cr.prototype.type="Fraction",Cr.prototype.isFraction=!0,Cr.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},Cr.fromJSON=function(i){return new Cr(i)},Cr),{isClass:!0}),lI=q("Matrix",[],()=>{function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator")}return i.prototype.type="Matrix",i.prototype.isMatrix=!0,i.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},i.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},i.prototype.create=function(s,e){throw new Error("Cannot invoke create on a Matrix interface")},i.prototype.subset=function(s,e,n){throw new Error("Cannot invoke subset on a Matrix interface")},i.prototype.get=function(s){throw new Error("Cannot invoke get on a Matrix interface")},i.prototype.set=function(s,e,n){throw new Error("Cannot invoke set on a Matrix interface")},i.prototype.resize=function(s,e){throw new Error("Cannot invoke resize on a Matrix interface")},i.prototype.reshape=function(s,e){throw new Error("Cannot invoke reshape on a Matrix interface")},i.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},i.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},i.prototype.map=function(s,e){throw new Error("Cannot invoke map on a Matrix interface")},i.prototype.forEach=function(s){throw new Error("Cannot invoke forEach on a Matrix interface")},i.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},i.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},i.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},i.prototype.format=function(s){throw new Error("Cannot invoke format on a Matrix interface")},i.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},i},{isClass:!0});function lu(i,s,e){var r=new(0,i.constructor)(2),o="";if(e){if(e<1)throw new Error("size must be in greater than 0");if(!_t(e))throw new Error("size must be an integer");if(i.greaterThan(r.pow(e-1).sub(1))||i.lessThan(r.pow(e-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(e-1,", 2^").concat(e-1,"-1]"));if(!i.isInteger())throw new Error("Value must be an integer");i.lessThan(0)&&(i=i.add(r.pow(e))),o="i".concat(e)}switch(s){case 2:return"".concat(i.toBinary()).concat(o);case 8:return"".concat(i.toOctal()).concat(o);case 16:return"".concat(i.toHexadecimal()).concat(o);default:throw new Error("Base ".concat(s," not supported "))}}function Zm(i,s){return void 0!==s?i.toExponential(s-1):i.toExponential()}function Zt(i,s){var e=function yI(i,s){return"number"==typeof i?uo(i,s):on(i)?function hI(i,s){if("function"==typeof s)return s(i);if(!i.isFinite())return i.isNaN()?"NaN":i.gt(0)?"Infinity":"-Infinity";var n,r,e="auto";if(void 0!==s&&(s.notation&&(e=s.notation),"number"==typeof s?n=s:void 0!==s.precision&&(n=s.precision),s.wordSize&&"number"!=typeof(r=s.wordSize)))throw new Error('Option "wordSize" must be a number');switch(e){case"fixed":return function vI(i,s){return i.toFixed(s)}(i,n);case"exponential":return Zm(i,n);case"engineering":return function gI(i,s){var e=i.e,n=e%3==0?e:e<0?e-3-e%3:e-e%3,o=i.mul(Math.pow(10,-n)).toPrecision(s);return-1!==o.indexOf("e")&&(o=new(0,i.constructor)(o).toFixed()),o+"e"+(e>=0?"+":"")+n.toString()}(i,n);case"bin":return lu(i,2,r);case"oct":return lu(i,8,r);case"hex":return lu(i,16,r);case"auto":var o=s&&void 0!==s.lowerExp?s.lowerExp:-3,a=s&&void 0!==s.upperExp?s.upperExp:5;if(i.isZero())return"0";var c=i.toSignificantDigits(n),u=c.e;return(u>=o&&u<a?c.toFixed():Zm(i,n)).replace(/((\.\d*?)(0+))($|e)/,function(){var d=arguments[2],p=arguments[4];return"."!==d?d+p:p});default:throw new Error('Unknown notation "'+e+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}(i,s):function bI(i){return i&&"object"==typeof i&&"number"==typeof i.s&&"number"==typeof i.n&&"number"==typeof i.d||!1}(i)?s&&"decimal"===s.fraction?i.toString():i.s*i.n+"/"+i.d:Array.isArray(i)?Jm(i,s):di(i)?qm(i):"function"==typeof i?i.syntax?String(i.syntax):"function":i&&"object"==typeof i?"function"==typeof i.format?i.format(s):i&&i.toString(s)!=={}.toString()?i.toString(s):"{"+Object.keys(i).map(n=>qm(n)+": "+Zt(i[n],s)).join(", ")+"}":String(i)}(i,s);return s&&"object"==typeof s&&"truncate"in s&&e.length>s.truncate?e.substring(0,s.truncate-3)+"...":e}function qm(i){for(var s=String(i),e="",n=0;n<s.length;){var r=s.charAt(n);e+=r in Qm?Qm[r]:r,n++}return'"'+e+'"'}var Qm={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};function Jm(i,s){if(Array.isArray(i)){for(var e="[",n=i.length,r=0;r<n;r++)0!==r&&(e+=", "),e+=Jm(i[r],s);return e+"]"}return Zt(i,s)}function Ut(i,s,e){if(!(this instanceof Ut))throw new SyntaxError("Constructor must be called with the new operator");this.actual=i,this.expected=s,this.relation=e,this.message="Dimension mismatch ("+(Array.isArray(i)?"["+i.join(", ")+"]":i)+" "+(this.relation||"!=")+" "+(Array.isArray(s)?"["+s.join(", ")+"]":s)+")",this.stack=(new Error).stack}function rr(i,s,e){if(!(this instanceof rr))throw new SyntaxError("Constructor must be called with the new operator");this.index=i,arguments.length<3?(this.min=0,this.max=s):(this.min=s,this.max=e),this.message=void 0!==this.min&&this.index<this.min?"Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?"Index out of range ("+this.index+" > "+(this.max-1)+")":"Index out of range ("+this.index+")",this.stack=(new Error).stack}function jt(i){for(var s=[];Array.isArray(i);)s.push(i.length),i=i[0];return s}function Ym(i,s,e){var n,r=i.length;if(r!==s[e])throw new Ut(r,s[e]);if(e<s.length-1){var o=e+1;for(n=0;n<r;n++){if(!Array.isArray(i[n]))throw new Ut(s.length-1,s.length,"<");Ym(i[n],s,o)}}else for(n=0;n<r;n++)if(Array.isArray(i[n]))throw new Ut(s.length+1,s.length,">")}function Xm(i,s){if(0===s.length){if(Array.isArray(i))throw new Ut(i.length,0)}else Ym(i,s,0)}function yn(i,s){if(void 0!==i){if(!en(i)||!_t(i))throw new TypeError("Index must be an integer (value: "+i+")");if(i<0||"number"==typeof s&&i>=s)throw new rr(i,s)}}function Go(i,s,e){if(!Array.isArray(s))throw new TypeError("Array expected");if(0===s.length)throw new Error("Resizing to scalar is not supported");return s.forEach(function(r){if(!en(r)||!_t(r)||r<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Zt(s)+")")}),(en(i)||on(i))&&(i=[i]),uu(i,s,0,void 0!==e?e:0),i}function uu(i,s,e,n){var r,o,l=s[e],c=Math.min(i.length,l);if(i.length=l,e<s.length-1){var u=e+1;for(r=0;r<c;r++)o=i[r],Array.isArray(o)||(i[r]=o=[o]),uu(o,s,u,n);for(r=c;r<l;r++)i[r]=o=[],uu(o,s,u,n)}else{for(r=0;r<c;r++)for(;Array.isArray(i[r]);)i[r]=i[r][0];for(r=c;r<l;r++)i[r]=n}}function du(i,s){var e=function tn(i){if(!Array.isArray(i))return i;var s=[];return i.forEach(function e(n){Array.isArray(n)?n.forEach(e):s.push(n)}),s}(i),n=e.length;if(!Array.isArray(i)||!Array.isArray(s))throw new TypeError("Array expected");if(0===s.length)throw new Ut(0,n,"!=");var r=eh(s=pu(s,n));if(n!==r)throw new Ut(r,n,"!=");try{return function CI(i,s){for(var n,e=i,r=s.length-1;r>0;r--){var o=s[r];n=[];for(var a=e.length/o,l=0;l<a;l++)n.push(e.slice(l*o,(l+1)*o));e=n}return e}(e,s)}catch(o){throw o instanceof Ut?new Ut(r,n,"!="):o}}function pu(i,s){var e=eh(i),n=i.slice(),o=i.indexOf(-1);if(i.indexOf(-1,o+1)>=0)throw new Error("More than one wildcard in sizes");if(o>=0){if(s%e!=0)throw new Error("Could not replace wildcard, since "+s+" is no multiple of "+-e);n[o]=-s/e}return n}function eh(i){return i.reduce((s,e)=>s*e,1)}function nh(i,s,e,n){var r=n||jt(i);if(e)for(var o=0;o<e;o++)i=[i],r.unshift(1);for(i=ih(i,s,0);r.length<s;)r.push(1);return i}function ih(i,s,e){var n,r;if(Array.isArray(i)){var o=e+1;for(n=0,r=i.length;n<r;n++)i[n]=ih(i[n],s,o)}else for(var a=e;a<s;a++)i=[i];return i}function qs(i,s){for(var e,n=0,r=0;r<i.length;r++){var o=i[r],a=Array.isArray(o);if(0===r&&a&&(n=o.length),a&&o.length!==n)return;var l=a?qs(o,s):s(o);if(void 0===e)e=l;else if(e!==l)return"mixed"}return e}function oh(i,s,e,n){if(n<e){if(i.length!==s.length)throw new Ut(i.length,s.length);for(var r=[],o=0;o<i.length;o++)r[o]=oh(i[o],s[o],e,n+1);return r}return i.concat(s)}function sh(){var i=Array.prototype.slice.call(arguments,0,-1),s=Array.prototype.slice.call(arguments,-1);if(1===i.length)return i[0];if(i.length>1)return i.slice(1).reduce(function(e,n){return oh(e,n,s,0)},i[0]);throw new Error("Wrong number of arguments in function concat")}function nl(i,s){for(var e=s.length,n=i.length,r=0;r<n;r++){var o=e-n+r;if(i[r]<s[o]&&i[r]>1||i[r]>s[o])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(i,") not possible to broadcast dimension ").concat(n," with size ").concat(i[r]," to size ").concat(s[o]))}}function fu(i,s){var e=jt(i);if(Ho(e,s))return i;nl(e,s);var n=function ah(){for(var i=arguments.length,s=new Array(i),e=0;e<i;e++)s[e]=arguments[e];for(var n=s.map(f=>f.length),r=Math.max(...n),o=new Array(r).fill(null),a=0;a<s.length;a++)for(var l=s[a],c=n[a],u=0;u<c;u++){var d=r-c+u;l[u]>o[d]&&(o[d]=l[u])}for(var p=0;p<s.length;p++)nl(s[p],o);return o}(e,s),r=n.length,o=[...Array(r-e.length).fill(1),...e],a=function DI(i){return yr([],i)}(i);e.length<r&&(e=jt(a=du(a,o)));for(var l=0;l<r;l++)e[l]<n[l]&&(e=jt(a=wI(a,n[l],l)));return a}function wI(i,s,e){return sh(...Array(s).fill(i),e)}(Ut.prototype=new RangeError).constructor=RangeError,Ut.prototype.name="DimensionError",Ut.prototype.isDimensionError=!0,(rr.prototype=new RangeError).constructor=RangeError,rr.prototype.name="IndexError",rr.prototype.isIndexError=!0;var II=q("DenseMatrix",["Matrix"],i=>{var{Matrix:s}=i;function e(d,p){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");if(p&&!di(p))throw new Error("Invalid datatype: "+p);if(Ft(d))"DenseMatrix"===d.type?(this._data=At(d._data),this._size=At(d._size),this._datatype=p||d._datatype):(this._data=d.toArray(),this._size=d.size(),this._datatype=p||d._datatype);else if(d&&pn(d.data)&&pn(d.size))this._data=d.data,this._size=d.size,Xm(this._data,this._size),this._datatype=p||d.datatype;else if(pn(d))this._data=u(d),this._size=jt(this._data),Xm(this._data,this._size),this._datatype=p;else{if(d)throw new TypeError("Unsupported type of data ("+kn(d)+")");this._data=[],this._size=[0],this._datatype=p}}function r(d,p,f,m){var g=m===f-1,h=p.dimension(m);return g?h.map(function(_){return yn(_,d.length),d[_]}).valueOf():h.map(function(_){return yn(_,d.length),r(d[_],p,f,m+1)}).valueOf()}function a(d,p,f,m,g){var h=g===m-1;p.dimension(g).forEach(h?function(b,M){yn(b),d[b]=f[M[0]]}:function(b,M){yn(b),a(d[b],p,f[M[0]],m,g+1)})}function l(d,p,f){if(0===p.length){for(var m=d._data;pn(m);)m=m[0];return m}return d._size=p.slice(0),d._data=Go(d._data,d._size,f),d}function c(d,p,f){for(var m=d._size.slice(0),g=!1;m.length<p.length;)m.push(0),g=!0;for(var h=0,_=p.length;h<_;h++)p[h]>m[h]&&(m[h]=p[h],g=!0);g&&l(d,m,f)}function u(d){return Ft(d)?u(d.valueOf()):pn(d)?d.map(u):d}return(e.prototype=new s).createDenseMatrix=function(d,p){return new e(d,p)},Object.defineProperty(e,"name",{value:"DenseMatrix"}),e.prototype.constructor=e,e.prototype.type="DenseMatrix",e.prototype.isDenseMatrix=!0,e.prototype.getDataType=function(){return qs(this._data,kn)},e.prototype.storage=function(){return"dense"},e.prototype.datatype=function(){return this._datatype},e.prototype.create=function(d,p){return new e(d,p)},e.prototype.subset=function(d,p,f){switch(arguments.length){case 1:return function n(d,p){if(!Za(p))throw new TypeError("Invalid index");if(p.isScalar())return d.get(p.min());var m=p.size();if(m.length!==d._size.length)throw new Ut(m.length,d._size.length);for(var g=p.min(),h=p.max(),_=0,b=d._size.length;_<b;_++)yn(g[_],d._size[_]),yn(h[_],d._size[_]);return new e(r(d._data,p,m.length,0),d._datatype)}(this,d);case 2:case 3:return function o(d,p,f,m){if(!p||!0!==p.isIndex)throw new TypeError("Invalid index");var _,g=p.size(),h=p.isScalar();if(Ft(f)?(_=f.size(),f=f.valueOf()):_=jt(f),h){if(0!==_.length)throw new TypeError("Scalar expected");d.set(p.min(),f,m)}else{if(!Ho(_,g))try{_=jt(f=fu(0===_.length?[f]:f,g))}catch{}if(g.length<d._size.length)throw new Ut(g.length,d._size.length,"<");if(_.length<g.length){for(var b=0,M=0;1===g[b]&&1===_[b];)b++;for(;1===g[b];)M++,b++;f=nh(f,g.length,M,_)}if(!Ho(g,_))throw new Ut(g,_,">");c(d,p.max().map(function(C){return C+1}),m),a(d._data,p,f,g.length,0)}return d}(this,d,p,f);default:throw new SyntaxError("Wrong number of arguments")}},e.prototype.get=function(d){if(!pn(d))throw new TypeError("Array expected");if(d.length!==this._size.length)throw new Ut(d.length,this._size.length);for(var p=0;p<d.length;p++)yn(d[p],this._size[p]);for(var f=this._data,m=0,g=d.length;m<g;m++){var h=d[m];yn(h,f.length),f=f[h]}return f},e.prototype.set=function(d,p,f){if(!pn(d))throw new TypeError("Array expected");if(d.length<this._size.length)throw new Ut(d.length,this._size.length,"<");var m,g,h;c(this,d.map(function(M){return M+1}),f);var b=this._data;for(m=0,g=d.length-1;m<g;m++)yn(h=d[m],b.length),b=b[h];return yn(h=d[d.length-1],b.length),b[h]=p,this},e.prototype.resize=function(d,p,f){if(!zo(d))throw new TypeError("Array or Matrix expected");var m=d.valueOf().map(h=>Array.isArray(h)&&1===h.length?h[0]:h);return l(f?this.clone():this,m,p)},e.prototype.reshape=function(d,p){var f=p?this.clone():this;f._data=du(f._data,d);var m=f._size.reduce((g,h)=>g*h);return f._size=pu(d,m),f},e.prototype.clone=function(){return new e({data:At(this._data),size:At(this._size),datatype:this._datatype})},e.prototype.size=function(){return this._size.slice(0)},e.prototype.map=function(d){var p=this,f=Gm(d),g=function _(b,M){return pn(b)?b.map(function(y,w){return _(y,M.concat(w))}):1===f?d(b):2===f?d(b,M):d(b,M,p)}(this._data,[]);return new e(g,void 0!==this._datatype?qs(g,kn):void 0)},e.prototype.forEach=function(d){var p=this;!function m(g,h){pn(g)?g.forEach(function(_,b){m(_,h.concat(b))}):d(g,h,p)}(this._data,[])},e.prototype[Symbol.iterator]=function*(){yield*function*p(f,m){if(pn(f))for(var g=0;g<f.length;g++)yield*p(f[g],m.concat(g));else yield{value:f,index:m}}(this._data,[])},e.prototype.rows=function(){var d=[];if(2!==this.size().length)throw new TypeError("Rows can only be returned for a 2D matrix.");var f=this._data;for(var m of f)d.push(new e([m],this._datatype));return d},e.prototype.columns=function(){var d=this,p=[],f=this.size();if(2!==f.length)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var m=this._data,g=function(b){var M=m.map(y=>[y[b]]);p.push(new e(M,d._datatype))},h=0;h<f[1];h++)g(h);return p},e.prototype.toArray=function(){return At(this._data)},e.prototype.valueOf=function(){return this._data},e.prototype.format=function(d){return Zt(this._data,d)},e.prototype.toString=function(){return Zt(this._data)},e.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},e.prototype.diagonal=function(d){if(d){if(on(d)&&(d=d.toNumber()),!en(d)||!_t(d))throw new TypeError("The parameter k must be an integer number")}else d=0;for(var p=d>0?d:0,f=d<0?-d:0,h=Math.min(this._size[0]-f,this._size[1]-p),_=[],b=0;b<h;b++)_[b]=this._data[b+f][b+p];return new e({data:_,size:[h],datatype:this._datatype})},e.diagonal=function(d,p,f,m){if(!pn(d))throw new TypeError("Array expected, size parameter");if(2!==d.length)throw new Error("Only two dimensions matrix are supported");if(d=d.map(function(T){if(on(T)&&(T=T.toNumber()),!en(T)||!_t(T)||T<1)throw new Error("Size values must be positive integers");return T}),f){if(on(f)&&(f=f.toNumber()),!en(f)||!_t(f))throw new TypeError("The parameter k must be an integer number")}else f=0;var y,g=f>0?f:0,h=f<0?-f:0,_=d[0],b=d[1],M=Math.min(_-h,b-g);if(pn(p)){if(p.length!==M)throw new Error("Invalid value array length");y=function(O){return p[O]}}else if(Ft(p)){var w=p.size();if(1!==w.length||w[0]!==M)throw new Error("Invalid matrix length");y=function(O){return p.get([O])}}else y=function(){return p};m||(m=on(y(0))?y(0).mul(0):0);var x=[];if(d.length>0){x=Go(x,d,m);for(var C=0;C<M;C++)x[C+h][C+g]=y(C)}return new e({data:x,size:[_,b]})},e.fromJSON=function(d){return new e(d)},e.prototype.swapRows=function(d,p){if(!(en(d)&&_t(d)&&en(p)&&_t(p)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return yn(d,this._size[0]),yn(p,this._size[0]),e._swapRows(d,p,this._data),this},e._swapRows=function(d,p,f){var m=f[d];f[d]=f[p],f[p]=m},e},{isClass:!0}),qo=L(9634);function lh(i,s){if(ph(i)&&uh(i,s))return i[s];throw"function"==typeof i[s]&&function dh(i,s){return!(null==i||"function"!=typeof i[s]||gn(i,s)&&Object.getPrototypeOf&&s in Object.getPrototypeOf(i)||!gn(NI,s)&&(s in Object.prototype||s in Function.prototype))}(i,s)?new Error('Cannot access method "'+s+'" as a property'):new Error('No access to property "'+s+'"')}function uh(i,s){return!(!i||"object"!=typeof i||!gn(LI,s)&&(s in Object.prototype||s in Function.prototype))}function ph(i){return"object"==typeof i&&i&&i.constructor===Object}var LI={length:!0,name:!0},NI={toString:!0,valueOf:!0,toLocaleString:!0};class mu{constructor(s){this.wrappedObject=s}keys(){return Object.keys(this.wrappedObject)}get(s){return lh(this.wrappedObject,s)}set(s,e){return function ch(i,s,e){if(ph(i)&&uh(i,s))return i[s]=e,e;throw new Error('No access to property "'+s+'"')}(this.wrappedObject,s,e),this}has(s){return function OI(i,s){return s in i}(this.wrappedObject,s)}}function hu(i){return!!i&&(i instanceof Map||i instanceof mu||"function"==typeof i.set&&"function"==typeof i.get&&"function"==typeof i.keys&&"function"==typeof i.has)}var fh=function(){return fh=qo.create,qo},kI=q("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],function(s){var{BigNumber:e,Complex:n,DenseMatrix:r,Fraction:o}=s,a=fh();return a.clear(),a.addTypes([{name:"number",test:en},{name:"Complex",test:Wr},{name:"BigNumber",test:on},{name:"Fraction",test:Ka},{name:"Unit",test:$i},{name:"identifier",test:l=>di&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(l)},{name:"string",test:di},{name:"Chain",test:sE},{name:"Array",test:pn},{name:"Matrix",test:Ft},{name:"DenseMatrix",test:Ga},{name:"SparseMatrix",test:co},{name:"Range",test:Nm},{name:"Index",test:Za},{name:"boolean",test:jx},{name:"ResultSet",test:Px},{name:"Help",test:Vx},{name:"function",test:Ux},{name:"Date",test:$x},{name:"RegExp",test:zx},{name:"null",test:Hx},{name:"undefined",test:Wx},{name:"AccessorNode",test:Kx},{name:"ArrayNode",test:Gx},{name:"AssignmentNode",test:Zx},{name:"BlockNode",test:qx},{name:"ConditionalNode",test:Qx},{name:"ConstantNode",test:ru},{name:"FunctionNode",test:Yx},{name:"FunctionAssignmentNode",test:Jx},{name:"IndexNode",test:Xx},{name:"Node",test:eE},{name:"ObjectNode",test:tE},{name:"OperatorNode",test:Bm},{name:"ParenthesisNode",test:nE},{name:"RangeNode",test:iE},{name:"RelationalNode",test:rE},{name:"SymbolNode",test:oE},{name:"Map",test:hu},{name:"Object",test:Rm}]),a.addConversions([{from:"number",to:"BigNumber",convert:function(c){if(e||gu(c),function wE(i){return i.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}(c)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+c+"). Use function bignumber(x) to convert to BigNumber.");return new e(c)}},{from:"number",to:"Complex",convert:function(c){return n||il(c),new n(c,0)}},{from:"BigNumber",to:"Complex",convert:function(c){return n||il(c),new n(c.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(c){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(c){return n||il(c),new n(c.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(c){o||vu(c);var u=new o(c);if(u.valueOf()!==c)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+c+"). Use function fraction(x) to convert to Fraction.");return u}},{from:"string",to:"number",convert:function(c){var u=Number(c);if(isNaN(u))throw new Error('Cannot convert "'+c+'" to a number');return u}},{from:"string",to:"BigNumber",convert:function(c){e||gu(c);try{return new e(c)}catch{throw new Error('Cannot convert "'+c+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(c){o||vu(c);try{return new o(c)}catch{throw new Error('Cannot convert "'+c+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(c){n||il(c);try{return new n(c)}catch{throw new Error('Cannot convert "'+c+'" to Complex')}}},{from:"boolean",to:"number",convert:function(c){return+c}},{from:"boolean",to:"BigNumber",convert:function(c){return e||gu(c),new e(+c)}},{from:"boolean",to:"Fraction",convert:function(c){return o||vu(c),new o(+c)}},{from:"boolean",to:"string",convert:function(c){return String(c)}},{from:"Array",to:"Matrix",convert:function(c){return r||function jI(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new r(c)}},{from:"Matrix",to:"Array",convert:function(c){return c.valueOf()}}]),a.onMismatch=(l,c,u)=>{var d=a.createError(l,c,u);if(["wrongType","mismatch"].includes(d.data.category)&&1===c.length&&zo(c[0])&&u.some(f=>!f.params.includes(","))){var p=new TypeError("Function '".concat(l,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(l,")'."));throw p.data=d.data,p}throw d},a.onMismatch=(l,c,u)=>{var d=a.createError(l,c,u);if(["wrongType","mismatch"].includes(d.data.category)&&1===c.length&&zo(c[0])&&u.some(f=>!f.params.includes(","))){var p=new TypeError("Function '".concat(l,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(l,")'."));throw p.data=d.data,p}throw d},a});function gu(i){throw new Error("Cannot convert value ".concat(i," into a BigNumber: no class 'BigNumber' provided"))}function il(i){throw new Error("Cannot convert value ".concat(i," into a Complex number: no class 'Complex' provided"))}function vu(i){throw new Error("Cannot convert value ".concat(i," into a Fraction, no class 'Fraction' provided."))}function Qt(i,s,e){return i&&"function"==typeof i.map?i.map(function(n){return Qt(n,s,e)}):s(i)}var vi="number",Mr="number, number";function gh(i){return Math.abs(i)}function vh(i,s){return i+s}function _h(i,s){return i-s}function yh(i,s){return i*s}function bh(i){return-i}function Oh(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!_t(s)||s<0||s>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(zm(i,s))}gh.signature=vi,vh.signature=Mr,_h.signature=Mr,yh.signature=Mr,bh.signature=vi;var qI=q("abs",["typed"],i=>{var{typed:s}=i;return s("abs",{number:gh,"Complex | BigNumber | Fraction | Unit":e=>e.abs(),"Array | Matrix":s.referToSelf(e=>n=>Qt(n,e,!0))})});var eg="addScalar",fF=q(eg,["typed"],i=>{var{typed:s}=i;return s(eg,{"number, number":vh,"Complex, Complex":function(n,r){return n.add(r)},"BigNumber, BigNumber":function(n,r){return n.plus(r)},"Fraction, Fraction":function(n,r){return n.add(r)},"Unit, Unit":s.referToSelf(e=>(n,r)=>{if(null==n.value)throw new Error("Parameter x contains a unit with undefined value");if(null==r.value)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(r))throw new Error("Units do not match");var o=n.clone();return o.value=s.find(e,[o.valueType(),r.valueType()])(o.value,r.value),o.fixPrefix=!1,o})})}),IF=q("bignumber",["typed","BigNumber"],i=>{var{typed:s,BigNumber:e}=i;return s("bignumber",{"":function(){return new e(0)},number:function(r){return new e(r+"")},string:function(r){var o=r.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(o){var a=o[2],l=e(o[1]),c=new e(2).pow(Number(a));if(l.gt(c.sub(1)))throw new SyntaxError('String "'.concat(r,'" is out of range'));var u=new e(2).pow(Number(a)-1);return l.gte(u)?l.sub(c):l}return new e(r)},BigNumber:function(r){return r},Unit:s.referToSelf(n=>r=>{var o=r.clone();return o.value=n(r.value),o}),Fraction:function(r){return new e(r.n).div(r.d).times(r.s)},null:function(r){return new e(0)},"Array | Matrix":s.referToSelf(n=>r=>Qt(r,n))})});var GF=q("conj",["typed"],i=>{var{typed:s}=i;return s("conj",{"number | BigNumber | Fraction":e=>e,Complex:e=>e.conjugate(),"Array | Matrix":s.referToSelf(e=>n=>Qt(n,e))})});var Xo=q("compareUnits",["typed"],i=>{var{typed:s}=i;return{"Unit, Unit":s.referToSelf(e=>(n,r)=>{if(!n.equalBase(r))throw new Error("Cannot compare units with different base");return s.find(e,[n.valueType(),r.valueType()])(n.value,r.value)})}}),al="equalScalar",rA=q(al,["typed","config"],i=>{var{typed:s,config:e}=i,n=Xo({typed:s});return s(al,{"boolean, boolean":function(o,a){return o===a},"number, number":function(o,a){return Ei(o,a,e.epsilon)},"BigNumber, BigNumber":function(o,a){return o.eq(a)||function or(i,s,e){if(null==e)return i.eq(s);if(i.eq(s))return!0;if(i.isNaN()||s.isNaN())return!1;if(i.isFinite()&&s.isFinite()){var n=i.minus(s).abs();if(n.isZero())return!0;var r=i.constructor.max(i.abs(),s.abs());return n.lte(r.times(e))}return!1}(o,a,e.epsilon)},"Fraction, Fraction":function(o,a){return o.equals(a)},"Complex, Complex":function(o,a){return function nA(i,s,e){return Ei(i.re,s.re,e)&&Ei(i.im,s.im,e)}(o,a,e.epsilon)}},n)});q(al,["typed","config"],i=>{var{typed:s,config:e}=i;return s(al,{"number, number":function(r,o){return Ei(r,o,e.epsilon)}})}),Math.pow(2,53),q("hex",["typed","format"],i=>{var{typed:s,format:e}=i;return s("hex",{"number | BigNumber":function(r){return e(r,{notation:"hex"})},"number | BigNumber, number":function(r,o){return e(r,{notation:"hex",wordSize:o})}})});var Ys="number";function Lg(i){return 0===i}Lg.signature=Ys;var kA=q("isZero",["typed"],i=>{var{typed:s}=i;return s("isZero",{number:Lg,BigNumber:function(n){return n.isZero()},Complex:function(n){return 0===n.re&&0===n.im},Fraction:function(n){return 1===n.d&&0===n.n},Unit:s.referToSelf(e=>n=>s.find(e,n.valueType())(n.value)),"Array | Matrix":s.referToSelf(e=>n=>Qt(n,e))})});var JA=q("multiplyScalar",["typed"],i=>{var{typed:s}=i;return s("multiplyScalar",{"number, number":yh,"Complex, Complex":function(n,r){return n.mul(r)},"BigNumber, BigNumber":function(n,r){return n.times(r)},"Fraction, Fraction":function(n,r){return n.mul(r)},"number | Fraction | BigNumber | Complex, Unit":(e,n)=>n.multiply(e),"Unit, number | Fraction | BigNumber | Complex | Unit":(e,n)=>e.multiply(n)})});var oT=q("number",["typed"],i=>{var{typed:s}=i,e=s("number",{"":function(){return 0},number:function(r){return r},string:function(r){if("NaN"===r)return NaN;var o=function iT(i){var s=i.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);return s?{input:i,radix:{"0b":2,"0o":8,"0x":16}[s[1]],integerPart:s[2],fractionalPart:s[3]}:null}(r);if(o)return function rT(i){for(var s=parseInt(i.integerPart,i.radix),e=0,n=0;n<i.fractionalPart.length;n++)e+=parseInt(i.fractionalPart[n],i.radix)/Math.pow(i.radix,n+1);var o=s+e;if(isNaN(o))throw new SyntaxError('String "'+i.input+'" is no valid number');return o}(o);var a=0,l=r.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);l&&(a=Number(l[2]),r=l[1]);var c=Number(r);if(isNaN(c))throw new SyntaxError('String "'+r+'" is no valid number');if(l){if(c>2**a-1)throw new SyntaxError('String "'.concat(r,'" is out of range'));c>=2**(a-1)&&(c-=2**a)}return c},BigNumber:function(r){return r.toNumber()},Fraction:function(r){return r.valueOf()},Unit:s.referToSelf(n=>r=>{var o=r.clone();return o.value=n(r.value),o}),null:function(r){return 0},"Unit, string | Unit":function(r,o){return r.toNumber(o)},"Array | Matrix":s.referToSelf(n=>r=>Qt(r,n))});return e.fromJSON=function(n){return parseFloat(n.value)},e});q("oct",["typed","format"],i=>{var{typed:s,format:e}=i;return s("oct",{"number | BigNumber":function(r){return e(r,{notation:"oct"})},"number | BigNumber, number":function(r,o){return e(r,{notation:"oct",wordSize:o})}})}),L(9128);Date.now();var xT=q("SparseMatrix",["typed","equalScalar","Matrix"],i=>{var{typed:s,equalScalar:e,Matrix:n}=i;function r(h,_){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(_&&!di(_))throw new Error("Invalid datatype: "+_);if(Ft(h))!function o(h,_,b){"SparseMatrix"===_.type?(h._values=_._values?At(_._values):void 0,h._index=At(_._index),h._ptr=At(_._ptr),h._size=At(_._size),h._datatype=b||_._datatype):a(h,_.valueOf(),b||_._datatype)}(this,h,_);else if(h&&pn(h.index)&&pn(h.ptr)&&pn(h.size))this._values=h.values,this._index=h.index,this._ptr=h.ptr,this._size=h.size,this._datatype=_||h.datatype;else if(pn(h))a(this,h,_);else{if(h)throw new TypeError("Unsupported type of data ("+kn(h)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=_}}function a(h,_,b){h._values=[],h._index=[],h._ptr=[],h._datatype=b;var M=_.length,y=0,w=e,x=0;if(di(b)&&(w=s.find(e,[b,b])||e,x=s.convert(0,b)),M>0){var C=0;do{h._ptr.push(h._index.length);for(var T=0;T<M;T++){var O=_[T];if(pn(O)){if(0===C&&y<O.length&&(y=O.length),C<O.length){var N=O[C];w(N,x)||(h._values.push(N),h._index.push(T))}}else 0===C&&y<1&&(y=1),w(O,x)||(h._values.push(O),h._index.push(T))}C++}while(C<y)}h._ptr.push(h._index.length),h._size=[M,y]}function u(h,_,b,M){if(b-_==0)return b;for(var y=_;y<b;y++)if(M[y]===h)return y;return _}function p(h,_,b,M,y,w,x){y.splice(h,0,M),w.splice(h,0,_);for(var C=b+1;C<x.length;C++)x[C]++}function f(h,_,b,M){var y=M||0,w=e,x=0;di(h._datatype)&&(w=s.find(e,[h._datatype,h._datatype])||e,x=s.convert(0,h._datatype),y=s.convert(y,h._datatype));var N,E,k,C=!w(y,x),T=h._size[0],O=h._size[1];if(b>O){for(E=O;E<b;E++)if(h._ptr[E]=h._values.length,C)for(N=0;N<T;N++)h._values.push(y),h._index.push(N);h._ptr[b]=h._values.length}else b<O&&(h._ptr.splice(b+1,O-b),h._values.splice(h._ptr[b],h._values.length),h._index.splice(h._ptr[b],h._index.length));if(O=b,_>T){if(C){var P=0;for(E=0;E<O;E++){h._ptr[E]=h._ptr[E]+P,k=h._ptr[E+1]+P;var K=0;for(N=T;N<_;N++,K++)h._values.splice(k+K,0,y),h._index.splice(k+K,0,N),P++}h._ptr[O]=h._values.length}}else if(_<T){var J=0;for(E=0;E<O;E++){h._ptr[E]=h._ptr[E]-J;var Q=h._ptr[E+1]-J;for(k=h._ptr[E];k<Q;k++)(N=h._index[k])>_-1&&(h._values.splice(k,1),h._index.splice(k,1),J++)}h._ptr[E]=h._values.length}return h._size[0]=_,h._size[1]=b,h}function g(h,_,b,M,y){var T,O,w=M[0],x=M[1],C=[];for(T=0;T<w;T++)for(C[T]=[],O=0;O<x;O++)C[T][O]=0;for(O=0;O<x;O++)for(var E=b[O+1],k=b[O];k<E;k++)C[T=_[k]][O]=h?y?At(h[k]):h[k]:1;return C}return(r.prototype=new n).createSparseMatrix=function(h,_){return new r(h,_)},Object.defineProperty(r,"name",{value:"SparseMatrix"}),r.prototype.constructor=r,r.prototype.type="SparseMatrix",r.prototype.isSparseMatrix=!0,r.prototype.getDataType=function(){return qs(this._values,kn)},r.prototype.storage=function(){return"sparse"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(h,_){return new r(h,_)},r.prototype.density=function(){var h=this._size[0],_=this._size[1];return 0!==h&&0!==_?this._index.length/(h*_):0},r.prototype.subset=function(h,_,b){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return function l(h,_){if(!Za(_))throw new TypeError("Invalid index");if(_.isScalar())return h.get(_.min());var M=_.size();if(M.length!==h._size.length)throw new Ut(M.length,h._size.length);var y,w,x,C,T=_.min(),O=_.max();for(y=0,w=h._size.length;y<w;y++)yn(T[y],h._size[y]),yn(O[y],h._size[y]);var N=h._values,E=h._index,k=h._ptr,P=_.dimension(0),K=_.dimension(1),J=[],X=[];P.forEach(function(B,se){X[B]=se[0],J[B]=!0});var Q=N?[]:void 0,R=[],fe=[];return K.forEach(function(B){for(fe.push(R.length),x=k[B],C=k[B+1];x<C;x++)!0===J[y=E[x]]&&(R.push(X[y]),Q&&Q.push(N[x]))}),fe.push(R.length),new r({values:Q,index:R,ptr:fe,size:M,datatype:h._datatype})}(this,h);case 2:case 3:return function c(h,_,b,M){if(!_||!0!==_.isIndex)throw new TypeError("Invalid index");var x,y=_.size(),w=_.isScalar();if(Ft(b)?(x=b.size(),b=b.toArray()):x=jt(b),w){if(0!==x.length)throw new TypeError("Scalar expected");h.set(_.min(),b,M)}else{if(1!==y.length&&2!==y.length)throw new Ut(y.length,h._size.length,"<");if(x.length<y.length){for(var C=0,T=0;1===y[C]&&1===x[C];)C++;for(;1===y[C];)T++,C++;b=nh(b,y.length,T,x)}if(!Ho(y,x))throw new Ut(y,x,">");if(1===y.length)_.dimension(0).forEach(function(k,P){yn(k),h.set([k,0],b[P[0]],M)});else{var N=_.dimension(0),E=_.dimension(1);N.forEach(function(k,P){yn(k),E.forEach(function(K,J){yn(K),h.set([k,K],b[P[0]][J[0]],M)})})}}return h}(this,h,_,b);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(h){if(!pn(h))throw new TypeError("Array expected");if(h.length!==this._size.length)throw new Ut(h.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var _=h[0],b=h[1];yn(_,this._size[0]),yn(b,this._size[1]);var M=u(_,this._ptr[b],this._ptr[b+1],this._index);return M<this._ptr[b+1]&&this._index[M]===_?this._values[M]:0},r.prototype.set=function(h,_,b){if(!pn(h))throw new TypeError("Array expected");if(h.length!==this._size.length)throw new Ut(h.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var M=h[0],y=h[1],w=this._size[0],x=this._size[1],C=e,T=0;di(this._datatype)&&(C=s.find(e,[this._datatype,this._datatype])||e,T=s.convert(0,this._datatype)),(M>w-1||y>x-1)&&(f(this,Math.max(M+1,w),Math.max(y+1,x),b),w=this._size[0],x=this._size[1]),yn(M,w),yn(y,x);var O=u(M,this._ptr[y],this._ptr[y+1],this._index);return O<this._ptr[y+1]&&this._index[O]===M?C(_,T)?function d(h,_,b,M,y){b.splice(h,1),M.splice(h,1);for(var w=_+1;w<y.length;w++)y[w]--}(O,y,this._values,this._index,this._ptr):this._values[O]=_:C(_,T)||p(O,M,y,_,this._values,this._index,this._ptr),this},r.prototype.resize=function(h,_,b){if(!zo(h))throw new TypeError("Array or Matrix expected");var M=h.valueOf().map(w=>Array.isArray(w)&&1===w.length?w[0]:w);if(2!==M.length)throw new Error("Only two dimensions matrix are supported");return M.forEach(function(w){if(!en(w)||!_t(w)||w<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Zt(M)+")")}),f(b?this.clone():this,M[0],M[1],_)},r.prototype.reshape=function(h,_){if(!pn(h))throw new TypeError("Array expected");if(2!==h.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");h.forEach(function(B){if(!en(B)||!_t(B)||B<=-2||0===B)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Zt(h)+")")});var b=this._size[0]*this._size[1];if(b!==(h=pu(h,b))[0]*h[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var y=_?this.clone():this;if(this._size[0]===h[0]&&this._size[1]===h[1])return y;for(var w=[],x=0;x<y._ptr.length;x++)for(var C=0;C<y._ptr[x+1]-y._ptr[x];C++)w.push(x);for(var T=y._values.slice(),O=y._index.slice(),N=0;N<y._index.length;N++){var P=O[N]*y._size[1]+w[N];w[N]=P%h[1],O[N]=Math.floor(P/h[1])}y._values.length=0,y._index.length=0,y._ptr.length=h[1]+1,y._size=h.slice();for(var K=0;K<y._ptr.length;K++)y._ptr[K]=0;for(var J=0;J<T.length;J++){var X=O[J],Q=w[J],R=T[J];p(u(X,y._ptr[Q],y._ptr[Q+1],y._index),X,Q,R,y._values,y._index,y._ptr)}return y},r.prototype.clone=function(){return new r({values:this._values?At(this._values):void 0,index:At(this._index),ptr:At(this._ptr),size:At(this._size),datatype:this._datatype})},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(h,_){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var b=this,M=this._size[0],y=this._size[1],w=Gm(h);return function m(h,_,b,M,y,w,x){var C=[],T=[],O=[],N=e,E=0;di(h._datatype)&&(N=s.find(e,[h._datatype,h._datatype])||e,E=s.convert(0,h._datatype));for(var k=function(ue,he,Ee){ue=w(ue,he,Ee),N(ue,E)||(C.push(ue),T.push(he))},P=M;P<=y;P++){O.push(C.length);var K=h._ptr[P],J=h._ptr[P+1];if(x)for(var X=K;X<J;X++){var Q=h._index[X];Q>=_&&Q<=b&&k(h._values[X],Q-_,P-M)}else{for(var R={},fe=K;fe<J;fe++)R[h._index[fe]]=h._values[fe];for(var se=_;se<=b;se++)k(se in R?R[se]:0,se-_,P-M)}}return O.push(C.length),new r({values:C,index:T,ptr:O,size:[b-_+1,y-M+1]})}(this,0,M-1,0,y-1,function(T,O,N){return 1===w?h(T):2===w?h(T,[O,N]):h(T,[O,N],b)},_)},r.prototype.forEach=function(h,_){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var M=this._size[0],y=this._size[1],w=0;w<y;w++){var x=this._ptr[w],C=this._ptr[w+1];if(_)for(var T=x;T<C;T++)h(this._values[T],[this._index[T],w],this);else{for(var N={},E=x;E<C;E++)N[this._index[E]]=this._values[E];for(var P=0;P<M;P++)h(P in N?N[P]:0,[P,w],this)}}},r.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var h=this._size[1],_=0;_<h;_++)for(var M=this._ptr[_+1],y=this._ptr[_];y<M;y++){var w=this._index[y];yield{value:this._values[y],index:[w,_]}}},r.prototype.toArray=function(){return g(this._values,this._index,this._ptr,this._size,!0)},r.prototype.valueOf=function(){return g(this._values,this._index,this._ptr,this._size,!1)},r.prototype.format=function(h){for(var _=this._size[0],b=this._size[1],M=this.density(),y="Sparse Matrix ["+Zt(_,h)+" x "+Zt(b,h)+"] density: "+Zt(M,h)+"\n",w=0;w<b;w++)for(var C=this._ptr[w+1],T=this._ptr[w];T<C;T++)y+="\n    ("+Zt(this._index[T],h)+", "+Zt(w,h)+") ==> "+(this._values?Zt(this._values[T],h):"X");return y},r.prototype.toString=function(){return Zt(this.toArray())},r.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(h){if(h){if(on(h)&&(h=h.toNumber()),!en(h)||!_t(h))throw new TypeError("The parameter k must be an integer number")}else h=0;var _=h>0?h:0,b=h<0?-h:0,y=this._size[1],w=Math.min(this._size[0]-b,y-_),x=[],C=[],T=[];T[0]=0;for(var O=_;O<y&&x.length<w;O++)for(var E=this._ptr[O+1],k=this._ptr[O];k<E;k++){var P=this._index[k];if(P===O-_+b){x.push(this._values[k]),C[x.length-1]=P-b;break}}return T.push(x.length),new r({values:x,index:C,ptr:T,size:[w,1]})},r.fromJSON=function(h){return new r(h)},r.diagonal=function(h,_,b,M,y){if(!pn(h))throw new TypeError("Array expected, size parameter");if(2!==h.length)throw new Error("Only two dimensions matrix are supported");if(h=h.map(function(B){if(on(B)&&(B=B.toNumber()),!en(B)||!_t(B)||B<1)throw new Error("Size values must be positive integers");return B}),b){if(on(b)&&(b=b.toNumber()),!en(b)||!_t(b))throw new TypeError("The parameter k must be an integer number")}else b=0;var w=e,x=0;di(y)&&(w=s.find(e,[y,y])||e,x=s.convert(0,y));var k,C=b>0?b:0,T=b<0?-b:0,O=h[0],N=h[1],E=Math.min(O-T,N-C);if(pn(_)){if(_.length!==E)throw new Error("Invalid value array length");k=function(se){return _[se]}}else if(Ft(_)){var P=_.size();if(1!==P.length||P[0]!==E)throw new Error("Invalid matrix length");k=function(se){return _.get([se])}}else k=function(){return _};for(var K=[],J=[],X=[],Q=0;Q<N;Q++){X.push(K.length);var R=Q-C;if(R>=0&&R<E){var fe=k(R);w(fe,x)||(J.push(R+T),K.push(fe))}}return X.push(K.length),new r({values:K,index:J,ptr:X,size:[O,N]})},r.prototype.swapRows=function(h,_){if(!(en(h)&&_t(h)&&en(_)&&_t(_)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return yn(h,this._size[0]),yn(_,this._size[0]),r._swapRows(h,_,this._size[1],this._values,this._index,this._ptr),this},r._forEachRow=function(h,_,b,M,y){for(var x=M[h+1],C=M[h];C<x;C++)y(b[C],_[C])},r._swapRows=function(h,_,b,M,y,w){for(var x=0;x<b;x++){var C=w[x],T=w[x+1],O=u(h,C,T,y),N=u(_,C,T,y);if(O<T&&N<T&&y[O]===h&&y[N]===_){if(M){var E=M[O];M[O]=M[N],M[N]=E}}else if(O<T&&y[O]===h&&(N>=T||y[N]!==_)){var k=M?M[O]:void 0;y.splice(N,0,_),M&&M.splice(N,0,k),y.splice(N<=O?O+1:O,1),M&&M.splice(N<=O?O+1:O,1)}else if(N<T&&y[N]===_&&(O>=T||y[O]!==h)){var P=M?M[N]:void 0;y.splice(O,0,h),M&&M.splice(O,0,P),y.splice(O<=N?N+1:N,1),M&&M.splice(O<=N?N+1:N,1)}}},r},{isClass:!0}),cv="subtractScalar",NT=q(cv,["typed"],i=>{var{typed:s}=i;return s(cv,{"number, number":_h,"Complex, Complex":function(n,r){return n.sub(r)},"BigNumber, BigNumber":function(n,r){return n.minus(r)},"Fraction, Fraction":function(n,r){return n.sub(r)},"Unit, Unit":s.referToSelf(e=>(n,r)=>{if(null==n.value)throw new Error("Parameter x contains a unit with undefined value");if(null==r.value)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(r))throw new Error("Units do not match");var o=n.clone();return o.value=s.find(e,[o.valueType(),r.valueType()])(o.value,r.value),o.fixPrefix=!1,o})})});q("bin",["typed","format"],i=>{var{typed:s,format:e}=i;return s("bin",{"number | BigNumber":function(r){return e(r,{notation:"bin"})},"number | BigNumber, number":function(r,o){return e(r,{notation:"bin",wordSize:o})}})});var Iv="unaryMinus",bO=q(Iv,["typed"],i=>{var{typed:s}=i;return s(Iv,{number:bh,"Complex | BigNumber | Fraction":e=>e.neg(),Unit:s.referToSelf(e=>n=>{var r=n.clone();return r.value=s.find(e,r.valueType())(n.value),r}),"Array | Matrix":s.referToSelf(e=>n=>Qt(n,e,!0))})}),EO=q("fraction",["typed","Fraction"],i=>{var{typed:s,Fraction:e}=i;return s("fraction",{number:function(r){if(!isFinite(r)||isNaN(r))throw new Error(r+" cannot be represented as a fraction");return new e(r)},string:function(r){return new e(r)},"number, number":function(r,o){return new e(r,o)},null:function(r){return new e(0)},BigNumber:function(r){return new e(r.toString())},Fraction:function(r){return r},Unit:s.referToSelf(n=>r=>{var o=r.clone();return o.value=n(r.value),o}),Object:function(r){return new e(r)},"Array | Matrix":s.referToSelf(n=>r=>Qt(r,n))})}),TO=q("matrix",["typed","Matrix","DenseMatrix","SparseMatrix"],i=>{var{typed:s,DenseMatrix:n,SparseMatrix:r}=i;return s("matrix",{"":function(){return o([])},string:function(l){return o([],l)},"string, string":function(l,c){return o([],l,c)},Array:function(l){return o(l)},Matrix:function(l){return o(l,l.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});function o(a,l,c){if("dense"===l||"default"===l||void 0===l)return new n(a,c);if("sparse"===l)return new r(a,c);throw new TypeError("Unknown matrix type "+JSON.stringify(l)+".")}});function Rv(){throw new Error('No "bignumber" implementation available')}function BO(){throw new Error('No "fraction" implementation available')}var PO=q("numeric",["number","?bignumber","?fraction"],i=>{var{number:s,bignumber:e,fraction:n}=i,r={string:!0,number:!0,BigNumber:!0,Fraction:!0},o={number:a=>s(a),BigNumber:e?a=>e(a):Rv,Fraction:n?a=>n(a):BO};return function(l){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"number";if(void 0!==(arguments.length>2?arguments[2]:void 0))throw new SyntaxError("numeric() takes one or two arguments");var d=kn(l);if(!(d in r))throw new TypeError("Cannot convert "+l+' of type "'+d+'"; valid input types are '+Object.keys(r).join(", "));if(!(c in o))throw new TypeError("Cannot convert "+l+' to type "'+c+'"; valid output types are '+Object.keys(o).join(", "));return c===d?l:o[c](l)}}),WO=q("size",["typed","config","?matrix"],i=>{var{typed:s,config:e,matrix:n}=i;return s("size",{Matrix:function(o){return o.create(o.size())},Array:jt,string:function(o){return"Array"===e.matrix?[o.length]:n([o.length])},"number | Complex | BigNumber | Unit | boolean | null":function(o){return"Array"===e.matrix?[]:n?n([]):function Bv(){throw new Error('No "matrix" implementation available')}()}})}),XO=q("zeros",["typed","config","matrix","BigNumber"],i=>{var{typed:s,config:e,matrix:n,BigNumber:r}=i;return s("zeros",{"":function(){return"Array"===e.matrix?o([]):o([],"default")},"...number | BigNumber | string":function(u){if("string"==typeof u[u.length-1]){var p=u.pop();return o(u,p)}return"Array"===e.matrix?o(u):o(u,"default")},Array:o,Matrix:function(u){var d=u.storage();return o(u.valueOf(),d)},"Array | Matrix, string":function(u,d){return o(u.valueOf(),d)}});function o(c,u){var d=function a(c){var u=!1;return c.forEach(function(d,p,f){on(d)&&(u=!0,f[p]=d.toNumber())}),u}(c),p=d?new r(0):0;if(function l(c){c.forEach(function(u){if("number"!=typeof u||!_t(u)||u<0)throw new Error("Parameters in function zeros must be positive integers")})}(c),u){var f=n(u);return c.length>0?f.resize(c,p):f}var m=[];return c.length>0?Go(m,c,p):m}}),Qv="divideScalar",fL=q(Qv,["typed","numeric"],i=>{var{typed:s}=i;return s(Qv,{"number, number":function(r,o){return r/o},"Complex, Complex":function(r,o){return r.div(o)},"BigNumber, BigNumber":function(r,o){return r.div(o)},"Fraction, Fraction":function(r,o){return r.div(o)},"Unit, number | Complex | Fraction | BigNumber | Unit":(n,r)=>n.divide(r),"number | Fraction | Complex | BigNumber, Unit":(n,r)=>r.divideInto(n)})}),ni=q("matAlgo11xS0s",["typed","equalScalar"],i=>{var{typed:s,equalScalar:e}=i;return function(r,o,a,l){var c=r._values,u=r._index,d=r._ptr,p=r._size,f=r._datatype;if(!c)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h,m=p[0],g=p[1],_=e,b=0,M=a;"string"==typeof f&&(_=s.find(e,[h=f,h]),b=s.convert(0,h),o=s.convert(o,h),M=s.find(a,[h,h]));for(var y=[],w=[],x=[],C=0;C<g;C++){x[C]=w.length;for(var O=d[C+1],N=d[C];N<O;N++){var E=u[N],k=l?M(o,c[N]):M(c[N],o);_(k,b)||(w.push(E),y.push(k))}}return x[g]=w.length,r.createSparseMatrix({values:y,index:w,ptr:x,size:[m,g],datatype:h})}}),Gn=q("matAlgo12xSfs",["typed","DenseMatrix"],i=>{var{typed:s,DenseMatrix:e}=i;return function(r,o,a,l){var c=r._values,u=r._index,d=r._ptr,p=r._size,f=r._datatype;if(!c)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h,m=p[0],g=p[1],_=a;"string"==typeof f&&(o=s.convert(o,h=f),_=s.find(a,[h,h]));for(var b=[],M=[],y=[],w=0;w<g;w++){for(var x=w+1,T=d[w+1],O=d[w];O<T;O++){var N=u[O];M[N]=c[O],y[N]=x}for(var E=0;E<m;E++)0===w&&(b[E]=[]),b[E][w]=y[E]===x?l?_(o,M[E]):_(M[E],o):l?_(o,0):_(0,o)}return new e({data:b,size:[m,g],datatype:h})}}),Hi=q("matAlgo14xDs",["typed"],i=>{var{typed:s}=i;return function(r,o,a,l){var p,c=r._data,u=r._size,d=r._datatype,f=a;"string"==typeof d&&(o=s.convert(o,p=d),f=s.find(a,[p,p]));var m=u.length>0?e(f,0,u,u[0],c,o,l):[];return r.createDenseMatrix({data:m,size:At(u),datatype:p})};function e(n,r,o,a,l,c,u){var d=[];if(r===o.length-1)for(var p=0;p<a;p++)d[p]=u?n(c,l[p]):n(l[p],c);else for(var f=0;f<a;f++)d[f]=e(n,r+1,o,o[r+1],l[f],c,u);return d}}),e_=(q("equal",["typed","equalScalar"],i=>{var{typed:s,equalScalar:e}=i;return s("equal",{"any, any":function(r,o){return null===r?null===o:null===o?null===r:void 0===r?void 0===o:void 0===o?void 0===r:e(r,o)}})}),"identity"),HL=q(e_,["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],i=>{var{typed:s,config:e,matrix:n,BigNumber:r,DenseMatrix:o,SparseMatrix:a}=i;return s(e_,{"":function(){return"Matrix"===e.matrix?n([]):[]},string:function(d){return n(d)},"number | BigNumber":function(d){return c(d,d,"Matrix"===e.matrix?"dense":void 0)},"number | BigNumber, string":function(d,p){return c(d,d,p)},"number | BigNumber, number | BigNumber":function(d,p){return c(d,p,"Matrix"===e.matrix?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(d,p,f){return c(d,p,f)},Array:function(d){return l(d)},"Array, string":function(d,p){return l(d,p)},Matrix:function(d){return l(d.valueOf(),d.storage())},"Matrix, string":function(d,p){return l(d.valueOf(),p)}});function l(u,d){switch(u.length){case 0:return d?n(d):[];case 1:return c(u[0],u[0],d);case 2:return c(u[0],u[1],d);default:throw new Error("Vector containing two values expected")}}function c(u,d,p){var f=on(u)||on(d)?r:null;if(on(u)&&(u=u.toNumber()),on(d)&&(d=d.toNumber()),!_t(u)||u<1)throw new Error("Parameters in function identity must be positive integers");if(!_t(d)||d<1)throw new Error("Parameters in function identity must be positive integers");var m=f?new r(1):1,g=f?new f(0):0,h=[u,d];if(p){if("sparse"===p)return a.diagonal(h,m,0,g);if("dense"===p)return o.diagonal(h,m,0,g);throw new TypeError('Unknown matrix type "'.concat(p,'"'))}for(var _=Go([],h,g),b=u<d?u:d,M=0;M<b;M++)_[M][M]=m;return _}});function fo(i,s,e,n){if(!(this instanceof fo))throw new SyntaxError("Constructor must be called with the new operator");this.fn=i,this.count=s,this.min=e,this.max=n,this.message="Wrong number of arguments in function "+i+" ("+s+" provided, "+e+(null!=n?"-"+n:"")+" expected)",this.stack=(new Error).stack}(fo.prototype=new Error).constructor=Error,fo.prototype.name="ArgumentsError",fo.prototype.isArgumentsError=!0;var is="Number of decimals in function round must be an integer",MN=q("round",["typed","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],i=>{var{typed:s,matrix:e,equalScalar:n,zeros:r,BigNumber:o,DenseMatrix:a}=i,l=ni({typed:s,equalScalar:n}),c=Gn({typed:s,DenseMatrix:a}),u=Hi({typed:s});return s("round",{number:Oh,"number, number":Oh,"number, BigNumber":function(p,f){if(!f.isInteger())throw new TypeError(is);return new o(p).toDecimalPlaces(f.toNumber())},Complex:function(p){return p.round()},"Complex, number":function(p,f){if(f%1)throw new TypeError(is);return p.round(f)},"Complex, BigNumber":function(p,f){if(!f.isInteger())throw new TypeError(is);var m=f.toNumber();return p.round(m)},BigNumber:function(p){return p.toDecimalPlaces(0)},"BigNumber, BigNumber":function(p,f){if(!f.isInteger())throw new TypeError(is);return p.toDecimalPlaces(f.toNumber())},Fraction:function(p){return p.round()},"Fraction, number":function(p,f){if(f%1)throw new TypeError(is);return p.round(f)},"Fraction, BigNumber":function(p,f){if(!f.isInteger())throw new TypeError(is);return p.round(f.toNumber())},"Array | Matrix":s.referToSelf(d=>p=>Qt(p,d,!0)),"SparseMatrix, number | BigNumber":s.referToSelf(d=>(p,f)=>l(p,f,d,!1)),"DenseMatrix, number | BigNumber":s.referToSelf(d=>(p,f)=>u(p,f,d,!1)),"Array, number | BigNumber":s.referToSelf(d=>(p,f)=>u(e(p),f,d,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":s.referToSelf(d=>(p,f)=>n(p,0)?r(f.size(),f.storage()):c(f,p,d,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":s.referToSelf(d=>(p,f)=>n(p,0)?r(f.size(),f.storage()):u(f,p,d,!0)),"number | Complex | BigNumber | Fraction, Array":s.referToSelf(d=>(p,f)=>u(e(f),p,d,!0).valueOf())})}),gl="unequal";q(gl,["typed","equalScalar"],i=>{var{typed:s,equalScalar:e}=i;return s(gl,{"any, any":function(r,o){return null===r?null!==o:null===o?null!==r:void 0===r?void 0!==o:void 0===o?void 0!==r:!e(r,o)}})});var m3=q("dot",["typed","addScalar","multiplyScalar","conj","size"],i=>{var{typed:s,addScalar:e,multiplyScalar:n,conj:r,size:o}=i;return s("dot",{"Array | DenseMatrix, Array | DenseMatrix":function l(d,p){var f=a(d,p),m=Ft(d)?d._data:d,g=Ft(d)?d._datatype:void 0,h=Ft(p)?p._data:p,_=Ft(p)?p._datatype:void 0,b=2===u(d).length,M=2===u(p).length,y=e,w=n;if(g&&_&&g===_&&"string"==typeof g){var x=g;y=s.find(e,[x,x]),w=s.find(n,[x,x])}if(!b&&!M){for(var C=w(r(m[0]),h[0]),T=1;T<f;T++)C=y(C,w(r(m[T]),h[T]));return C}if(!b&&M){for(var O=w(r(m[0]),h[0][0]),N=1;N<f;N++)O=y(O,w(r(m[N]),h[N][0]));return O}if(b&&!M){for(var E=w(r(m[0][0]),h[0]),k=1;k<f;k++)E=y(E,w(r(m[k][0]),h[k]));return E}if(b&&M){for(var P=w(r(m[0][0]),h[0][0]),K=1;K<f;K++)P=y(P,w(r(m[K][0]),h[K][0]));return P}},"SparseMatrix, SparseMatrix":function c(d,p){a(d,p);for(var f=d._index,m=d._values,g=p._index,h=p._values,_=0,b=e,M=n,y=0,w=0;y<f.length&&w<g.length;){var x=f[y],C=g[w];x<C?y++:x>C?w++:x===C&&(_=b(_,M(m[y],h[w])),y++,w++)}return _}});function a(d,p){var g,h,f=u(d),m=u(p);if(1===f.length)g=f[0];else{if(2!==f.length||1!==f[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+f.join(", ")+")");g=f[0]}if(1===m.length)h=m[0];else{if(2!==m.length||1!==m[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+m.join(", ")+")");h=m[0]}if(g!==h)throw new RangeError("Vectors must have equal length ("+g+" != "+h+")");if(0===g)throw new RangeError("Cannot calculate the dot product of empty vectors");return g}function u(d){return Ft(d)?d.size():o(d)}}),Eu="number | BigNumber | Fraction | Matrix | Array";"".concat(Eu,", ").concat(Eu,", ...").concat(Eu);var B_="multiply",z3=q(B_,["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],i=>{var{typed:s,matrix:e,addScalar:n,multiplyScalar:r,equalScalar:o,dot:a}=i,l=ni({typed:s,equalScalar:o}),c=Hi({typed:s});function u(x,C){switch(x.length){case 1:switch(C.length){case 1:if(x[0]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(x[0]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+x[0]+") must match Matrix rows ("+C[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+C.length+" dimensions)")}break;case 2:switch(C.length){case 1:if(x[1]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+x[1]+") must match Vector length ("+C[0]+")");break;case 2:if(x[1]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+x[1]+") must match Matrix B rows ("+C[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+C.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+x.length+" dimensions)")}}var m=s("_multiplyMatrixVector",{"DenseMatrix, any":function h(x,C){var J,T=x._data,O=x._size,N=x._datatype,E=C._data,k=C._datatype,P=O[0],K=O[1],X=n,Q=r;N&&k&&N===k&&"string"==typeof N&&(X=s.find(n,[J=N,J]),Q=s.find(r,[J,J]));for(var R=[],fe=0;fe<P;fe++){for(var B=T[fe],se=Q(B[0],E[0]),ge=1;ge<K;ge++)se=X(se,Q(B[ge],E[ge]));R[fe]=se}return x.createDenseMatrix({data:R,size:[P],datatype:J})},"SparseMatrix, any":function M(x,C){var T=x._values,O=x._index,N=x._ptr,E=x._datatype;if(!T)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var fe,k=C._data,P=C._datatype,K=x._size[0],J=C._size[0],X=[],Q=[],R=[],B=n,se=r,ge=o,Fe=0;E&&P&&E===P&&"string"==typeof E&&(B=s.find(n,[fe=E,fe]),se=s.find(r,[fe,fe]),ge=s.find(o,[fe,fe]),Fe=s.convert(0,fe));var ue=[],he=[];R[0]=0;for(var Ee=0;Ee<J;Ee++){var be=k[Ee];if(!ge(be,Fe))for(var ze=N[Ee+1],Qe=N[Ee];Qe<ze;Qe++){var Ie=O[Qe];he[Ie]?ue[Ie]=B(ue[Ie],se(be,T[Qe])):(he[Ie]=!0,Q.push(Ie),ue[Ie]=se(be,T[Qe]))}}for(var pt=Q.length,at=0;at<pt;at++)X[at]=ue[Q[at]];return R[1]=Q.length,x.createSparseMatrix({values:X,index:Q,ptr:R,size:[K,1],datatype:fe})}}),g=s("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function _(x,C){var Q,T=x._data,O=x._size,N=x._datatype,E=C._data,P=C._datatype,K=O[0],J=O[1],X=C._size[1],R=n,fe=r;N&&P&&N===P&&"string"==typeof N&&(R=s.find(n,[Q=N,Q]),fe=s.find(r,[Q,Q]));for(var B=[],se=0;se<K;se++){var ge=T[se];B[se]=[];for(var Fe=0;Fe<X;Fe++){for(var ue=fe(ge[0],E[0][Fe]),he=1;he<J;he++)ue=R(ue,fe(ge[he],E[he][Fe]));B[se][Fe]=ue}}return x.createDenseMatrix({data:B,size:[K,X],datatype:Q})},"DenseMatrix, SparseMatrix":function b(x,C){var T=x._data,O=x._size,N=x._datatype,E=C._values,k=C._index,P=C._ptr,K=C._size,J=C._datatype;if(!E)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var R,X=O[0],Q=K[1],fe=n,B=r,se=o,ge=0;N&&J&&N===J&&"string"==typeof N&&(fe=s.find(n,[R=N,R]),B=s.find(r,[R,R]),se=s.find(o,[R,R]),ge=s.convert(0,R));for(var Fe=[],ue=[],he=[],Ee=C.createSparseMatrix({values:Fe,index:ue,ptr:he,size:[X,Q],datatype:R}),be=0;be<Q;be++){he[be]=ue.length;var Te=P[be],ze=P[be+1];if(ze>Te)for(var Qe=0,Ie=0;Ie<X;Ie++){for(var pt=Ie+1,at=void 0,Je=Te;Je<ze;Je++){var ft=k[Je];Qe!==pt?(at=B(T[Ie][ft],E[Je]),Qe=pt):at=fe(at,B(T[Ie][ft],E[Je]))}Qe===pt&&!se(at,ge)&&(ue.push(Ie),Fe.push(at))}}return he[Q]=ue.length,Ee},"SparseMatrix, DenseMatrix":function y(x,C){var T=x._values,O=x._index,N=x._ptr,E=x._datatype;if(!T)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var Q,k=C._data,P=C._datatype,K=x._size[0],J=C._size[0],X=C._size[1],R=n,fe=r,B=o,se=0;E&&P&&E===P&&"string"==typeof E&&(R=s.find(n,[Q=E,Q]),fe=s.find(r,[Q,Q]),B=s.find(o,[Q,Q]),se=s.convert(0,Q));for(var ge=[],Fe=[],ue=[],he=x.createSparseMatrix({values:ge,index:Fe,ptr:ue,size:[K,X],datatype:Q}),Ee=[],be=[],Te=0;Te<X;Te++){ue[Te]=Fe.length;for(var ze=Te+1,Qe=0;Qe<J;Qe++){var Ie=k[Qe][Te];if(!B(Ie,se))for(var at=N[Qe+1],Je=N[Qe];Je<at;Je++){var ft=O[Je];be[ft]!==ze?(be[ft]=ze,Fe.push(ft),Ee[ft]=fe(Ie,T[Je])):Ee[ft]=R(Ee[ft],fe(Ie,T[Je]))}}for(var ne=Fe.length,ye=ue[Te];ye<ne;ye++)ge[ye]=Ee[Fe[ye]]}return ue[X]=Fe.length,he},"SparseMatrix, SparseMatrix":function w(x,C){var fe,T=x._values,O=x._index,N=x._ptr,E=x._datatype,k=C._values,P=C._index,K=C._ptr,J=C._datatype,X=x._size[0],Q=C._size[1],R=T&&k,B=n,se=r;E&&J&&E===J&&"string"==typeof E&&(B=s.find(n,[fe=E,fe]),se=s.find(r,[fe,fe]));for(var Te,Qe,Ie,at,Je,ft,ge=R?[]:void 0,Fe=[],ue=[],he=x.createSparseMatrix({values:ge,index:Fe,ptr:ue,size:[X,Q],datatype:fe}),Ee=R?[]:void 0,be=[],G=0;G<Q;G++){ue[G]=Fe.length;var ne=G+1;for(at=K[G+1],Ie=K[G];Ie<at;Ie++)if(ft=P[Ie],R)for(Qe=N[ft+1],Te=N[ft];Te<Qe;Te++)be[Je=O[Te]]!==ne?(be[Je]=ne,Fe.push(Je),Ee[Je]=se(k[Ie],T[Te])):Ee[Je]=B(Ee[Je],se(k[Ie],T[Te]));else for(Qe=N[ft+1],Te=N[ft];Te<Qe;Te++)be[Je=O[Te]]!==ne&&(be[Je]=ne,Fe.push(Je));if(R)for(var Ce=Fe.length,Ne=ue[G];Ne<Ce;Ne++)ge[Ne]=Ee[Fe[Ne]]}return ue[Q]=Fe.length,he}});return s(B_,r,{"Array, Array":s.referTo("Matrix, Matrix",x=>(C,T)=>{u(jt(C),jt(T));var O=x(e(C),e(T));return Ft(O)?O.valueOf():O}),"Matrix, Matrix":function(C,T){var O=C.size(),N=T.size();return u(O,N),1===O.length?1===N.length?function d(x,C,T){if(0===T)throw new Error("Cannot multiply two empty vectors");return a(x,C)}(C,T,O[0]):function p(x,C){if("dense"!==C.storage())throw new Error("Support for SparseMatrix not implemented");return function f(x,C){var X,T=x._data,N=x._datatype,E=C._data,P=C._datatype,K=x._size[0],J=C._size[1],Q=n,R=r;N&&P&&N===P&&"string"==typeof N&&(Q=s.find(n,[X=N,X]),R=s.find(r,[X,X]));for(var fe=[],B=0;B<J;B++){for(var se=R(T[0],E[0][B]),ge=1;ge<K;ge++)se=Q(se,R(T[ge],E[ge][B]));fe[B]=se}return x.createDenseMatrix({data:fe,size:[J],datatype:X})}(x,C)}(C,T):1===N.length?m(C,T):g(C,T)},"Matrix, Array":s.referTo("Matrix,Matrix",x=>(C,T)=>x(C,e(T))),"Array, Matrix":s.referToSelf(x=>(C,T)=>x(e(C,T.storage()),T)),"SparseMatrix, any":function(C,T){return l(C,T,r,!1)},"DenseMatrix, any":function(C,T){return c(C,T,r,!1)},"any, SparseMatrix":function(C,T){return l(T,C,r,!0)},"any, DenseMatrix":function(C,T){return c(T,C,r,!0)},"Array, any":function(C,T){return c(e(C),T,r,!1).valueOf()},"any, Array":function(C,T){return c(e(T),C,r,!0).valueOf()},"any, any":r,"any, any, ...any":s.referToSelf(x=>(C,T,O)=>{for(var N=x(C,T),E=0;E<O.length;E++)N=x(N,O[E]);return N})})});L(8170);var qR=q("det",["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],i=>{var{typed:s,matrix:e,subtractScalar:n,multiply:r,divideScalar:o,isZero:a,unaryMinus:l}=i;return s("det",{any:function(d){return At(d)},"Array | Matrix":function(d){var p;switch((p=Ft(d)?d.size():Array.isArray(d)?(d=e(d)).size():[]).length){case 0:return At(d);case 1:if(1===p[0])return At(d.valueOf()[0]);if(0===p[0])return 1;throw new RangeError("Matrix must be square (size: "+Zt(p)+")");case 2:var f=p[0],m=p[1];if(f===m)return function c(u,d,p){if(1===d)return At(u[0][0]);if(2===d)return n(r(u[0][0],u[1][1]),r(u[1][0],u[0][1]));for(var f=!1,m=new Array(d).fill(0).map((T,O)=>O),g=0;g<d;g++){var h=m[g];if(a(u[h][g])){var _=void 0;for(_=g+1;_<d;_++)if(!a(u[m[_]][g])){h=m[_],m[_]=m[g],m[g]=h,f=!f;break}if(_===d)return u[h][g]}for(var b=u[h][g],M=0===g?1:u[m[g-1]][g-1],y=g+1;y<d;y++)for(var w=m[y],x=g+1;x<d;x++)u[w][x]=o(n(r(u[w][x],b),r(u[w][g],u[h][x])),M)}var C=u[m[d-1]][d-1];return f?l(C):C}(d.clone().valueOf(),f);if(0===m)return 1;throw new RangeError("Matrix must be square (size: "+Zt(p)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+Zt(p)+")")}}})}),ZB=q("inv",["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],i=>{var{typed:s,matrix:e,divideScalar:n,addScalar:r,multiply:o,unaryMinus:a,det:l,identity:c,abs:u}=i;return s("inv",{"Array | Matrix":function(f){var m=Ft(f)?f.size():jt(f);switch(m.length){case 1:if(1===m[0])return Ft(f)?e([n(1,f.valueOf()[0])]):[n(1,f[0])];throw new RangeError("Matrix must be square (size: "+Zt(m)+")");case 2:var g=m[0],h=m[1];if(g===h)return Ft(f)?e(d(f.valueOf(),g,h),f.storage()):d(f,g,h);throw new RangeError("Matrix must be square (size: "+Zt(m)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+Zt(m)+")")}},any:function(f){return n(1,f)}});function d(p,f,m){var g,h,_,b,M;if(1===f){if(0===(b=p[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,b)]]}if(2===f){var y=l(p);if(0===y)throw Error("Cannot calculate inverse, determinant is zero");return[[n(p[1][1],y),n(a(p[0][1]),y)],[n(a(p[1][0]),y),n(p[0][0],y)]]}var w=p.concat();for(g=0;g<f;g++)w[g]=w[g].concat();for(var x=c(f).valueOf(),C=0;C<m;C++){var T=u(w[C][C]),O=C;for(g=C+1;g<f;)u(w[g][C])>T&&(T=u(w[g][C]),O=g),g++;if(0===T)throw Error("Cannot calculate inverse, determinant is zero");(g=O)!==C&&(M=w[C],w[C]=w[g],w[g]=M,M=x[C],x[C]=x[g],x[g]=M);var N=w[C],E=x[C];for(g=0;g<f;g++){var k=w[g],P=x[g];if(g!==C){if(0!==k[C]){for(_=n(a(k[C]),N[C]),h=C;h<m;h++)k[h]=r(k[h],o(_,N[h]));for(h=0;h<m;h++)P[h]=r(P[h],o(_,E[h]))}}else{for(_=N[C],h=C;h<m;h++)k[h]=n(k[h],_);for(h=0;h<m;h++)P[h]=n(P[h],_)}}}return x}}),xk=q("divide",["typed","matrix","multiply","equalScalar","divideScalar","inv"],i=>{var{typed:s,matrix:e,multiply:n,equalScalar:r,divideScalar:o,inv:a}=i,l=ni({typed:s,equalScalar:r}),c=Hi({typed:s});return s("divide",function km(i,s){for(var e in s)gn(s,e)&&(i[e]=s[e]);return i}({"Array | Matrix, Array | Matrix":function(d,p){return n(d,a(p))},"DenseMatrix, any":function(d,p){return c(d,p,o,!1)},"SparseMatrix, any":function(d,p){return l(d,p,o,!1)},"Array, any":function(d,p){return c(e(d),p,o,!1).valueOf()},"any, Array | Matrix":function(d,p){return n(d,a(p))}},o.signatures))}),Ke=vE({config:Le}),Sn=LE({}),os=oI({}),Lu=lI({}),zt=II({Matrix:Lu}),le=kI({BigNumber:Ke,Complex:Sn,DenseMatrix:zt,Fraction:os}),_i=qI({typed:le}),Qn=fF({typed:le}),ss=IF({BigNumber:Ke,typed:le}),as=GF({typed:le}),Yt=rA({config:Le,typed:le}),ls=kA({typed:le}),Hn=JA({typed:le}),ho=oT({typed:le}),qr=xT({Matrix:Lu,equalScalar:Yt,typed:le}),Wi=NT({typed:le}),Er=bO({typed:le}),p0=EO({Fraction:os,typed:le}),Xe=TO({DenseMatrix:zt,Matrix:Lu,SparseMatrix:qr,typed:le}),ia=PO({bignumber:ss,fraction:p0,number:ho}),yi=WO({matrix:Xe,config:Le,typed:le}),Ni=XO({BigNumber:Ke,config:Le,matrix:Xe,typed:le}),jn=fL({numeric:ia,typed:le}),vo=HL({BigNumber:Ke,DenseMatrix:zt,SparseMatrix:qr,config:Le,matrix:Xe,typed:le}),us=MN({BigNumber:Ke,DenseMatrix:zt,equalScalar:Yt,matrix:Xe,typed:le,zeros:Ni}),xn=z3({addScalar:Qn,dot:m3({addScalar:Qn,conj:as,multiplyScalar:Hn,size:yi,typed:le}),equalScalar:Yt,matrix:Xe,multiplyScalar:Hn,typed:le}),Bi=xk({divideScalar:jn,equalScalar:Yt,inv:ZB({abs:_i,addScalar:Qn,det:qR({divideScalar:jn,isZero:ls,matrix:Xe,multiply:xn,subtractScalar:Wi,typed:le,unaryMinus:Er}),divideScalar:jn,identity:vo,matrix:Xe,multiply:xn,typed:le,unaryMinus:Er}),matrix:Xe,multiply:xn,typed:le}),Ot=L(3510),yt=L(3656);class Mt{static equals(s,e,n){return n?this.resolveFieldData(s,n)===this.resolveFieldData(e,n):this.equalsByValue(s,e)}static equalsByValue(s,e){if(s===e)return!0;if(s&&e&&"object"==typeof s&&"object"==typeof e){var o,a,l,n=Array.isArray(s),r=Array.isArray(e);if(n&&r){if((a=s.length)!=e.length)return!1;for(o=a;0!=o--;)if(!this.equalsByValue(s[o],e[o]))return!1;return!0}if(n!=r)return!1;var c=this.isDate(s),u=this.isDate(e);if(c!=u)return!1;if(c&&u)return s.getTime()==e.getTime();var d=s instanceof RegExp,p=e instanceof RegExp;if(d!=p)return!1;if(d&&p)return s.toString()==e.toString();var f=Object.keys(s);if((a=f.length)!==Object.keys(e).length)return!1;for(o=a;0!=o--;)if(!Object.prototype.hasOwnProperty.call(e,f[o]))return!1;for(o=a;0!=o--;)if(!this.equalsByValue(s[l=f[o]],e[l]))return!1;return!0}return s!=s&&e!=e}static resolveFieldData(s,e){if(s&&e){if(this.isFunction(e))return e(s);if(-1==e.indexOf("."))return s[e];{let n=e.split("."),r=s;for(let o=0,a=n.length;o<a;++o){if(null==r)return null;r=r[n[o]]}return r}}return null}static isFunction(s){return!!(s&&s.constructor&&s.call&&s.apply)}static reorderArray(s,e,n){s&&e!==n&&(n>=s.length&&(n%=s.length,e%=s.length),s.splice(n,0,s.splice(e,1)[0]))}static insertIntoOrderedArray(s,e,n,r){if(n.length>0){let o=!1;for(let a=0;a<n.length;a++)if(this.findIndexInList(n[a],r)>e){n.splice(a,0,s),o=!0;break}o||n.push(s)}else n.push(s)}static findIndexInList(s,e){let n=-1;if(e)for(let r=0;r<e.length;r++)if(e[r]==s){n=r;break}return n}static contains(s,e){if(null!=s&&e&&e.length)for(let n of e)if(this.equals(s,n))return!0;return!1}static removeAccents(s){return s&&s.search(/[\xC0-\xFF]/g)>-1&&(s=s.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),s}static isDate(s){return"[object Date]"===Object.prototype.toString.call(s)}static isEmpty(s){return null==s||""===s||Array.isArray(s)&&0===s.length||!this.isDate(s)&&"object"==typeof s&&0===Object.keys(s).length}static isNotEmpty(s){return!this.isEmpty(s)}static compare(s,e,n,r=1){let o=-1;const a=this.isEmpty(s),l=this.isEmpty(e);return o=a&&l?0:a?r:l?-r:"string"==typeof s&&"string"==typeof e?s.localeCompare(e,n,{numeric:!0}):s<e?-1:s>e?1:0,o}static sort(s,e,n=1,r,o=1){return(1===o?n:o)*Mt.compare(s,e,r,n)}static merge(s,e){if(null!=s||null!=e)return null!=s&&"object"!=typeof s||null!=e&&"object"!=typeof e?null!=s&&"string"!=typeof s||null!=e&&"string"!=typeof e?e||s:[s||"",e||""].join(" "):{...s||{},...e||{}}}static isPrintableCharacter(s=""){return this.isNotEmpty(s)&&1===s.length&&s.match(/\S| /)}static getItemValue(s,...e){return this.isFunction(s)?s(...e):s}static findLastIndex(s,e){let n=-1;if(this.isNotEmpty(s))try{n=s.findLastIndex(e)}catch{n=s.lastIndexOf([...s].reverse().find(e))}return n}static findLast(s,e){let n;if(this.isNotEmpty(s))try{n=s.findLast(e)}catch{n=[...s].reverse().find(e)}return n}}var x0=0;function ps(i="pn_id_"){return`${i}${++x0}`}var cr=function CP(){let i=[];const r=o=>o&&parseInt(o.style.zIndex,10)||0;return{get:r,set:(o,a,l)=>{a&&(a.style.zIndex=String(((o,a)=>{let l=i.length>0?i[i.length-1]:{key:o,value:a},c=l.value+(l.key===o?0:a)+2;return i.push({key:o,value:c}),c})(o,l)))},clear:o=>{o&&((o=>{i=i.filter(a=>a.value!==o)})(r(o)),o.style.zIndex="")},getCurrent:()=>i.length>0?i[i.length-1].value:0}}();const E0=["*"];let ai=(()=>class i{static STARTS_WITH="startsWith";static CONTAINS="contains";static NOT_CONTAINS="notContains";static ENDS_WITH="endsWith";static EQUALS="equals";static NOT_EQUALS="notEquals";static IN="in";static LESS_THAN="lt";static LESS_THAN_OR_EQUAL_TO="lte";static GREATER_THAN="gt";static GREATER_THAN_OR_EQUAL_TO="gte";static BETWEEN="between";static IS="is";static IS_NOT="isNot";static BEFORE="before";static AFTER="after";static DATE_IS="dateIs";static DATE_IS_NOT="dateIsNot";static DATE_BEFORE="dateBefore";static DATE_AFTER="dateAfter"})(),I0=(()=>{class i{filter(e,n,r,o,a){let l=[];if(e)for(let c of e)for(let u of n){let d=Mt.resolveFieldData(c,u);if(this.filters[o](d,r,a)){l.push(c);break}}return l}filters={startsWith:(e,n,r)=>{if(null==n||""===n.trim())return!0;if(null==e)return!1;let o=Mt.removeAccents(n.toString()).toLocaleLowerCase(r);return Mt.removeAccents(e.toString()).toLocaleLowerCase(r).slice(0,o.length)===o},contains:(e,n,r)=>{if(null==n||"string"==typeof n&&""===n.trim())return!0;if(null==e)return!1;let o=Mt.removeAccents(n.toString()).toLocaleLowerCase(r);return-1!==Mt.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(o)},notContains:(e,n,r)=>{if(null==n||"string"==typeof n&&""===n.trim())return!0;if(null==e)return!1;let o=Mt.removeAccents(n.toString()).toLocaleLowerCase(r);return-1===Mt.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(o)},endsWith:(e,n,r)=>{if(null==n||""===n.trim())return!0;if(null==e)return!1;let o=Mt.removeAccents(n.toString()).toLocaleLowerCase(r),a=Mt.removeAccents(e.toString()).toLocaleLowerCase(r);return-1!==a.indexOf(o,a.length-o.length)},equals:(e,n,r)=>null==n||"string"==typeof n&&""===n.trim()||null!=e&&(e.getTime&&n.getTime?e.getTime()===n.getTime():Mt.removeAccents(e.toString()).toLocaleLowerCase(r)==Mt.removeAccents(n.toString()).toLocaleLowerCase(r)),notEquals:(e,n,r)=>!(null==n||"string"==typeof n&&""===n.trim()||null!=e&&(e.getTime&&n.getTime?e.getTime()===n.getTime():Mt.removeAccents(e.toString()).toLocaleLowerCase(r)==Mt.removeAccents(n.toString()).toLocaleLowerCase(r))),in:(e,n)=>{if(null==n||0===n.length)return!0;for(let r=0;r<n.length;r++)if(Mt.equals(e,n[r]))return!0;return!1},between:(e,n)=>null==n||null==n[0]||null==n[1]||null!=e&&(e.getTime?n[0].getTime()<=e.getTime()&&e.getTime()<=n[1].getTime():n[0]<=e&&e<=n[1]),lt:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()<n.getTime():e<n),lte:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()<=n.getTime():e<=n),gt:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()>n.getTime():e>n),gte:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()>=n.getTime():e>=n),is:(e,n,r)=>this.filters.equals(e,n,r),isNot:(e,n,r)=>this.filters.notEquals(e,n,r),before:(e,n,r)=>this.filters.lt(e,n,r),after:(e,n,r)=>this.filters.gt(e,n,r),dateIs:(e,n)=>null==n||null!=e&&e.toDateString()===n.toDateString(),dateIsNot:(e,n)=>null==n||null!=e&&e.toDateString()!==n.toDateString(),dateBefore:(e,n)=>null==n||null!=e&&e.getTime()<n.getTime(),dateAfter:(e,n)=>null==n||null!=e&&e.getTime()>n.getTime()};register(e,n){this.filters[e]=n}static \u0275fac=function(n){return new(n||i)};static \u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),F0=(()=>{class i{clickSource=new D.Subject;clickObservable=this.clickSource.asObservable();add(e){e&&this.clickSource.next(e)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Jr=(()=>{class i{ripple=!1;inputStyle="outlined";overlayOptions={};filterMatchModeOptions={text:[ai.STARTS_WITH,ai.CONTAINS,ai.NOT_CONTAINS,ai.ENDS_WITH,ai.EQUALS,ai.NOT_EQUALS],numeric:[ai.EQUALS,ai.NOT_EQUALS,ai.LESS_THAN,ai.LESS_THAN_OR_EQUAL_TO,ai.GREATER_THAN,ai.GREATER_THAN_OR_EQUAL_TO],date:[ai.DATE_IS,ai.DATE_IS_NOT,ai.DATE_BEFORE,ai.DATE_AFTER]};translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",pending:"Pending",fileSizeTypes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],chooseYear:"Choose Year",chooseMonth:"Choose Month",chooseDate:"Choose Date",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",prevHour:"Previous Hour",nextHour:"Next Hour",prevMinute:"Previous Minute",nextMinute:"Next Minute",prevSecond:"Previous Second",nextSecond:"Next Second",am:"am",pm:"pm",dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",searchMessage:"{0} results are available",selectionMessage:"{0} items selected",emptySelectionMessage:"No selected item",emptySearchMessage:"No results found",emptyFilterMessage:"No results found",aria:{trueLabel:"True",falseLabel:"False",nullLabel:"Not Selected",star:"1 star",stars:"{star} stars",selectAll:"All items selected",unselectAll:"All items unselected",close:"Close",previous:"Previous",next:"Next",navigation:"Navigation",scrollTop:"Scroll Top",moveTop:"Move Top",moveUp:"Move Up",moveDown:"Move Down",moveBottom:"Move Bottom",moveToTarget:"Move to Target",moveToSource:"Move to Source",moveAllToTarget:"Move All to Target",moveAllToSource:"Move All to Source",pageLabel:"{page}",firstPageLabel:"First Page",lastPageLabel:"Last Page",nextPageLabel:"Next Page",prevPageLabel:"Previous Page",rowsPerPageLabel:"Rows per page",previousPageLabel:"Previous Page",jumpToPageDropdownLabel:"Jump to Page Dropdown",jumpToPageInputLabel:"Jump to Page Input",selectRow:"Row Selected",unselectRow:"Row Unselected",expandRow:"Row Expanded",collapseRow:"Row Collapsed",showFilterMenu:"Show Filter Menu",hideFilterMenu:"Hide Filter Menu",filterOperator:"Filter Operator",filterConstraint:"Filter Constraint",editRow:"Row Edit",saveEdit:"Save Edit",cancelEdit:"Cancel Edit",listView:"List View",gridView:"Grid View",slide:"Slide",slideNumber:"{slideNumber}",zoomImage:"Zoom Image",zoomIn:"Zoom In",zoomOut:"Zoom Out",rotateRight:"Rotate Right",rotateLeft:"Rotate Left"}};zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100};translationSource=new D.Subject;translationObserver=this.translationSource.asObservable();getTranslation(e){return this.translation[e]}setTranslation(e){this.translation={...this.translation,...e},this.translationSource.next(this.translation)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),MP=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["p-header"]],ngContentSelectors:E0,decls:1,vars:0,template:function(n,r){1&n&&(t.\u0275\u0275projectionDef(),t.\u0275\u0275projection(0))},encapsulation:2})}return i})(),wP=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["p-footer"]],ngContentSelectors:E0,decls:1,vars:0,template:function(n,r){1&n&&(t.\u0275\u0275projectionDef(),t.\u0275\u0275projection(0))},encapsulation:2})}return i})(),ki=(()=>{class i{template;type;name;constructor(e){this.template=e}getType(){return this.name}static \u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(t.TemplateRef))};static \u0275dir=t.\u0275\u0275defineDirective({type:i,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}})}return i})(),ji=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=t.\u0275\u0275defineNgModule({type:i});static \u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})(),xl=(()=>class i{static STARTS_WITH="startsWith";static CONTAINS="contains";static NOT_CONTAINS="notContains";static ENDS_WITH="endsWith";static EQUALS="equals";static NOT_EQUALS="notEquals";static NO_FILTER="noFilter";static LT="lt";static LTE="lte";static GT="gt";static GTE="gte";static IS="is";static IS_NOT="isNot";static BEFORE="before";static AFTER="after";static CLEAR="clear";static APPLY="apply";static MATCH_ALL="matchAll";static MATCH_ANY="matchAny";static ADD_RULE="addRule";static REMOVE_RULE="removeRule";static ACCEPT="accept";static REJECT="reject";static CHOOSE="choose";static UPLOAD="upload";static CANCEL="cancel";static PENDING="pending";static FILE_SIZE_TYPES="fileSizeTypes";static DAY_NAMES="dayNames";static DAY_NAMES_SHORT="dayNamesShort";static DAY_NAMES_MIN="dayNamesMin";static MONTH_NAMES="monthNames";static MONTH_NAMES_SHORT="monthNamesShort";static FIRST_DAY_OF_WEEK="firstDayOfWeek";static TODAY="today";static WEEK_HEADER="weekHeader";static WEAK="weak";static MEDIUM="medium";static STRONG="strong";static PASSWORD_PROMPT="passwordPrompt";static EMPTY_MESSAGE="emptyMessage";static EMPTY_FILTER_MESSAGE="emptyFilterMessage"})();var De=L(2496);let Be=(()=>{class i{static zindex=1e3;static calculatedScrollbarWidth=null;static calculatedScrollbarHeight=null;static browser;static addClass(e,n){e&&n&&(e.classList?e.classList.add(n):e.className+=" "+n)}static addMultipleClasses(e,n){if(e&&n)if(e.classList){let r=n.trim().split(" ");for(let o=0;o<r.length;o++)e.classList.add(r[o])}else{let r=n.split(" ");for(let o=0;o<r.length;o++)e.className+=" "+r[o]}}static removeClass(e,n){e&&n&&(e.classList?e.classList.remove(n):e.className=e.className.replace(new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi")," "))}static removeMultipleClasses(e,n){e&&n&&[n].flat().filter(Boolean).forEach(r=>r.split(" ").forEach(o=>this.removeClass(e,o)))}static hasClass(e,n){return!(!e||!n)&&(e.classList?e.classList.contains(n):new RegExp("(^| )"+n+"( |$)","gi").test(e.className))}static siblings(e){return Array.prototype.filter.call(e.parentNode.children,function(n){return n!==e})}static find(e,n){return Array.from(e.querySelectorAll(n))}static findSingle(e,n){return this.isElement(e)?e.querySelector(n):null}static index(e){let n=e.parentNode.childNodes,r=0;for(var o=0;o<n.length;o++){if(n[o]==e)return r;1==n[o].nodeType&&r++}return-1}static indexWithinGroup(e,n){let r=e.parentNode?e.parentNode.childNodes:[],o=0;for(var a=0;a<r.length;a++){if(r[a]==e)return o;r[a].attributes&&r[a].attributes[n]&&1==r[a].nodeType&&o++}return-1}static appendOverlay(e,n,r="self"){"self"!==r&&e&&n&&this.appendChild(e,n)}static alignOverlay(e,n,r="self",o=!0){e&&n&&(o&&(e.style.minWidth=`${i.getOuterWidth(n)}px`),"self"===r?this.relativePosition(e,n):this.absolutePosition(e,n))}static relativePosition(e,n){const r=b=>{if(b)return"relative"===getComputedStyle(b).getPropertyValue("position")?b:r(b.parentElement)},o=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),a=n.offsetHeight,l=n.getBoundingClientRect(),c=this.getWindowScrollTop(),u=this.getWindowScrollLeft(),d=this.getViewport(),f=r(e)?.getBoundingClientRect()||{top:-1*c,left:-1*u};let m,g;l.top+a+o.height>d.height?(m=l.top-f.top-o.height,e.style.transformOrigin="bottom",l.top+m<0&&(m=-1*l.top)):(m=a+l.top-f.top,e.style.transformOrigin="top");const h=l.left+o.width-d.width;g=o.width>d.width?-1*(l.left-f.left):h>0?l.left-f.left-h:l.left-f.left,e.style.top=m+"px",e.style.left=g+"px"}static absolutePosition(e,n){const r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),o=r.height,a=r.width,l=n.offsetHeight,c=n.offsetWidth,u=n.getBoundingClientRect(),d=this.getWindowScrollTop(),p=this.getWindowScrollLeft(),f=this.getViewport();let m,g;u.top+l+o>f.height?(m=u.top+d-o,e.style.transformOrigin="bottom",m<0&&(m=d)):(m=l+u.top+d,e.style.transformOrigin="top"),g=u.left+a>f.width?Math.max(0,u.left+p+c-a):u.left+p,e.style.top=m+"px",e.style.left=g+"px"}static getParents(e,n=[]){return null===e.parentNode?n:this.getParents(e.parentNode,n.concat([e.parentNode]))}static getScrollableParents(e){let n=[];if(e){let r=this.getParents(e);const o=/(auto|scroll)/,a=l=>{let c=window.getComputedStyle(l,null);return o.test(c.getPropertyValue("overflow"))||o.test(c.getPropertyValue("overflowX"))||o.test(c.getPropertyValue("overflowY"))};for(let l of r){let c=1===l.nodeType&&l.dataset.scrollselectors;if(c){let u=c.split(",");for(let d of u){let p=this.findSingle(l,d);p&&a(p)&&n.push(p)}}9!==l.nodeType&&a(l)&&n.push(l)}}return n}static getHiddenElementOuterHeight(e){e.style.visibility="hidden",e.style.display="block";let n=e.offsetHeight;return e.style.display="none",e.style.visibility="visible",n}static getHiddenElementOuterWidth(e){e.style.visibility="hidden",e.style.display="block";let n=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",n}static getHiddenElementDimensions(e){let n={};return e.style.visibility="hidden",e.style.display="block",n.width=e.offsetWidth,n.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible",n}static scrollInView(e,n){let r=getComputedStyle(e).getPropertyValue("borderTopWidth"),o=r?parseFloat(r):0,a=getComputedStyle(e).getPropertyValue("paddingTop"),l=a?parseFloat(a):0,c=e.getBoundingClientRect(),d=n.getBoundingClientRect().top+document.body.scrollTop-(c.top+document.body.scrollTop)-o-l,p=e.scrollTop,f=e.clientHeight,m=this.getOuterHeight(n);d<0?e.scrollTop=p+d:d+m>f&&(e.scrollTop=p+d-f+m)}static fadeIn(e,n){e.style.opacity=0;let r=+new Date,o=0,a=function(){o=+e.style.opacity.replace(",",".")+((new Date).getTime()-r)/n,e.style.opacity=o,r=+new Date,+o<1&&(window.requestAnimationFrame&&requestAnimationFrame(a)||setTimeout(a,16))};a()}static fadeOut(e,n){var r=1,l=50/n;let c=setInterval(()=>{(r-=l)<=0&&(r=0,clearInterval(c)),e.style.opacity=r},50)}static getWindowScrollTop(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}static getWindowScrollLeft(){let e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}static matches(e,n){var r=Element.prototype;return(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(a){return-1!==[].indexOf.call(document.querySelectorAll(a),this)}).call(e,n)}static getOuterWidth(e,n){let r=e.offsetWidth;if(n){let o=getComputedStyle(e);r+=parseFloat(o.marginLeft)+parseFloat(o.marginRight)}return r}static getHorizontalPadding(e){let n=getComputedStyle(e);return parseFloat(n.paddingLeft)+parseFloat(n.paddingRight)}static getHorizontalMargin(e){let n=getComputedStyle(e);return parseFloat(n.marginLeft)+parseFloat(n.marginRight)}static innerWidth(e){let n=e.offsetWidth,r=getComputedStyle(e);return n+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),n}static width(e){let n=e.offsetWidth,r=getComputedStyle(e);return n-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),n}static getInnerHeight(e){let n=e.offsetHeight,r=getComputedStyle(e);return n+=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),n}static getOuterHeight(e,n){let r=e.offsetHeight;if(n){let o=getComputedStyle(e);r+=parseFloat(o.marginTop)+parseFloat(o.marginBottom)}return r}static getHeight(e){let n=e.offsetHeight,r=getComputedStyle(e);return n-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),n}static getWidth(e){let n=e.offsetWidth,r=getComputedStyle(e);return n-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),n}static getViewport(){let e=window,n=document,r=n.documentElement,o=n.getElementsByTagName("body")[0];return{width:e.innerWidth||r.clientWidth||o.clientWidth,height:e.innerHeight||r.clientHeight||o.clientHeight}}static getOffset(e){var n=e.getBoundingClientRect();return{top:n.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:n.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(e,n){let r=e.parentNode;if(!r)throw"Can't replace element";return r.replaceChild(n,e)}static getUserAgent(){if(navigator&&this.isClient())return navigator.userAgent}static isIE(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>0||(e.indexOf("Trident/")>0?(e.indexOf("rv:"),!0):e.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(e,n){if(this.isElement(n))n.appendChild(e);else{if(!(n&&n.el&&n.el.nativeElement))throw"Cannot append "+n+" to "+e;n.el.nativeElement.appendChild(e)}}static removeChild(e,n){if(this.isElement(n))n.removeChild(e);else{if(!n.el||!n.el.nativeElement)throw"Cannot remove "+e+" from "+n;n.el.nativeElement.removeChild(e)}}static removeElement(e){"remove"in Element.prototype?e.remove():e.parentNode.removeChild(e)}static isElement(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}static calculateScrollbarWidth(e){if(e){let n=getComputedStyle(e);return e.offsetWidth-e.clientWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let n=document.createElement("div");n.className="p-scrollbar-measure",document.body.appendChild(n);let r=n.offsetWidth-n.clientWidth;return document.body.removeChild(n),this.calculatedScrollbarWidth=r,r}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let e=document.createElement("div");e.className="p-scrollbar-measure",document.body.appendChild(e);let n=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),this.calculatedScrollbarWidth=n,n}static invokeElementMethod(e,n,r){e[n].apply(e,r)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let e=this.resolveUserAgent();this.browser={},e.browser&&(this.browser[e.browser]=!0,this.browser.version=e.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let e=navigator.userAgent.toLowerCase(),n=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:n[1]||"",version:n[2]||"0"}}static isInteger(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}static isHidden(e){return!e||null===e.offsetParent}static isVisible(e){return e&&null!=e.offsetParent}static isExist(e){return null!==e&&typeof e<"u"&&e.nodeName&&e.parentNode}static focus(e,n){e&&document.activeElement!==e&&e.focus(n)}static getFocusableElements(e,n=""){let r=this.find(e,`button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${n},\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${n},\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${n},\n                select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${n},\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${n},\n                [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${n},\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${n}`),o=[];for(let a of r)"none"!=getComputedStyle(a).display&&"hidden"!=getComputedStyle(a).visibility&&o.push(a);return o}static getFirstFocusableElement(e,n){const r=this.getFocusableElements(e,n);return r.length>0?r[0]:null}static getLastFocusableElement(e,n){const r=this.getFocusableElements(e,n);return r.length>0?r[r.length-1]:null}static getNextFocusableElement(e,n=!1){const r=i.getFocusableElements(e);let o=0;if(r&&r.length>0){const a=r.indexOf(r[0].ownerDocument.activeElement);n?o=-1==a||0===a?r.length-1:a-1:-1!=a&&a!==r.length-1&&(o=a+1)}return r[o]}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}static getSelection(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null}static getTargetElement(e,n){if(!e)return null;switch(e){case"document":return document;case"window":return window;case"@next":return n?.nextElementSibling;case"@prev":return n?.previousElementSibling;case"@parent":return n?.parentElement;case"@grandparent":return n?.parentElement.parentElement;default:const r=typeof e;if("string"===r)return document.querySelector(e);if("object"===r&&e.hasOwnProperty("nativeElement"))return this.isExist(e.nativeElement)?e.nativeElement:void 0;const a=(l=e)&&l.constructor&&l.call&&l.apply?e():e;return a&&9===a.nodeType||this.isExist(a)?a:null}var l}static isClient(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}static getAttribute(e,n){if(e){const r=e.getAttribute(n);return isNaN(r)?"true"===r||"false"===r?"true"===r:r:+r}}static calculateBodyScrollbarWidth(){return window.innerWidth-document.documentElement.offsetWidth}static blockBodyScroll(e="p-overflow-hidden"){document.body.style.setProperty("--scrollbar-width",this.calculateBodyScrollbarWidth()+"px"),this.addClass(document.body,e)}static unblockBodyScroll(e="p-overflow-hidden"){document.body.style.removeProperty("--scrollbar-width"),this.removeClass(document.body,e)}}return i})();class A0{element;listener;scrollableParents;constructor(s,e=(()=>{})){this.element=s,this.listener=e}bindScrollListener(){this.scrollableParents=Be.getScrollableParents(this.element);for(let s=0;s<this.scrollableParents.length;s++)this.scrollableParents[s].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let s=0;s<this.scrollableParents.length;s++)this.scrollableParents[s].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}const DP=["overlay"],xP=["content"];function EP(i,s){1&i&&t.\u0275\u0275elementContainer(0)}const IP=function(i,s,e){return{showTransitionParams:i,hideTransitionParams:s,transform:e}},FP=function(i){return{value:"visible",params:i}},AP=function(i){return{mode:i}},TP=function(i){return{$implicit:i}};function OP(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",1,3),t.\u0275\u0275listener("click",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.onOverlayContentClick(r))})("@overlayContentAnimation.start",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.onOverlayContentAnimationStart(r))})("@overlayContentAnimation.done",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.onOverlayContentAnimationDone(r))}),t.\u0275\u0275projection(2),t.\u0275\u0275template(3,EP,1,0,"ng-container",4),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275classMap(e.contentStyleClass),t.\u0275\u0275property("ngStyle",e.contentStyle)("ngClass","p-overlay-content")("@overlayContentAnimation",t.\u0275\u0275pureFunction1(11,FP,t.\u0275\u0275pureFunction3(7,IP,e.showTransitionOptions,e.hideTransitionOptions,e.transformOptions[e.modal?e.overlayResponsiveDirection:"default"]))),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",t.\u0275\u0275pureFunction1(15,TP,t.\u0275\u0275pureFunction1(13,AP,e.overlayMode)))}}const LP=function(i,s,e,n,r,o,a,l,c,u,d,p,f,m){return{"p-overlay p-component":!0,"p-overlay-modal p-component-overlay p-component-overlay-enter":i,"p-overlay-center":s,"p-overlay-top":e,"p-overlay-top-start":n,"p-overlay-top-end":r,"p-overlay-bottom":o,"p-overlay-bottom-start":a,"p-overlay-bottom-end":l,"p-overlay-left":c,"p-overlay-left-start":u,"p-overlay-left-end":d,"p-overlay-right":p,"p-overlay-right-start":f,"p-overlay-right-end":m}};function NP(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",1,2),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.onOverlayClick())}),t.\u0275\u0275template(2,OP,4,17,"div",0),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275classMap(e.styleClass),t.\u0275\u0275property("ngStyle",e.style)("ngClass",t.\u0275\u0275pureFunctionV(5,LP,[e.modal,e.modal&&"center"===e.overlayResponsiveDirection,e.modal&&"top"===e.overlayResponsiveDirection,e.modal&&"top-start"===e.overlayResponsiveDirection,e.modal&&"top-end"===e.overlayResponsiveDirection,e.modal&&"bottom"===e.overlayResponsiveDirection,e.modal&&"bottom-start"===e.overlayResponsiveDirection,e.modal&&"bottom-end"===e.overlayResponsiveDirection,e.modal&&"left"===e.overlayResponsiveDirection,e.modal&&"left-start"===e.overlayResponsiveDirection,e.modal&&"left-end"===e.overlayResponsiveDirection,e.modal&&"right"===e.overlayResponsiveDirection,e.modal&&"right-start"===e.overlayResponsiveDirection,e.modal&&"right-end"===e.overlayResponsiveDirection])),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.visible)}}const RP=["*"],BP={provide:De.NG_VALUE_ACCESSOR,useExisting:(0,t.forwardRef)(()=>Uu),multi:!0},kP=(0,yt.animation)([(0,yt.style)({transform:"{{transform}}",opacity:0}),(0,yt.animate)("{{showTransitionParams}}")]),jP=(0,yt.animation)([(0,yt.animate)("{{hideTransitionParams}}",(0,yt.style)({transform:"{{transform}}",opacity:0}))]);let Uu=(()=>{class i{document;platformId;el;renderer;config;overlayService;cd;zone;get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.modalVisible&&(this.modalVisible=!0)}get mode(){return this._mode||this.overlayOptions?.mode}set mode(e){this._mode=e}get style(){return Mt.merge(this._style,this.modal?this.overlayResponsiveOptions?.style:this.overlayOptions?.style)}set style(e){this._style=e}get styleClass(){return Mt.merge(this._styleClass,this.modal?this.overlayResponsiveOptions?.styleClass:this.overlayOptions?.styleClass)}set styleClass(e){this._styleClass=e}get contentStyle(){return Mt.merge(this._contentStyle,this.modal?this.overlayResponsiveOptions?.contentStyle:this.overlayOptions?.contentStyle)}set contentStyle(e){this._contentStyle=e}get contentStyleClass(){return Mt.merge(this._contentStyleClass,this.modal?this.overlayResponsiveOptions?.contentStyleClass:this.overlayOptions?.contentStyleClass)}set contentStyleClass(e){this._contentStyleClass=e}get target(){const e=this._target||this.overlayOptions?.target;return void 0===e?"@prev":e}set target(e){this._target=e}get appendTo(){return this._appendTo||this.overlayOptions?.appendTo}set appendTo(e){this._appendTo=e}get autoZIndex(){const e=this._autoZIndex||this.overlayOptions?.autoZIndex;return void 0===e||e}set autoZIndex(e){this._autoZIndex=e}get baseZIndex(){const e=this._baseZIndex||this.overlayOptions?.baseZIndex;return void 0===e?0:e}set baseZIndex(e){this._baseZIndex=e}get showTransitionOptions(){const e=this._showTransitionOptions||this.overlayOptions?.showTransitionOptions;return void 0===e?".12s cubic-bezier(0, 0, 0.2, 1)":e}set showTransitionOptions(e){this._showTransitionOptions=e}get hideTransitionOptions(){const e=this._hideTransitionOptions||this.overlayOptions?.hideTransitionOptions;return void 0===e?".1s linear":e}set hideTransitionOptions(e){this._hideTransitionOptions=e}get listener(){return this._listener||this.overlayOptions?.listener}set listener(e){this._listener=e}get responsive(){return this._responsive||this.overlayOptions?.responsive}set responsive(e){this._responsive=e}get options(){return this._options}set options(e){this._options=e}visibleChange=new t.EventEmitter;onBeforeShow=new t.EventEmitter;onShow=new t.EventEmitter;onBeforeHide=new t.EventEmitter;onHide=new t.EventEmitter;onAnimationStart=new t.EventEmitter;onAnimationDone=new t.EventEmitter;templates;overlayViewChild;contentViewChild;contentTemplate;_visible=!1;_mode;_style;_styleClass;_contentStyle;_contentStyleClass;_target;_appendTo;_autoZIndex;_baseZIndex;_showTransitionOptions;_hideTransitionOptions;_listener;_responsive;_options;modalVisible=!1;isOverlayClicked=!1;isOverlayContentClicked=!1;scrollHandler;documentClickListener;documentResizeListener;documentKeyboardListener;window;transformOptions={default:"scaleY(0.8)",center:"scale(0.7)",top:"translate3d(0px, -100%, 0px)","top-start":"translate3d(0px, -100%, 0px)","top-end":"translate3d(0px, -100%, 0px)",bottom:"translate3d(0px, 100%, 0px)","bottom-start":"translate3d(0px, 100%, 0px)","bottom-end":"translate3d(0px, 100%, 0px)",left:"translate3d(-100%, 0px, 0px)","left-start":"translate3d(-100%, 0px, 0px)","left-end":"translate3d(-100%, 0px, 0px)",right:"translate3d(100%, 0px, 0px)","right-start":"translate3d(100%, 0px, 0px)","right-end":"translate3d(100%, 0px, 0px)"};get modal(){if((0,I.isPlatformBrowser)(this.platformId))return"modal"===this.mode||this.overlayResponsiveOptions&&this.window?.matchMedia(this.overlayResponsiveOptions.media?.replace("@media","")||`(max-width: ${this.overlayResponsiveOptions.breakpoint})`).matches}get overlayMode(){return this.mode||(this.modal?"modal":"overlay")}get overlayOptions(){return{...this.config?.overlayOptions,...this.options}}get overlayResponsiveOptions(){return{...this.overlayOptions?.responsive,...this.responsive}}get overlayResponsiveDirection(){return this.overlayResponsiveOptions?.direction||"center"}get overlayEl(){return this.overlayViewChild?.nativeElement}get contentEl(){return this.contentViewChild?.nativeElement}get targetEl(){return Be.getTargetElement(this.target,this.el?.nativeElement)}constructor(e,n,r,o,a,l,c,u){this.document=e,this.platformId=n,this.el=r,this.renderer=o,this.config=a,this.overlayService=l,this.cd=c,this.zone=u,this.window=this.document.defaultView}ngAfterContentInit(){this.templates?.forEach(e=>{e.getType(),this.contentTemplate=e.template})}show(e,n=!1){this.onVisibleChange(!0),this.handleEvents("onShow",{overlay:e||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),n&&Be.focus(this.targetEl),this.modal&&Be.addClass(this.document?.body,"p-overflow-hidden")}hide(e,n=!1){this.visible&&(this.onVisibleChange(!1),this.handleEvents("onHide",{overlay:e||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),n&&Be.focus(this.targetEl),this.modal&&Be.removeClass(this.document?.body,"p-overflow-hidden"))}alignOverlay(){!this.modal&&Be.alignOverlay(this.overlayEl,this.targetEl,this.appendTo)}onVisibleChange(e){this._visible=e,this.visibleChange.emit(e)}onOverlayClick(){this.isOverlayClicked=!0}onOverlayContentClick(e){this.overlayService.add({originalEvent:e,target:this.targetEl}),this.isOverlayContentClicked=!0}onOverlayContentAnimationStart(e){switch(e.toState){case"visible":this.handleEvents("onBeforeShow",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),this.autoZIndex&&cr.set(this.overlayMode,this.overlayEl,this.baseZIndex+this.config?.zIndex[this.overlayMode]),Be.appendOverlay(this.overlayEl,"body"===this.appendTo?this.document.body:this.appendTo,this.appendTo),this.alignOverlay();break;case"void":this.handleEvents("onBeforeHide",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),this.modal&&Be.addClass(this.overlayEl,"p-component-overlay-leave")}this.handleEvents("onAnimationStart",e)}onOverlayContentAnimationDone(e){const n=this.overlayEl||e.element.parentElement;switch(e.toState){case"visible":this.show(n,!0),this.bindListeners();break;case"void":this.hide(n,!0),this.unbindListeners(),Be.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),cr.clear(n),this.modalVisible=!1,this.cd.markForCheck()}this.handleEvents("onAnimationDone",e)}handleEvents(e,n){this[e].emit(n),this.options&&this.options[e]&&this.options[e](n),this.config?.overlayOptions&&(this.config?.overlayOptions)[e]&&(this.config?.overlayOptions)[e](n)}bindListeners(){this.bindScrollListener(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindDocumentKeyboardListener()}unbindListeners(){this.unbindScrollListener(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindDocumentKeyboardListener()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new A0(this.targetEl,e=>{(!this.listener||this.listener(e,{type:"scroll",mode:this.overlayMode,valid:!0}))&&this.hide(e,!0)})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.document,"click",e=>{const r=!(this.targetEl&&(this.targetEl.isSameNode(e.target)||!this.isOverlayClicked&&this.targetEl.contains(e.target))||this.isOverlayContentClicked);(this.listener?this.listener(e,{type:"outside",mode:this.overlayMode,valid:3!==e.which&&r}):r)&&this.hide(e),this.isOverlayClicked=this.isOverlayContentClicked=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener||(this.documentResizeListener=this.renderer.listen(this.window,"resize",e=>{(this.listener?this.listener(e,{type:"resize",mode:this.overlayMode,valid:!Be.isTouchDevice()}):!Be.isTouchDevice())&&this.hide(e,!0)}))}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}bindDocumentKeyboardListener(){this.documentKeyboardListener||this.zone.runOutsideAngular(()=>{this.documentKeyboardListener=this.renderer.listen(this.window,"keydown",e=>{!1!==this.overlayOptions.hideOnEscape&&"Escape"===e.code&&(this.listener?this.listener(e,{type:"keydown",mode:this.overlayMode,valid:!Be.isTouchDevice()}):!Be.isTouchDevice())&&this.zone.run(()=>{this.hide(e,!0)})})})}unbindDocumentKeyboardListener(){this.documentKeyboardListener&&(this.documentKeyboardListener(),this.documentKeyboardListener=null)}ngOnDestroy(){this.hide(this.overlayEl,!0),this.overlayEl&&(Be.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),cr.clear(this.overlayEl)),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.unbindListeners()}static \u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(I.DOCUMENT),t.\u0275\u0275directiveInject(t.PLATFORM_ID),t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(t.Renderer2),t.\u0275\u0275directiveInject(Jr),t.\u0275\u0275directiveInject(F0),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(t.NgZone))};static \u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["p-overlay"]],contentQueries:function(n,r,o){if(1&n&&t.\u0275\u0275contentQuery(o,ki,4),2&n){let a;t.\u0275\u0275queryRefresh(a=t.\u0275\u0275loadQuery())&&(r.templates=a)}},viewQuery:function(n,r){if(1&n&&(t.\u0275\u0275viewQuery(DP,5),t.\u0275\u0275viewQuery(xP,5)),2&n){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.overlayViewChild=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.contentViewChild=o.first)}},hostAttrs:[1,"p-element"],inputs:{visible:"visible",mode:"mode",style:"style",styleClass:"styleClass",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",target:"target",appendTo:"appendTo",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",listener:"listener",responsive:"responsive",options:"options"},outputs:{visibleChange:"visibleChange",onBeforeShow:"onBeforeShow",onShow:"onShow",onBeforeHide:"onBeforeHide",onHide:"onHide",onAnimationStart:"onAnimationStart",onAnimationDone:"onAnimationDone"},features:[t.\u0275\u0275ProvidersFeature([BP])],ngContentSelectors:RP,decls:1,vars:1,consts:[[3,"ngStyle","class","ngClass","click",4,"ngIf"],[3,"ngStyle","ngClass","click"],["overlay",""],["content",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(n,r){1&n&&(t.\u0275\u0275projectionDef(),t.\u0275\u0275template(0,NP,3,20,"div",0)),2&n&&t.\u0275\u0275property("ngIf",r.modalVisible)},dependencies:[I.NgClass,I.NgIf,I.NgTemplateOutlet,I.NgStyle],styles:["@layer primeng{.p-overlay{position:absolute;top:0;left:0}.p-overlay-modal{display:flex;align-items:center;justify-content:center;position:fixed;top:0;left:0;width:100%;height:100%}.p-overlay-content{transform-origin:inherit}.p-overlay-modal>.p-overlay-content{z-index:1;width:90%}.p-overlay-top{align-items:flex-start}.p-overlay-top-start{align-items:flex-start;justify-content:flex-start}.p-overlay-top-end{align-items:flex-start;justify-content:flex-end}.p-overlay-bottom{align-items:flex-end}.p-overlay-bottom-start{align-items:flex-end;justify-content:flex-start}.p-overlay-bottom-end{align-items:flex-end;justify-content:flex-end}.p-overlay-left{justify-content:flex-start}.p-overlay-left-start{justify-content:flex-start;align-items:flex-start}.p-overlay-left-end{justify-content:flex-start;align-items:flex-end}.p-overlay-right{justify-content:flex-end}.p-overlay-right-start{justify-content:flex-end;align-items:flex-start}.p-overlay-right-end{justify-content:flex-end;align-items:flex-end}}\n"],encapsulation:2,data:{animation:[(0,yt.trigger)("overlayContentAnimation",[(0,yt.transition)(":enter",[(0,yt.useAnimation)(kP)]),(0,yt.transition)(":leave",[(0,yt.useAnimation)(jP)])])]},changeDetection:0})}return i})(),El=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=t.\u0275\u0275defineNgModule({type:i});static \u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,ji,ji]})}return i})(),Il=(()=>{class i{document;platformId;renderer;el;zone;config;constructor(e,n,r,o,a,l){this.document=e,this.platformId=n,this.renderer=r,this.el=o,this.zone=a,this.config=l}animationListener;mouseDownListener;timeout;ngAfterViewInit(){(0,I.isPlatformBrowser)(this.platformId)&&this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.renderer.listen(this.el.nativeElement,"mousedown",this.onMouseDown.bind(this))})}onMouseDown(e){let n=this.getInk();if(!n||"none"===this.document.defaultView?.getComputedStyle(n,null).display)return;if(Be.removeClass(n,"p-ink-active"),!Be.getHeight(n)&&!Be.getWidth(n)){let l=Math.max(Be.getOuterWidth(this.el.nativeElement),Be.getOuterHeight(this.el.nativeElement));n.style.height=l+"px",n.style.width=l+"px"}let r=Be.getOffset(this.el.nativeElement),o=e.pageX-r.left+this.document.body.scrollTop-Be.getWidth(n)/2,a=e.pageY-r.top+this.document.body.scrollLeft-Be.getHeight(n)/2;this.renderer.setStyle(n,"top",a+"px"),this.renderer.setStyle(n,"left",o+"px"),Be.addClass(n,"p-ink-active"),this.timeout=setTimeout(()=>{let l=this.getInk();l&&Be.removeClass(l,"p-ink-active")},401)}getInk(){const e=this.el.nativeElement.children;for(let n=0;n<e.length;n++)if("string"==typeof e[n].className&&-1!==e[n].className.indexOf("p-ink"))return e[n];return null}resetInk(){let e=this.getInk();e&&Be.removeClass(e,"p-ink-active")}onAnimationEnd(e){this.timeout&&clearTimeout(this.timeout),Be.removeClass(e.currentTarget,"p-ink-active")}create(){let e=this.renderer.createElement("span");this.renderer.addClass(e,"p-ink"),this.renderer.appendChild(this.el.nativeElement,e),this.renderer.setAttribute(e,"aria-hidden","true"),this.renderer.setAttribute(e,"role","presentation"),this.animationListener||(this.animationListener=this.renderer.listen(e,"animationend",this.onAnimationEnd.bind(this)))}remove(){let e=this.getInk();e&&(this.mouseDownListener&&this.mouseDownListener(),this.animationListener&&this.animationListener(),this.mouseDownListener=null,this.animationListener=null,Be.removeElement(e))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}static \u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(I.DOCUMENT),t.\u0275\u0275directiveInject(t.PLATFORM_ID),t.\u0275\u0275directiveInject(t.Renderer2),t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(t.NgZone),t.\u0275\u0275directiveInject(Jr,8))};static \u0275dir=t.\u0275\u0275defineDirective({type:i,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]})}return i})(),$u=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=t.\u0275\u0275defineNgModule({type:i});static \u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})();const PP=["*"];let fs=(()=>{class i{label;spin=!1;styleClass;role;ariaLabel;ariaHidden;ngOnInit(){this.getAttributes()}getAttributes(){const e=Mt.isEmpty(this.label);this.role=e?void 0:"img",this.ariaLabel=e?void 0:this.label,this.ariaHidden=e}getClassNames(){return`p-icon ${this.styleClass?this.styleClass+" ":""}${this.spin?"p-icon-spin":""}`}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],hostAttrs:[1,"p-element","p-icon-wrapper"],inputs:{label:"label",spin:"spin",styleClass:"styleClass"},standalone:!0,features:[t.\u0275\u0275StandaloneFeature],ngContentSelectors:PP,decls:1,vars:0,template:function(n,r){1&n&&(t.\u0275\u0275projectionDef(),t.\u0275\u0275projection(0))},encapsulation:2,changeDetection:0})}return i})(),T0=(()=>{class i extends fs{pathId;ngOnInit(){this.pathId="url(#"+ps()+")"}static \u0275fac=function(){let e;return function(r){return(e||(e=t.\u0275\u0275getInheritedFactory(i)))(r||i)}}();static \u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["SpinnerIcon"]],standalone:!0,features:[t.\u0275\u0275InheritDefinitionFeature,t.\u0275\u0275StandaloneFeature],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M6.99701 14C5.85441 13.999 4.72939 13.7186 3.72012 13.1832C2.71084 12.6478 1.84795 11.8737 1.20673 10.9284C0.565504 9.98305 0.165424 8.89526 0.041387 7.75989C-0.0826496 6.62453 0.073125 5.47607 0.495122 4.4147C0.917119 3.35333 1.59252 2.4113 2.46241 1.67077C3.33229 0.930247 4.37024 0.413729 5.4857 0.166275C6.60117 -0.0811796 7.76026 -0.0520535 8.86188 0.251112C9.9635 0.554278 10.9742 1.12227 11.8057 1.90555C11.915 2.01493 11.9764 2.16319 11.9764 2.31778C11.9764 2.47236 11.915 2.62062 11.8057 2.73C11.7521 2.78503 11.688 2.82877 11.6171 2.85864C11.5463 2.8885 11.4702 2.90389 11.3933 2.90389C11.3165 2.90389 11.2404 2.8885 11.1695 2.85864C11.0987 2.82877 11.0346 2.78503 10.9809 2.73C9.9998 1.81273 8.73246 1.26138 7.39226 1.16876C6.05206 1.07615 4.72086 1.44794 3.62279 2.22152C2.52471 2.99511 1.72683 4.12325 1.36345 5.41602C1.00008 6.70879 1.09342 8.08723 1.62775 9.31926C2.16209 10.5513 3.10478 11.5617 4.29713 12.1803C5.48947 12.7989 6.85865 12.988 8.17414 12.7157C9.48963 12.4435 10.6711 11.7264 11.5196 10.6854C12.3681 9.64432 12.8319 8.34282 12.8328 7C12.8328 6.84529 12.8943 6.69692 13.0038 6.58752C13.1132 6.47812 13.2616 6.41667 13.4164 6.41667C13.5712 6.41667 13.7196 6.47812 13.8291 6.58752C13.9385 6.69692 14 6.84529 14 7C14 8.85651 13.2622 10.637 11.9489 11.9497C10.6356 13.2625 8.85432 14 6.99701 14Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(n,r){1&n&&(t.\u0275\u0275namespaceSVG(),t.\u0275\u0275elementStart(0,"svg",0)(1,"g"),t.\u0275\u0275element(2,"path",1),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"defs")(4,"clipPath",2),t.\u0275\u0275element(5,"rect",3),t.\u0275\u0275elementEnd()()()),2&n&&(t.\u0275\u0275classMap(r.getClassNames()),t.\u0275\u0275attribute("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),t.\u0275\u0275advance(1),t.\u0275\u0275attribute("clip-path",r.pathId),t.\u0275\u0275advance(3),t.\u0275\u0275property("id",r.pathId))},encapsulation:2})}return i})();const VP=["element"],UP=["content"];function $P(i,s){1&i&&t.\u0275\u0275elementContainer(0)}const zu=function(i,s){return{$implicit:i,options:s}};function zP(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,$P,1,0,"ng-container",7),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",t.\u0275\u0275pureFunction2(2,zu,e.loadedItems,e.getContentOptions()))}}function HP(i,s){1&i&&t.\u0275\u0275elementContainer(0)}function WP(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,HP,1,0,"ng-container",7),t.\u0275\u0275elementContainerEnd()),2&i){const e=s.$implicit,n=s.index,r=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",t.\u0275\u0275pureFunction2(2,zu,e,r.getOptions(n)))}}const KP=function(i){return{"p-scroller-loading":i}};function GP(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",8,9),t.\u0275\u0275template(2,WP,2,5,"ng-container",10),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(5,KP,e.d_loading))("ngStyle",e.contentStyle),t.\u0275\u0275attribute("data-pc-section","content"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.loadedItems)("ngForTrackBy",e._trackBy||e.index)}}function ZP(i,s){if(1&i&&t.\u0275\u0275element(0,"div",11),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngStyle",e.spacerStyle),t.\u0275\u0275attribute("data-pc-section","spacer")}}function qP(i,s){1&i&&t.\u0275\u0275elementContainer(0)}const QP=function(i){return{numCols:i}},O0=function(i){return{options:i}};function JP(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,qP,1,0,"ng-container",7),t.\u0275\u0275elementContainerEnd()),2&i){const e=s.index,n=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",n.loaderTemplate)("ngTemplateOutletContext",t.\u0275\u0275pureFunction1(4,O0,n.getLoaderOptions(e,n.both&&t.\u0275\u0275pureFunction1(2,QP,n._numItemsInViewport.cols))))}}function YP(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,JP,2,6,"ng-container",14),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.loaderArr)}}function XP(i,s){1&i&&t.\u0275\u0275elementContainer(0)}const e4=function(){return{styleClass:"p-scroller-loading-icon"}};function t4(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,XP,1,0,"ng-container",7),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",e.loaderIconTemplate)("ngTemplateOutletContext",t.\u0275\u0275pureFunction1(3,O0,t.\u0275\u0275pureFunction0(2,e4)))}}function n4(i,s){1&i&&t.\u0275\u0275element(0,"SpinnerIcon",16),2&i&&(t.\u0275\u0275property("styleClass","p-scroller-loading-icon"),t.\u0275\u0275attribute("data-pc-section","loadingIcon"))}function i4(i,s){if(1&i&&(t.\u0275\u0275template(0,t4,2,5,"ng-container",0),t.\u0275\u0275template(1,n4,1,2,"ng-template",null,15,t.\u0275\u0275templateRefExtractor)),2&i){const e=t.\u0275\u0275reference(2),n=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("ngIf",n.loaderIconTemplate)("ngIfElse",e)}}const r4=function(i){return{"p-component-overlay":i}};function o4(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",12),t.\u0275\u0275template(1,YP,2,1,"ng-container",0),t.\u0275\u0275template(2,i4,3,2,"ng-template",null,13,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275reference(3),n=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(4,r4,!n.loaderTemplate)),t.\u0275\u0275attribute("data-pc-section","loader"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.loaderTemplate)("ngIfElse",e)}}const s4=function(i,s,e){return{"p-scroller":!0,"p-scroller-inline":i,"p-both-scroll":s,"p-horizontal-scroll":e}};function a4(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",2,3),t.\u0275\u0275listener("scroll",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.onContainerScroll(r))}),t.\u0275\u0275template(3,zP,2,5,"ng-container",0),t.\u0275\u0275template(4,GP,3,7,"ng-template",null,4,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275template(6,ZP,1,2,"div",5),t.\u0275\u0275template(7,o4,4,6,"div",6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&i){const e=t.\u0275\u0275reference(5),n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275classMap(n._styleClass),t.\u0275\u0275property("ngStyle",n._style)("ngClass",t.\u0275\u0275pureFunction3(12,s4,n.inline,n.both,n.horizontal)),t.\u0275\u0275attribute("id",n._id)("tabindex",n.tabindex)("data-pc-name","scroller")("data-pc-section","root"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.contentTemplate)("ngIfElse",e),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",n._showSpacer),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.loaderDisabled&&n._showLoader&&n.d_loading)}}function l4(i,s){1&i&&t.\u0275\u0275elementContainer(0)}const c4=function(i,s){return{rows:i,columns:s}};function u4(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,l4,1,0,"ng-container",7),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",t.\u0275\u0275pureFunction2(5,zu,e.items,t.\u0275\u0275pureFunction2(2,c4,e._items,e.loadedColumns)))}}function d4(i,s){if(1&i&&(t.\u0275\u0275projection(0),t.\u0275\u0275template(1,u4,2,8,"ng-container",17)),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.contentTemplate)}}const p4=["*"];let L0=(()=>{class i{document;platformId;renderer;cd;zone;get id(){return this._id}set id(e){this._id=e}get style(){return this._style}set style(e){this._style=e}get styleClass(){return this._styleClass}set styleClass(e){this._styleClass=e}get tabindex(){return this._tabindex}set tabindex(e){this._tabindex=e}get items(){return this._items}set items(e){this._items=e}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e}get scrollHeight(){return this._scrollHeight}set scrollHeight(e){this._scrollHeight=e}get scrollWidth(){return this._scrollWidth}set scrollWidth(e){this._scrollWidth=e}get orientation(){return this._orientation}set orientation(e){this._orientation=e}get step(){return this._step}set step(e){this._step=e}get delay(){return this._delay}set delay(e){this._delay=e}get resizeDelay(){return this._resizeDelay}set resizeDelay(e){this._resizeDelay=e}get appendOnly(){return this._appendOnly}set appendOnly(e){this._appendOnly=e}get inline(){return this._inline}set inline(e){this._inline=e}get lazy(){return this._lazy}set lazy(e){this._lazy=e}get disabled(){return this._disabled}set disabled(e){this._disabled=e}get loaderDisabled(){return this._loaderDisabled}set loaderDisabled(e){this._loaderDisabled=e}get columns(){return this._columns}set columns(e){this._columns=e}get showSpacer(){return this._showSpacer}set showSpacer(e){this._showSpacer=e}get showLoader(){return this._showLoader}set showLoader(e){this._showLoader=e}get numToleratedItems(){return this._numToleratedItems}set numToleratedItems(e){this._numToleratedItems=e}get loading(){return this._loading}set loading(e){this._loading=e}get autoSize(){return this._autoSize}set autoSize(e){this._autoSize=e}get trackBy(){return this._trackBy}set trackBy(e){this._trackBy=e}get options(){return this._options}set options(e){this._options=e,e&&"object"==typeof e&&Object.entries(e).forEach(([n,r])=>this[`_${n}`]!==r&&(this[`_${n}`]=r))}onLazyLoad=new t.EventEmitter;onScroll=new t.EventEmitter;onScrollIndexChange=new t.EventEmitter;elementViewChild;contentViewChild;templates;_id;_style;_styleClass;_tabindex=0;_items;_itemSize=0;_scrollHeight;_scrollWidth;_orientation="vertical";_step=0;_delay=0;_resizeDelay=10;_appendOnly=!1;_inline=!1;_lazy=!1;_disabled=!1;_loaderDisabled=!1;_columns;_showSpacer=!0;_showLoader=!1;_numToleratedItems;_loading;_autoSize=!1;_trackBy;_options;d_loading=!1;d_numToleratedItems;contentEl;contentTemplate;itemTemplate;loaderTemplate;loaderIconTemplate;first=0;last=0;page=0;isRangeChanged=!1;numItemsInViewport=0;lastScrollPos=0;lazyLoadState={};loaderArr=[];spacerStyle={};contentStyle={};scrollTimeout;resizeTimeout;initialized=!1;windowResizeListener;defaultWidth;defaultHeight;defaultContentWidth;defaultContentHeight;get vertical(){return"vertical"===this._orientation}get horizontal(){return"horizontal"===this._orientation}get both(){return"both"===this._orientation}get loadedItems(){return this._items&&!this.d_loading?this.both?this._items.slice(this._appendOnly?0:this.first.rows,this.last.rows).map(e=>this._columns?e:e.slice(this._appendOnly?0:this.first.cols,this.last.cols)):this.horizontal&&this._columns?this._items:this._items.slice(this._appendOnly?0:this.first,this.last):[]}get loadedRows(){return this.d_loading?this._loaderDisabled?this.loaderArr:[]:this.loadedItems}get loadedColumns(){return this._columns&&(this.both||this.horizontal)?this.d_loading&&this._loaderDisabled?this.both?this.loaderArr[0]:this.loaderArr:this._columns.slice(this.both?this.first.cols:this.first,this.both?this.last.cols:this.last):this._columns}get isPageChanged(){return!this._step||this.page!==this.getPageByFirst()}constructor(e,n,r,o,a){this.document=e,this.platformId=n,this.renderer=r,this.cd=o,this.zone=a}ngOnInit(){this.setInitialState()}ngOnChanges(e){let n=!1;if(e.loading){const{previousValue:r,currentValue:o}=e.loading;this.lazy&&r!==o&&o!==this.d_loading&&(this.d_loading=o,n=!0)}if(e.orientation&&(this.lastScrollPos=this.both?{top:0,left:0}:0),e.numToleratedItems){const{previousValue:r,currentValue:o}=e.numToleratedItems;r!==o&&o!==this.d_numToleratedItems&&(this.d_numToleratedItems=o)}if(e.options){const{previousValue:r,currentValue:o}=e.options;this.lazy&&r?.loading!==o?.loading&&o?.loading!==this.d_loading&&(this.d_loading=o.loading,n=!0),r?.numToleratedItems!==o?.numToleratedItems&&o?.numToleratedItems!==this.d_numToleratedItems&&(this.d_numToleratedItems=o.numToleratedItems)}this.initialized&&!n&&(e.items?.previousValue?.length!==e.items?.currentValue?.length||e.itemSize||e.scrollHeight||e.scrollWidth)&&(this.init(),this.calculateAutoSize())}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"item":default:this.itemTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"loadericon":this.loaderIconTemplate=e.template}})}ngAfterViewInit(){Promise.resolve().then(()=>{this.viewInit()})}ngAfterViewChecked(){this.initialized||this.viewInit()}ngOnDestroy(){this.unbindResizeListener(),this.contentEl=null,this.initialized=!1}viewInit(){(0,I.isPlatformBrowser)(this.platformId)&&Be.isVisible(this.elementViewChild?.nativeElement)&&(this.setInitialState(),this.setContentEl(this.contentEl),this.init(),this.defaultWidth=Be.getWidth(this.elementViewChild?.nativeElement),this.defaultHeight=Be.getHeight(this.elementViewChild?.nativeElement),this.defaultContentWidth=Be.getWidth(this.contentEl),this.defaultContentHeight=Be.getHeight(this.contentEl),this.initialized=!0)}init(){this._disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize(),this.bindResizeListener(),this.cd.detectChanges())}setContentEl(e){this.contentEl=e||this.contentViewChild?.nativeElement||Be.findSingle(this.elementViewChild?.nativeElement,".p-scroller-content")}setInitialState(){this.first=this.both?{rows:0,cols:0}:0,this.last=this.both?{rows:0,cols:0}:0,this.numItemsInViewport=this.both?{rows:0,cols:0}:0,this.lastScrollPos=this.both?{top:0,left:0}:0,this.d_loading=this._loading||!1,this.d_numToleratedItems=this._numToleratedItems,this.loaderArr=[],this.spacerStyle={},this.contentStyle={}}getElementRef(){return this.elementViewChild}getPageByFirst(){return Math.floor((this.first+4*this.d_numToleratedItems)/(this._step||1))}scrollTo(e){this.lastScrollPos=this.both?{top:0,left:0}:0,this.elementViewChild?.nativeElement?.scrollTo(e)}scrollToIndex(e,n="auto"){const{numToleratedItems:r}=this.calculateNumItems(),o=this.getContentPosition(),a=(d=0,p)=>d<=p?0:d,l=(d,p,f)=>d*p+f,c=(d=0,p=0)=>this.scrollTo({left:d,top:p,behavior:n});let u=0;this.both?(u={rows:a(e[0],r[0]),cols:a(e[1],r[1])},c(l(u.cols,this._itemSize[1],o.left),l(u.rows,this._itemSize[0],o.top))):(u=a(e,r),this.horizontal?c(l(u,this._itemSize,o.left),0):c(0,l(u,this._itemSize,o.top))),this.isRangeChanged=this.first!==u,this.first=u}scrollInView(e,n,r="auto"){if(n){const{first:o,viewport:a}=this.getRenderedRange(),l=(d=0,p=0)=>this.scrollTo({left:d,top:p,behavior:r}),u="to-end"===n;if("to-start"===n){if(this.both)a.first.rows-o.rows>e[0]?l(a.first.cols*this._itemSize[1],(a.first.rows-1)*this._itemSize[0]):a.first.cols-o.cols>e[1]&&l((a.first.cols-1)*this._itemSize[1],a.first.rows*this._itemSize[0]);else if(a.first-o>e){const d=(a.first-1)*this._itemSize;this.horizontal?l(d,0):l(0,d)}}else if(u)if(this.both)a.last.rows-o.rows<=e[0]+1?l(a.first.cols*this._itemSize[1],(a.first.rows+1)*this._itemSize[0]):a.last.cols-o.cols<=e[1]+1&&l((a.first.cols+1)*this._itemSize[1],a.first.rows*this._itemSize[0]);else if(a.last-o<=e+1){const d=(a.first+1)*this._itemSize;this.horizontal?l(d,0):l(0,d)}}else this.scrollToIndex(e,r)}getRenderedRange(){const e=(o,a)=>Math.floor(o/(a||o));let n=this.first,r=0;if(this.elementViewChild?.nativeElement){const{scrollTop:o,scrollLeft:a}=this.elementViewChild.nativeElement;this.both?(n={rows:e(o,this._itemSize[0]),cols:e(a,this._itemSize[1])},r={rows:n.rows+this.numItemsInViewport.rows,cols:n.cols+this.numItemsInViewport.cols}):(n=e(this.horizontal?a:o,this._itemSize),r=n+this.numItemsInViewport)}return{first:this.first,last:this.last,viewport:{first:n,last:r}}}calculateNumItems(){const e=this.getContentPosition(),n=(this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetWidth-e.left:0)||0,r=(this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetHeight-e.top:0)||0,o=(u,d)=>Math.ceil(u/(d||u)),a=u=>Math.ceil(u/2),l=this.both?{rows:o(r,this._itemSize[0]),cols:o(n,this._itemSize[1])}:o(this.horizontal?n:r,this._itemSize);return{numItemsInViewport:l,numToleratedItems:this.d_numToleratedItems||(this.both?[a(l.rows),a(l.cols)]:a(l))}}calculateOptions(){const{numItemsInViewport:e,numToleratedItems:n}=this.calculateNumItems(),r=(l,c,u,d=!1)=>this.getLast(l+c+(l<u?2:3)*u,d),o=this.first,a=this.both?{rows:r(this.first.rows,e.rows,n[0]),cols:r(this.first.cols,e.cols,n[1],!0)}:r(this.first,e,n);this.last=a,this.numItemsInViewport=e,this.d_numToleratedItems=n,this.showLoader&&(this.loaderArr=this.both?Array.from({length:e.rows}).map(()=>Array.from({length:e.cols})):Array.from({length:e})),this._lazy&&Promise.resolve().then(()=>{this.lazyLoadState={first:this._step?this.both?{rows:0,cols:o.cols}:0:o,last:Math.min(this._step?this._step:this.last,this.items.length)},this.handleEvents("onLazyLoad",this.lazyLoadState)})}calculateAutoSize(){this._autoSize&&!this.d_loading&&Promise.resolve().then(()=>{if(this.contentEl){this.contentEl.style.minHeight=this.contentEl.style.minWidth="auto",this.contentEl.style.position="relative",this.elementViewChild.nativeElement.style.contain="none";const[e,n]=[Be.getWidth(this.contentEl),Be.getHeight(this.contentEl)];e!==this.defaultContentWidth&&(this.elementViewChild.nativeElement.style.width=""),n!==this.defaultContentHeight&&(this.elementViewChild.nativeElement.style.height="");const[r,o]=[Be.getWidth(this.elementViewChild.nativeElement),Be.getHeight(this.elementViewChild.nativeElement)];(this.both||this.horizontal)&&(this.elementViewChild.nativeElement.style.width=r<this.defaultWidth?r+"px":this._scrollWidth||this.defaultWidth+"px"),(this.both||this.vertical)&&(this.elementViewChild.nativeElement.style.height=o<this.defaultHeight?o+"px":this._scrollHeight||this.defaultHeight+"px"),this.contentEl.style.minHeight=this.contentEl.style.minWidth="",this.contentEl.style.position="",this.elementViewChild.nativeElement.style.contain=""}})}getLast(e=0,n=!1){return this._items?Math.min(n?(this._columns||this._items[0]).length:this._items.length,e):0}getContentPosition(){if(this.contentEl){const e=getComputedStyle(this.contentEl),n=parseFloat(e.paddingLeft)+Math.max(parseFloat(e.left)||0,0),r=parseFloat(e.paddingRight)+Math.max(parseFloat(e.right)||0,0),o=parseFloat(e.paddingTop)+Math.max(parseFloat(e.top)||0,0),a=parseFloat(e.paddingBottom)+Math.max(parseFloat(e.bottom)||0,0);return{left:n,right:r,top:o,bottom:a,x:n+r,y:o+a}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}}setSize(){if(this.elementViewChild?.nativeElement){const e=this.elementViewChild.nativeElement.parentElement.parentElement,n=this._scrollWidth||`${this.elementViewChild.nativeElement.offsetWidth||e.offsetWidth}px`,r=this._scrollHeight||`${this.elementViewChild.nativeElement.offsetHeight||e.offsetHeight}px`,o=(a,l)=>this.elementViewChild.nativeElement.style[a]=l;this.both||this.horizontal?(o("height",r),o("width",n)):o("height",r)}}setSpacerSize(){if(this._items){const e=this.getContentPosition(),n=(r,o,a,l=0)=>this.spacerStyle={...this.spacerStyle,[`${r}`]:(o||[]).length*a+l+"px"};this.both?(n("height",this._items,this._itemSize[0],e.y),n("width",this._columns||this._items[1],this._itemSize[1],e.x)):this.horizontal?n("width",this._columns||this._items,this._itemSize,e.x):n("height",this._items,this._itemSize,e.y)}}setContentPosition(e){if(this.contentEl&&!this._appendOnly){const n=e?e.first:this.first,r=(a,l)=>a*l,o=(a=0,l=0)=>this.contentStyle={...this.contentStyle,transform:`translate3d(${a}px, ${l}px, 0)`};if(this.both)o(r(n.cols,this._itemSize[1]),r(n.rows,this._itemSize[0]));else{const a=r(n,this._itemSize);this.horizontal?o(a,0):o(0,a)}}}onScrollPositionChange(e){const n=e.target,r=this.getContentPosition(),o=(_,b)=>_?_>b?_-b:_:0,a=(_,b)=>Math.floor(_/(b||_)),l=(_,b,M,y,w,x)=>_<=w?w:x?M-y-w:b+w-1,c=(_,b,M,y,w,x,C)=>_<=x?0:Math.max(0,C?_<b?M:_-x:_>b?M:_-2*x),u=(_,b,M,y,w,x=!1)=>{let C=b+y+2*w;return _>=w&&(C+=w+1),this.getLast(C,x)},d=o(n.scrollTop,r.top),p=o(n.scrollLeft,r.left);let f=this.both?{rows:0,cols:0}:0,m=this.last,g=!1,h=this.lastScrollPos;if(this.both){const _=this.lastScrollPos.top<=d,b=this.lastScrollPos.left<=p;if(!this._appendOnly||this._appendOnly&&(_||b)){const M={rows:a(d,this._itemSize[0]),cols:a(p,this._itemSize[1])},y={rows:l(M.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],_),cols:l(M.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],b)};f={rows:c(M.rows,y.rows,this.first.rows,0,0,this.d_numToleratedItems[0],_),cols:c(M.cols,y.cols,this.first.cols,0,0,this.d_numToleratedItems[1],b)},m={rows:u(M.rows,f.rows,0,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:u(M.cols,f.cols,0,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},g=f.rows!==this.first.rows||m.rows!==this.last.rows||f.cols!==this.first.cols||m.cols!==this.last.cols||this.isRangeChanged,h={top:d,left:p}}}else{const _=this.horizontal?p:d,b=this.lastScrollPos<=_;if(!this._appendOnly||this._appendOnly&&b){const M=a(_,this._itemSize);f=c(M,l(M,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,b),this.first,0,0,this.d_numToleratedItems,b),m=u(M,f,0,this.numItemsInViewport,this.d_numToleratedItems),g=f!==this.first||m!==this.last||this.isRangeChanged,h=_}}return{first:f,last:m,isRangeChanged:g,scrollPos:h}}onScrollChange(e){const{first:n,last:r,isRangeChanged:o,scrollPos:a}=this.onScrollPositionChange(e);if(o){const l={first:n,last:r};if(this.setContentPosition(l),this.first=n,this.last=r,this.lastScrollPos=a,this.handleEvents("onScrollIndexChange",l),this._lazy&&this.isPageChanged){const c={first:this._step?Math.min(this.getPageByFirst()*this._step,this.items.length-this._step):n,last:Math.min(this._step?(this.getPageByFirst()+1)*this._step:r,this.items.length)};(this.lazyLoadState.first!==c.first||this.lazyLoadState.last!==c.last)&&this.handleEvents("onLazyLoad",c),this.lazyLoadState=c}}}onContainerScroll(e){if(this.handleEvents("onScroll",{originalEvent:e}),this._delay&&this.isPageChanged){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){const{isRangeChanged:n}=this.onScrollPositionChange(e);(n||this._step&&this.isPageChanged)&&(this.d_loading=!0,this.cd.detectChanges())}this.scrollTimeout=setTimeout(()=>{this.onScrollChange(e),this.d_loading&&this.showLoader&&(!this._lazy||void 0===this._loading)&&(this.d_loading=!1,this.page=this.getPageByFirst(),this.cd.detectChanges())},this._delay)}else!this.d_loading&&this.onScrollChange(e)}bindResizeListener(){(0,I.isPlatformBrowser)(this.platformId)&&(this.windowResizeListener||this.zone.runOutsideAngular(()=>{const e=this.document.defaultView,n=Be.isTouchDevice()?"orientationchange":"resize";this.windowResizeListener=this.renderer.listen(e,n,this.onWindowResize.bind(this))}))}unbindResizeListener(){this.windowResizeListener&&(this.windowResizeListener(),this.windowResizeListener=null)}onWindowResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{if(Be.isVisible(this.elementViewChild?.nativeElement)){const[e,n]=[Be.getWidth(this.elementViewChild?.nativeElement),Be.getHeight(this.elementViewChild?.nativeElement)],[r,o]=[e!==this.defaultWidth,n!==this.defaultHeight];(this.both?r||o:this.horizontal?r:this.vertical&&o)&&this.zone.run(()=>{this.d_numToleratedItems=this._numToleratedItems,this.defaultWidth=e,this.defaultHeight=n,this.defaultContentWidth=Be.getWidth(this.contentEl),this.defaultContentHeight=Be.getHeight(this.contentEl),this.init()})}},this._resizeDelay)}handleEvents(e,n){return this.options&&this.options[e]?this.options[e](n):this[e].emit(n)}getContentOptions(){return{contentStyleClass:"p-scroller-content "+(this.d_loading?"p-scroller-loading":""),items:this.loadedItems,getItemOptions:e=>this.getOptions(e),loading:this.d_loading,getLoaderOptions:(e,n)=>this.getLoaderOptions(e,n),itemSize:this._itemSize,rows:this.loadedRows,columns:this.loadedColumns,spacerStyle:this.spacerStyle,contentStyle:this.contentStyle,vertical:this.vertical,horizontal:this.horizontal,both:this.both}}getOptions(e){const n=(this._items||[]).length,r=this.both?this.first.rows+e:this.first+e;return{index:r,count:n,first:0===r,last:r===n-1,even:r%2==0,odd:r%2!=0}}getLoaderOptions(e,n){const r=this.loaderArr.length;return{index:e,count:r,first:0===e,last:e===r-1,even:e%2==0,odd:e%2!=0,...n}}static \u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(I.DOCUMENT),t.\u0275\u0275directiveInject(t.PLATFORM_ID),t.\u0275\u0275directiveInject(t.Renderer2),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(t.NgZone))};static \u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["p-scroller"]],contentQueries:function(n,r,o){if(1&n&&t.\u0275\u0275contentQuery(o,ki,4),2&n){let a;t.\u0275\u0275queryRefresh(a=t.\u0275\u0275loadQuery())&&(r.templates=a)}},viewQuery:function(n,r){if(1&n&&(t.\u0275\u0275viewQuery(VP,5),t.\u0275\u0275viewQuery(UP,5)),2&n){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.elementViewChild=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.contentViewChild=o.first)}},hostAttrs:[1,"p-scroller-viewport","p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",tabindex:"tabindex",items:"items",itemSize:"itemSize",scrollHeight:"scrollHeight",scrollWidth:"scrollWidth",orientation:"orientation",step:"step",delay:"delay",resizeDelay:"resizeDelay",appendOnly:"appendOnly",inline:"inline",lazy:"lazy",disabled:"disabled",loaderDisabled:"loaderDisabled",columns:"columns",showSpacer:"showSpacer",showLoader:"showLoader",numToleratedItems:"numToleratedItems",loading:"loading",autoSize:"autoSize",trackBy:"trackBy",options:"options"},outputs:{onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange"},features:[t.\u0275\u0275NgOnChangesFeature],ngContentSelectors:p4,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["disabledContainer",""],[3,"ngStyle","ngClass","scroll"],["element",""],["buildInContent",""],["class","p-scroller-spacer",3,"ngStyle",4,"ngIf"],["class","p-scroller-loader",3,"ngClass",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-scroller-content",3,"ngClass","ngStyle"],["content",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-scroller-spacer",3,"ngStyle"],[1,"p-scroller-loader",3,"ngClass"],["buildInLoader",""],[4,"ngFor","ngForOf"],["buildInLoaderIcon",""],[3,"styleClass"],[4,"ngIf"]],template:function(n,r){if(1&n&&(t.\u0275\u0275projectionDef(),t.\u0275\u0275template(0,a4,8,16,"ng-container",0),t.\u0275\u0275template(1,d4,2,1,"ng-template",null,1,t.\u0275\u0275templateRefExtractor)),2&n){const o=t.\u0275\u0275reference(2);t.\u0275\u0275property("ngIf",!r._disabled)("ngIfElse",o)}},dependencies:function(){return[I.NgClass,I.NgForOf,I.NgIf,I.NgTemplateOutlet,I.NgStyle,T0]},styles:["@layer primeng{p-scroller{flex:1;outline:0 none}.p-scroller{position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;outline:0 none}.p-scroller-content{position:absolute;top:0;left:0;min-height:100%;min-width:100%;will-change:transform}.p-scroller-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0;pointer-events:none}.p-scroller-loader{position:sticky;top:0;left:0;width:100%;height:100%}.p-scroller-loader.p-component-overlay{display:flex;align-items:center;justify-content:center}.p-scroller-loading-icon{scale:2}.p-scroller-inline .p-scroller-content{position:static}}\n"],encapsulation:2})}return i})(),Fl=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=t.\u0275\u0275defineNgModule({type:i});static \u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,ji,T0,ji]})}return i})(),N0=(()=>{class i{platformId;el;zone;config;renderer;viewContainer;tooltipPosition;tooltipEvent="hover";appendTo;positionStyle;tooltipStyleClass;tooltipZIndex;escape=!0;showDelay;hideDelay;life;positionTop;positionLeft;autoHide=!0;fitContent=!0;hideOnEscape=!0;content;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.deactivate()}tooltipOptions;_tooltipOptions={tooltipLabel:null,tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",positionStyle:null,tooltipStyleClass:null,tooltipZIndex:"auto",escape:!0,disabled:null,showDelay:null,hideDelay:null,positionTop:null,positionLeft:null,life:null,autoHide:!0,hideOnEscape:!0,id:ps()+"_tooltip"};_disabled;container;styleClass;tooltipText;showTimeout;hideTimeout;active;mouseEnterListener;mouseLeaveListener;containerMouseleaveListener;clickListener;focusListener;blurListener;scrollHandler;resizeListener;constructor(e,n,r,o,a,l){this.platformId=e,this.el=n,this.zone=r,this.config=o,this.renderer=a,this.viewContainer=l}ngAfterViewInit(){(0,I.isPlatformBrowser)(this.platformId)&&this.zone.runOutsideAngular(()=>{if("hover"===this.getOption("tooltipEvent"))this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onInputClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("click",this.clickListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener);else if("focus"===this.getOption("tooltipEvent")){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let e=this.getTarget(this.el.nativeElement);e.addEventListener("focus",this.focusListener),e.addEventListener("blur",this.blurListener)}})}ngOnChanges(e){e.tooltipPosition&&this.setOption({tooltipPosition:e.tooltipPosition.currentValue}),e.tooltipEvent&&this.setOption({tooltipEvent:e.tooltipEvent.currentValue}),e.appendTo&&this.setOption({appendTo:e.appendTo.currentValue}),e.positionStyle&&this.setOption({positionStyle:e.positionStyle.currentValue}),e.tooltipStyleClass&&this.setOption({tooltipStyleClass:e.tooltipStyleClass.currentValue}),e.tooltipZIndex&&this.setOption({tooltipZIndex:e.tooltipZIndex.currentValue}),e.escape&&this.setOption({escape:e.escape.currentValue}),e.showDelay&&this.setOption({showDelay:e.showDelay.currentValue}),e.hideDelay&&this.setOption({hideDelay:e.hideDelay.currentValue}),e.life&&this.setOption({life:e.life.currentValue}),e.positionTop&&this.setOption({positionTop:e.positionTop.currentValue}),e.positionLeft&&this.setOption({positionLeft:e.positionLeft.currentValue}),e.disabled&&this.setOption({disabled:e.disabled.currentValue}),e.content&&(this.setOption({tooltipLabel:e.content.currentValue}),this.active&&(e.content.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),e.autoHide&&this.setOption({autoHide:e.autoHide.currentValue}),e.id&&this.setOption({id:e.id.currentValue}),e.tooltipOptions&&(this._tooltipOptions={...this._tooltipOptions,...e.tooltipOptions.currentValue},this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}isAutoHide(){return this.getOption("autoHide")}onMouseEnter(e){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(e){(this.isAutoHide()||!(Be.hasClass(e.relatedTarget,"p-tooltip")||Be.hasClass(e.relatedTarget,"p-tooltip-text")||Be.hasClass(e.relatedTarget,"p-tooltip-arrow")))&&this.deactivate()}onFocus(e){this.activate()}onBlur(e){this.deactivate()}onInputClick(e){this.deactivate()}onPressEscape(){this.hideOnEscape&&this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let e=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},e)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div"),this.container.setAttribute("id",this.getOption("id")),this.container.setAttribute("role","tooltip");let e=document.createElement("div");e.className="p-tooltip-arrow",this.container.appendChild(e),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?Be.appendChild(this.container,this.el.nativeElement):Be.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content"),this.isAutoHide()?this.container.style.pointerEvents="none":(this.container.style.pointerEvents="unset",this.bindContainerMouseleaveListener())}bindContainerMouseleaveListener(){this.containerMouseleaveListener||(this.containerMouseleaveListener=this.renderer.listen(this.container??this.container.nativeElement,"mouseleave",n=>{this.deactivate()}))}unbindContainerMouseleaveListener(){this.containerMouseleaveListener&&(this.bindContainerMouseleaveListener(),this.containerMouseleaveListener=null)}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),Be.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?cr.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&cr.clear(this.container),this.remove()}updateText(){const e=this.getOption("tooltipLabel");if(e instanceof t.TemplateRef){const n=this.viewContainer.createEmbeddedView(e);n.detectChanges(),n.rootNodes.forEach(r=>this.tooltipText.appendChild(r))}else this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(e))):this.tooltipText.innerHTML=e}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let e=this.el.nativeElement.getBoundingClientRect();return{left:e.left+Be.getWindowScrollLeft(),top:e.top+Be.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let e=this.getHostOffset(),n=e.left+Be.getOuterWidth(this.el.nativeElement),r=e.top+(Be.getOuterHeight(this.el.nativeElement)-Be.getOuterHeight(this.container))/2;this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let e=this.getHostOffset(),n=e.left-Be.getOuterWidth(this.container),r=e.top+(Be.getOuterHeight(this.el.nativeElement)-Be.getOuterHeight(this.container))/2;this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let e=this.getHostOffset(),n=e.left+(Be.getOuterWidth(this.el.nativeElement)-Be.getOuterWidth(this.container))/2,r=e.top-Be.getOuterHeight(this.container);this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let e=this.getHostOffset(),n=e.left+(Be.getOuterWidth(this.el.nativeElement)-Be.getOuterWidth(this.container))/2,r=e.top+Be.getOuterHeight(this.el.nativeElement);this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}setOption(e){this._tooltipOptions={...this._tooltipOptions,...e}}getOption(e){return this._tooltipOptions[e]}getTarget(e){return Be.hasClass(e,"p-inputwrapper")?Be.findSingle(e,"input"):e}preAlign(e){this.container.style.left="-999px",this.container.style.top="-999px";let n="p-tooltip p-component p-tooltip-"+e;this.container.className=this.getOption("tooltipStyleClass")?n+" "+this.getOption("tooltipStyleClass"):n}isOutOfBounds(){let e=this.container.getBoundingClientRect(),n=e.top,r=e.left,o=Be.getOuterWidth(this.container),a=Be.getOuterHeight(this.container),l=Be.getViewport();return r+o>l.width||r<0||n<0||n+a>l.height}onWindowResize(e){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new A0(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if("hover"===this.getOption("tooltipEvent"))this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){let e=this.getTarget(this.el.nativeElement);e.removeEventListener("focus",this.focusListener),e.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):Be.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.unbindContainerMouseleaveListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&cr.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}static \u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(t.PLATFORM_ID),t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(t.NgZone),t.\u0275\u0275directiveInject(Jr),t.\u0275\u0275directiveInject(t.Renderer2),t.\u0275\u0275directiveInject(t.ViewContainerRef))};static \u0275dir=t.\u0275\u0275defineDirective({type:i,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],hostBindings:function(n,r){1&n&&t.\u0275\u0275listener("keydown.escape",function(a){return r.onPressEscape(a)},!1,t.\u0275\u0275resolveDocument)},inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",autoHide:"autoHide",fitContent:"fitContent",hideOnEscape:"hideOnEscape",content:["pTooltip","content"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[t.\u0275\u0275NgOnChangesFeature]})}return i})(),R0=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=t.\u0275\u0275defineNgModule({type:i});static \u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})(),Al=(()=>{class i extends fs{static \u0275fac=function(){let e;return function(r){return(e||(e=t.\u0275\u0275getInheritedFactory(i)))(r||i)}}();static \u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["CheckIcon"]],standalone:!0,features:[t.\u0275\u0275InheritDefinitionFeature,t.\u0275\u0275StandaloneFeature],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M4.86199 11.5948C4.78717 11.5923 4.71366 11.5745 4.64596 11.5426C4.57826 11.5107 4.51779 11.4652 4.46827 11.4091L0.753985 7.69483C0.683167 7.64891 0.623706 7.58751 0.580092 7.51525C0.536478 7.44299 0.509851 7.36177 0.502221 7.27771C0.49459 7.19366 0.506156 7.10897 0.536046 7.03004C0.565935 6.95111 0.613367 6.88 0.674759 6.82208C0.736151 6.76416 0.8099 6.72095 0.890436 6.69571C0.970973 6.67046 1.05619 6.66385 1.13966 6.67635C1.22313 6.68886 1.30266 6.72017 1.37226 6.76792C1.44186 6.81567 1.4997 6.8786 1.54141 6.95197L4.86199 10.2503L12.6397 2.49483C12.7444 2.42694 12.8689 2.39617 12.9932 2.40745C13.1174 2.41873 13.2343 2.47141 13.3251 2.55705C13.4159 2.64268 13.4753 2.75632 13.4938 2.87973C13.5123 3.00315 13.4888 3.1292 13.4271 3.23768L5.2557 11.4091C5.20618 11.4652 5.14571 11.5107 5.07801 11.5426C5.01031 11.5745 4.9368 11.5923 4.86199 11.5948Z","fill","currentColor"]],template:function(n,r){1&n&&(t.\u0275\u0275namespaceSVG(),t.\u0275\u0275elementStart(0,"svg",0),t.\u0275\u0275element(1,"path",1),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275classMap(r.getClassNames()),t.\u0275\u0275attribute("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return i})(),Tl=(()=>{class i extends fs{pathId;ngOnInit(){this.pathId="url(#"+ps()+")"}static \u0275fac=function(){let e;return function(r){return(e||(e=t.\u0275\u0275getInheritedFactory(i)))(r||i)}}();static \u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["SearchIcon"]],standalone:!0,features:[t.\u0275\u0275InheritDefinitionFeature,t.\u0275\u0275StandaloneFeature],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M2.67602 11.0265C3.6661 11.688 4.83011 12.0411 6.02086 12.0411C6.81149 12.0411 7.59438 11.8854 8.32483 11.5828C8.87005 11.357 9.37808 11.0526 9.83317 10.6803L12.9769 13.8241C13.0323 13.8801 13.0983 13.9245 13.171 13.9548C13.2438 13.985 13.3219 14.0003 13.4007 14C13.4795 14.0003 13.5575 13.985 13.6303 13.9548C13.7031 13.9245 13.7691 13.8801 13.8244 13.8241C13.9367 13.7116 13.9998 13.5592 13.9998 13.4003C13.9998 13.2414 13.9367 13.089 13.8244 12.9765L10.6807 9.8328C11.053 9.37773 11.3573 8.86972 11.5831 8.32452C11.8857 7.59408 12.0414 6.81119 12.0414 6.02056C12.0414 4.8298 11.6883 3.66579 11.0268 2.67572C10.3652 1.68564 9.42494 0.913972 8.32483 0.45829C7.22472 0.00260857 6.01418 -0.116618 4.84631 0.115686C3.67844 0.34799 2.60568 0.921393 1.76369 1.76338C0.921698 2.60537 0.348296 3.67813 0.115991 4.84601C-0.116313 6.01388 0.00291375 7.22441 0.458595 8.32452C0.914277 9.42464 1.68595 10.3649 2.67602 11.0265ZM3.35565 2.0158C4.14456 1.48867 5.07206 1.20731 6.02086 1.20731C7.29317 1.20731 8.51338 1.71274 9.41304 2.6124C10.3127 3.51206 10.8181 4.73226 10.8181 6.00457C10.8181 6.95337 10.5368 7.88088 10.0096 8.66978C9.48251 9.45868 8.73328 10.0736 7.85669 10.4367C6.98011 10.7997 6.01554 10.8947 5.08496 10.7096C4.15439 10.5245 3.2996 10.0676 2.62869 9.39674C1.95778 8.72583 1.50089 7.87104 1.31579 6.94046C1.13068 6.00989 1.22568 5.04532 1.58878 4.16874C1.95187 3.29215 2.56675 2.54292 3.35565 2.0158Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(n,r){1&n&&(t.\u0275\u0275namespaceSVG(),t.\u0275\u0275elementStart(0,"svg",0)(1,"g"),t.\u0275\u0275element(2,"path",1),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"defs")(4,"clipPath",2),t.\u0275\u0275element(5,"rect",3),t.\u0275\u0275elementEnd()()()),2&n&&(t.\u0275\u0275classMap(r.getClassNames()),t.\u0275\u0275attribute("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),t.\u0275\u0275advance(1),t.\u0275\u0275attribute("clip-path",r.pathId),t.\u0275\u0275advance(3),t.\u0275\u0275property("id",r.pathId))},encapsulation:2})}return i})(),B0=(()=>{class i extends fs{pathId;ngOnInit(){this.pathId="url(#"+ps()+")"}static \u0275fac=function(){let e;return function(r){return(e||(e=t.\u0275\u0275getInheritedFactory(i)))(r||i)}}();static \u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["TimesCircleIcon"]],standalone:!0,features:[t.\u0275\u0275InheritDefinitionFeature,t.\u0275\u0275StandaloneFeature],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M7 14C5.61553 14 4.26215 13.5895 3.11101 12.8203C1.95987 12.0511 1.06266 10.9579 0.532846 9.67879C0.00303296 8.3997 -0.13559 6.99224 0.134506 5.63437C0.404603 4.2765 1.07129 3.02922 2.05026 2.05026C3.02922 1.07129 4.2765 0.404603 5.63437 0.134506C6.99224 -0.13559 8.3997 0.00303296 9.67879 0.532846C10.9579 1.06266 12.0511 1.95987 12.8203 3.11101C13.5895 4.26215 14 5.61553 14 7C14 8.85652 13.2625 10.637 11.9497 11.9497C10.637 13.2625 8.85652 14 7 14ZM7 1.16667C5.84628 1.16667 4.71846 1.50879 3.75918 2.14976C2.79989 2.79074 2.05222 3.70178 1.61071 4.76768C1.16919 5.83358 1.05367 7.00647 1.27876 8.13803C1.50384 9.26958 2.05941 10.309 2.87521 11.1248C3.69102 11.9406 4.73042 12.4962 5.86198 12.7212C6.99353 12.9463 8.16642 12.8308 9.23232 12.3893C10.2982 11.9478 11.2093 11.2001 11.8502 10.2408C12.4912 9.28154 12.8333 8.15373 12.8333 7C12.8333 5.45291 12.2188 3.96918 11.1248 2.87521C10.0308 1.78125 8.5471 1.16667 7 1.16667ZM4.66662 9.91668C4.58998 9.91704 4.51404 9.90209 4.44325 9.87271C4.37246 9.84333 4.30826 9.8001 4.2544 9.74557C4.14516 9.6362 4.0838 9.48793 4.0838 9.33335C4.0838 9.17876 4.14516 9.0305 4.2544 8.92113L6.17553 7L4.25443 5.07891C4.15139 4.96832 4.09529 4.82207 4.09796 4.67094C4.10063 4.51982 4.16185 4.37563 4.26872 4.26876C4.3756 4.16188 4.51979 4.10066 4.67091 4.09799C4.82204 4.09532 4.96829 4.15142 5.07887 4.25446L6.99997 6.17556L8.92106 4.25446C9.03164 4.15142 9.1779 4.09532 9.32903 4.09799C9.48015 4.10066 9.62434 4.16188 9.73121 4.26876C9.83809 4.37563 9.89931 4.51982 9.90198 4.67094C9.90464 4.82207 9.84855 4.96832 9.74551 5.07891L7.82441 7L9.74554 8.92113C9.85478 9.0305 9.91614 9.17876 9.91614 9.33335C9.91614 9.48793 9.85478 9.6362 9.74554 9.74557C9.69168 9.8001 9.62748 9.84333 9.55669 9.87271C9.4859 9.90209 9.40996 9.91704 9.33332 9.91668C9.25668 9.91704 9.18073 9.90209 9.10995 9.87271C9.03916 9.84333 8.97495 9.8001 8.9211 9.74557L6.99997 7.82444L5.07884 9.74557C5.02499 9.8001 4.96078 9.84333 4.88999 9.87271C4.81921 9.90209 4.74326 9.91704 4.66662 9.91668Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(n,r){1&n&&(t.\u0275\u0275namespaceSVG(),t.\u0275\u0275elementStart(0,"svg",0)(1,"g"),t.\u0275\u0275element(2,"path",1),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"defs")(4,"clipPath",2),t.\u0275\u0275element(5,"rect",3),t.\u0275\u0275elementEnd()()()),2&n&&(t.\u0275\u0275classMap(r.getClassNames()),t.\u0275\u0275attribute("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),t.\u0275\u0275advance(1),t.\u0275\u0275attribute("clip-path",r.pathId),t.\u0275\u0275advance(3),t.\u0275\u0275property("id",r.pathId))},encapsulation:2})}return i})(),ms=(()=>{class i extends fs{static \u0275fac=function(){let e;return function(r){return(e||(e=t.\u0275\u0275getInheritedFactory(i)))(r||i)}}();static \u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["TimesIcon"]],standalone:!0,features:[t.\u0275\u0275InheritDefinitionFeature,t.\u0275\u0275StandaloneFeature],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M8.01186 7.00933L12.27 2.75116C12.341 2.68501 12.398 2.60524 12.4375 2.51661C12.4769 2.42798 12.4982 2.3323 12.4999 2.23529C12.5016 2.13827 12.4838 2.0419 12.4474 1.95194C12.4111 1.86197 12.357 1.78024 12.2884 1.71163C12.2198 1.64302 12.138 1.58893 12.0481 1.55259C11.9581 1.51625 11.8617 1.4984 11.7647 1.50011C11.6677 1.50182 11.572 1.52306 11.4834 1.56255C11.3948 1.60204 11.315 1.65898 11.2488 1.72997L6.99067 5.98814L2.7325 1.72997C2.59553 1.60234 2.41437 1.53286 2.22718 1.53616C2.03999 1.53946 1.8614 1.61529 1.72901 1.74767C1.59663 1.88006 1.5208 2.05865 1.5175 2.24584C1.5142 2.43303 1.58368 2.61419 1.71131 2.75116L5.96948 7.00933L1.71131 11.2675C1.576 11.403 1.5 11.5866 1.5 11.7781C1.5 11.9696 1.576 12.1532 1.71131 12.2887C1.84679 12.424 2.03043 12.5 2.2219 12.5C2.41338 12.5 2.59702 12.424 2.7325 12.2887L6.99067 8.03052L11.2488 12.2887C11.3843 12.424 11.568 12.5 11.7594 12.5C11.9509 12.5 12.1346 12.424 12.27 12.2887C12.4053 12.1532 12.4813 11.9696 12.4813 11.7781C12.4813 11.5866 12.4053 11.403 12.27 11.2675L8.01186 7.00933Z","fill","currentColor"]],template:function(n,r){1&n&&(t.\u0275\u0275namespaceSVG(),t.\u0275\u0275elementStart(0,"svg",0),t.\u0275\u0275element(1,"path",1),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275classMap(r.getClassNames()),t.\u0275\u0275attribute("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return i})(),Ol=(()=>{class i extends fs{static \u0275fac=function(){let e;return function(r){return(e||(e=t.\u0275\u0275getInheritedFactory(i)))(r||i)}}();static \u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["ChevronDownIcon"]],standalone:!0,features:[t.\u0275\u0275InheritDefinitionFeature,t.\u0275\u0275StandaloneFeature],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M7.01744 10.398C6.91269 10.3985 6.8089 10.378 6.71215 10.3379C6.61541 10.2977 6.52766 10.2386 6.45405 10.1641L1.13907 4.84913C1.03306 4.69404 0.985221 4.5065 1.00399 4.31958C1.02276 4.13266 1.10693 3.95838 1.24166 3.82747C1.37639 3.69655 1.55301 3.61742 1.74039 3.60402C1.92777 3.59062 2.11386 3.64382 2.26584 3.75424L7.01744 8.47394L11.769 3.75424C11.9189 3.65709 12.097 3.61306 12.2748 3.62921C12.4527 3.64535 12.6199 3.72073 12.7498 3.84328C12.8797 3.96582 12.9647 4.12842 12.9912 4.30502C13.0177 4.48162 12.9841 4.662 12.8958 4.81724L7.58083 10.1322C7.50996 10.2125 7.42344 10.2775 7.32656 10.3232C7.22968 10.3689 7.12449 10.3944 7.01744 10.398Z","fill","currentColor"]],template:function(n,r){1&n&&(t.\u0275\u0275namespaceSVG(),t.\u0275\u0275elementStart(0,"svg",0),t.\u0275\u0275element(1,"path",1),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275classMap(r.getClassNames()),t.\u0275\u0275attribute("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return i})();function f4(i,s){1&i&&t.\u0275\u0275element(0,"CheckIcon",7),2&i&&(t.\u0275\u0275property("styleClass","p-checkbox-icon"),t.\u0275\u0275attribute("aria-hidden",!0))}function m4(i,s){}function h4(i,s){1&i&&t.\u0275\u0275template(0,m4,0,0,"ng-template")}function g4(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"span",8),t.\u0275\u0275template(1,h4,1,0,null,9),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275attribute("aria-hidden",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",e.checkIconTemplate)}}function v4(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,f4,1,2,"CheckIcon",5),t.\u0275\u0275template(2,g4,2,2,"span",6),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.checkIconTemplate),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.checkIconTemplate)}}function _4(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext();let n;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(null!==(n=e.label)&&void 0!==n?n:"empty")}}function y4(i,s){1&i&&t.\u0275\u0275elementContainer(0)}const oa=function(i){return{height:i}},b4=function(i,s,e){return{"p-multiselect-item":!0,"p-highlight":i,"p-disabled":s,"p-focus":e}},C4=function(i){return{"p-highlight":i}},Hu=function(i){return{$implicit:i}},S4=["container"],M4=["overlay"],w4=["filterInput"],D4=["focusInput"],x4=["items"],E4=["scroller"],I4=["lastHiddenFocusableEl"],F4=["firstHiddenFocusableEl"],A4=["headerCheckbox"];function T4(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.label()||"empty")}}function O4(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"TimesCircleIcon",20),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(2).$implicit,o=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(o.removeOption(r,o.event))}),t.\u0275\u0275elementEnd()}2&i&&(t.\u0275\u0275property("styleClass","p-multiselect-token-icon"),t.\u0275\u0275attribute("data-pc-section","clearicon")("aria-hidden",!0))}function L4(i,s){1&i&&t.\u0275\u0275elementContainer(0)}function N4(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"span",21),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(2).$implicit,o=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(o.removeOption(r,o.event))}),t.\u0275\u0275template(1,L4,1,0,"ng-container",22),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275nextContext(5);t.\u0275\u0275attribute("data-pc-section","clearicon")("aria-hidden",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",e.removeTokenIconTemplate)}}function R4(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,O4,1,3,"TimesCircleIcon",18),t.\u0275\u0275template(2,N4,2,3,"span",19),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.removeTokenIconTemplate),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.removeTokenIconTemplate)}}function B4(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",15,16)(2,"span",17),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(4,R4,3,2,"ng-container",7),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(n.getLabelByValue(e)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.disabled)}}function k4(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.placeholder||e.defaultLabel||"empty")}}function j4(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,B4,5,2,"div",14),t.\u0275\u0275template(2,k4,2,1,"ng-container",7),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.chipSelectedItems()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.modelValue()||0===e.modelValue().length)}}function P4(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,T4,2,1,"ng-container",7),t.\u0275\u0275template(2,j4,3,2,"ng-container",7),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","comma"===e.display),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","chip"===e.display)}}function V4(i,s){1&i&&t.\u0275\u0275elementContainer(0)}function U4(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"TimesIcon",20),t.\u0275\u0275listener("click",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.clear(r))}),t.\u0275\u0275elementEnd()}2&i&&(t.\u0275\u0275property("styleClass","p-multiselect-clear-icon"),t.\u0275\u0275attribute("data-pc-section","clearicon")("aria-hidden",!0))}function $4(i,s){}function z4(i,s){1&i&&t.\u0275\u0275template(0,$4,0,0,"ng-template")}function H4(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"span",24),t.\u0275\u0275listener("click",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.clear(r))}),t.\u0275\u0275template(1,z4,1,0,null,22),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275attribute("data-pc-section","clearicon")("aria-hidden",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",e.clearIconTemplate)}}function W4(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,U4,1,3,"TimesIcon",18),t.\u0275\u0275template(2,H4,2,3,"span",23),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.clearIconTemplate),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.clearIconTemplate)}}function K4(i,s){if(1&i&&t.\u0275\u0275element(0,"span",27),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngClass",e.dropdownIcon),t.\u0275\u0275attribute("data-pc-section","triggericon")("aria-hidden",!0)}}function G4(i,s){1&i&&t.\u0275\u0275element(0,"ChevronDownIcon",28),2&i&&(t.\u0275\u0275property("styleClass","p-multiselect-trigger-icon"),t.\u0275\u0275attribute("data-pc-section","triggericon")("aria-hidden",!0))}function Z4(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,K4,1,3,"span",25),t.\u0275\u0275template(2,G4,1,3,"ChevronDownIcon",26),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.dropdownIcon),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.dropdownIcon)}}function q4(i,s){}function Q4(i,s){1&i&&t.\u0275\u0275template(0,q4,0,0,"ng-template")}function J4(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"span",29),t.\u0275\u0275template(1,Q4,1,0,null,22),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275attribute("data-pc-section","triggericon")("aria-hidden",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",e.dropdownIconTemplate)}}function Y4(i,s){1&i&&t.\u0275\u0275elementContainer(0)}function X4(i,s){1&i&&t.\u0275\u0275elementContainer(0)}const k0=function(i){return{options:i}};function e5(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,X4,1,0,"ng-container",8),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",t.\u0275\u0275pureFunction1(2,k0,e.filterOptions))}}function t5(i,s){1&i&&t.\u0275\u0275element(0,"CheckIcon",28),2&i&&(t.\u0275\u0275property("styleClass","p-checkbox-icon"),t.\u0275\u0275attribute("aria-hidden",!0))}function n5(i,s){}function i5(i,s){1&i&&t.\u0275\u0275template(0,n5,0,0,"ng-template")}function r5(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"span",51),t.\u0275\u0275template(1,i5,1,0,null,8),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(6);t.\u0275\u0275attribute("aria-hidden",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",e.checkIconTemplate)("ngTemplateOutletContext",t.\u0275\u0275pureFunction1(3,Hu,e.allSelected()))}}function o5(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,t5,1,2,"CheckIcon",26),t.\u0275\u0275template(2,r5,2,5,"span",50),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(5);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.checkIconTemplate),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.checkIconTemplate)}}const s5=function(i){return{"p-checkbox-disabled":i}},a5=function(i,s,e){return{"p-highlight":i,"p-focus":s,"p-disabled":e}};function l5(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",46),t.\u0275\u0275listener("click",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(o.onToggleAll(r))})("keydown",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(o.onHeaderCheckboxKeyDown(r))}),t.\u0275\u0275elementStart(1,"div",2)(2,"input",47,48),t.\u0275\u0275listener("focus",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(r.onHeaderCheckboxFocus())})("blur",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(r.onHeaderCheckboxBlur())}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"div",49),t.\u0275\u0275template(5,o5,3,2,"ng-container",7),t.\u0275\u0275elementEnd()()}if(2&i){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(9,s5,e.disabled||e.toggleAllDisabled)),t.\u0275\u0275advance(1),t.\u0275\u0275attribute("data-p-hidden-accessible",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("readonly",e.readonly)("disabled",e.disabled||e.toggleAllDisabled),t.\u0275\u0275attribute("checked",e.allSelected())("aria-label",e.toggleAllAriaLabel),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction3(11,a5,e.allSelected(),e.headerCheckboxFocus,e.disabled||e.toggleAllDisabled)),t.\u0275\u0275attribute("aria-checked",e.allSelected()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.allSelected())}}function c5(i,s){1&i&&t.\u0275\u0275element(0,"SearchIcon",28),2&i&&t.\u0275\u0275property("styleClass","p-multiselect-filter-icon")}function u5(i,s){}function d5(i,s){1&i&&t.\u0275\u0275template(0,u5,0,0,"ng-template")}function p5(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"span",56),t.\u0275\u0275template(1,d5,1,0,null,22),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(5);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",e.filterIconTemplate)}}function f5(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",52)(1,"input",53,54),t.\u0275\u0275listener("input",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(o.onFilterInputChange(r))})("keydown",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(o.onFilterKeyDown(r))})("click",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(o.onInputClick(r))})("blur",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(o.onFilterBlur(r))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(3,c5,1,1,"SearchIcon",26),t.\u0275\u0275template(4,p5,2,1,"span",55),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("value",e._filterValue()||"")("disabled",e.disabled),t.\u0275\u0275attribute("autocomplete",e.autocomplete)("placeholder",e.filterPlaceHolder)("aria-owns",e.id+"_list")("aria-activedescendant",e.focusedOptionId)("placeholder",e.filterPlaceHolder)("aria-label",e.ariaFilterLabel),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!e.filterIconTemplate),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.filterIconTemplate)}}function m5(i,s){1&i&&t.\u0275\u0275element(0,"TimesIcon",28),2&i&&t.\u0275\u0275property("styleClass","p-multiselect-close-icon")}function h5(i,s){}function g5(i,s){1&i&&t.\u0275\u0275template(0,h5,0,0,"ng-template")}function v5(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"span",57),t.\u0275\u0275template(1,g5,1,0,null,22),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",e.closeIconTemplate)}}function _5(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275template(0,l5,6,15,"div",42),t.\u0275\u0275template(1,f5,5,10,"div",43),t.\u0275\u0275elementStart(2,"button",44),t.\u0275\u0275listener("click",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(o.close(r))}),t.\u0275\u0275template(3,m5,1,1,"TimesIcon",26),t.\u0275\u0275template(4,v5,2,1,"span",45),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("ngIf",e.showToggleAll&&!e.selectionLimit),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.filter),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!e.closeIconTemplate),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.closeIconTemplate)}}function y5(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",39),t.\u0275\u0275projection(1),t.\u0275\u0275template(2,Y4,1,0,"ng-container",22),t.\u0275\u0275template(3,e5,2,4,"ng-container",40),t.\u0275\u0275template(4,_5,5,4,"ng-template",null,41,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275reference(5),n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngTemplateOutlet",n.headerTemplate),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.filterTemplate)("ngIfElse",e)}}function b5(i,s){1&i&&t.\u0275\u0275elementContainer(0)}const j0=function(i,s){return{$implicit:i,options:s}};function C5(i,s){if(1&i&&t.\u0275\u0275template(0,b5,1,0,"ng-container",8),2&i){const e=s.$implicit,n=s.options;t.\u0275\u0275nextContext(2);const r=t.\u0275\u0275reference(8);t.\u0275\u0275property("ngTemplateOutlet",r)("ngTemplateOutletContext",t.\u0275\u0275pureFunction2(2,j0,e,n))}}function S5(i,s){1&i&&t.\u0275\u0275elementContainer(0)}function M5(i,s){if(1&i&&t.\u0275\u0275template(0,S5,1,0,"ng-container",8),2&i){const e=s.options,n=t.\u0275\u0275nextContext(4);t.\u0275\u0275property("ngTemplateOutlet",n.loaderTemplate)("ngTemplateOutletContext",t.\u0275\u0275pureFunction1(2,k0,e))}}function w5(i,s){1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,M5,1,4,"ng-template",60),t.\u0275\u0275elementContainerEnd())}function D5(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"p-scroller",58,59),t.\u0275\u0275listener("onLazyLoad",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.onLazyLoad.emit(r))}),t.\u0275\u0275template(2,C5,1,5,"ng-template",13),t.\u0275\u0275template(3,w5,2,0,"ng-container",7),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275styleMap(t.\u0275\u0275pureFunction1(9,oa,e.scrollHeight)),t.\u0275\u0275property("items",e.visibleOptions())("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("tabindex",-1)("lazy",e.lazy)("options",e.virtualScrollOptions),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",e.loaderTemplate)}}function x5(i,s){1&i&&t.\u0275\u0275elementContainer(0)}const E5=function(){return{}};function I5(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,x5,1,0,"ng-container",8),t.\u0275\u0275elementContainerEnd()),2&i){t.\u0275\u0275nextContext();const e=t.\u0275\u0275reference(8),n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",e)("ngTemplateOutletContext",t.\u0275\u0275pureFunction2(3,j0,n.visibleOptions(),t.\u0275\u0275pureFunction0(2,E5)))}}function F5(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2).$implicit,n=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(n.getOptionGroupLabel(e.optionGroup))}}function A5(i,s){1&i&&t.\u0275\u0275elementContainer(0)}function T5(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"li",65),t.\u0275\u0275template(2,F5,2,1,"span",7),t.\u0275\u0275template(3,A5,1,0,"ng-container",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(),n=e.index,r=e.$implicit,o=t.\u0275\u0275nextContext().options,a=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngStyle",t.\u0275\u0275pureFunction1(5,oa,o.itemSize+"px")),t.\u0275\u0275attribute("id",a.id+"_"+a.getOptionIndex(n,o)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!a.groupTemplate),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",a.groupTemplate)("ngTemplateOutletContext",t.\u0275\u0275pureFunction1(7,Hu,r.optionGroup))}}function O5(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"p-multiSelectItem",66),t.\u0275\u0275listener("onClick",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext().index,a=t.\u0275\u0275nextContext().options,l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.onOptionSelect(r,!1,l.getOptionIndex(o,a)))})("onMouseEnter",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext().index,a=t.\u0275\u0275nextContext().options,l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.onOptionMouseEnter(r,l.getOptionIndex(o,a)))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&i){const e=t.\u0275\u0275nextContext(),n=e.index,r=e.$implicit,o=t.\u0275\u0275nextContext().options,a=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("id",a.id+"_"+a.getOptionIndex(n,o))("option",r)("selected",a.isSelected(r))("label",a.getOptionLabel(r))("disabled",a.isOptionDisabled(r))("template",a.itemTemplate)("checkIconTemplate",a.checkIconTemplate)("itemSize",o.itemSize)("focused",a.focusedOptionIndex()===a.getOptionIndex(n,o))("ariaPosInset",a.getAriaPosInset(a.getOptionIndex(n,o)))("ariaSetSize",a.ariaSetSize)}}function L5(i,s){if(1&i&&(t.\u0275\u0275template(0,T5,4,9,"ng-container",7),t.\u0275\u0275template(1,O5,2,11,"ng-container",7)),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("ngIf",n.isOptionGroup(e)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.isOptionGroup(e))}}function N5(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.emptyFilterMessageLabel," ")}}function R5(i,s){1&i&&t.\u0275\u0275elementContainer(0,null,68)}function B5(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"li",67),t.\u0275\u0275template(1,N5,2,1,"ng-container",40),t.\u0275\u0275template(2,R5,2,0,"ng-container",22),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().options,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngStyle",t.\u0275\u0275pureFunction1(4,oa,e.itemSize+"px")),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.emptyFilterTemplate&&!n.emptyTemplate)("ngIfElse",n.emptyFilter),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",n.emptyFilterTemplate||n.emptyTemplate)}}function k5(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.emptyMessageLabel," ")}}function j5(i,s){1&i&&t.\u0275\u0275elementContainer(0,null,69)}function P5(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"li",67),t.\u0275\u0275template(1,k5,2,1,"ng-container",40),t.\u0275\u0275template(2,j5,2,0,"ng-container",22),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().options,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngStyle",t.\u0275\u0275pureFunction1(4,oa,e.itemSize+"px")),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.emptyTemplate)("ngIfElse",n.empty),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",n.emptyTemplate)}}function V5(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"ul",61,62),t.\u0275\u0275template(2,L5,2,2,"ng-template",63),t.\u0275\u0275template(3,B5,3,6,"li",64),t.\u0275\u0275template(4,P5,3,6,"li",64),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=s.options,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275styleMap(n.contentStyle),t.\u0275\u0275property("ngClass",n.contentStyleClass),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.hasFilter()&&r.isEmpty()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.hasFilter()&&r.isEmpty())}}function U5(i,s){1&i&&t.\u0275\u0275elementContainer(0)}function $5(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",70),t.\u0275\u0275projection(1,1),t.\u0275\u0275template(2,U5,1,0,"ng-container",22),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngTemplateOutlet",e.footerTemplate)}}function z5(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",30)(1,"span",31,32),t.\u0275\u0275listener("focus",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.onFirstHiddenFocus(r))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(3,y5,6,3,"div",33),t.\u0275\u0275elementStart(4,"div",34),t.\u0275\u0275template(5,D5,4,11,"p-scroller",35),t.\u0275\u0275template(6,I5,2,6,"ng-container",7),t.\u0275\u0275template(7,V5,5,6,"ng-template",null,36,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(9,$5,3,1,"div",37),t.\u0275\u0275elementStart(10,"span",31,38),t.\u0275\u0275listener("focus",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.onLastHiddenFocus(r))}),t.\u0275\u0275elementEnd()()}if(2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275classMap(e.panelStyleClass),t.\u0275\u0275property("ngClass","p-multiselect-panel p-component")("ngStyle",e.panelStyle),t.\u0275\u0275advance(1),t.\u0275\u0275attribute("aria-hidden","true")("tabindex",0)("data-p-hidden-accessible",!0)("data-p-hidden-focusable",!0),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.showHeader),t.\u0275\u0275advance(1),t.\u0275\u0275styleProp("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.virtualScroll),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.virtualScroll),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",e.footerFacet||e.footerTemplate),t.\u0275\u0275advance(1),t.\u0275\u0275attribute("aria-hidden",!0)("tabindex",0)("data-p-hidden-accessible",!0)("data-p-hidden-focusable",!0)}}const H5=[[["p-header"]],[["p-footer"]]],W5=function(i,s){return{$implicit:i,removeChip:s}},K5=["p-header","p-footer"],G5={provide:De.NG_VALUE_ACCESSOR,useExisting:(0,t.forwardRef)(()=>Ll),multi:!0};let Z5=(()=>{class i{id;option;selected;label;disabled;itemSize;focused;ariaPosInset;ariaSetSize;template;checkIconTemplate;onClick=new t.EventEmitter;onMouseEnter=new t.EventEmitter;onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option,selected:this.selected})}onOptionMouseEnter(e){this.onMouseEnter.emit({originalEvent:e,option:this.option,selected:this.selected})}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["p-multiSelectItem"]],hostAttrs:[1,"p-element"],inputs:{id:"id",option:"option",selected:"selected",label:"label",disabled:"disabled",itemSize:"itemSize",focused:"focused",ariaPosInset:"ariaPosInset",ariaSetSize:"ariaSetSize",template:"template",checkIconTemplate:"checkIconTemplate"},outputs:{onClick:"onClick",onMouseEnter:"onMouseEnter"},decls:6,vars:26,consts:[["pRipple","",1,"p-multiselect-item",3,"ngStyle","ngClass","id","click","mouseenter"],[1,"p-checkbox","p-component"],[1,"p-checkbox-box",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"styleClass",4,"ngIf"],["class","p-checkbox-icon",4,"ngIf"],[3,"styleClass"],[1,"p-checkbox-icon"],[4,"ngTemplateOutlet"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"li",0),t.\u0275\u0275listener("click",function(a){return r.onOptionClick(a)})("mouseenter",function(a){return r.onOptionMouseEnter(a)}),t.\u0275\u0275elementStart(1,"div",1)(2,"div",2),t.\u0275\u0275template(3,v4,3,2,"ng-container",3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(4,_4,2,1,"span",3),t.\u0275\u0275template(5,y4,1,0,"ng-container",4),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275property("ngStyle",t.\u0275\u0275pureFunction1(16,oa,r.itemSize+"px"))("ngClass",t.\u0275\u0275pureFunction3(18,b4,r.selected,r.disabled,r.focused))("id",r.id),t.\u0275\u0275attribute("aria-label",r.label)("aria-setsize",r.ariaSetSize)("aria-posinset",r.ariaPosInset)("aria-selected",r.selected)("data-p-focused",r.focused)("data-p-highlight",r.selected)("data-p-disabled",r.disabled),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(22,C4,r.selected)),t.\u0275\u0275attribute("aria-checked",r.selected),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.selected),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.template),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",r.template)("ngTemplateOutletContext",t.\u0275\u0275pureFunction1(24,Hu,r.option)))},dependencies:function(){return[I.NgClass,I.NgIf,I.NgTemplateOutlet,I.NgStyle,Il,Al]},encapsulation:2})}return i})(),Ll=(()=>{class i{el;renderer;cd;zone;filterService;config;overlayService;id;ariaLabel;style;styleClass;panelStyle;panelStyleClass;inputId;disabled;readonly;group;filter=!0;filterPlaceHolder;filterLocale;overlayVisible;tabindex=0;appendTo;dataKey;name;ariaLabelledBy;set displaySelectedLabel(e){this._displaySelectedLabel=e}get displaySelectedLabel(){return this._displaySelectedLabel}set maxSelectedLabels(e){this._maxSelectedLabels=e}get maxSelectedLabels(){return this._maxSelectedLabels}selectionLimit;selectedItemsLabel="{0} items selected";showToggleAll=!0;emptyFilterMessage="";emptyMessage="";resetFilterOnHide=!1;dropdownIcon;optionLabel;optionValue;optionDisabled;optionGroupLabel="label";optionGroupChildren="items";showHeader=!0;filterBy;scrollHeight="200px";lazy=!1;virtualScroll;virtualScrollItemSize;virtualScrollOptions;overlayOptions;ariaFilterLabel;filterMatchMode="contains";tooltip="";tooltipPosition="right";tooltipPositionStyle="absolute";tooltipStyleClass;autofocusFilter=!0;display="comma";autocomplete="off";showClear=!1;get autoZIndex(){return this._autoZIndex}set autoZIndex(e){this._autoZIndex=e,console.warn("The autoZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get baseZIndex(){return this._baseZIndex}set baseZIndex(e){this._baseZIndex=e,console.warn("The baseZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get showTransitionOptions(){return this._showTransitionOptions}set showTransitionOptions(e){this._showTransitionOptions=e,console.warn("The showTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}get hideTransitionOptions(){return this._hideTransitionOptions}set hideTransitionOptions(e){this._hideTransitionOptions=e,console.warn("The hideTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}set defaultLabel(e){this._defaultLabel=e,console.warn("defaultLabel property is deprecated since 16.6.0, use placeholder instead")}get defaultLabel(){return this._defaultLabel}set placeholder(e){this._placeholder=e}get placeholder(){return this._placeholder}get options(){return this._options()}set options(e){this._options.set(e)}get filterValue(){return this._filterValue()}set filterValue(e){this._filterValue.set(e)}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}get selectAll(){return this._selectAll}set selectAll(e){this._selectAll=e}focusOnHover=!1;filterFields;selectOnFocus=!1;autoOptionFocus=!0;onChange=new t.EventEmitter;onFilter=new t.EventEmitter;onFocus=new t.EventEmitter;onBlur=new t.EventEmitter;onClick=new t.EventEmitter;onClear=new t.EventEmitter;onPanelShow=new t.EventEmitter;onPanelHide=new t.EventEmitter;onLazyLoad=new t.EventEmitter;onRemove=new t.EventEmitter;onSelectAllChange=new t.EventEmitter;containerViewChild;overlayViewChild;filterInputChild;focusInputViewChild;itemsViewChild;scroller;lastHiddenFocusableElementOnOverlay;firstHiddenFocusableElementOnOverlay;headerCheckboxViewChild;footerFacet;headerFacet;templates;searchValue;searchTimeout;_selectAll=null;_autoZIndex;_baseZIndex;_showTransitionOptions;_hideTransitionOptions;_defaultLabel;_placeholder;_itemSize;_selectionLimit;value;_filteredOptions;onModelChange=()=>{};onModelTouched=()=>{};valuesAsString;focus;filtered;itemTemplate;groupTemplate;loaderTemplate;headerTemplate;filterTemplate;footerTemplate;emptyFilterTemplate;emptyTemplate;selectedItemsTemplate;checkIconTemplate;filterIconTemplate;removeTokenIconTemplate;closeIconTemplate;clearIconTemplate;dropdownIconTemplate;headerCheckboxFocus;filterOptions;maxSelectionLimitReached;preventModelTouched;preventDocumentDefault;focused=!1;itemsWrapper;_displaySelectedLabel=!0;_maxSelectedLabels=3;modelValue=(0,t.signal)(null);_filterValue=(0,t.signal)(null);_options=(0,t.signal)(null);startRangeIndex=(0,t.signal)(-1);focusedOptionIndex=(0,t.signal)(-1);selectedOptions;get containerClass(){return{"p-multiselect p-component p-inputwrapper":!0,"p-disabled":this.disabled,"p-multiselect-clearable":this.showClear&&!this.disabled,"p-multiselect-chip":"chip"===this.display,"p-focus":this.focused,"p-inputwrapper-filled":Mt.isNotEmpty(this.modelValue()),"p-inputwrapper-focus":this.focused||this.overlayVisible}}get inputClass(){return{"p-multiselect-label p-inputtext":!0,"p-placeholder":(this.placeholder||this.defaultLabel)&&(this.label()===this.placeholder||this.label()===this.defaultLabel),"p-multiselect-label-empty":!this.selectedItemsTemplate&&("p-emptylabel"===this.label()||0===this.label().length)}}get panelClass(){return{"p-multiselect-panel p-component":!0,"p-input-filled":"filled"===this.config.inputStyle,"p-ripple-disabled":!1===this.config.ripple}}get labelClass(){return{"p-multiselect-label":!0,"p-placeholder":this.label()===this.placeholder||this.label()===this.defaultLabel,"p-multiselect-label-empty":!(this.placeholder||this.defaultLabel||this.modelValue()&&0!==this.modelValue().length)}}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(xl.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(xl.EMPTY_FILTER_MESSAGE)}get filled(){return"string"==typeof this.modelValue()?!!this.modelValue():this.modelValue()||null!=this.modelValue()||null!=this.modelValue()}get isVisibleClearIcon(){return null!=this.modelValue()&&""!==this.modelValue()&&Mt.isNotEmpty(this.modelValue())&&this.showClear&&!this.disabled&&this.filled}get toggleAllAriaLabel(){return this.config.translation.aria?this.config.translation.aria[this.allSelected()?"selectAll":"unselectAll"]:void 0}get closeAriaLabel(){return this.config.translation.aria?this.config.translation.aria.close:void 0}visibleOptions=(0,t.computed)(()=>{const e=this.group?this.flatOptions(this.options):this.options||[];if(this._filterValue()){const n=this.filterService.filter(e,this.searchFields(),this._filterValue(),this.filterMatchMode,this.filterLocale);if(this.group){const o=[];return(this.options||[]).forEach(a=>{const c=this.getOptionGroupChildren(a).filter(u=>n.includes(u));c.length>0&&o.push({...a,["string"==typeof this.optionGroupChildren?this.optionGroupChildren:"items"]:[...c]})}),this.flatOptions(o)}return n}return e});label=(0,t.computed)(()=>{let e;const n=this.modelValue();if(n&&n.length&&this.displaySelectedLabel){if(Mt.isNotEmpty(this.maxSelectedLabels)&&n.length>this.maxSelectedLabels)return this.getSelectedItemsLabel();e="";for(let r=0;r<n.length;r++)0!==r&&(e+=", "),e+=this.getLabelByValue(n[r])}else e=this.placeholder||this.defaultLabel||"";return e});chipSelectedItems=(0,t.computed)(()=>Mt.isNotEmpty(this.maxSelectedLabels)&&this.modelValue()&&this.modelValue().length>this.maxSelectedLabels?this.modelValue().slice(0,this.maxSelectedLabels):this.modelValue());constructor(e,n,r,o,a,l,c){this.el=e,this.renderer=n,this.cd=r,this.zone=o,this.filterService=a,this.config=l,this.overlayService=c,(0,t.effect)(()=>{const u=this.modelValue(),d=this.visibleOptions();d&&Mt.isNotEmpty(d)&&u&&(this.selectedOptions=this.optionValue&&this.optionLabel?d.filter(p=>u.includes(p[this.optionLabel])||u.includes(p[this.optionValue])):[...u])})}ngOnInit(){this.id=this.id||ps(),this.autoUpdateModel(),this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"selectedItems":this.selectedItemsTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"checkicon":this.checkIconTemplate=e.template;break;case"filtericon":this.filterIconTemplate=e.template;break;case"removetokenicon":this.removeTokenIconTemplate=e.template;break;case"closeicon":this.closeIconTemplate=e.template;break;case"clearicon":this.clearIconTemplate=e.template;break;case"dropdownicon":this.dropdownIconTemplate=e.template}})}ngAfterViewInit(){this.overlayVisible&&this.show()}ngAfterViewChecked(){this.filtered&&(this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.overlayViewChild?.alignOverlay()},1)}),this.filtered=!1)}flatOptions(e){return(e||[]).reduce((n,r,o)=>{n.push({optionGroup:r,group:!0,index:o});const a=this.getOptionGroupChildren(r);return a&&a.forEach(l=>n.push(l)),n},[])}autoUpdateModel(){if(this.selectOnFocus&&this.autoOptionFocus&&!this.hasSelectedOption()){this.focusedOptionIndex.set(this.findFirstFocusedOptionIndex());const e=this.getOptionValue(this.visibleOptions()[this.focusedOptionIndex()]);this.onOptionSelect({originalEvent:null,option:[e]})}}updateModel(e,n){this.value=e,this.onModelChange(e),this.modelValue.set(e)}onInputClick(e){e.stopPropagation(),e.preventDefault(),this.focusedOptionIndex.set(-1)}onOptionSelect(e,n=!1,r=-1){const{originalEvent:o,option:a}=e;if(this.disabled||this.isOptionDisabled(a))return;let c=null;c=this.isSelected(a)?this.modelValue().filter(u=>!Mt.equals(u,this.getOptionValue(a),this.equalityKey())):[...this.modelValue()||[],this.getOptionValue(a)],this.updateModel(c,o),-1!==r&&this.focusedOptionIndex.set(r),n&&Be.focus(this.focusInputViewChild?.nativeElement),this.onChange.emit({originalEvent:e,value:c,itemValue:a})}findSelectedOptionIndex(){return this.hasSelectedOption()?this.visibleOptions().findIndex(e=>this.isValidSelectedOption(e)):-1}onOptionSelectRange(e,n=-1,r=-1){if(-1===n&&(n=this.findNearestSelectedOptionIndex(r,!0)),-1===r&&(r=this.findNearestSelectedOptionIndex(n)),-1!==n&&-1!==r){const o=Math.min(n,r),a=Math.max(n,r),l=this.visibleOptions().slice(o,a+1).filter(c=>this.isValidOption(c)).map(c=>this.getOptionValue(c));this.updateModel(l,e)}}searchFields(){return this.filterFields||[this.optionLabel]}findNearestSelectedOptionIndex(e,n=!1){let r=-1;return this.hasSelectedOption()&&(n?(r=this.findPrevSelectedOptionIndex(e),r=-1===r?this.findNextSelectedOptionIndex(e):r):(r=this.findNextSelectedOptionIndex(e),r=-1===r?this.findPrevSelectedOptionIndex(e):r)),r>-1?r:e}findPrevSelectedOptionIndex(e){const n=this.hasSelectedOption()&&e>0?Mt.findLastIndex(this.visibleOptions().slice(0,e),r=>this.isValidSelectedOption(r)):-1;return n>-1?n:-1}findFirstFocusedOptionIndex(){const e=this.findFirstSelectedOptionIndex();return e<0?this.findFirstOptionIndex():e}findFirstOptionIndex(){return this.visibleOptions().findIndex(e=>this.isValidOption(e))}findFirstSelectedOptionIndex(){return this.hasSelectedOption()?this.visibleOptions().findIndex(e=>this.isValidSelectedOption(e)):-1}findNextSelectedOptionIndex(e){const n=this.hasSelectedOption()&&e<this.visibleOptions().length-1?this.visibleOptions().slice(e+1).findIndex(r=>this.isValidSelectedOption(r)):-1;return n>-1?n+e+1:-1}equalityKey(){return this.optionValue?null:this.dataKey}hasSelectedOption(){return Mt.isNotEmpty(this.modelValue())}isValidSelectedOption(e){return this.isValidOption(e)&&this.isSelected(e)}isOptionGroup(e){return(this.group||this.optionGroupLabel)&&e.optionGroup&&e.group}isValidOption(e){return e&&!(this.isOptionDisabled(e)||this.isOptionGroup(e))}isOptionDisabled(e){return(this.optionDisabled?Mt.resolveFieldData(e,this.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled)||this.maxSelectionLimitReached&&!this.isSelected(e)}isSelected(e){const n=this.getOptionValue(e);return(this.modelValue()||[]).some(r=>Mt.equals(r,n,this.equalityKey()))}isOptionMatched(e){return this.isValidOption(e)&&this.getOptionLabel(e).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))}isEmpty(){return!this._options()||this.visibleOptions()&&0===this.visibleOptions().length}getOptionIndex(e,n){return this.virtualScrollerDisabled?e:n&&n.getItemOptions(e).index}getAriaPosInset(e){return(this.optionGroupLabel?e-this.visibleOptions().slice(0,e).filter(n=>this.isOptionGroup(n)).length:e)+1}get ariaSetSize(){return this.visibleOptions().filter(e=>!this.isOptionGroup(e)).length}getLabelByValue(e){const r=(this.group?this.flatOptions(this._options()):this._options()||[]).find(o=>!this.isOptionGroup(o)&&Mt.equals(this.getOptionValue(o),e,this.equalityKey()));return r?this.getOptionLabel(r):null}getSelectedItemsLabel(){let e=/{(.*?)}/;return e.test(this.selectedItemsLabel)?this.selectedItemsLabel.replace(this.selectedItemsLabel.match(e)[0],this.modelValue().length+""):this.selectedItemsLabel}getOptionLabel(e){return this.optionLabel?Mt.resolveFieldData(e,this.optionLabel):e&&null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?Mt.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&void 0!==e.value?e.value:e}getOptionGroupLabel(e){return this.optionGroupLabel?Mt.resolveFieldData(e,this.optionGroupLabel):e&&null!=e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?Mt.resolveFieldData(e,this.optionGroupChildren):e.items}onKeyDown(e){if(this.disabled)return void e.preventDefault();const n=e.metaKey||e.ctrlKey;switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Enter":case"Space":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e);break;case"ShiftLeft":case"ShiftRight":this.onShiftKey();break;default:if("KeyA"===e.code&&n){const r=this.visibleOptions().filter(o=>this.isValidOption(o)).map(o=>this.getOptionValue(o));this.updateModel(r,e),e.preventDefault();break}!n&&Mt.isPrintableCharacter(e.key)&&(!this.overlayVisible&&this.show(),this.searchOptions(e,e.key),e.preventDefault())}}onFilterKeyDown(e){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e,!0);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,!0);break;case"Home":this.onHomeKey(e,!0);break;case"End":this.onEndKey(e,!0);break;case"Enter":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e,!0)}}onArrowLeftKey(e,n=!1){n&&this.focusedOptionIndex.set(-1)}onArrowDownKey(e){const n=-1!==this.focusedOptionIndex()?this.findNextOptionIndex(this.focusedOptionIndex()):this.findFirstFocusedOptionIndex();e.shiftKey&&this.onOptionSelectRange(e,this.startRangeIndex(),n),this.changeFocusedOptionIndex(e,n),!this.overlayVisible&&this.show(),e.preventDefault(),e.stopPropagation()}onArrowUpKey(e,n=!1){if(e.altKey&&!n)-1!==this.focusedOptionIndex()&&this.onOptionSelect(e,this.visibleOptions()[this.focusedOptionIndex()]),this.overlayVisible&&this.hide(),e.preventDefault();else{const r=-1!==this.focusedOptionIndex()?this.findPrevOptionIndex(this.focusedOptionIndex()):this.findLastFocusedOptionIndex();e.shiftKey&&this.onOptionSelectRange(e,r,this.startRangeIndex()),this.changeFocusedOptionIndex(e,r),!this.overlayVisible&&this.show(),e.preventDefault()}e.stopPropagation()}onHomeKey(e,n=!1){const{currentTarget:r}=e;if(n)r.setSelectionRange(0,e.shiftKey?r.value.length:0),this.focusedOptionIndex.set(-1);else{let o=e.metaKey||e.ctrlKey,a=this.findFirstOptionIndex();e.shiftKey&&o&&this.onOptionSelectRange(e,a,this.startRangeIndex()),this.changeFocusedOptionIndex(e,a),!this.overlayVisible&&this.show()}e.preventDefault()}onEndKey(e,n=!1){const{currentTarget:r}=e;if(n){const o=r.value.length;r.setSelectionRange(e.shiftKey?0:o,o),this.focusedOptionIndex.set(-1)}else{let o=e.metaKey||e.ctrlKey,a=this.findLastFocusedOptionIndex();e.shiftKey&&o&&this.onOptionSelectRange(e,this.startRangeIndex(),a),this.changeFocusedOptionIndex(e,a),!this.overlayVisible&&this.show()}e.preventDefault()}onPageDownKey(e){this.scrollInView(this.visibleOptions().length-1),e.preventDefault()}onPageUpKey(e){this.scrollInView(0),e.preventDefault()}onEnterKey(e){this.overlayVisible?-1!==this.focusedOptionIndex()&&(e.shiftKey?this.onOptionSelectRange(e,this.focusedOptionIndex()):this.onOptionSelect({originalEvent:e,option:this.visibleOptions()[this.focusedOptionIndex()]})):this.onArrowDownKey(e),e.preventDefault()}onEscapeKey(e){this.overlayVisible&&this.hide(!0),e.preventDefault()}onDeleteKey(e){this.showClear&&(this.clear(e),e.preventDefault())}onTabKey(e,n=!1){n||(this.overlayVisible&&this.hasFocusableElements()?(Be.focus(e.shiftKey?this.lastHiddenFocusableElementOnOverlay.nativeElement:this.firstHiddenFocusableElementOnOverlay.nativeElement),e.preventDefault()):(-1!==this.focusedOptionIndex()&&this.onOptionSelect({originalEvent:e,option:this.visibleOptions()[this.focusedOptionIndex()]}),this.overlayVisible&&this.hide(this.filter)))}onShiftKey(){this.startRangeIndex.set(this.focusedOptionIndex())}onContainerClick(e){if(!(this.disabled||this.readonly||e.target.isSameNode(this.focusInputViewChild?.nativeElement))){if("INPUT"===e.target.tagName||"clearicon"===e.target.getAttribute("data-pc-section")||e.target.closest('[data-pc-section="clearicon"]'))return void e.preventDefault();(!this.overlayViewChild||!this.overlayViewChild.el.nativeElement.contains(e.target))&&(this.overlayVisible?this.hide(!0):this.show(!0)),this.focusInputViewChild?.nativeElement.focus({preventScroll:!0}),this.onClick.emit(e),this.cd.detectChanges()}}onFirstHiddenFocus(e){const n=e.relatedTarget===this.focusInputViewChild?.nativeElement?Be.getFirstFocusableElement(this.overlayViewChild?.overlayViewChild?.nativeElement,':not([data-p-hidden-focusable="true"])'):this.focusInputViewChild?.nativeElement;Be.focus(n)}onInputFocus(e){this.focused=!0;const n=-1!==this.focusedOptionIndex()?this.focusedOptionIndex():this.overlayVisible&&this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1;this.focusedOptionIndex.set(n),this.overlayVisible&&this.scrollInView(this.focusedOptionIndex()),this.onFocus.emit({originalEvent:e})}onInputBlur(e){this.focused=!1,this.onBlur.emit({originalEvent:e}),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}onFilterInputChange(e){let n=e.target.value?.trim();this._filterValue.set(n),this.focusedOptionIndex.set(-1),this.onFilter.emit({originalEvent:e,filter:this._filterValue()}),!this.virtualScrollerDisabled&&this.scroller.scrollToIndex(0)}onLastHiddenFocus(e){const n=e.relatedTarget===this.focusInputViewChild?.nativeElement?Be.getLastFocusableElement(this.overlayViewChild?.overlayViewChild?.nativeElement,':not([data-p-hidden-focusable="true"])'):this.focusInputViewChild?.nativeElement;Be.focus(n)}onOptionMouseEnter(e,n){this.focusOnHover&&this.changeFocusedOptionIndex(e,n)}onHeaderCheckboxKeyDown(e){if(this.disabled)e.preventDefault();else switch(e.code){case"Space":case"Enter":this.onToggleAll(e)}}onFilterBlur(e){this.focusedOptionIndex.set(-1)}onHeaderCheckboxFocus(){this.headerCheckboxFocus=!0}onHeaderCheckboxBlur(){this.headerCheckboxFocus=!1}onToggleAll(e){if(!this.disabled&&!this.readonly){if(null!==this.selectAll)this.onSelectAllChange.emit({originalEvent:e,checked:!this.allSelected()});else{const n=this.allSelected()?[]:this.visibleOptions().filter(r=>this.isValidOption(r)).map(r=>this.getOptionValue(r));this.updateModel(n,e)}Be.focus(this.headerCheckboxViewChild.nativeElement),this.headerCheckboxFocus=!0,e.preventDefault(),e.stopPropagation()}}changeFocusedOptionIndex(e,n){this.focusedOptionIndex()!==n&&(this.focusedOptionIndex.set(n),this.scrollInView())}get virtualScrollerDisabled(){return!this.virtualScroll}scrollInView(e=-1){if(this.itemsViewChild&&this.itemsViewChild.nativeElement){const r=Be.findSingle(this.itemsViewChild.nativeElement,`li[id="${-1!==e?`${this.id}_${e}`:this.focusedOptionId}"]`);r?r.scrollIntoView&&r.scrollIntoView({block:"nearest",inline:"nearest"}):this.virtualScrollerDisabled||setTimeout(()=>{this.virtualScroll&&this.scroller?.scrollToIndex(-1!==e?e:this.focusedOptionIndex())},0)}}get focusedOptionId(){return-1!==this.focusedOptionIndex()?`${this.id}_${this.focusedOptionIndex()}`:null}checkSelectionLimit(){this.maxSelectionLimitReached=!(!this.selectionLimit||!this.value||this.value.length!==this.selectionLimit)}writeValue(e){this.value=e,this.modelValue.set(this.value),this.checkSelectionLimit(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}allSelected(){return null!==this.selectAll?this.selectAll:Mt.isNotEmpty(this.visibleOptions())&&this.visibleOptions().every(e=>this.isOptionGroup(e)||this.isOptionDisabled(e)||this.isSelected(e))}show(e){this.overlayVisible=!0;const n=-1!==this.focusedOptionIndex()?this.focusedOptionIndex():this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1;this.focusedOptionIndex.set(n),e&&Be.focus(this.focusInputViewChild?.nativeElement),this.cd.markForCheck()}hide(e){this.overlayVisible=!1,this.focusedOptionIndex.set(-1),this.filter&&this.resetFilterOnHide&&this.resetFilter(),e&&Be.focus(this.focusInputViewChild?.nativeElement),this.onPanelHide.emit(),this.cd.markForCheck()}onOverlayAnimationStart(e){switch(e.toState){case"visible":if(this.itemsWrapper=Be.findSingle(this.overlayViewChild?.overlayViewChild?.nativeElement,this.virtualScroll?".p-scroller":".p-multiselect-items-wrapper"),this.virtualScroll&&this.scroller?.setContentEl(this.itemsViewChild?.nativeElement),this._options()&&this._options().length)if(this.virtualScroll){const n=Mt.isNotEmpty(this.modelValue())?this.focusedOptionIndex():-1;-1!==n&&this.scroller?.scrollToIndex(n)}else{let n=Be.findSingle(this.itemsWrapper,".p-multiselect-item.p-highlight");n&&n.scrollIntoView({block:"nearest",inline:"center"})}this.onPanelShow.emit();case"void":this.itemsWrapper=null,this.onModelTouched()}}resetFilter(){this.filterInputChild&&this.filterInputChild.nativeElement&&(this.filterInputChild.nativeElement.value=""),this._filterValue.set(null),this._filteredOptions=null}close(e){this.hide(),e.preventDefault(),e.stopPropagation()}clear(e){this.value=null,this.checkSelectionLimit(),this.updateModel(null,e),this.selectedOptions=null,this.onClear.emit(),e.stopPropagation()}removeOption(e,n){let r=this.modelValue().filter(o=>!Mt.equals(o,e,this.equalityKey()));this.updateModel(r,n),n&&n.stopPropagation()}findNextItem(e){let n=e.nextElementSibling;return n?Be.hasClass(n.children[0],"p-disabled")||Be.isHidden(n.children[0])||Be.hasClass(n,"p-multiselect-item-group")?this.findNextItem(n):n.children[0]:null}findPrevItem(e){let n=e.previousElementSibling;return n?Be.hasClass(n.children[0],"p-disabled")||Be.isHidden(n.children[0])||Be.hasClass(n,"p-multiselect-item-group")?this.findPrevItem(n):n.children[0]:null}findNextOptionIndex(e){const n=e<this.visibleOptions().length-1?this.visibleOptions().slice(e+1).findIndex(r=>this.isValidOption(r)):-1;return n>-1?n+e+1:e}findPrevOptionIndex(e){const n=e>0?Mt.findLastIndex(this.visibleOptions().slice(0,e),r=>this.isValidOption(r)):-1;return n>-1?n:e}findLastSelectedOptionIndex(){return this.hasSelectedOption()?Mt.findLastIndex(this.visibleOptions(),e=>this.isValidSelectedOption(e)):-1}findLastFocusedOptionIndex(){const e=this.findLastSelectedOptionIndex();return e<0?this.findLastOptionIndex():e}findLastOptionIndex(){return Mt.findLastIndex(this.visibleOptions(),e=>this.isValidOption(e))}searchOptions(e,n){this.searchValue=(this.searchValue||"")+n;let r=-1,o=!1;return-1!==this.focusedOptionIndex()?(r=this.visibleOptions().slice(this.focusedOptionIndex()).findIndex(a=>this.isOptionMatched(a)),r=-1===r?this.visibleOptions().slice(0,this.focusedOptionIndex()).findIndex(a=>this.isOptionMatched(a)):r+this.focusedOptionIndex()):r=this.visibleOptions().findIndex(a=>this.isOptionMatched(a)),-1!==r&&(o=!0),-1===r&&-1===this.focusedOptionIndex()&&(r=this.findFirstFocusedOptionIndex()),-1!==r&&this.changeFocusedOptionIndex(e,r),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchValue="",this.searchTimeout=null},500),o}activateFilter(){if(this.hasFilter()&&this._options){let e=(this.filterBy||this.optionLabel||"label").split(",");if(this.group){let n=[];for(let r of this.options){let o=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);o&&o.length&&n.push({...r,[this.optionGroupChildren]:o})}this._filteredOptions=n}else this._filteredOptions=this.filterService.filter(this.options,e,this._filterValue,this.filterMatchMode,this.filterLocale)}else this._filteredOptions=null}hasFocusableElements(){return Be.getFocusableElements(this.overlayViewChild.overlayViewChild.nativeElement,':not([data-p-hidden-focusable="true"])').length>0}hasFilter(){return this._filterValue()&&this._filterValue().trim().length>0}static \u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(t.Renderer2),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(t.NgZone),t.\u0275\u0275directiveInject(I0),t.\u0275\u0275directiveInject(Jr),t.\u0275\u0275directiveInject(F0))};static \u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["p-multiSelect"]],contentQueries:function(n,r,o){if(1&n&&(t.\u0275\u0275contentQuery(o,wP,5),t.\u0275\u0275contentQuery(o,MP,5),t.\u0275\u0275contentQuery(o,ki,4)),2&n){let a;t.\u0275\u0275queryRefresh(a=t.\u0275\u0275loadQuery())&&(r.footerFacet=a.first),t.\u0275\u0275queryRefresh(a=t.\u0275\u0275loadQuery())&&(r.headerFacet=a.first),t.\u0275\u0275queryRefresh(a=t.\u0275\u0275loadQuery())&&(r.templates=a)}},viewQuery:function(n,r){if(1&n&&(t.\u0275\u0275viewQuery(S4,5),t.\u0275\u0275viewQuery(M4,5),t.\u0275\u0275viewQuery(w4,5),t.\u0275\u0275viewQuery(D4,5),t.\u0275\u0275viewQuery(x4,5),t.\u0275\u0275viewQuery(E4,5),t.\u0275\u0275viewQuery(I4,5),t.\u0275\u0275viewQuery(F4,5),t.\u0275\u0275viewQuery(A4,5)),2&n){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.containerViewChild=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.overlayViewChild=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.filterInputChild=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.focusInputViewChild=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.itemsViewChild=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.scroller=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.lastHiddenFocusableElementOnOverlay=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.firstHiddenFocusableElementOnOverlay=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.headerCheckboxViewChild=o.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(n,r){2&n&&t.\u0275\u0275classProp("p-inputwrapper-filled",r.filled)("p-inputwrapper-focus",r.focused||r.overlayVisible)},inputs:{id:"id",ariaLabel:"ariaLabel",style:"style",styleClass:"styleClass",panelStyle:"panelStyle",panelStyleClass:"panelStyleClass",inputId:"inputId",disabled:"disabled",readonly:"readonly",group:"group",filter:"filter",filterPlaceHolder:"filterPlaceHolder",filterLocale:"filterLocale",overlayVisible:"overlayVisible",tabindex:"tabindex",appendTo:"appendTo",dataKey:"dataKey",name:"name",ariaLabelledBy:"ariaLabelledBy",displaySelectedLabel:"displaySelectedLabel",maxSelectedLabels:"maxSelectedLabels",selectionLimit:"selectionLimit",selectedItemsLabel:"selectedItemsLabel",showToggleAll:"showToggleAll",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",showHeader:"showHeader",filterBy:"filterBy",scrollHeight:"scrollHeight",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",overlayOptions:"overlayOptions",ariaFilterLabel:"ariaFilterLabel",filterMatchMode:"filterMatchMode",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",display:"display",autocomplete:"autocomplete",showClear:"showClear",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",defaultLabel:"defaultLabel",placeholder:"placeholder",options:"options",filterValue:"filterValue",itemSize:"itemSize",selectAll:"selectAll",focusOnHover:"focusOnHover",filterFields:"filterFields",selectOnFocus:"selectOnFocus",autoOptionFocus:"autoOptionFocus"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onClear:"onClear",onPanelShow:"onPanelShow",onPanelHide:"onPanelHide",onLazyLoad:"onLazyLoad",onRemove:"onRemove",onSelectAllChange:"onSelectAllChange"},features:[t.\u0275\u0275ProvidersFeature([G5])],ngContentSelectors:K5,decls:16,vars:41,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["role","combobox",3,"pTooltip","tooltipPosition","positionStyle","tooltipStyleClass","focus","blur","keydown"],["focusInput",""],[1,"p-multiselect-label-container",3,"pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-multiselect-trigger"],["class","p-multiselect-trigger-icon",4,"ngIf"],[3,"visible","options","target","appendTo","autoZIndex","baseZIndex","showTransitionOptions","hideTransitionOptions","visibleChange","onAnimationStart","onHide"],["overlay",""],["pTemplate","content"],["class","p-multiselect-token",4,"ngFor","ngForOf"],[1,"p-multiselect-token"],["token",""],[1,"p-multiselect-token-label"],[3,"styleClass","click",4,"ngIf"],["class","p-multiselect-token-icon",3,"click",4,"ngIf"],[3,"styleClass","click"],[1,"p-multiselect-token-icon",3,"click"],[4,"ngTemplateOutlet"],["class","p-multiselect-clear-icon",3,"click",4,"ngIf"],[1,"p-multiselect-clear-icon",3,"click"],["class","p-multiselect-trigger-icon",3,"ngClass",4,"ngIf"],[3,"styleClass",4,"ngIf"],[1,"p-multiselect-trigger-icon",3,"ngClass"],[3,"styleClass"],[1,"p-multiselect-trigger-icon"],[3,"ngClass","ngStyle"],["role","presentation",1,"p-hidden-accessible","p-hidden-focusable",3,"focus"],["firstHiddenFocusableEl",""],["class","p-multiselect-header",4,"ngIf"],[1,"p-multiselect-items-wrapper"],[3,"items","style","itemSize","autoSize","tabindex","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],["class","p-multiselect-footer",4,"ngIf"],["lastHiddenFocusableEl",""],[1,"p-multiselect-header"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],["class","p-checkbox p-component",3,"ngClass","click","keydown",4,"ngIf"],["class","p-multiselect-filter-container",4,"ngIf"],["type","button","pRipple","",1,"p-multiselect-close","p-link","p-button-icon-only",3,"click"],["class","p-multiselect-close-icon",4,"ngIf"],[1,"p-checkbox","p-component",3,"ngClass","click","keydown"],["type","checkbox",3,"readonly","disabled","focus","blur"],["headerCheckbox",""],["role","checkbox",1,"p-checkbox-box",3,"ngClass"],["class","p-checkbox-icon",4,"ngIf"],[1,"p-checkbox-icon"],[1,"p-multiselect-filter-container"],["type","text","role","searchbox",1,"p-multiselect-filter","p-inputtext","p-component",3,"value","disabled","input","keydown","click","blur"],["filterInput",""],["class","p-multiselect-filter-icon",4,"ngIf"],[1,"p-multiselect-filter-icon"],[1,"p-multiselect-close-icon"],[3,"items","itemSize","autoSize","tabindex","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","loader"],["role","listbox","aria-multiselectable","true",1,"p-multiselect-items","p-component",3,"ngClass"],["items",""],["ngFor","",3,"ngForOf"],["class","p-multiselect-empty-message",3,"ngStyle",4,"ngIf"],["role","option",1,"p-multiselect-item-group",3,"ngStyle"],[3,"id","option","selected","label","disabled","template","checkIconTemplate","itemSize","focused","ariaPosInset","ariaSetSize","onClick","onMouseEnter"],[1,"p-multiselect-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""],[1,"p-multiselect-footer"]],template:function(n,r){1&n&&(t.\u0275\u0275projectionDef(H5),t.\u0275\u0275elementStart(0,"div",0,1),t.\u0275\u0275listener("click",function(a){return r.onContainerClick(a)}),t.\u0275\u0275elementStart(2,"div",2)(3,"input",3,4),t.\u0275\u0275listener("focus",function(a){return r.onInputFocus(a)})("blur",function(a){return r.onInputBlur(a)})("keydown",function(a){return r.onKeyDown(a)}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"div",5)(6,"div",6),t.\u0275\u0275template(7,P4,3,2,"ng-container",7),t.\u0275\u0275template(8,V4,1,0,"ng-container",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(9,W4,3,2,"ng-container",7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"div",9),t.\u0275\u0275template(11,Z4,3,2,"ng-container",7),t.\u0275\u0275template(12,J4,2,3,"span",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"p-overlay",11,12),t.\u0275\u0275listener("visibleChange",function(a){return r.overlayVisible=a})("onAnimationStart",function(a){return r.onOverlayAnimationStart(a)})("onHide",function(){return r.hide()}),t.\u0275\u0275template(15,z5,12,18,"ng-template",13),t.\u0275\u0275elementEnd()()),2&n&&(t.\u0275\u0275classMap(r.styleClass),t.\u0275\u0275property("ngClass",r.containerClass)("ngStyle",r.style),t.\u0275\u0275attribute("id",r.id),t.\u0275\u0275advance(2),t.\u0275\u0275attribute("data-p-hidden-accessible",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("pTooltip",r.tooltip)("tooltipPosition",r.tooltipPosition)("positionStyle",r.tooltipPositionStyle)("tooltipStyleClass",r.tooltipStyleClass),t.\u0275\u0275attribute("aria-disabled",r.disabled)("id",r.inputId)("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledBy)("aria-haspopup","listbox")("aria-expanded",r.overlayVisible)("aria-controls",r.id+"_list")("tabindex",r.disabled?-1:r.tabindex)("aria-activedescendant",r.focused?r.focusedOptionId:void 0),t.\u0275\u0275advance(2),t.\u0275\u0275property("pTooltip",r.tooltip)("tooltipPosition",r.tooltipPosition)("positionStyle",r.tooltipPositionStyle)("tooltipStyleClass",r.tooltipStyleClass),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",r.labelClass),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.selectedItemsTemplate),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",r.selectedItemsTemplate)("ngTemplateOutletContext",t.\u0275\u0275pureFunction2(38,W5,r.selectedOptions,r.removeOption.bind(r))),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.isVisibleClearIcon),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!r.dropdownIconTemplate),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.dropdownIconTemplate),t.\u0275\u0275advance(1),t.\u0275\u0275property("visible",r.overlayVisible)("options",r.overlayOptions)("target","@parent")("appendTo",r.appendTo)("autoZIndex",r.autoZIndex)("baseZIndex",r.baseZIndex)("showTransitionOptions",r.showTransitionOptions)("hideTransitionOptions",r.hideTransitionOptions))},dependencies:function(){return[I.NgClass,I.NgForOf,I.NgIf,I.NgTemplateOutlet,I.NgStyle,Uu,ki,N0,Il,L0,Al,Tl,B0,ms,Ol,Z5]},styles:["@layer primeng{.p-multiselect{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-multiselect-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-multiselect-label-container{overflow:hidden;flex:1 1 auto;cursor:pointer;display:flex}.p-multiselect-label{display:block;white-space:nowrap;cursor:pointer;overflow:hidden;text-overflow:ellipsis}.p-multiselect-label-empty{overflow:hidden;visibility:hidden}.p-multiselect-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-multiselect-token-icon{cursor:pointer}.p-multiselect-token-label{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:100px}.p-multiselect-items-wrapper{overflow:auto}.p-multiselect-items{margin:0;padding:0;list-style-type:none}.p-multiselect-item{cursor:pointer;display:flex;align-items:center;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-multiselect-header{display:flex;align-items:center;justify-content:space-between}.p-multiselect-filter-container{position:relative;flex:1 1 auto}.p-multiselect-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-multiselect-filter-container .p-inputtext{width:100%}.p-multiselect-close{display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden;position:relative}.p-fluid .p-multiselect{display:flex}.p-multiselect-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-multiselect-clearable{position:relative}}\n"],encapsulation:2,changeDetection:0})}return i})(),Nl=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=t.\u0275\u0275defineNgModule({type:i});static \u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,El,ji,R0,$u,Fl,Al,Tl,B0,ms,Ol,Al,El,ji,Fl]})}return i})();var sa=L(4462),Yr=L(3984);let q5=(()=>{class i{host;constructor(e){this.host=e}autofocus;focused=!1;ngAfterContentChecked(){if(!this.focused&&this.autofocus){const e=Be.getFocusableElements(this.host.nativeElement);0===e.length&&this.host.nativeElement.focus(),e.length>0&&e[0].focus(),this.focused=!0}}static \u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(t.ElementRef))};static \u0275dir=t.\u0275\u0275defineDirective({type:i,selectors:[["","pAutoFocus",""]],hostAttrs:[1,"p-element"],inputs:{autofocus:"autofocus"}})}return i})(),Q5=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=t.\u0275\u0275defineNgModule({type:i});static \u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})();function J5(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext();let n;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(null!==(n=e.label)&&void 0!==n?n:"empty")}}function Y5(i,s){1&i&&t.\u0275\u0275elementContainer(0)}const aa=function(i){return{height:i}},X5=function(i,s,e){return{"p-dropdown-item":!0,"p-highlight":i,"p-disabled":s,"p-focus":e}},Wu=function(i){return{$implicit:i}},eV=["container"],tV=["filter"],nV=["focusInput"],iV=["editableInput"],rV=["items"],oV=["scroller"],sV=["overlay"],aV=["firstHiddenFocusableEl"],lV=["lastHiddenFocusableEl"];function cV(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate("p-emptylabel"===e.label()?"\xa0":e.label())}}function uV(i,s){1&i&&t.\u0275\u0275elementContainer(0)}function dV(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate("p-emptylabel"===e.label()?"\xa0":e.placeholder)}}function pV(i,s){if(1&i&&t.\u0275\u0275template(0,dV,2,1,"span",4),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngIf",e.label()===e.placeholder||e.label()&&!e.placeholder)}}function fV(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"span",10,11),t.\u0275\u0275listener("focus",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.onInputFocus(r))})("blur",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.onInputBlur(r))})("keydown",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.onKeyDown(r))}),t.\u0275\u0275template(2,cV,2,1,"ng-container",12),t.\u0275\u0275template(3,uV,1,0,"ng-container",13),t.\u0275\u0275template(4,pV,1,1,"ng-template",null,14,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275reference(5),n=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngClass",n.inputClass)("pTooltip",n.tooltip)("tooltipPosition",n.tooltipPosition)("positionStyle",n.tooltipPositionStyle)("tooltipStyleClass",n.tooltipStyleClass)("autofocus",n.autofocus),t.\u0275\u0275attribute("aria-disabled",n.disabled)("id",n.inputId)("aria-label",n.ariaLabel||("p-emptylabel"===n.label()?void 0:n.label()))("aria-labelledby",n.ariaLabelledBy)("aria-haspopup","listbox")("aria-expanded",n.overlayVisible)("aria-controls",n.id+"_list")("tabindex",n.disabled?-1:n.tabindex)("aria-activedescendant",n.focused?n.focusedOptionId:void 0),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!n.selectedItemTemplate)("ngIfElse",e),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",n.selectedItemTemplate)("ngTemplateOutletContext",t.\u0275\u0275pureFunction1(19,Wu,n.selectedOption))}}function mV(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"input",15,16),t.\u0275\u0275listener("input",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.onEditableInput(r))})("keydown",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.onKeyDown(r))})("focus",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.onInputFocus(r))})("blur",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.onInputBlur(r))}),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngClass",e.inputClass)("disabled",e.disabled),t.\u0275\u0275attribute("maxlength",e.maxlength)("placeholder",e.placeholder)("aria-expanded",e.overlayVisible)}}function hV(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"TimesIcon",19),t.\u0275\u0275listener("click",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.clear(r))}),t.\u0275\u0275elementEnd()}2&i&&(t.\u0275\u0275property("styleClass","p-dropdown-clear-icon"),t.\u0275\u0275attribute("data-pc-section","clearicon"))}function gV(i,s){}function vV(i,s){1&i&&t.\u0275\u0275template(0,gV,0,0,"ng-template")}function _V(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"span",20),t.\u0275\u0275listener("click",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.clear(r))}),t.\u0275\u0275template(1,vV,1,0,null,21),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275attribute("data-pc-section","clearicon"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",e.clearIconTemplate)}}function yV(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,hV,1,2,"TimesIcon",17),t.\u0275\u0275template(2,_V,2,2,"span",18),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.clearIconTemplate),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.clearIconTemplate)}}function bV(i,s){if(1&i&&t.\u0275\u0275element(0,"span",24),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngClass",e.dropdownIcon)}}function CV(i,s){1&i&&t.\u0275\u0275element(0,"ChevronDownIcon",25),2&i&&t.\u0275\u0275property("styleClass","p-dropdown-trigger-icon")}function SV(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,bV,1,1,"span",22),t.\u0275\u0275template(2,CV,1,1,"ChevronDownIcon",23),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.dropdownIcon),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.dropdownIcon)}}function MV(i,s){}function wV(i,s){1&i&&t.\u0275\u0275template(0,MV,0,0,"ng-template")}function DV(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"span",26),t.\u0275\u0275template(1,wV,1,0,null,21),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",e.dropdownIconTemplate)}}function xV(i,s){1&i&&t.\u0275\u0275elementContainer(0)}function EV(i,s){1&i&&t.\u0275\u0275elementContainer(0)}const P0=function(i){return{options:i}};function IV(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,EV,1,0,"ng-container",13),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",t.\u0275\u0275pureFunction1(2,P0,e.filterOptions))}}function FV(i,s){1&i&&t.\u0275\u0275element(0,"SearchIcon",25),2&i&&t.\u0275\u0275property("styleClass","p-dropdown-filter-icon")}function AV(i,s){}function TV(i,s){1&i&&t.\u0275\u0275template(0,AV,0,0,"ng-template")}function OV(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"span",41),t.\u0275\u0275template(1,TV,1,0,null,21),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",e.filterIconTemplate)}}function LV(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",37)(1,"input",38,39),t.\u0275\u0275listener("input",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(o.onFilterInputChange(r))})("keydown",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(o.onFilterKeyDown(r))})("blur",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(o.onFilterBlur(r))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(3,FV,1,1,"SearchIcon",23),t.\u0275\u0275template(4,OV,2,1,"span",40),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("value",e._filterValue()||""),t.\u0275\u0275attribute("placeholder",e.filterPlaceholder)("aria-owns",e.id+"_list")("aria-label",e.ariaFilterLabel)("aria-activedescendant",e.focusedOptionId),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!e.filterIconTemplate),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.filterIconTemplate)}}function NV(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",35),t.\u0275\u0275listener("click",function(n){return n.stopPropagation()}),t.\u0275\u0275template(1,IV,2,4,"ng-container",12),t.\u0275\u0275template(2,LV,5,7,"ng-template",null,36,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275reference(3),n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.filterTemplate)("ngIfElse",e)}}function RV(i,s){1&i&&t.\u0275\u0275elementContainer(0)}const V0=function(i,s){return{$implicit:i,options:s}};function BV(i,s){if(1&i&&t.\u0275\u0275template(0,RV,1,0,"ng-container",13),2&i){const e=s.$implicit,n=s.options;t.\u0275\u0275nextContext(2);const r=t.\u0275\u0275reference(9);t.\u0275\u0275property("ngTemplateOutlet",r)("ngTemplateOutletContext",t.\u0275\u0275pureFunction2(2,V0,e,n))}}function kV(i,s){1&i&&t.\u0275\u0275elementContainer(0)}function jV(i,s){if(1&i&&t.\u0275\u0275template(0,kV,1,0,"ng-container",13),2&i){const e=s.options,n=t.\u0275\u0275nextContext(4);t.\u0275\u0275property("ngTemplateOutlet",n.loaderTemplate)("ngTemplateOutletContext",t.\u0275\u0275pureFunction1(2,P0,e))}}function PV(i,s){1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,jV,1,4,"ng-template",44),t.\u0275\u0275elementContainerEnd())}function VV(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"p-scroller",42,43),t.\u0275\u0275listener("onLazyLoad",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.onLazyLoad.emit(r))}),t.\u0275\u0275template(2,BV,1,5,"ng-template",9),t.\u0275\u0275template(3,PV,2,0,"ng-container",4),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275styleMap(t.\u0275\u0275pureFunction1(8,aa,e.scrollHeight)),t.\u0275\u0275property("items",e.visibleOptions())("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("lazy",e.lazy)("options",e.virtualScrollOptions),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",e.loaderTemplate)}}function UV(i,s){1&i&&t.\u0275\u0275elementContainer(0)}const $V=function(){return{}};function zV(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,UV,1,0,"ng-container",13),t.\u0275\u0275elementContainerEnd()),2&i){t.\u0275\u0275nextContext();const e=t.\u0275\u0275reference(9),n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",e)("ngTemplateOutletContext",t.\u0275\u0275pureFunction2(3,V0,n.visibleOptions(),t.\u0275\u0275pureFunction0(2,$V)))}}function HV(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2).$implicit,n=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(n.getOptionGroupLabel(e.optionGroup))}}function WV(i,s){1&i&&t.\u0275\u0275elementContainer(0)}function KV(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"li",49),t.\u0275\u0275template(2,HV,2,1,"span",4),t.\u0275\u0275template(3,WV,1,0,"ng-container",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(),n=e.index,r=e.$implicit,o=t.\u0275\u0275nextContext().options,a=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngStyle",t.\u0275\u0275pureFunction1(5,aa,o.itemSize+"px")),t.\u0275\u0275attribute("id",a.id+"_"+a.getOptionIndex(n,o)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!a.groupTemplate),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",a.groupTemplate)("ngTemplateOutletContext",t.\u0275\u0275pureFunction1(7,Wu,r.optionGroup))}}function GV(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"p-dropdownItem",50),t.\u0275\u0275listener("onClick",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext().$implicit,a=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(a.onOptionSelect(r,o))})("onMouseEnter",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext().index,a=t.\u0275\u0275nextContext().options,l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.onOptionMouseEnter(r,l.getOptionIndex(o,a)))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&i){const e=t.\u0275\u0275nextContext(),n=e.index,r=e.$implicit,o=t.\u0275\u0275nextContext().options,a=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("id",a.id+"_"+a.getOptionIndex(n,o))("option",r)("selected",a.isSelected(r))("label",a.getOptionLabel(r))("disabled",a.isOptionDisabled(r))("template",a.itemTemplate)("focused",a.focusedOptionIndex()===a.getOptionIndex(n,o))("ariaPosInset",a.getAriaPosInset(a.getOptionIndex(n,o)))("ariaSetSize",a.ariaSetSize)}}function ZV(i,s){if(1&i&&(t.\u0275\u0275template(0,KV,4,9,"ng-container",4),t.\u0275\u0275template(1,GV,2,9,"ng-container",4)),2&i){const e=s.$implicit;t.\u0275\u0275property("ngIf",e.group),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.group)}}function qV(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.emptyFilterMessageLabel," ")}}function QV(i,s){1&i&&t.\u0275\u0275elementContainer(0,null,52)}function JV(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"li",51),t.\u0275\u0275template(1,qV,2,1,"ng-container",12),t.\u0275\u0275template(2,QV,2,0,"ng-container",21),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().options,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngStyle",t.\u0275\u0275pureFunction1(4,aa,e.itemSize+"px")),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.emptyFilterTemplate&&!n.emptyTemplate)("ngIfElse",n.emptyFilter),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",n.emptyFilterTemplate||n.emptyTemplate)}}function YV(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.emptyMessageLabel," ")}}function XV(i,s){1&i&&t.\u0275\u0275elementContainer(0,null,53)}function e8(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"li",51),t.\u0275\u0275template(1,YV,2,1,"ng-container",12),t.\u0275\u0275template(2,XV,2,0,"ng-container",21),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().options,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngStyle",t.\u0275\u0275pureFunction1(4,aa,e.itemSize+"px")),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.emptyTemplate)("ngIfElse",n.empty),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",n.emptyTemplate)}}function t8(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"ul",45,46),t.\u0275\u0275template(2,ZV,2,2,"ng-template",47),t.\u0275\u0275template(3,JV,3,6,"li",48),t.\u0275\u0275template(4,e8,3,6,"li",48),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=s.options,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275styleMap(n.contentStyle),t.\u0275\u0275property("ngClass",n.contentStyleClass),t.\u0275\u0275attribute("id",r.id+"_list"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.filterValue&&r.isEmpty()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.filterValue&&r.isEmpty())}}function n8(i,s){1&i&&t.\u0275\u0275elementContainer(0)}function i8(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",27)(1,"span",28,29),t.\u0275\u0275listener("focus",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.onFirstHiddenFocus(r))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(3,xV,1,0,"ng-container",21),t.\u0275\u0275template(4,NV,4,2,"div",30),t.\u0275\u0275elementStart(5,"div",31),t.\u0275\u0275template(6,VV,4,10,"p-scroller",32),t.\u0275\u0275template(7,zV,2,6,"ng-container",4),t.\u0275\u0275template(8,t8,5,7,"ng-template",null,33,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(10,n8,1,0,"ng-container",21),t.\u0275\u0275elementStart(11,"span",28,34),t.\u0275\u0275listener("focus",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.onLastHiddenFocus(r))}),t.\u0275\u0275elementEnd()()}if(2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275classMap(e.panelStyleClass),t.\u0275\u0275property("ngClass","p-dropdown-panel p-component")("ngStyle",e.panelStyle),t.\u0275\u0275advance(1),t.\u0275\u0275attribute("aria-hidden",!0)("tabindex",0)("data-p-hidden-accessible",!0)("data-p-hidden-focusable",!0),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngTemplateOutlet",e.headerTemplate),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.filter),t.\u0275\u0275advance(1),t.\u0275\u0275styleProp("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.virtualScroll),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.virtualScroll),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngTemplateOutlet",e.footerTemplate),t.\u0275\u0275advance(1),t.\u0275\u0275attribute("aria-hidden",!0)("tabindex",0)("data-p-hidden-accessible",!0)("data-p-hidden-focusable",!0)}}const r8={provide:De.NG_VALUE_ACCESSOR,useExisting:(0,t.forwardRef)(()=>U0),multi:!0};let o8=(()=>{class i{id;option;selected;focused;label;disabled;visible;itemSize;ariaPosInset;ariaSetSize;template;onClick=new t.EventEmitter;onMouseEnter=new t.EventEmitter;ngOnInit(){}onOptionClick(e){this.onClick.emit(e)}onOptionMouseEnter(e){this.onMouseEnter.emit(e)}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["p-dropdownItem"]],hostAttrs:[1,"p-element"],inputs:{id:"id",option:"option",selected:"selected",focused:"focused",label:"label",disabled:"disabled",visible:"visible",itemSize:"itemSize",ariaPosInset:"ariaPosInset",ariaSetSize:"ariaSetSize",template:"template"},outputs:{onClick:"onClick",onMouseEnter:"onMouseEnter"},decls:3,vars:21,consts:[["role","option","pRipple","",3,"id","ngStyle","ngClass","click","mouseenter"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"li",0),t.\u0275\u0275listener("click",function(a){return r.onOptionClick(a)})("mouseenter",function(a){return r.onOptionMouseEnter(a)}),t.\u0275\u0275template(1,J5,2,1,"span",1),t.\u0275\u0275template(2,Y5,1,0,"ng-container",2),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275property("id",r.id)("ngStyle",t.\u0275\u0275pureFunction1(13,aa,r.itemSize+"px"))("ngClass",t.\u0275\u0275pureFunction3(15,X5,r.selected,r.disabled,r.focused)),t.\u0275\u0275attribute("aria-label",r.label)("aria-setsize",r.ariaSetSize)("aria-posinset",r.ariaPosInset)("aria-selected",r.selected)("data-p-focused",r.focused)("data-p-highlight",r.selected)("data-p-disabled",r.disabled),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.template),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",r.template)("ngTemplateOutletContext",t.\u0275\u0275pureFunction1(19,Wu,r.option)))},dependencies:[I.NgClass,I.NgIf,I.NgTemplateOutlet,I.NgStyle,Il],encapsulation:2})}return i})(),U0=(()=>{class i{el;renderer;cd;zone;filterService;config;id;scrollHeight="200px";filter;name;style;panelStyle;styleClass;panelStyleClass;readonly;required;editable;appendTo;tabindex=0;placeholder;filterPlaceholder;filterLocale;inputId;dataKey;filterBy;filterFields;autofocus;resetFilterOnHide=!1;dropdownIcon;optionLabel;optionValue;optionDisabled;optionGroupLabel="label";optionGroupChildren="items";autoDisplayFirst=!0;group;showClear;emptyFilterMessage="";emptyMessage="";lazy=!1;virtualScroll;virtualScrollItemSize;virtualScrollOptions;overlayOptions;ariaFilterLabel;ariaLabel;ariaLabelledBy;filterMatchMode="contains";maxlength;tooltip="";tooltipPosition="right";tooltipPositionStyle="absolute";tooltipStyleClass;focusOnHover=!1;selectOnFocus=!1;autoOptionFocus=!0;autofocusFilter=!0;get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1,this.overlayVisible&&this.hide()),this._disabled=e,this.cd.destroyed||this.cd.detectChanges()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}_itemSize;get autoZIndex(){return this._autoZIndex}set autoZIndex(e){this._autoZIndex=e,console.warn("The autoZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}_autoZIndex;get baseZIndex(){return this._baseZIndex}set baseZIndex(e){this._baseZIndex=e,console.warn("The baseZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}_baseZIndex;get showTransitionOptions(){return this._showTransitionOptions}set showTransitionOptions(e){this._showTransitionOptions=e,console.warn("The showTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}_showTransitionOptions;get hideTransitionOptions(){return this._hideTransitionOptions}set hideTransitionOptions(e){this._hideTransitionOptions=e,console.warn("The hideTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}_hideTransitionOptions;get filterValue(){return this._filterValue()}set filterValue(e){this._filterValue.set(e)}get options(){return this._options()}set options(e){this._options.set(e)}onChange=new t.EventEmitter;onFilter=new t.EventEmitter;onFocus=new t.EventEmitter;onBlur=new t.EventEmitter;onClick=new t.EventEmitter;onShow=new t.EventEmitter;onHide=new t.EventEmitter;onClear=new t.EventEmitter;onLazyLoad=new t.EventEmitter;containerViewChild;filterViewChild;focusInputViewChild;editableInputViewChild;itemsViewChild;scroller;overlayViewChild;firstHiddenFocusableElementOnOverlay;lastHiddenFocusableElementOnOverlay;templates;_disabled;itemsWrapper;itemTemplate;groupTemplate;loaderTemplate;selectedItemTemplate;headerTemplate;filterTemplate;footerTemplate;emptyFilterTemplate;emptyTemplate;dropdownIconTemplate;clearIconTemplate;filterIconTemplate;filterOptions;_options=(0,t.signal)(null);modelValue=(0,t.signal)(null);value;onModelChange=()=>{};onModelTouched=()=>{};hover;focused;overlayVisible;optionsChanged;panel;dimensionsUpdated;hoveredItem;selectedOptionUpdated;_filterValue=(0,t.signal)(null);searchValue;searchIndex;searchTimeout;previousSearchChar;currentSearchChar;preventModelTouched;focusedOptionIndex=(0,t.signal)(-1);labelId;listId;get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(xl.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(xl.EMPTY_FILTER_MESSAGE)}get filled(){return"string"==typeof this.modelValue()?!!this.modelValue():this.modelValue()||null!=this.modelValue()||null!=this.modelValue()}get isVisibleClearIcon(){return null!=this.modelValue()&&Mt.isNotEmpty(this.modelValue())&&""!==this.modelValue()&&this.showClear&&!this.disabled}get containerClass(){return{"p-dropdown p-component p-inputwrapper":!0,"p-disabled":this.disabled,"p-dropdown-clearable":this.showClear&&!this.disabled,"p-focus":this.focused,"p-inputwrapper-filled":this.modelValue(),"p-inputwrapper-focus":this.focused||this.overlayVisible}}get inputClass(){const e=this.label();return{"p-dropdown-label p-inputtext":!0,"p-placeholder":this.placeholder&&e===this.placeholder,"p-dropdown-label-empty":!(this.editable||this.selectedItemTemplate||e&&"p-emptylabel"!==e&&0!==e.length)}}get panelClass(){return{"p-dropdown-panel p-component":!0,"p-input-filled":"filled"===this.config.inputStyle,"p-ripple-disabled":!1===this.config.ripple}}visibleOptions=(0,t.computed)(()=>{const e=this.group?this.flatOptions(this.options):this.options||[];if(this._filterValue()){const n=this.filterBy||this.filterFields||this.optionValue?this.filterService.filter(e,this.searchFields(),this._filterValue(),this.filterMatchMode,this.filterLocale):this.options.filter(r=>-1!==r.toLowerCase().indexOf(this._filterValue().toLowerCase()));if(this.group){const o=[];return(this.options||[]).forEach(a=>{const c=this.getOptionGroupChildren(a).filter(u=>n.includes(u));c.length>0&&o.push({...a,["string"==typeof this.optionGroupChildren?this.optionGroupChildren:"items"]:[...c]})}),this.flatOptions(o)}return n}return e});label=(0,t.computed)(()=>{const e=this.findSelectedOptionIndex();return-1!==e?this.getOptionLabel(this.visibleOptions()[e]):this.placeholder||"p-emptylabel"});selectedOption;constructor(e,n,r,o,a,l){this.el=e,this.renderer=n,this.cd=r,this.zone=o,this.filterService=a,this.config=l,(0,t.effect)(()=>{const c=this.modelValue(),u=this.visibleOptions();c&&this.editable&&this.updateEditableLabel(),u&&Mt.isNotEmpty(u)&&(this.selectedOption=u[this.findSelectedOptionIndex()])})}ngOnInit(){this.id=this.id||ps(),this.autoUpdateModel(),this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}ngAfterViewChecked(){if(this.optionsChanged&&this.overlayVisible&&(this.optionsChanged=!1,this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.overlayViewChild&&this.overlayViewChild.alignOverlay()},1)})),this.selectedOptionUpdated&&this.itemsWrapper){let e=Be.findSingle(this.overlayViewChild?.overlayViewChild?.nativeElement,"li.p-highlight");e&&Be.scrollInView(this.itemsWrapper,e),this.selectedOptionUpdated=!1}}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"selectedItem":this.selectedItemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"dropdownicon":this.dropdownIconTemplate=e.template;break;case"clearicon":this.clearIconTemplate=e.template;break;case"filtericon":this.filterIconTemplate=e.template}})}flatOptions(e){return(e||[]).reduce((n,r,o)=>{n.push({optionGroup:r,group:!0,index:o});const a=this.getOptionGroupChildren(r);return a&&a.forEach(l=>n.push(l)),n},[])}autoUpdateModel(){if(this.selectOnFocus&&this.autoOptionFocus&&!this.hasSelectedOption()&&(this.focusedOptionIndex.set(this.findFirstFocusedOptionIndex()),this.onOptionSelect(null,this.visibleOptions()[this.focusedOptionIndex()],!1)),this.autoDisplayFirst&&!this.modelValue()){const e=this.findFirstOptionIndex();this.onOptionSelect(null,this.visibleOptions()[e],!1,!0)}}onOptionSelect(e,n,r=!0,o=!1){const a=this.getOptionValue(n);this.updateModel(a,e),this.focusedOptionIndex.set(this.findSelectedOptionIndex()),r&&this.hide(!0),!1===o&&this.onChange.emit({originalEvent:e,value:a})}onOptionMouseEnter(e,n){this.focusOnHover&&this.changeFocusedOptionIndex(e,n)}updateModel(e,n){this.value=e,this.onModelChange(e),this.modelValue.set(e),this.selectedOptionUpdated=!0}writeValue(e){this.filter&&this.resetFilter(),this.value=e,this.allowModelChange()&&this.onModelChange(e),this.modelValue.set(this.value),this.updateEditableLabel(),this.cd.markForCheck()}allowModelChange(){return this.autoDisplayFirst&&!this.placeholder&&!this.modelValue()&&!this.editable&&this.options&&this.options.length}isSelected(e){return this.isValidOption(e)&&Mt.equals(this.modelValue(),this.getOptionValue(e),this.equalityKey())}ngAfterViewInit(){this.editable&&this.updateEditableLabel()}updateEditableLabel(){this.editableInputViewChild&&(this.editableInputViewChild.nativeElement.value=void 0===this.getOptionLabel(this.modelValue())?this.editableInputViewChild.nativeElement.value:this.getOptionLabel(this.modelValue()))}getOptionIndex(e,n){return this.virtualScrollerDisabled?e:n&&n.getItemOptions(e).index}getOptionLabel(e){return this.optionLabel?Mt.resolveFieldData(e,this.optionLabel):e&&void 0!==e.label?e.label:e}getOptionValue(e){return this.optionValue?Mt.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&void 0!==e.value?e.value:e}isOptionDisabled(e){return this.optionDisabled?Mt.resolveFieldData(e,this.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled}getOptionGroupLabel(e){return this.optionGroupLabel?Mt.resolveFieldData(e,this.optionGroupLabel):e&&void 0!==e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?Mt.resolveFieldData(e,this.optionGroupChildren):e.items}getAriaPosInset(e){return(this.optionGroupLabel?e-this.visibleOptions().slice(0,e).filter(n=>this.isOptionGroup(n)).length:e)+1}get ariaSetSize(){return this.visibleOptions().filter(e=>!this.isOptionGroup(e)).length}resetFilter(){this._filterValue.set(null),this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value="")}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onContainerClick(e){this.disabled||this.readonly||(this.focusInputViewChild?.nativeElement.focus({preventScroll:!0}),"INPUT"!==e.target.tagName&&"clearicon"!==e.target.getAttribute("data-pc-section")&&!e.target.closest('[data-pc-section="clearicon"]')&&((!this.overlayViewChild||!this.overlayViewChild.el.nativeElement.contains(e.target))&&(this.overlayVisible?this.hide(!0):this.show(!0)),this.onClick.emit(e),this.cd.detectChanges()))}isEmpty(){return!this._options()||this._options()&&0===this._options().length}onEditableInput(e){const n=e.target.value;this.searchValue="",!this.searchOptions(e,n)&&this.focusedOptionIndex.set(-1),this.onModelChange(n),this.updateModel(n,e),this.onChange.emit({originalEvent:e,value:n})}show(e){this.overlayVisible=!0;const n=-1!==this.focusedOptionIndex()?this.focusedOptionIndex():this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1;this.focusedOptionIndex.set(n),e&&Be.focus(this.focusInputViewChild?.nativeElement),this.cd.markForCheck()}onOverlayAnimationStart(e){if("visible"===e.toState){if(this.itemsWrapper=Be.findSingle(this.overlayViewChild?.overlayViewChild?.nativeElement,this.virtualScroll?".p-scroller":".p-dropdown-items-wrapper"),this.virtualScroll&&this.scroller?.setContentEl(this.itemsViewChild?.nativeElement),this.options&&this.options.length)if(this.virtualScroll){const n=this.modelValue()?this.focusedOptionIndex():-1;-1!==n&&this.scroller?.scrollToIndex(n)}else{let n=Be.findSingle(this.itemsWrapper,".p-dropdown-item.p-highlight");n&&n.scrollIntoView({block:"nearest",inline:"nearest"})}this.filterViewChild&&this.filterViewChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterViewChild.nativeElement.focus()),this.onShow.emit(e)}"void"===e.toState&&(this.itemsWrapper=null,this.onModelTouched(),this.onHide.emit(e))}hide(e){this.overlayVisible=!1,this.focusedOptionIndex.set(-1),this.filter&&this.resetFilterOnHide&&this.resetFilter(),e&&Be.focus(this.focusInputViewChild?.nativeElement),this.cd.markForCheck()}onInputFocus(e){if(this.disabled)return;this.focused=!0;const n=-1!==this.focusedOptionIndex()?this.focusedOptionIndex():this.overlayVisible&&this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1;this.focusedOptionIndex.set(n),this.overlayVisible&&this.scrollInView(this.focusedOptionIndex()),this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,!1===this.overlayVisible&&this.onBlur.emit(e),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}onKeyDown(e,n){if(!this.disabled&&!this.readonly)switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e,this.editable);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,this.editable);break;case"Delete":this.onDeleteKey(e);break;case"Home":this.onHomeKey(e,this.editable);break;case"End":this.onEndKey(e,this.editable);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Space":this.onSpaceKey(e,n);break;case"Enter":case"NumpadEnter":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e);break;case"Backspace":this.onBackspaceKey(e,this.editable);break;case"ShiftLeft":case"ShiftRight":break;default:!e.metaKey&&Mt.isPrintableCharacter(e.key)&&(!this.overlayVisible&&this.show(),!this.editable&&this.searchOptions(e,e.key))}}onFilterKeyDown(e){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e,!0);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,!0);break;case"Home":this.onHomeKey(e,!0);break;case"End":this.onEndKey(e,!0);break;case"Enter":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e,!0)}}onFilterBlur(e){this.focusedOptionIndex.set(-1)}onArrowDownKey(e){const n=-1!==this.focusedOptionIndex()?this.findNextOptionIndex(this.focusedOptionIndex()):this.findFirstFocusedOptionIndex();this.changeFocusedOptionIndex(e,n),!this.overlayVisible&&this.show(),e.preventDefault()}changeFocusedOptionIndex(e,n){if(this.focusedOptionIndex()!==n&&(this.focusedOptionIndex.set(n),this.scrollInView(),this.selectOnFocus)){const r=this.visibleOptions()[n];this.onOptionSelect(e,r,!1)}}get virtualScrollerDisabled(){return!this.virtualScroll}scrollInView(e=-1){if(this.itemsViewChild&&this.itemsViewChild.nativeElement){const r=Be.findSingle(this.itemsViewChild.nativeElement,`li[id="${-1!==e?`${this.id}_${e}`:this.focusedOptionId}"]`);r?r.scrollIntoView&&r.scrollIntoView({block:"nearest",inline:"nearest"}):this.virtualScrollerDisabled||setTimeout(()=>{this.virtualScroll&&this.scroller?.scrollToIndex(-1!==e?e:this.focusedOptionIndex())},0)}}get focusedOptionId(){return-1!==this.focusedOptionIndex()?`${this.id}_${this.focusedOptionIndex()}`:null}hasSelectedOption(){return Mt.isNotEmpty(this.modelValue())}isValidSelectedOption(e){return this.isValidOption(e)&&this.isSelected(e)}equalityKey(){return this.optionValue?null:this.dataKey}findFirstFocusedOptionIndex(){const e=this.findSelectedOptionIndex();return e<0?this.findFirstOptionIndex():e}findFirstOptionIndex(){return this.visibleOptions().findIndex(e=>this.isValidOption(e))}findSelectedOptionIndex(){return this.hasSelectedOption()?this.visibleOptions().findIndex(e=>this.isValidSelectedOption(e)):-1}findNextOptionIndex(e){const n=e<this.visibleOptions().length-1?this.visibleOptions().slice(e+1).findIndex(r=>this.isValidOption(r)):-1;return n>-1?n+e+1:e}findPrevOptionIndex(e){const n=e>0?Mt.findLastIndex(this.visibleOptions().slice(0,e),r=>this.isValidOption(r)):-1;return n>-1?n:e}findLastOptionIndex(){return Mt.findLastIndex(this.visibleOptions(),e=>this.isValidOption(e))}findLastFocusedOptionIndex(){const e=this.findSelectedOptionIndex();return e<0?this.findLastOptionIndex():e}isValidOption(e){return e&&!(this.isOptionDisabled(e)||this.isOptionGroup(e))}isOptionGroup(e){return this.optionGroupLabel&&e.optionGroup&&e.group}onArrowUpKey(e,n=!1){if(e.altKey&&!n){if(-1!==this.focusedOptionIndex()){const r=this.visibleOptions()[this.focusedOptionIndex()];this.onOptionSelect(e,r)}this.overlayVisible&&this.hide(),e.preventDefault()}else{const r=-1!==this.focusedOptionIndex()?this.findPrevOptionIndex(this.focusedOptionIndex()):this.findLastFocusedOptionIndex();this.changeFocusedOptionIndex(e,r),!this.overlayVisible&&this.show(),e.preventDefault()}}onArrowLeftKey(e,n=!1){n&&this.focusedOptionIndex.set(-1)}onDeleteKey(e){this.showClear&&(this.clear(e),e.preventDefault())}onHomeKey(e,n=!1){n?(e.currentTarget.setSelectionRange(0,0),this.focusedOptionIndex.set(-1)):(this.changeFocusedOptionIndex(e,this.findFirstOptionIndex()),!this.overlayVisible&&this.show()),e.preventDefault()}onEndKey(e,n=!1){if(n){const r=e.currentTarget,o=r.value.length;r.setSelectionRange(o,o),this.focusedOptionIndex.set(-1)}else this.changeFocusedOptionIndex(e,this.findLastOptionIndex()),!this.overlayVisible&&this.show();e.preventDefault()}onPageDownKey(e){this.scrollInView(this.visibleOptions().length-1),e.preventDefault()}onPageUpKey(e){this.scrollInView(0),e.preventDefault()}onSpaceKey(e,n=!1){!n&&this.onEnterKey(e)}onEnterKey(e){if(this.overlayVisible){if(-1!==this.focusedOptionIndex()){const n=this.visibleOptions()[this.focusedOptionIndex()];this.onOptionSelect(e,n)}this.hide()}else this.onArrowDownKey(e);e.preventDefault()}onEscapeKey(e){this.overlayVisible&&this.hide(!0),e.preventDefault()}onTabKey(e,n=!1){if(!n)if(this.overlayVisible&&this.hasFocusableElements())Be.focus(e.shiftKey?this.lastHiddenFocusableElementOnOverlay.nativeElement:this.firstHiddenFocusableElementOnOverlay.nativeElement),e.preventDefault();else{if(-1!==this.focusedOptionIndex()){const r=this.visibleOptions()[this.focusedOptionIndex()];this.onOptionSelect(e,r)}this.overlayVisible&&this.hide(this.filter)}}onFirstHiddenFocus(e){const n=e.relatedTarget===this.focusInputViewChild?.nativeElement?Be.getFirstFocusableElement(this.overlayViewChild.el.nativeElement,":not(.p-hidden-focusable)"):this.focusInputViewChild.nativeElement;Be.focus(n)}onLastHiddenFocus(e){const n=e.relatedTarget===this.focusInputViewChild?.nativeElement?Be.getLastFocusableElement(this.overlayViewChild?.overlayViewChild?.nativeElement,':not([data-p-hidden-focusable="true"])'):this.focusInputViewChild?.nativeElement;Be.focus(n)}hasFocusableElements(){return Be.getFocusableElements(this.overlayViewChild.overlayViewChild.nativeElement,':not([data-p-hidden-focusable="true"])').length>0}onBackspaceKey(e,n=!1){n&&!this.overlayVisible&&this.show()}searchFields(){return this.filterFields||[this.optionLabel]}searchOptions(e,n){this.searchValue=(this.searchValue||"")+n;let r=-1,o=!1;return-1!==this.focusedOptionIndex()?(r=this.visibleOptions().slice(this.focusedOptionIndex()).findIndex(a=>this.isOptionMatched(a)),r=-1===r?this.visibleOptions().slice(0,this.focusedOptionIndex()).findIndex(a=>this.isOptionMatched(a)):r+this.focusedOptionIndex()):r=this.visibleOptions().findIndex(a=>this.isOptionMatched(a)),-1!==r&&(o=!0),-1===r&&-1===this.focusedOptionIndex()&&(r=this.findFirstFocusedOptionIndex()),-1!==r&&this.changeFocusedOptionIndex(e,r),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchValue="",this.searchTimeout=null},500),o}isOptionMatched(e){return this.isValidOption(e)&&this.getOptionLabel(e).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))}onFilterInputChange(e){let n=e.target.value?.trim();this._filterValue.set(n),this.focusedOptionIndex.set(-1),this.onFilter.emit({originalEvent:e,filter:this._filterValue()}),!this.virtualScrollerDisabled&&this.scroller.scrollToIndex(0),this.cd.markForCheck()}applyFocus(){this.editable?Be.findSingle(this.el.nativeElement,".p-dropdown-label.p-inputtext").focus():Be.findSingle(this.el.nativeElement,"input[readonly]").focus()}focus(){this.applyFocus()}clear(e){this.updateModel(null,e),this.updateEditableLabel(),this.onChange.emit({originalEvent:e,value:this.value}),this.onClear.emit(e)}static \u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(t.Renderer2),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(t.NgZone),t.\u0275\u0275directiveInject(I0),t.\u0275\u0275directiveInject(Jr))};static \u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["p-dropdown"]],contentQueries:function(n,r,o){if(1&n&&t.\u0275\u0275contentQuery(o,ki,4),2&n){let a;t.\u0275\u0275queryRefresh(a=t.\u0275\u0275loadQuery())&&(r.templates=a)}},viewQuery:function(n,r){if(1&n&&(t.\u0275\u0275viewQuery(eV,5),t.\u0275\u0275viewQuery(tV,5),t.\u0275\u0275viewQuery(nV,5),t.\u0275\u0275viewQuery(iV,5),t.\u0275\u0275viewQuery(rV,5),t.\u0275\u0275viewQuery(oV,5),t.\u0275\u0275viewQuery(sV,5),t.\u0275\u0275viewQuery(aV,5),t.\u0275\u0275viewQuery(lV,5)),2&n){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.containerViewChild=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.filterViewChild=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.focusInputViewChild=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.editableInputViewChild=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.itemsViewChild=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.scroller=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.overlayViewChild=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.firstHiddenFocusableElementOnOverlay=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.lastHiddenFocusableElementOnOverlay=o.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(n,r){2&n&&t.\u0275\u0275classProp("p-inputwrapper-filled",r.filled)("p-inputwrapper-focus",r.focused||r.overlayVisible)},inputs:{id:"id",scrollHeight:"scrollHeight",filter:"filter",name:"name",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",readonly:"readonly",required:"required",editable:"editable",appendTo:"appendTo",tabindex:"tabindex",placeholder:"placeholder",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",inputId:"inputId",dataKey:"dataKey",filterBy:"filterBy",filterFields:"filterFields",autofocus:"autofocus",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",autoDisplayFirst:"autoDisplayFirst",group:"group",showClear:"showClear",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",overlayOptions:"overlayOptions",ariaFilterLabel:"ariaFilterLabel",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",filterMatchMode:"filterMatchMode",maxlength:"maxlength",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",focusOnHover:"focusOnHover",selectOnFocus:"selectOnFocus",autoOptionFocus:"autoOptionFocus",autofocusFilter:"autofocusFilter",disabled:"disabled",itemSize:"itemSize",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",filterValue:"filterValue",options:"options"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onShow:"onShow",onHide:"onHide",onClear:"onClear",onLazyLoad:"onLazyLoad"},features:[t.\u0275\u0275ProvidersFeature([r8])],decls:11,vars:20,consts:[[3,"ngClass","ngStyle","click"],["container",""],["role","combobox","pAutoFocus","",3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass","autofocus","focus","blur","keydown",4,"ngIf"],["type","text","aria-haspopup","listbox",3,"ngClass","disabled","input","keydown","focus","blur",4,"ngIf"],[4,"ngIf"],["role","button","aria-label","dropdown trigger","aria-haspopup","listbox",1,"p-dropdown-trigger"],["class","p-dropdown-trigger-icon",4,"ngIf"],[3,"visible","options","target","appendTo","autoZIndex","baseZIndex","showTransitionOptions","hideTransitionOptions","visibleChange","onAnimationStart","onHide"],["overlay",""],["pTemplate","content"],["role","combobox","pAutoFocus","",3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass","autofocus","focus","blur","keydown"],["focusInput",""],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["defaultPlaceholder",""],["type","text","aria-haspopup","listbox",3,"ngClass","disabled","input","keydown","focus","blur"],["editableInput",""],[3,"styleClass","click",4,"ngIf"],["class","p-dropdown-clear-icon",3,"click",4,"ngIf"],[3,"styleClass","click"],[1,"p-dropdown-clear-icon",3,"click"],[4,"ngTemplateOutlet"],["class","p-dropdown-trigger-icon",3,"ngClass",4,"ngIf"],[3,"styleClass",4,"ngIf"],[1,"p-dropdown-trigger-icon",3,"ngClass"],[3,"styleClass"],[1,"p-dropdown-trigger-icon"],[3,"ngClass","ngStyle"],["role","presentation",1,"p-hidden-accessible","p-hidden-focusable",3,"focus"],["firstHiddenFocusableEl",""],["class","p-dropdown-header",3,"click",4,"ngIf"],[1,"p-dropdown-items-wrapper"],[3,"items","style","itemSize","autoSize","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],["lastHiddenFocusableEl",""],[1,"p-dropdown-header",3,"click"],["builtInFilterElement",""],[1,"p-dropdown-filter-container"],["type","text","autocomplete","off",1,"p-dropdown-filter","p-inputtext","p-component",3,"value","input","keydown","blur"],["filter",""],["class","p-dropdown-filter-icon",4,"ngIf"],[1,"p-dropdown-filter-icon"],[3,"items","itemSize","autoSize","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","loader"],["role","listbox",1,"p-dropdown-items",3,"ngClass"],["items",""],["ngFor","",3,"ngForOf"],["class","p-dropdown-empty-message",3,"ngStyle",4,"ngIf"],["role","option",1,"p-dropdown-item-group",3,"ngStyle"],[3,"id","option","selected","label","disabled","template","focused","ariaPosInset","ariaSetSize","onClick","onMouseEnter"],[1,"p-dropdown-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",0,1),t.\u0275\u0275listener("click",function(a){return r.onContainerClick(a)}),t.\u0275\u0275template(2,fV,6,21,"span",2),t.\u0275\u0275template(3,mV,2,5,"input",3),t.\u0275\u0275template(4,yV,3,2,"ng-container",4),t.\u0275\u0275elementStart(5,"div",5),t.\u0275\u0275template(6,SV,3,2,"ng-container",4),t.\u0275\u0275template(7,DV,2,1,"span",6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"p-overlay",7,8),t.\u0275\u0275listener("visibleChange",function(a){return r.overlayVisible=a})("onAnimationStart",function(a){return r.onOverlayAnimationStart(a)})("onHide",function(){return r.hide()}),t.\u0275\u0275template(10,i8,13,19,"ng-template",9),t.\u0275\u0275elementEnd()()),2&n&&(t.\u0275\u0275classMap(r.styleClass),t.\u0275\u0275property("ngClass",r.containerClass)("ngStyle",r.style),t.\u0275\u0275attribute("id",r.id),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!r.editable),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.editable),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.isVisibleClearIcon),t.\u0275\u0275advance(1),t.\u0275\u0275attribute("aria-expanded",r.overlayVisible)("data-pc-section","trigger"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.dropdownIconTemplate),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.dropdownIconTemplate),t.\u0275\u0275advance(1),t.\u0275\u0275property("visible",r.overlayVisible)("options",r.overlayOptions)("target","@parent")("appendTo",r.appendTo)("autoZIndex",r.autoZIndex)("baseZIndex",r.baseZIndex)("showTransitionOptions",r.showTransitionOptions)("hideTransitionOptions",r.hideTransitionOptions))},dependencies:function(){return[I.NgClass,I.NgForOf,I.NgIf,I.NgTemplateOutlet,I.NgStyle,Uu,ki,N0,L0,q5,ms,Ol,Tl,o8]},styles:["@layer primeng{.p-dropdown{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-dropdown-clear-icon{position:absolute;top:50%;margin-top:-.5rem}.p-dropdown-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-dropdown-label{display:block;white-space:nowrap;overflow:hidden;flex:1 1 auto;width:1%;text-overflow:ellipsis;cursor:pointer}.p-dropdown-label-empty{overflow:hidden;opacity:0}input.p-dropdown-label{cursor:default}.p-dropdown .p-dropdown-panel{min-width:100%}.p-dropdown-items-wrapper{overflow:auto}.p-dropdown-item{cursor:pointer;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-dropdown-item-group{cursor:auto}.p-dropdown-items{margin:0;padding:0;list-style-type:none}.p-dropdown-filter{width:100%}.p-dropdown-filter-container{position:relative}.p-dropdown-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-fluid .p-dropdown{display:flex}.p-fluid .p-dropdown .p-dropdown-label{width:1%}}\n"],encapsulation:2,changeDetection:0})}return i})(),Ku=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=t.\u0275\u0275defineNgModule({type:i});static \u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,El,ji,R0,$u,Fl,Q5,ms,Ol,Tl,El,ji,Fl]})}return i})(),$0=(()=>{class i{el;ngModel;cd;filled;constructor(e,n,r){this.el=e,this.ngModel=n,this.cd=r}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}static \u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(De.NgModel,8),t.\u0275\u0275directiveInject(t.ChangeDetectorRef))};static \u0275dir=t.\u0275\u0275defineDirective({type:i,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(n,r){1&n&&t.\u0275\u0275listener("input",function(a){return r.onInput(a)}),2&n&&t.\u0275\u0275classProp("p-filled",r.filled)}})}return i})(),Rl=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=t.\u0275\u0275defineNgModule({type:i});static \u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})();function s8(i,s){}const Bl=()=>{const i=typeof window<"u"?window:void 0;return i&&i.tinymce?i.tinymce:null};let a8=(()=>{class i{constructor(){this.onBeforePaste=new t.EventEmitter,this.onBlur=new t.EventEmitter,this.onClick=new t.EventEmitter,this.onContextMenu=new t.EventEmitter,this.onCopy=new t.EventEmitter,this.onCut=new t.EventEmitter,this.onDblclick=new t.EventEmitter,this.onDrag=new t.EventEmitter,this.onDragDrop=new t.EventEmitter,this.onDragEnd=new t.EventEmitter,this.onDragGesture=new t.EventEmitter,this.onDragOver=new t.EventEmitter,this.onDrop=new t.EventEmitter,this.onFocus=new t.EventEmitter,this.onFocusIn=new t.EventEmitter,this.onFocusOut=new t.EventEmitter,this.onKeyDown=new t.EventEmitter,this.onKeyPress=new t.EventEmitter,this.onKeyUp=new t.EventEmitter,this.onMouseDown=new t.EventEmitter,this.onMouseEnter=new t.EventEmitter,this.onMouseLeave=new t.EventEmitter,this.onMouseMove=new t.EventEmitter,this.onMouseOut=new t.EventEmitter,this.onMouseOver=new t.EventEmitter,this.onMouseUp=new t.EventEmitter,this.onPaste=new t.EventEmitter,this.onSelectionChange=new t.EventEmitter,this.onActivate=new t.EventEmitter,this.onAddUndo=new t.EventEmitter,this.onBeforeAddUndo=new t.EventEmitter,this.onBeforeExecCommand=new t.EventEmitter,this.onBeforeGetContent=new t.EventEmitter,this.onBeforeRenderUI=new t.EventEmitter,this.onBeforeSetContent=new t.EventEmitter,this.onChange=new t.EventEmitter,this.onClearUndos=new t.EventEmitter,this.onDeactivate=new t.EventEmitter,this.onDirty=new t.EventEmitter,this.onExecCommand=new t.EventEmitter,this.onGetContent=new t.EventEmitter,this.onHide=new t.EventEmitter,this.onInit=new t.EventEmitter,this.onInitNgModel=new t.EventEmitter,this.onLoadContent=new t.EventEmitter,this.onNodeChange=new t.EventEmitter,this.onPostProcess=new t.EventEmitter,this.onPostRender=new t.EventEmitter,this.onPreInit=new t.EventEmitter,this.onPreProcess=new t.EventEmitter,this.onProgressState=new t.EventEmitter,this.onRedo=new t.EventEmitter,this.onRemove=new t.EventEmitter,this.onReset=new t.EventEmitter,this.onResizeEditor=new t.EventEmitter,this.onSaveContent=new t.EventEmitter,this.onSetAttrib=new t.EventEmitter,this.onObjectResizeStart=new t.EventEmitter,this.onObjectResized=new t.EventEmitter,this.onObjectSelected=new t.EventEmitter,this.onSetContent=new t.EventEmitter,this.onShow=new t.EventEmitter,this.onSubmit=new t.EventEmitter,this.onUndo=new t.EventEmitter,this.onVisualAid=new t.EventEmitter}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=t.\u0275\u0275defineDirective({type:i,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onResizeEditor:"onResizeEditor",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"}}),i})();const z0=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onResizeEditor","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],kl=(i,s,e)=>(0,D.fromEvent)(i,s).pipe((0,v.takeUntil)(e)),H0=(i,s)=>"string"==typeof i?i.split(",").map(e=>e.trim()):Array.isArray(i)?i:s;let W0=0;const K0=i=>typeof i<"u"&&"textarea"===i.tagName.toLowerCase(),G0=i=>typeof i>"u"||""===i?[]:Array.isArray(i)?i:i.split(" "),d8=(i,s)=>G0(i).concat(G0(s)),p8=()=>{},Z0=i=>null==i,f8=(()=>{let i={script$:null};return{load:(n,r)=>i.script$||(i.script$=(0,D.defer)(()=>{const o=n.createElement("script");return o.referrerPolicy="origin",o.type="application/javascript",o.src=r,n.head.appendChild(o),(0,D.fromEvent)(o,"load").pipe((0,v.take)(1),(0,v.mapTo)(void 0))}).pipe((0,v.shareReplay)({bufferSize:1,refCount:!0}))),reinitialize:()=>{i={script$:null}}}})(),Gu=new t.InjectionToken("TINYMCE_SCRIPT_SRC"),m8={provide:De.NG_VALUE_ACCESSOR,useExisting:(0,t.forwardRef)(()=>jl),multi:!0};let jl=(()=>{class i extends a8{constructor(e,n,r,o){super(),this.platformId=r,this.tinymceScriptSrc=o,this.cloudChannel="6",this.apiKey="no-api-key",this.id="",this.modelEvents="change input undo redo",this.onTouchedCallback=p8,this.destroy$=new D.Subject,this.initialise=()=>{const a={...this.init,selector:void 0,target:this._element,inline:this.inline,readonly:this.disabled,plugins:d8(this.init&&this.init.plugins,this.plugins),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:l=>{this._editor=l,kl(l,"init",this.destroy$).subscribe(()=>{this.initEditor(l)}),((i,s,e)=>{(i=>{const s=H0(i.ignoreEvents,[]);return H0(i.allowedEvents,z0).filter(n=>z0.includes(n)&&!s.includes(n))})(i).forEach(r=>{const o=i[r];kl(s,r.substring(2),e).subscribe(a=>{o.observers.length>0&&i.ngZone.run(()=>o.emit({event:a,editor:s}))})})})(this,l,this.destroy$),this.init&&"function"==typeof this.init.setup&&this.init.setup(l)}};K0(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular(()=>{Bl().init(a)})},this._elementRef=e,this.ngZone=n}set disabled(e){this._disabled=e,this._editor&&this._editor.initialized&&("function"==typeof this._editor.mode?.set?this._editor.mode.set(e?"readonly":"design"):this._editor.setMode(e?"readonly":"design"))}get disabled(){return this._disabled}get editor(){return this._editor}writeValue(e){this._editor&&this._editor.initialized?this._editor.setContent(Z0(e)?"":e):this.initialValue=null===e?void 0:e}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.disabled=e}ngAfterViewInit(){(0,I.isPlatformBrowser)(this.platformId)&&(this.id=this.id||(i=>{const e=(new Date).getTime(),n=Math.floor(1e9*Math.random());return W0++,"tiny-angular_"+n+W0+String(e)})(),this.inline=void 0!==this.inline?!1!==this.inline:!!this.init?.inline,this.createElement(),null!==Bl()?this.initialise():this._element&&this._element.ownerDocument&&f8.load(this._element.ownerDocument,this.getScriptSrc()).pipe((0,v.takeUntil)(this.destroy$)).subscribe(this.initialise))}ngOnDestroy(){this.destroy$.next(),null!==Bl()&&Bl().remove(this._editor)}createElement(){this._element=document.createElement(this.inline?"string"==typeof this.tagName?this.tagName:"div":"textarea"),this._element&&(document.getElementById(this.id)&&console.warn(`TinyMCE-Angular: an element with id [${this.id}] already exists. Editors with duplicate Id will not be able to mount`),this._element.id=this.id,K0(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element))}getScriptSrc(){return Z0(this.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${this.apiKey}/tinymce/${this.cloudChannel}/tinymce.min.js`:this.tinymceScriptSrc}initEditor(e){kl(e,"blur",this.destroy$).subscribe(()=>{this.ngZone.run(()=>this.onTouchedCallback())}),kl(e,this.modelEvents,this.destroy$).subscribe(()=>{this.ngZone.run(()=>this.emitOnChange(e))}),"string"==typeof this.initialValue&&this.ngZone.run(()=>{e.setContent(this.initialValue),e.getContent()!==this.initialValue&&this.emitOnChange(e),void 0!==this.onInitNgModel&&this.onInitNgModel.emit(e)})}emitOnChange(e){this.onChangeCallback&&this.onChangeCallback(e.getContent({format:this.outputFormat}))}}return i.\u0275fac=function(e){return new(e||i)(t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(t.NgZone),t.\u0275\u0275directiveInject(t.PLATFORM_ID),t.\u0275\u0275directiveInject(Gu,8))},i.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",init:"init",id:"id",initialValue:"initialValue",outputFormat:"outputFormat",inline:"inline",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",modelEvents:"modelEvents",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents",disabled:"disabled"},standalone:!0,features:[t.\u0275\u0275ProvidersFeature([m8]),t.\u0275\u0275InheritDefinitionFeature,t.\u0275\u0275StandaloneFeature],decls:1,vars:0,template:function(e,n){1&e&&t.\u0275\u0275template(0,s8,0,0,"ng-template")},dependencies:[I.CommonModule,De.FormsModule],styles:["[_nghost-%COMP%]{display:block}"]}),i})(),Q0=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=t.\u0275\u0275defineInjector({imports:[jl]}),i})();var J0=L(1196),la=L(8176),Pl=L(3080),h8=L(8123);function g8(i,s){1&i&&t.\u0275\u0275elementContainer(0)}function v8(i,s){1&i&&t.\u0275\u0275element(0,"TimesIcon",11),2&i&&(t.\u0275\u0275property("styleClass","p-sidebar-close-icon"),t.\u0275\u0275attribute("data-pc-section","closeicon"))}function _8(i,s){}function y8(i,s){1&i&&t.\u0275\u0275template(0,_8,0,0,"ng-template")}function b8(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"span",12),t.\u0275\u0275template(1,y8,1,0,null,4),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275attribute("data-pc-section","closeicon"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",e.closeIconTemplate)}}function C8(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",8),t.\u0275\u0275listener("click",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.close(r))})("keydown.enter",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.close(r))}),t.\u0275\u0275template(1,v8,1,2,"TimesIcon",9),t.\u0275\u0275template(2,b8,2,2,"span",10),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275attribute("aria-label",e.ariaCloseLabel)("data-pc-section","closebutton")("data-pc-group-section","iconcontainer"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.closeIconTemplate),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.closeIconTemplate)}}function S8(i,s){1&i&&t.\u0275\u0275elementContainer(0)}function M8(i,s){1&i&&t.\u0275\u0275elementContainer(0)}const w8=function(i,s,e,n,r,o){return{"p-sidebar":!0,"p-sidebar-active":i,"p-sidebar-left":s,"p-sidebar-right":e,"p-sidebar-top":n,"p-sidebar-bottom":r,"p-sidebar-full":o}},D8=function(i,s){return{transform:i,transition:s}},x8=function(i){return{value:"visible",params:i}};function E8(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",1,2),t.\u0275\u0275listener("@panelState.start",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.onAnimationStart(r))})("@panelState.done",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.onAnimationEnd(r))})("keydown",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.onKeyDown(r))}),t.\u0275\u0275elementStart(2,"div",3),t.\u0275\u0275template(3,g8,1,0,"ng-container",4),t.\u0275\u0275template(4,C8,3,5,"button",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"div",6),t.\u0275\u0275projection(6),t.\u0275\u0275template(7,S8,1,0,"ng-container",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"div",7),t.\u0275\u0275template(9,M8,1,0,"ng-container",4),t.\u0275\u0275elementEnd()()}if(2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275classMap(e.styleClass),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction6(15,w8,e.visible,"left"===e.position&&!e.fullScreen,"right"===e.position&&!e.fullScreen,"top"===e.position&&!e.fullScreen,"bottom"===e.position&&!e.fullScreen,e.fullScreen))("@panelState",t.\u0275\u0275pureFunction1(25,x8,t.\u0275\u0275pureFunction2(22,D8,e.transformOptions,e.transitionOptions)))("ngStyle",e.style),t.\u0275\u0275attribute("data-pc-name","sidebar")("data-pc-section","root")("aria-modal",e.modal),t.\u0275\u0275advance(2),t.\u0275\u0275attribute("data-pc-section","header"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",e.headerTemplate),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.showCloseIcon),t.\u0275\u0275advance(1),t.\u0275\u0275attribute("data-pc-section","content"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngTemplateOutlet",e.contentTemplate),t.\u0275\u0275advance(1),t.\u0275\u0275attribute("data-pc-section","footer"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",e.footerTemplate)}}const I8=["*"],F8=(0,yt.animation)([(0,yt.style)({transform:"{{transform}}",opacity:0}),(0,yt.animate)("{{transition}}")]),A8=(0,yt.animation)([(0,yt.animate)("{{transition}}",(0,yt.style)({transform:"{{transform}}",opacity:0}))]);let T8=(()=>{class i{document;el;renderer;cd;config;appendTo;blockScroll=!1;style;styleClass;ariaCloseLabel;autoZIndex=!0;baseZIndex=0;modal=!0;dismissible=!0;showCloseIcon=!0;closeOnEscape=!0;transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)";get visible(){return this._visible}set visible(e){this._visible=e}get position(){return this._position}set position(e){switch(this._position=e,e){case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)"}}get fullScreen(){return this._fullScreen}set fullScreen(e){this._fullScreen=e,e&&(this.transformOptions="none")}templates;onShow=new t.EventEmitter;onHide=new t.EventEmitter;visibleChange=new t.EventEmitter;initialized;_visible;_position="left";_fullScreen=!1;container;transformOptions="translate3d(-100%, 0px, 0px)";mask;maskClickListener;documentEscapeListener;animationEndListener;contentTemplate;headerTemplate;footerTemplate;closeIconTemplate;constructor(e,n,r,o,a){this.document=e,this.el=n,this.renderer=r,this.cd=o,this.config=a}ngAfterViewInit(){this.initialized=!0}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"content":default:this.contentTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"closeicon":this.closeIconTemplate=e.template}})}onKeyDown(e){"Escape"===e.code&&this.hide(!1)}show(){this.autoZIndex&&cr.set("modal",this.container,this.baseZIndex||this.config.zIndex.modal),this.modal&&this.enableModality(),this.onShow.emit({}),this.visibleChange.emit(!0)}hide(e=!0){e&&this.onHide.emit({}),this.modal&&this.disableModality()}close(e){this.hide(!1),this.visibleChange.emit(!1),e.preventDefault()}enableModality(){this.mask||(this.mask=this.renderer.createElement("div"),this.renderer.setStyle(this.mask,"zIndex",String(parseInt(this.container.style.zIndex)-1)),Be.addMultipleClasses(this.mask,"p-component-overlay p-sidebar-mask p-component-overlay p-component-overlay-enter"),this.dismissible&&(this.maskClickListener=this.renderer.listen(this.mask,"click",e=>{this.dismissible&&this.close(e)})),this.renderer.appendChild(this.document.body,this.mask),this.blockScroll&&Be.blockBodyScroll())}disableModality(){this.mask&&(Be.addClass(this.mask,"p-component-overlay-leave"),this.animationEndListener=this.renderer.listen(this.mask,"animationend",this.destroyModal.bind(this)))}destroyModal(){this.unbindMaskClickListener(),this.mask&&this.renderer.removeChild(this.document.body,this.mask),this.blockScroll&&Be.unblockBodyScroll(),this.unbindAnimationEndListener(),this.mask=null}onAnimationStart(e){"visible"===e.toState&&(this.container=e.element,this.appendContainer(),this.show(),this.closeOnEscape&&this.bindDocumentEscapeListener())}onAnimationEnd(e){"void"===e.toState&&(this.hide(),cr.clear(this.container),this.unbindGlobalListeners())}appendContainer(){this.appendTo&&("body"===this.appendTo?this.renderer.appendChild(this.document.body,this.container):Be.appendChild(this.container,this.appendTo))}bindDocumentEscapeListener(){this.documentEscapeListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:this.document,"keydown",n=>{27==n.which&&parseInt(this.container.style.zIndex)===cr.get(this.container)&&this.close(n)})}unbindDocumentEscapeListener(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}unbindGlobalListeners(){this.unbindMaskClickListener(),this.unbindDocumentEscapeListener()}unbindAnimationEndListener(){this.animationEndListener&&this.mask&&(this.animationEndListener(),this.animationEndListener=null)}ngOnDestroy(){this.initialized=!1,this.visible&&this.modal&&this.destroyModal(),this.appendTo&&this.container&&this.renderer.appendChild(this.el.nativeElement,this.container),this.container&&this.autoZIndex&&cr.clear(this.container),this.container=null,this.unbindGlobalListeners(),this.unbindAnimationEndListener()}static \u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(I.DOCUMENT),t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(t.Renderer2),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(Jr))};static \u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["p-sidebar"]],contentQueries:function(n,r,o){if(1&n&&t.\u0275\u0275contentQuery(o,ki,4),2&n){let a;t.\u0275\u0275queryRefresh(a=t.\u0275\u0275loadQuery())&&(r.templates=a)}},hostAttrs:[1,"p-element"],inputs:{appendTo:"appendTo",blockScroll:"blockScroll",style:"style",styleClass:"styleClass",ariaCloseLabel:"ariaCloseLabel",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",modal:"modal",dismissible:"dismissible",showCloseIcon:"showCloseIcon",closeOnEscape:"closeOnEscape",transitionOptions:"transitionOptions",visible:"visible",position:"position",fullScreen:"fullScreen"},outputs:{onShow:"onShow",onHide:"onHide",visibleChange:"visibleChange"},ngContentSelectors:I8,decls:1,vars:1,consts:[["role","complementary",3,"ngClass","ngStyle","class","keydown",4,"ngIf"],["role","complementary",3,"ngClass","ngStyle","keydown"],["container",""],[1,"p-sidebar-header"],[4,"ngTemplateOutlet"],["type","button","class","p-sidebar-close p-sidebar-icon p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],[1,"p-sidebar-content"],[1,"p-sidebar-footer"],["type","button","pRipple","",1,"p-sidebar-close","p-sidebar-icon","p-link",3,"click","keydown.enter"],[3,"styleClass",4,"ngIf"],["class","p-sidebar-close-icon",4,"ngIf"],[3,"styleClass"],[1,"p-sidebar-close-icon"]],template:function(n,r){1&n&&(t.\u0275\u0275projectionDef(),t.\u0275\u0275template(0,E8,10,27,"div",0)),2&n&&t.\u0275\u0275property("ngIf",r.visible)},dependencies:function(){return[I.NgClass,I.NgIf,I.NgTemplateOutlet,I.NgStyle,Il,ms]},styles:["@layer primeng{.p-sidebar{position:fixed;transition:transform .3s;display:flex;flex-direction:column}.p-sidebar-content{position:relative;overflow-y:auto;flex-grow:1}.p-sidebar-header{display:flex;align-items:center}.p-sidebar-footer{margin-top:auto}.p-sidebar-icon{display:flex;align-items:center;justify-content:center;margin-left:auto}.p-sidebar-left{top:0;left:0;width:20rem;height:100%}.p-sidebar-right{top:0;right:0;width:20rem;height:100%}.p-sidebar-top{top:0;left:0;width:100%;height:10rem}.p-sidebar-bottom{bottom:0;left:0;width:100%;height:10rem}.p-sidebar-full{width:100%;height:100%;top:0;left:0;transition:none}.p-sidebar-left.p-sidebar-sm,.p-sidebar-right.p-sidebar-sm{width:20rem}.p-sidebar-left.p-sidebar-md,.p-sidebar-right.p-sidebar-md{width:40rem}.p-sidebar-left.p-sidebar-lg,.p-sidebar-right.p-sidebar-lg{width:60rem}.p-sidebar-top.p-sidebar-sm,.p-sidebar-bottom.p-sidebar-sm{height:10rem}.p-sidebar-top.p-sidebar-md,.p-sidebar-bottom.p-sidebar-md{height:20rem}.p-sidebar-top.p-sidebar-lg,.p-sidebar-bottom.p-sidebar-lg{height:30rem}@media screen and (max-width: 64em){.p-sidebar-left.p-sidebar-lg,.p-sidebar-left.p-sidebar-md,.p-sidebar-right.p-sidebar-lg,.p-sidebar-right.p-sidebar-md{width:20rem}}}\n"],encapsulation:2,data:{animation:[(0,yt.trigger)("panelState",[(0,yt.transition)("void => visible",[(0,yt.useAnimation)(F8)]),(0,yt.transition)("visible => void",[(0,yt.useAnimation)(A8)])])]},changeDetection:0})}return i})(),O8=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=t.\u0275\u0275defineNgModule({type:i});static \u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,$u,ji,ms,ji]})}return i})();var Zi=L(4463),Y0=L(6593),hs=L(5861);let _o={};const ca={},X0={};let eb=!1;function Zu(){return(Zu=(0,hs.Z)(function*(i,s){return(yield ca[i].get(s))()})).apply(this,arguments)}function tb(i,s){return qu.apply(this,arguments)}function qu(){return(qu=(0,hs.Z)(function*(i,s){return X0[s]||(eb||(yield L.I("default"),eb=!0),yield i.init(L.S.default),X0[s]=!0),i})).apply(this,arguments)}function Ju(){return Ju=(0,hs.Z)(function*(i,s){if("string"==typeof i)return yield nb(i,s);if("script"===i.type){const e=i;return yield nb(e.remoteEntry,e.remoteName)}"module"===i.type&&(yield function N8(i){return Yu.apply(this,arguments)}(i.remoteEntry))}),Ju.apply(this,arguments)}function Yu(){return(Yu=(0,hs.Z)(function*(i){return ca[i]?Promise.resolve():yield import(i).then(s=>{tb(s,i),ca[i]=s})})).apply(this,arguments)}function nb(i,s){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,hs.Z)(function*(i,s){return new Promise((e,n)=>{if(ca[s])return void e();const r=document.createElement("script");r.src=i,r.onerror=n,r.onload=()=>{const o=window[s];tb(o,s),ca[s]=o,e()},document.body.appendChild(r)})})).apply(this,arguments)}function ed(){return ed=(0,hs.Z)(function*(i,s){let e,n,r,o;if(o="string"==typeof i?{type:"manifest",remoteName:i,exposedModule:s}:i,!o.type){const a=Object.keys(_o).length>0;o.type=a?"manifest":"script"}if("manifest"===o.type){const a=_o[o.remoteName];if(!a)throw new Error("Manifest does not contain "+o.remoteName);o={type:a.type,exposedModule:o.exposedModule,remoteEntry:a.remoteEntry,remoteName:"script"===a.type?o.remoteName:void 0},r=a.remoteEntry}else r=o.remoteEntry;return"script"===o.type?(e={type:"script",remoteEntry:o.remoteEntry,remoteName:o.remoteName},n=o.remoteName):"module"===o.type&&(e={type:"module",remoteEntry:o.remoteEntry},n=o.remoteEntry),r&&(yield function Qu(i,s){return Ju.apply(this,arguments)}(e)),yield function L8(i,s){return Zu.apply(this,arguments)}(n,o.exposedModule)}),ed.apply(this,arguments)}let od=(()=>{class i{constructor(e){this.apollo=e}fetchAll(e,n){const o={query:W.gql`
                query ${e}{
                    ${e} {
                        edges {
                            node {
                                ${n.fields.join("\n")}
                            }
                        }
                    }
                }
            `};return this.apollo.query(o)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(W.Apollo))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const ob={configs:{},loading:!1};let ur=(0,S.deepClone)(ob),gs=null,ht=(()=>{class i{constructor(e){this.collectionGQL=e,this.store=new D.BehaviorSubject(ur),this.state$=this.store.asObservable(),this.resourceName="systemConfigs",this.fieldsMetadata={fields:["id","_id","value","items"]},this.configs$=this.state$.pipe((0,v.map)(n=>n.configs),(0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(n=>n.loading))}getConfigValue(e){return ur.configs&&ur.configs[e]?null!==ur.configs[e].value?ur.configs[e].value:ur.configs[e].items:null}getUi(e){return(this.getConfigValue("ui")??{})[e]??null}getHomePage(){let e="home";const n=this.getConfigValue("default_module");return n&&(e=n),e}clear(){gs=null,this.updateState((0,S.deepClone)(ob))}clearAuthBased(){this.clear()}load(){return this.updateState({...ur,loading:!0}),this.getSystemConfigs().pipe((0,v.tap)(e=>{this.updateState({...ur,configs:e,loading:!1})}))}isCached(){return null!==gs}set(e){gs=(0,D.of)(e).pipe((0,v.shareReplay)(1)),this.updateState({...ur,configs:e,loading:!1})}updateState(e){this.store.next(ur=e)}getSystemConfigs(){return null==gs&&(gs=this.fetch().pipe((0,v.shareReplay)(1))),gs}fetch(){return this.collectionGQL.fetchAll(this.resourceName,this.fieldsMetadata).pipe((0,v.map)(({data:e})=>{const n={};return e.systemConfigs&&e.systemConfigs.edges&&e.systemConfigs.edges.forEach(r=>{n[r.node._id]=r.node}),n}))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(od))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var ii=function(i){return i.XSmall="XSmall",i.Small="Small",i.Medium="Medium",i.Large="Large",i.XLarge="XLarge",i}(ii||{});let li=(()=>{class i{constructor(e){this.breakpointObserver=e,this.screenSize=new D.BehaviorSubject(ii.Medium),this.screenSize$=this.screenSize.asObservable(),this.initScreenSizeObservable()}initScreenSizeObservable(){(0,D.merge)(this.breakpointObserver.observe(["(max-width: 599.98px)"]).pipe((0,v.map)(e=>{if(e.matches)return ii.XSmall})),this.breakpointObserver.observe(["(min-width: 600px) and (max-width: 959.98px)"]).pipe((0,v.map)(e=>{if(e.matches)return ii.Small})),this.breakpointObserver.observe(["(min-width: 960px) and (max-width: 1279.98px)"]).pipe((0,v.map)(e=>{if(e.matches)return ii.Medium})),this.breakpointObserver.observe(["(min-width: 1280px) and (max-width: 1919.98px)"]).pipe((0,v.map)(e=>{if(e.matches)return ii.Large})),this.breakpointObserver.observe(["(min-width: 1920px)"]).pipe((0,v.map)(e=>{if(e.matches)return ii.XLarge}))).subscribe(e=>{e&&this.screenSize.next(e)})}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(z))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),vs=(()=>{class i{constructor(e){this.apollo=e}fetch(e,n,r){const a={query:W.gql`
              query ${e}($id: ID!) {
                ${e}(id: $id) {
                  ${r.fields.join("\n")}
                }
              }
            `,variables:{id:n}};return this.apollo.query(a)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(W.Apollo))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),bi=(()=>{class i{constructor(){this.storageKey="scrm-session-storage",this.stickyStorageKey="scrm-sticky-session-storage"}clear(){this.getLocalStorage().removeItem(this.storageKey);const e=this.getLocalStorage().getItem(this.stickyStorageKey);e&&this.getLocalStorage().setItem(this.storageKey,e)}set(e,n,r=!1){this.store(this.storageKey,e,n),r&&this.store(this.stickyStorageKey,e,n)}store(e,n,r){const o=this.getLocalStorage().getItem(e);let a={};o&&(a=JSON.parse(o)),a[n]=r,this.getLocalStorage().setItem(e,JSON.stringify(a))}get(e){const n=this.getLocalStorage().getItem(this.storageKey);let r={};return n&&(r=JSON.parse(n)),r[e]}getLocalStorage(){return localStorage}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),sb=(()=>{class i{constructor(e){this.apollo=e}create(e,n,r,o){const l={mutation:W.gql`
                mutation create${n}($input: create${n}Input!) {
                  create${n}(input: $input) {
                    ${e} {
                      ${o.fields.join("\n")}
                    }
                    clientMutationId
                  }
                }
            `,variables:{input:r}};return this.apollo.mutate(l)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(W.Apollo))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const j8={id:null,_id:null,status:null,async:null,type:null,options:null,messages:[]};let qi=(()=>{class i{constructor(e){this.recordMutationGQL=e,this.graphqlName="process",this.coreName="Process",this.createFieldsMetadata={fields:["_id","status","async","type","messages","data"]}}submit(e,n){return this.create(e,n)}create(e,n){return this.recordMutationGQL.create(this.graphqlName,this.coreName,{type:e,options:n},this.createFieldsMetadata).pipe((0,v.map)(({data:o})=>{const a={...j8};return o.createProcess&&o.createProcess.process?o.createProcess.process:a}))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(sb))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const ab={appStrings:{},appListStrings:{},modStrings:{},languageKey:"en_us",loaded:{},hasChanged:!1};let Pn=(0,S.deepClone)(ab);const lb={appStrings:{},appListStrings:{},modStrings:{}};let dr={},pr=(0,S.deepClone)(lb),Ue=(()=>{class i{constructor(e,n,r,o){this.recordGQL=e,this.localStorage=n,this.processService=r,this.configs=o,this.store=new D.BehaviorSubject(Pn),this.state$=this.store.asObservable(),this.config={appStrings:{fetch:"fetchAppStrings",resourceName:"appStrings",metadata:{fields:["id","_id","items"]}},appListStrings:{fetch:"fetchAppListStrings",resourceName:"appListStrings",metadata:{fields:["id","_id","items"]}},modStrings:{fetch:"fetchModStrings",resourceName:"modStrings",metadata:{fields:["id","_id","items"]}}},this.appStrings$=this.state$.pipe((0,v.map)(a=>a.appStrings),(0,v.distinctUntilChanged)()),this.appListStrings$=this.state$.pipe((0,v.map)(a=>a.appListStrings),(0,v.distinctUntilChanged)()),this.modStrings$=this.state$.pipe((0,v.map)(a=>a.modStrings),(0,v.distinctUntilChanged)()),this.languageKey$=this.state$.pipe((0,v.map)(a=>a.languageKey),(0,v.distinctUntilChanged)()),this.vm$=this.appStrings$.pipe((0,D.combineLatestWith)(this.appListStrings$,this.modStrings$,this.languageKey$),(0,v.map)(([a,l,c,u])=>({appStrings:a,appListStrings:l,modStrings:c,languageKey:u})))}clear(){dr={},pr=(0,S.deepClone)(lb),this.updateState((0,S.deepClone)(ab))}clearAuthBased(){["modStrings","appListStrings"].forEach(n=>{dr&&dr[n]&&delete dr[n]}),pr.modStrings={},pr.appListStrings={}}changeLanguage(e,n=!1){const r=[];return Object.keys(dr).forEach(o=>dr[o]&&r.push(o)),Pn.hasChanged=!0,this.load(e,r,n).pipe((0,v.tap)(()=>{this.localStorage.set("selected_language",e,!0)}))}getLanguageStrings(){return Pn?{appStrings:Pn.appStrings,appListStrings:Pn.appListStrings,modStrings:Pn.modStrings,languageKey:Pn.languageKey}:null}getAppString(e){return Pn.appStrings&&Pn.appStrings[e]?Pn.appStrings[e]:null}getAppListString(e){return Pn.appListStrings&&Pn.appListStrings[e]?Pn.appListStrings[e]:null}getModString(e){return Pn.modStrings&&Pn.modStrings[e]?Pn.modStrings[e]:null}getFieldLabel(e,n=null,r=null){let o=r;if(r||(o=this.getLanguageStrings()),!o||!o.modStrings||!e)return"";let a="";return n&&(a=o.modStrings[n]&&o.modStrings[n][e]),a||(a=o.appStrings&&o.appStrings[e]),a||""}getListLabel(e,n){if(!e||!n)return"";const r=this.getAppListString(e);return r&&r[n]||""}getAvailableStringsTypes(){return Object.keys(this.config)}hasLanguageChanged(){return Pn.hasChanged}getCurrentLanguage(){return this.localStorage.get("selected_language")||(Pn.languageKey??"en_us")}getActiveLanguage(){return Pn.languageKey??""}getSelectedLanguage(){return this.localStorage.get("selected_language")??""}isLanguageEnabled(e){if(!e)return!1;const n=this.configs.getConfigValue("languages")??{},r=this.getDisabledLanguages(),o=Object.keys(n);return!!o.length&&o.includes(e)&&!r.includes(e)}getDisabledLanguages(){const e=this.configs.getConfigValue("disabled_languages")??"";return(0,ie.isString)(e)&&""!==e?e.replace(" ","").split(","):[]}getEnabledLanguages(){const e=this.configs.getConfigValue("languages")??{},n=this.getDisabledLanguages(),r={};return Object.keys(e).filter(a=>!n.includes(a)).forEach(a=>{r[a]=e[a]}),r}getFirstLanguage(){const e=this.configs.getConfigValue("languages")??{};return Object.keys(e).sort()[0]??""}load(e,n,r=!1){const o=[];return n.forEach(a=>o.push(this.getStrings(e,a,r))),(0,D.forkJoin)(o).pipe((0,v.first)(),(0,v.tap)(a=>{const l={...Pn,languageKey:e};n.forEach((c,u)=>{l[c]=a[u],dr[c]=!0}),this.updateState(l)}))}areAllCached(){let e=!0;return e=e&&!(0,S.emptyObject)(pr?.appStrings??{}),e=e&&!(0,S.emptyObject)(pr?.appListStrings??{}),e=e&&!(0,S.emptyObject)(pr?.modStrings??{}),e}set(e,n){const r={...Pn,languageKey:e};n.appStrings&&!(0,S.emptyObject)(n.appStrings)&&(pr.appStrings[e]=(0,D.of)(n.appStrings).pipe((0,v.shareReplay)(1)),r.appStrings=n.appStrings,dr.appStrings=!0),n.appListStrings&&!(0,S.emptyObject)(n.appListStrings)&&(pr.appListStrings[e]=(0,D.of)(n.appListStrings).pipe((0,v.shareReplay)(1)),r.appListStrings=n.appListStrings,dr.appListStrings=!0),n.modStrings&&!(0,S.emptyObject)(n.modStrings)&&(pr.modStrings[e]=(0,D.of)(n.modStrings).pipe((0,v.shareReplay)(1)),r.modStrings=n.modStrings,dr.modStrings=!0),this.updateState(r)}setSessionLanguage(){return this.processService.submit("set-session-language",{language:Pn.languageKey}).pipe((0,v.take)(1))}updateState(e){this.store.next(Pn=e)}getStrings(e,n,r=!1){const o=pr[n];return o[e]&&!1===r||(o[e]=this[this.config[n].fetch](e).pipe((0,v.shareReplay)(1))),o[e]}fetchAppStrings(e){return this.recordGQL.fetch(this.config.appStrings.resourceName,`/api/app-strings/${e}`,this.config.appStrings.metadata).pipe((0,v.map)(({data:o})=>{let a={};return o.appStrings&&(a=o.appStrings.items),a}))}fetchAppListStrings(e){return this.recordGQL.fetch(this.config.appListStrings.resourceName,`/api/app-list-strings/${e}`,this.config.appListStrings.metadata).pipe((0,v.map)(({data:o})=>{let a={};return o.appListStrings&&(a=o.appListStrings.items),a}))}fetchModStrings(e){return this.recordGQL.fetch(this.config.modStrings.resourceName,`/api/mod-strings/${e}`,this.config.modStrings.metadata).pipe((0,v.map)(({data:o})=>{let a={};return o.modStrings&&(a=o.modStrings.items),a}))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(vs),t.\u0275\u0275inject(bi),t.\u0275\u0275inject(qi),t.\u0275\u0275inject(ht))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),cb=(()=>{class i{constructor(e,n="loading_display_delay"){this.config=e,this.delayConfigKey=n,this.loadingStore=new D.BehaviorSubject(!1),this.loadingBufferStore=new D.BehaviorSubject(!1),this.subs=[],this.buffered=!1,this.loading$=this.loadingStore.asObservable();const r=e.getConfigValue("ui")??{},o=parseInt(r[n]??"")??1500;this.loadingBufferStore$=this.loadingBufferStore.asObservable().pipe((0,v.debounceTime)(o)),this.subs.push(this.loadingBufferStore$.subscribe(a=>{this.buffered&&this.loadingStore.next(a)}))}updateLoading(e){if(!0===e)return this.buffered=!0,void this.loadingBufferStore.next(e);this.buffered=!1,this.loadingStore.next(e),this.loadingBufferStore.next(e)}static#e=this.\u0275fac=function(n){t.\u0275\u0275invalidFactory()};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),sd=(()=>{class i{constructor(e){this.config=e}create(e="loading_display_delay"){return new cb(this.config,e)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ht))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const ub={loading:!1,initialAppLoading:!0,module:null,view:null,loaded:!1,routeUrl:null,preLoginUrl:null,currentUser:null,activeRequests:0,prevRoutes:[],isSidebarVisible:!1,activeNavbarDropdown:0};let Wt=(0,S.deepClone)(ub),Ht=(()=>{class i{constructor(e,n){this.loadingBufferFactory=e,this.configs=n,this.store=new D.BehaviorSubject(Wt),this.state$=this.store.asObservable(),this.loadingQueue={},this.subs=[],this.isTouchScreen=(0,t.signal)(!1),this.loading$=this.state$.pipe((0,v.map)(r=>r.loading),(0,v.distinctUntilChanged)()),this.module$=this.state$.pipe((0,v.map)(r=>r.module),(0,v.distinctUntilChanged)()),this.view$=this.state$.pipe((0,v.map)(r=>r.view),(0,v.distinctUntilChanged)()),this.initialAppLoading$=this.state$.pipe((0,v.map)(r=>r.initialAppLoading),(0,v.distinctUntilChanged)()),this.activeRequests$=this.state$.pipe((0,v.map)(r=>r.activeRequests),(0,v.distinctUntilChanged)()),this.isSidebarVisible$=this.state$.pipe((0,v.map)(r=>r.isSidebarVisible),(0,v.distinctUntilChanged)()),this.activeNavbarDropdown$=this.state$.pipe((0,v.map)(r=>r.activeNavbarDropdown),(0,v.distinctUntilChanged)()),this.vm$=this.loading$.pipe((0,D.combineLatestWith)(this.module$,this.view$,this.initialAppLoading$),(0,v.map)(([r,o,a,l])=>({loading:r,module:o,view:a,loaded:Wt.loaded,initialAppLoading:l,isSidebarVisible:Wt.isSidebarVisible,activeNavbarDropdown:Wt.activeNavbarDropdown}))),"ontouchstart"in window||navigator.maxTouchPoints>0?this.isTouchScreen.set(!0):this.isTouchScreen.set(!1)}clear(){this.loadingQueue={},this.updateState((0,S.deepClone)(ub)),this.subs.forEach(e=>e.unsubscribe())}clearAuthBased(){}init(){this.initLoadingBuffer()}isLoggedIn(){return!!Wt.currentUser}getCurrentUser(){return Wt.currentUser}setCurrentUser(e){(0,S.isVoid)(e)?this.onLogout():this.onLogin(),this.updateState({...Wt,currentUser:e})}onLogin(){}onLogout(){this.updateState({...Wt,preLoginUrl:null})}getActiveRequests(){return Wt.activeRequests}addActiveRequest(){let e=Wt.activeRequests;(0,S.isVoid)(e)&&(e=0),e++,this.updateState({...Wt,activeRequests:e})}removeActiveRequest(){let e=Wt.activeRequests;(0,S.isVoid)(e)?e=0:e--,e<0&&(e=0),this.updateState({...Wt,activeRequests:e})}updateLoading(e,n,r=!0){if(this.initLoadingBuffer(),!0===n)return this.addToLoadingQueue(e),this.loadingBuffer.updateLoading(n),void(r||this.updateState({...Wt,loading:n}));this.removeFromLoadingQueue(e),this.hasActiveLoading()&&(this.loadingBuffer.updateLoading(n),this.updateState({...Wt,loading:n}))}updateInitialAppLoading(e){this.updateState({...Wt,initialAppLoading:e})}isLoaded(){return Wt.loaded}setLoaded(e){this.updateState({...Wt,loaded:e})}setModule(e){this.updateState({...Wt,module:e})}getModule(){return Wt?.module??""}setView(e){this.updateState({...Wt,view:e})}getView(){return Wt.view}setRouteUrl(e){this.updateState({...Wt,routeUrl:e})}getRouteUrl(){return Wt.routeUrl}setPreLoginUrl(e){this.updateState({...Wt,preLoginUrl:e})}getPreLoginUrl(){return Wt.preLoginUrl??""}initLoadingBuffer(){this.loadingBuffer||(this.loadingBuffer=this.loadingBufferFactory.create(),this.subs.push(this.loadingBuffer.loading$.subscribe(e=>{this.updateState({...Wt,loading:e})})))}hasActiveLoading(){return Object.keys(this.loadingQueue).length<1}removeFromLoadingQueue(e){this.loadingQueue[e]&&delete this.loadingQueue[e]}addToLoadingQueue(e){this.loadingQueue[e]=!0}updateState(e){this.store.next(Wt=e)}toggleSidebar(){this.updateState({...Wt,isSidebarVisible:!Wt.isSidebarVisible})}closeSidebar(){this.updateState({...Wt,isSidebarVisible:!1})}getLatestPrevRoute(){return Wt.prevRoutes[Wt.prevRoutes.length-2]}getPrevRoutes(){return Wt.prevRoutes}addToPrevRoute(e){const n=this.getPrevRoutes();n.length>0&&n[n.length-1]===e||(n.push(e),this.updateState({...Wt}))}removeLatestPrevRoute(){const e=this.getPrevRoutes(),n=e.slice(0,e.length-1);this.updateState({...Wt,prevRoutes:n})}removeAllPrevRoutes(){this.updateState({...Wt,prevRoutes:[]})}setActiveDropdown(e){this.updateState({...Wt,activeNavbarDropdown:e})}getActiveDropdown(){return Wt.activeNavbarDropdown}resetActiveDropdown(){this.updateState({...Wt,activeNavbarDropdown:0})}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(sd),t.\u0275\u0275inject(ht))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const db={theme:null,images:{}};let ua=(0,S.deepClone)(db),Vl=null,_s=null,Xr=(()=>{class i{constructor(e,n,r){this.recordGQL=e,this.appStateStore=n,this.iconRegistry=r,this.store=new D.BehaviorSubject(ua),this.state$=this.store.asObservable(),this.resourceName="themeImages",this.frontendName="theme-images",this.fieldsMetadata={fields:["id","_id","items"]},this.images$=this.state$.pipe((0,v.map)(o=>o.images),(0,v.distinctUntilChanged)())}clear(){Vl=null,_s=null,this.updateState((0,S.deepClone)(db))}clearAuthBased(){}changeTheme(e){this.appStateStore.updateLoading("change-theme",!0),this.load(e).pipe((0,v.tap)(()=>this.appStateStore.updateLoading("change-theme",!1))).subscribe()}getTheme(){return ua.theme}load(e){return this.getThemeImages(e).pipe((0,v.tap)(n=>{this.updateState({...ua,images:n,theme:e})}))}isCached(){return null!==_s}set(e,n){Vl=e,this.registerSvgs(n),_s=(0,D.of)(n).pipe((0,v.shareReplay)(1)),this.updateState({...ua,images:n})}updateState(e){this.store.next(ua=e)}getThemeImages(e){return(Vl!==e||null===_s)&&(Vl=e,_s=this.fetch(e).pipe((0,v.shareReplay)(1))),_s}registerSvgs(e){Object.keys(e).forEach(n=>{const r=e[n],o=r.content??"",a=r.name??"";""===o||""===a||this.iconRegistry.addSvg(a,o)})}fetch(e){return this.recordGQL.fetch(this.resourceName,`/api/${this.frontendName}/${e}`,this.fieldsMetadata).pipe((0,v.map)(({data:n})=>{let r={};if(n&&n.themeImages&&(r=n.themeImages.items),!(0,S.emptyObject)(r)){const o={};return this.registerSvgs(r),Object.keys(r).forEach(a=>{const{content:l,...c}=r[a]??{};o[a]=c}),o}return r}))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(vs),t.\u0275\u0275inject(Ht),t.\u0275\u0275inject(Ge.SvgIconRegistryService))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function P8(i,s){if(1&i&&t.\u0275\u0275element(0,"svg-icon",3),2&i){const e=t.\u0275\u0275nextContext().ngIf,n=t.\u0275\u0275nextContext();t.\u0275\u0275classMap(n.wrapperClass),t.\u0275\u0275propertyInterpolate("name",e.name),t.\u0275\u0275property("svgClass",n.klass||"")("title",n.title||"")}}function V8(i,s){if(1&i&&t.\u0275\u0275element(0,"img",4),2&i){const e=t.\u0275\u0275nextContext().ngIf,n=t.\u0275\u0275nextContext();t.\u0275\u0275classMap(n.klass),t.\u0275\u0275propertyInterpolate("src",e.path,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275property("title",n.title||"")}}function U8(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,P8,1,6,"svg-icon",1),t.\u0275\u0275template(2,V8,1,5,"img",2),t.\u0275\u0275elementContainerEnd()),2&i){const e=s.ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","svg"===e.type),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","svg"!==e.type)}}let ln=(()=>{class i{constructor(e){this.themeImagesStore=e,this.klass="",this.title="",this.wrapperClass="sicon",this.images$=this.themeImagesStore.images$,this.imageSig=(0,t.signal)({}),this.subs=[]}ngOnInit(){this.subs=[],this.subs.push(this.images$.pipe((0,v.filter)(e=>null!==e),(0,v.map)(e=>({images:e})),(0,v.tap)(e=>this.getImage(e,this.image))).subscribe())}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe()),this.subs=[]}getImage(e,n){if(!e||!e.images||Object.keys(e.images).length<1)return null;this.imageSig.update(()=>e.images[n]),this.imageSig()||console.warn(`Image with name '${n}' not found`)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Xr))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-image"]],inputs:{image:"image",klass:"klass",title:"title",wrapperClass:"wrapperClass"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"svgClass","title","class","name",4,"ngIf"],["alt","",3,"src","class","title",4,"ngIf"],[3,"svgClass","title","name"],["alt","",3,"src","title"]],template:function(n,r){1&n&&t.\u0275\u0275template(0,U8,3,2,"ng-container",0),2&n&&t.\u0275\u0275property("ngIf",r.imageSig())},dependencies:[I.NgIf,Ge.SvgIconComponent],encapsulation:2})}return i})();function $8(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.language.getFieldLabel(e.labelKey,e.module)," ")}}function z8(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.language.getListLabel(e.listKey,e.labelKey)," ")}}function H8(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,$8,2,1,"ng-container",0),t.\u0275\u0275template(2,z8,2,1,"ng-container",0),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.listKey&&e.labelKey),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.listKey&&e.labelKey)}}let qt=(()=>{class i{constructor(e){this.language=e,this.labelKey="",this.module=null,this.listKey=null,this.languages$=this.language.vm$}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-label"]],inputs:{labelKey:"labelKey",module:"module",listKey:"listKey"},decls:2,vars:3,consts:[[4,"ngIf"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,H8,3,2,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.languages$))},dependencies:[I.NgIf,I.AsyncPipe],encapsulation:2})}return i})();function W8(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-image",4),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("image",e.config.icon)("klass",e.config.iconKlass||"")("title",e.language.getFieldLabel(e.config.titleKey||""))}}function K8(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.config.label||"")}}function G8(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-label",5),2&i){const e=t.\u0275\u0275nextContext();let n;t.\u0275\u0275property("labelKey",e.config.labelKey)("module",null!==(n=e.config.labelModule)&&void 0!==n?n:"")}}const Z8=["*"];let Un=(()=>{class i{constructor(e){this.language=e,this.clickBuffer=new D.Subject,this.clickBuffer$=this.clickBuffer.asObservable(),this.subs=[]}ngOnInit(){const e=this.config?.debounceClick??null;this.clickCallBack=this.config?.onClick??null;const n=this.getDebounceTime();e&&this.clickCallBack&&this.subs.push(this.clickBuffer$.pipe((0,v.debounceTime)(n)).subscribe(r=>{this.clickCallBack(r??null)}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}runClick(e){if(this.clickCallBack){if(this.config?.debounceClick&&this.clickCallBack)return void this.clickBuffer.next(e??null);this.clickCallBack(e??null)}}getDebounceTime(){let e=this.config?.clickDebounceTime??625;return isFinite(e)||(e=625),e}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-button"]],inputs:{config:"config"},ngContentSelectors:Z8,decls:5,vars:5,consts:[["type","button",3,"ngClass","title","click"],[3,"image","klass","title",4,"ngIf"],[4,"ngIf"],[3,"labelKey","module",4,"ngIf"],[3,"image","klass","title"],[3,"labelKey","module"]],template:function(n,r){1&n&&(t.\u0275\u0275projectionDef(),t.\u0275\u0275elementStart(0,"button",0),t.\u0275\u0275listener("click",function(a){return r.runClick(a)}),t.\u0275\u0275template(1,W8,1,3,"scrm-image",1),t.\u0275\u0275template(2,K8,2,1,"ng-container",2),t.\u0275\u0275template(3,G8,1,2,"scrm-label",3),t.\u0275\u0275projection(4),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275property("ngClass",r.config.klass)("title",r.language.getFieldLabel(r.config.titleKey)||(null==r.config?null:r.config.title)||""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.config.icon),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.config.labelKey),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.config.labelKey))},dependencies:[I.NgClass,I.NgIf,ln,qt],encapsulation:2})}return i})();function q8(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-image",5),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("image",e.item.icon)}}function Q8(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-image",5),2&i){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275property("image",e.icon)}}function J8(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"li",9)(1,"a",10),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e).$implicit,a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.click(o))}),t.\u0275\u0275template(2,Q8,1,1,"scrm-image",2),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()()}if(2&i){const e=s.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",e&&e.klass),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.icon),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e&&e.label," ")}}function Y8(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",6)(1,"ul",7),t.\u0275\u0275template(2,J8,4,3,"li",8),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngbCollapse",e.isCollapsed),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.item.items)}}const X8=["*"];let pb=(()=>{class i{constructor(){this.itemClicked=new t.EventEmitter,this.isCollapsed=!0}ngOnInit(){}click(e){e&&e.onClick&&e.onClick(),this.itemClicked.emit(!0)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-dropdown-submenu"]],inputs:{item:"item"},outputs:{itemClicked:"item-clicked"},ngContentSelectors:X8,decls:8,vars:3,consts:[[1,"dropdown-submenu-items-container"],[1,"dropdown-submenu-parent-button","dropdown-item","dropdown-toggle",3,"click"],[3,"image",4,"ngIf"],[3,"ngbCollapse",4,"ngIf"],[1,"dropdown-submenu-extra"],[3,"image"],[3,"ngbCollapse"],[1,"dropdown-submenu","pl-2","mb-1"],["class","dropdown-submenu-item dropdown-item",4,"ngFor","ngForOf"],[1,"dropdown-submenu-item","dropdown-item"],[1,"action-link","dropdown-submenu-item-link",3,"ngClass","click"]],template:function(n,r){1&n&&(t.\u0275\u0275projectionDef(),t.\u0275\u0275elementStart(0,"div")(1,"div",0)(2,"a",1),t.\u0275\u0275listener("click",function(){return r.isCollapsed=!r.isCollapsed}),t.\u0275\u0275template(3,q8,1,1,"scrm-image",2),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(5,Y8,3,2,"div",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",4),t.\u0275\u0275projection(7),t.\u0275\u0275elementEnd()()),2&n&&(t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",r.item&&r.item.icon),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",r.item&&r.item.label," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.item&&r.item.items.length))},dependencies:[I.NgClass,I.NgForOf,I.NgIf,ln,me.NgbCollapse],encapsulation:2})}return i})();function e6(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-image",7),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("image",e.config.icon)("klass",e.config.iconKlass||"")}}function t6(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.config.label," ")}}function n6(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-label",8),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("labelKey",e.config.labelKey)}}function i6(i,s){1&i&&t.\u0275\u0275elementContainer(0)}const fb=function(i){return{item:i}};function r6(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,i6,1,0,"ng-container",13),t.\u0275\u0275elementContainerEnd()),2&i){const e=s.$implicit;t.\u0275\u0275nextContext(3);const n=t.\u0275\u0275reference(10);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",n)("ngTemplateOutletContext",t.\u0275\u0275pureFunction1(2,fb,e))}}function o6(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",10)(1,"div",11),t.\u0275\u0275element(2,"scrm-label",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(3,r6,2,4,"ng-container",12),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=s.last,r=s.first;let o,a;t.\u0275\u0275classProp("section-split",!r)("last-section",n)("first-section",r),t.\u0275\u0275property("ngClass",null!==(o=e.klass)&&void 0!==o?o:""),t.\u0275\u0275advance(2),t.\u0275\u0275property("labelKey",null!==(a=null!==(a=e.labelKey)&&void 0!==a?a:e.label)&&void 0!==a?a:""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.items)}}function s6(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,o6,4,9,"div",9),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.sections)}}function a6(i,s){1&i&&t.\u0275\u0275elementContainer(0)}function l6(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,a6,1,0,"ng-container",13),t.\u0275\u0275elementContainerEnd()),2&i){const e=s.$implicit;t.\u0275\u0275nextContext(2);const n=t.\u0275\u0275reference(10);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",n)("ngTemplateOutletContext",t.\u0275\u0275pureFunction1(2,fb,e))}}function c6(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,l6,2,4,"ng-container",12),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.buttons)}}function u6(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"scrm-image",7),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2).item;t.\u0275\u0275advance(1),t.\u0275\u0275property("image",e.icon)("klass",e.iconKlass||"")}}function d6(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2).item;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.label," ")}}function p6(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-label",18),2&i){const e=t.\u0275\u0275nextContext(3).item;let n;t.\u0275\u0275property("labelKey",e.labelKey)("module",null!==(n=e.labelModule)&&void 0!==n?n:"")}}function f6(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,p6,1,2,"scrm-label",17),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2).item;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e&&e.labelKey)}}function m6(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"a",14),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext().item,o=t.\u0275\u0275nextContext(),a=t.\u0275\u0275reference(1);return t.\u0275\u0275resetView(r&&o.click(r.onClick,a))}),t.\u0275\u0275elementStart(2,"div",15),t.\u0275\u0275template(3,u6,2,2,"div",4),t.\u0275\u0275elementStart(4,"div",16),t.\u0275\u0275template(5,d6,2,1,"ng-container",4),t.\u0275\u0275template(6,f6,2,1,"ng-container",4),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementContainerEnd()}if(2&i){const e=t.\u0275\u0275nextContext().item;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",e&&e.klass),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.icon),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e&&e.label),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e&&!e.label&&e.labelKey)}}function h6(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"scrm-dropdown-submenu",19),t.\u0275\u0275listener("item-clicked",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(2),o=t.\u0275\u0275reference(1);return t.\u0275\u0275resetView(r.close(o))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&i){const e=t.\u0275\u0275nextContext().item;t.\u0275\u0275advance(1),t.\u0275\u0275property("item",e)}}function g6(i,s){if(1&i&&(t.\u0275\u0275template(0,m6,7,4,"ng-container",4),t.\u0275\u0275template(1,h6,2,1,"ng-container",4)),2&i){const e=s.item,n=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngIf",e&&!n.isDropdown(e)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e&&n.isDropdown(e))}}let Ul=(()=>{class i{constructor(e){this.language=e,this.disabled=!1,this.autoClose=!0,this.buttons=[],this.sections=[],this.sectionsEnabled=!1}isDropdown(e){return!!e&&"items"in e}click(e,n){e(),n.close()}close(e){e.close()}ngOnInit(){if(this.config&&!this.config.placement&&(this.config.placement=["bottom-left","bottom-right","top-left","top-right"]),this.sections=[],(0,S.emptyObject)(this.config?.sections??{}))return this.buttons=[...this.config?.items??[]],void(this.sectionsEnabled=!1);this.sectionsEnabled=!0,this.preprocessItems(this.config?.items??[])}preprocessItems(e){const n=this.config?.sections??{},r={};!e||!e.length||(e.forEach(o=>{this.getSection(n,o?.section??"default",r).items.push(o)}),Object.keys(n).forEach(o=>{const a=r[o];a&&a.items&&a.items.length&&this.sections.push(a)}))}getSection(e,n,r){let a=r[n]??null;return null===a&&(a=(0,S.deepClone)(e[n]??{}),a.items=[],r[n]=a),a}getPlacement(){return this.config&&!this.config.placement?["bottom-left","bottom-right","top-left","top-right"]:this.config.placement}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-dropdown-button"]],inputs:{config:"config",disabled:"disabled",autoClose:"autoClose"},decls:11,vars:13,consts:[["ngbDropdown","",1,"d-inline-block","dropdown-button",3,"autoClose","placement","ngClass"],["dropDown","ngbDropdown"],["ngbDropdownToggle","",3,"disabled","ngClass","title"],[3,"image","klass",4,"ngIf"],[4,"ngIf"],["ngbDropdownMenu",""],["buttonTemplate",""],[3,"image","klass"],[3,"labelKey"],[3,"ngClass","section-split","last-section","first-section",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"dropdown-menu-item-header"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["ngbDropdownItem","",3,"ngClass","click"],[1,"d-flex","align-items-center"],[1,"dropdown-item-label","flex-grow-1"],[3,"labelKey","module",4,"ngIf"],[3,"labelKey","module"],[3,"item","item-clicked"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",0,1)(2,"button",2),t.\u0275\u0275template(3,e6,1,2,"scrm-image",3),t.\u0275\u0275template(4,t6,2,1,"ng-container",4),t.\u0275\u0275template(5,n6,2,1,"ng-container",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",5),t.\u0275\u0275template(7,s6,2,1,"ng-container",4),t.\u0275\u0275template(8,c6,2,1,"ng-container",4),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(9,g6,2,2,"ng-template",null,6,t.\u0275\u0275templateRefExtractor)),2&n&&(t.\u0275\u0275classProp("sectioned-dropdown-menu",r.sectionsEnabled),t.\u0275\u0275property("autoClose",r.autoClose)("placement",r.getPlacement())("ngClass",r.config.wrapperKlass),t.\u0275\u0275advance(2),t.\u0275\u0275property("disabled",r.disabled)("ngClass",r.config.klass)("title",r.language.getFieldLabel(r.config.titleKey)||""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.config.icon),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.config.label),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.config.label&&r.config.labelKey),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",r.sectionsEnabled),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.sectionsEnabled))},dependencies:[I.NgClass,I.NgForOf,I.NgIf,I.NgTemplateOutlet,me.NgbDropdown,me.NgbDropdownToggle,me.NgbDropdownMenu,me.NgbDropdownItem,ln,pb,qt],encapsulation:2,changeDetection:0})}return i})();function v6(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-button",3),t.\u0275\u0275elementContainerEnd()),2&i){const e=s.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e)}}function _6(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,v6,2,1,"ng-container",2),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.config.items)}}let mb=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-grouped-button"]],inputs:{config:"config"},decls:2,vars:2,consts:[["role","group",1,"btn-group","grouped-button",3,"ngClass"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"config"]],template:function(n,r){if(1&n&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275template(1,_6,2,1,"ng-container",1),t.\u0275\u0275elementEnd()),2&n){let o;t.\u0275\u0275property("ngClass",null!==(o=null==r.config?null:r.config.wrapperKlass)&&void 0!==o?o:""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==r.config?null:r.config.items)}},dependencies:[I.NgClass,I.NgForOf,I.NgIf,Un],encapsulation:2,changeDetection:0})}return i})();function y6(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-button",4),2&i){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275property("config",e)}}function b6(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-dropdown-button",4),2&i){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275property("config",e)}}function C6(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-grouped-button",4),2&i){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275property("config",e)}}function S6(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,y6,1,1,"scrm-button",3),t.\u0275\u0275template(2,b6,1,1,"scrm-dropdown-button",3),t.\u0275\u0275template(3,C6,1,1,"scrm-grouped-button",3),t.\u0275\u0275elementContainerEnd()),2&i){const e=s.$implicit;let n,r,o;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e&&!(null!==(n=null==e?null:e.items)&&void 0!==n&&n)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e&&(null!==(r=null==e?null:e.items)&&void 0!==r?r:"")&&"dropdown"===(null!==(r=null==e?null:e.type)&&void 0!==r?r:"dropdown")),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e&&(null!==(o=null==e?null:e.items)&&void 0!==o?o:"")&&"grouped"===(null!==(o=null==e?null:e.type)&&void 0!==o?o:"dropdown"))}}function M6(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-dropdown-button",5),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("config",e.dropdownConfig)}}function w6(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,S6,4,3,"ng-container",1),t.\u0275\u0275template(2,M6,1,1,"scrm-dropdown-button",2),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275classMap(e.klass),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.buttons.expanded),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.buttons.collapsed.length)}}let yo=(()=>{class i{constructor(){this.klass="",this.buttons={expanded:[],collapsed:[]}}ngOnInit(){this.sub=this.config$.subscribe(e=>{this.internalConfig={...e},this.splitButtons()})}ngOnDestroy(){this.sub.unsubscribe()}buildDropdownConfig(){let e=["button-group-button"];this.internalConfig.buttonKlass&&this.internalConfig.buttonKlass.length>0&&(e=e.concat(this.internalConfig.buttonKlass)),this?.internalConfig?.dropdownOptions?.klass&&(e=e.concat(this.internalConfig.dropdownOptions.klass));let n=["button-group-dropdown"];const r=this.internalConfig.dropdownOptions,o=r&&r.wrapperKlass;o&&o.length>0&&(n=n.concat(o)),this.dropdownConfig={label:this.internalConfig.dropdownLabel,klass:[...e],wrapperKlass:n,items:this.buttons.collapsed},this.internalConfig.dropdownOptions&&this.internalConfig.dropdownOptions.placement&&(this.dropdownConfig.placement=this.internalConfig.dropdownOptions.placement),this.internalConfig.dropdownOptions&&this.internalConfig.dropdownOptions.icon&&(this.dropdownConfig.icon=this.internalConfig.dropdownOptions.icon)}getBreakpoint(){return this.internalConfig.breakpoint||0===this.internalConfig.breakpoint?this.internalConfig.breakpoint:4}splitButtons(){if(this.buttons.expanded=[],this.buttons.collapsed=[],!this.internalConfig.buttons||this.internalConfig.buttons.length<1)return;let e=0;const n=this.internalConfig.showAfterBreakpoint??!0;this.internalConfig.buttons.forEach(r=>{if(r){if(e<this.getBreakpoint()){let o=["button-group-button"];this.internalConfig.buttonKlass&&this.internalConfig.buttonKlass.length>0&&(o=o.concat(this.internalConfig.buttonKlass));const a={...r};S.Button.appendClasses(a,[...o]),this.buttons.expanded.push(a)}else!0===n&&this.buttons.collapsed.push({...r});e++}}),this.buildDropdownConfig()}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-button-group"]],inputs:{config$:"config$",klass:"klass"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[4,"ngFor","ngForOf"],["autoClose","outside",3,"config",4,"ngIf"],[3,"config",4,"ngIf"],[3,"config"],["autoClose","outside",3,"config"]],template:function(n,r){1&n&&t.\u0275\u0275template(0,w6,3,4,"div",0),2&n&&t.\u0275\u0275property("ngIf",r.config$)},dependencies:[I.NgForOf,I.NgIf,Un,Ul,mb],encapsulation:2})}return i})();const hb={userPreferences:{},loading:!1};let Pi=(0,S.deepClone)(hb),ys=null,Xt=(()=>{class i{constructor(e,n,r,o){this.collectionGQL=e,this.config=n,this.processService=r,this.localStorage=o,this.store=new D.BehaviorSubject(Pi),this.state$=this.store.asObservable(),this.saveBufferStore=new D.BehaviorSubject(!1),this.subs=[],this.resourceName="userPreferences",this.fieldsMetadata={fields:["id","_id","value","items"]},this.userPreferences$=this.state$.pipe((0,v.map)(c=>c.userPreferences),(0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(c=>c.loading));const l=(n.getConfigValue("ui")??{}).user_preferences_save_delay??5e3;this.saveBuffer$=this.saveBufferStore.asObservable().pipe((0,v.debounceTime)(l??5e3)),this.subs.push(this.saveBuffer$.subscribe(c=>{c&&this.saveUiPreferences()}))}clear(){ys=null,this.updateState((0,S.deepClone)(hb)),this.subs.forEach(e=>e.unsubscribe())}clearAuthBased(){this.clear()}getUserPreference(e){return Pi.userPreferences&&Pi.userPreferences[e]?Pi.userPreferences[e]:null}getUi(e,n){const r=e+"-"+n;return this.storageLoad(e,r)??(Pi?.userPreferences?.ui??{})[r]??null}setUi(e,n,r){const o=e+"-"+n;this.storageSave(e,o,r);const a=Pi?.userPreferences?.ui??{};a[o]=r,Pi.userPreferences.ui=a,this.saveBufferStore.next(!0)}saveUiPreferences(){this.processService.submit("save-ui-user-preferences",{preferences:Pi.userPreferences.ui}).pipe((0,v.take)(1)).subscribe()}storageSave(e,n,r){let o=this.localStorage.get(n);o||(o={}),o[e]=r,this.localStorage.set(n,o)}storageLoad(e,n){const r=this.localStorage.get(n);return r&&r[e]?r[e]:null}load(){return this.updateState({...Pi,loading:!0}),this.getUserPreferences().pipe((0,v.tap)(e=>{this.updateState({...Pi,userPreferences:e,loading:!1})}))}isCached(){return null!==ys}set(e){ys=(0,D.of)(e).pipe((0,v.shareReplay)(1)),this.updateState({...Pi,userPreferences:e,loading:!1})}updateState(e){this.store.next(Pi=e)}getUserPreferences(){return null==ys&&(ys=this.fetch().pipe((0,v.shareReplay)(1))),ys}fetch(){return this.collectionGQL.fetchAll(this.resourceName,this.fieldsMetadata).pipe((0,v.map)(({data:e})=>{const n={};return e.userPreferences&&e.userPreferences.edges&&e.userPreferences.edges.forEach(r=>{r.node.items&&Object.keys(r.node.items).forEach(o=>{n[o]=r.node.items[o]})}),n}))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(od),t.\u0275\u0275inject(ht),t.\u0275\u0275inject(qi),t.\u0275\u0275inject(bi))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),bo=(()=>{class i{getTrimmedInputValue(e){return"string"!=typeof e?e:e.trim()}isEmptyInputValue(e){return null==e||typeof e>"u"||""===e||0===e.length}isEmptyTrimmedInputValue(e){return this.isEmptyInputValue(this.getTrimmedInputValue(e))}isEmptyBooleanInputValue(e){return this.isEmptyInputValue(e)||"false"===e||!1===e||""===e}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Co=(()=>{class i{constructor(e,n,r){this.preferences=e,this.formUtils=n,this.locale=r}toUserFormat(e,n){if((0,S.isVoid)(e)||""===e)return"";if((0,S.isFalse)(n?.metadata?.format??!0))return e;const r=(0,I.formatNumber)(Number(e),this.locale);return this.replaceSeparators(r)}toInternalFormat(e){if(!e)return e;const n=this.getDecimalsSymbol()||".",r=this.getGroupSymbol()||",";let o=new RegExp(n,"g");"."===n&&(o=new RegExp("\\.","g"));let a=new RegExp(r,"g");return"."===r&&(a=new RegExp("\\.","g")),(e=(e=(e=e.replace(a,"group_separator")).replace(o,"decimal_separator")).replace(/decimal_separator/g,".")).replace(/group_separator/g,"")}getFloatUserFormatPattern(){const e=this.getGroupSymbol(),n=this.getDecimalsSymbol();let r="^-?(";return r+="(\\d{1,3}(\\"+e+"\\d{3})*(\\"+n+"\\d+)?)|",r+="\\d*|",r+="(\\d+(\\"+n+"\\d+)?)|",r+="(\\d+(\\.\\d+)?)",r+=")$",r}getIntUserFormatPattern(){let n="^-?(";return n+="(\\d{1,3}(\\"+this.getGroupSymbol()+"\\d{3})*)|",n+="\\d*",n+=")$",n}getGroupSymbol(){return this.preferences.getUserPreference("num_grp_sep")||","}getDecimalsSymbol(){return this.preferences.getUserPreference("dec_sep")||"."}replaceSeparators(e){if(!e)return e;e=(e=e.replace(/,/g,"group_separator")).replace(/\./g,"decimal_separator");const n=this.getDecimalsSymbol()||".",r=this.getGroupSymbol()||",";return(e=e.replace(/decimal_separator/g,n)).replace(/group_separator/g,r)}validateIntUserFormat(e){const n=this.formUtils.getTrimmedInputValue(e);if(this.formUtils.isEmptyInputValue(n)||new RegExp(this.getIntUserFormatPattern()).test(n))return!1}validateFloatUserFormat(e){const n=this.formUtils.getTrimmedInputValue(e);return!this.formUtils.isEmptyInputValue(n)&&!new RegExp(this.getFloatUserFormatPattern()).test(n)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Xt),t.\u0275\u0275inject(bo),t.\u0275\u0275inject(t.LOCALE_ID))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Fr=(()=>{class i{constructor(e,n,r){this.preferences=e,this.formUtils=n,this.locale=r,this.format$=this.preferences.userPreferences$.pipe((0,v.map)(()=>({date:this.getDateFormat(),time:this.getTimeFormat()})))}getDateFormat(){return this.preferences.getUserPreference("date_format")||this.getInternalTimeFormat()}getTimeFormat(){const e=this.preferences.getUserPreference("time_format");if(e){let n=e;return n.includes("aaaaaa")&&(n=n.replace("aaaaaa","aaaaa'm'")),n}return this.getInternalTimeFormat()}getDateTimeFormat(){return this.getDateFormat()+" "+this.getTimeFormat()}getInternalDateFormat(){return"yyyy-MM-dd"}getInternalTimeFormat(){return"HH:mm:ss"}getInternalDateTimeFormat(){return this.getInternalDateFormat()+" "+this.getInternalTimeFormat()}getInternalFormat(){return this.getInternalDateTimeFormat()}getUserFormat(){return this.getDateTimeFormat()}toUserFormat(e,n){const r=n&&n.fromFormat||this.getInternalFormat();if(e){const o=this.toDateTime(e,r,{zone:"GMT"});return o.isValid?(0,I.formatDate)(o.toJSDate(),this.getUserFormat(),this.locale,this.userTimeZone()):e}return""}toInternalFormat(e,n){const r=n&&n.fromFormat||this.getUserFormat();if(e){let o=this.toDateTime(e,r,{zone:this.preferences.getUserPreference("timezone")});return(0,I.formatDate)(o.toJSDate(),this.getInternalFormat(),this.locale,"GMT")}return""}formatDateTime(e,n,r="",o=this.locale,a=""){const l=this.toDateTime(e,r);return l.isValid?(0,I.formatDate)(l.toJSDate(),n,o,a):e}toDateTime(e,n="",r){if(!e)return tt.DateTime.invalid("empty");if(n)return tt.DateTime.fromFormat(e,n,r);let o=this.fromUserFormat(e,r);return o.isValid||(o=this.fromInternalFormat(e,r)),o}userDateTimeFormatToStruct(e){if(!e)return null;const n=this.toDateTime(e,"",{zone:this.preferences.getUserPreference("timezone")});return n.isValid?{date:{day:n.day,month:n.month,year:n.year},time:{hour:n.hour,minute:n.minute,second:n.second}}:null}internalDateTimeFormatToStruct(e){if(!e)return null;const n=this.toDateTime(e,this.getInternalDateTimeFormat(),{zone:"GMT"}),r=n.setZone(this.preferences.getUserPreference("timezone"));return n.isValid?{date:{day:r.day,month:r.month,year:r.year},time:{hour:r.hour,minute:r.minute,second:r.second}}:null}userDateFormatToStruct(e){if(!e)return null;const n=this.toDateTime(e,"",{zone:this.preferences.getUserPreference("timezone")});return n.isValid?{day:n.day,month:n.month,year:n.year}:null}dateFormatToStruct(e,n=""){if(!e)return null;const r=this.toDateTime(e,n);return r.isValid?{day:r.day,month:r.month,year:r.year}:null}userTimeFormatToStruct(e){if(!e)return null;const n=this.toDateTime(e,"",{zone:this.preferences.getUserPreference("timezone")});return n.isValid?{hour:n.hour,minute:n.minute,second:n.second}:null}fromUserFormat(e,n,r){e=(e=(e=(e=(e=this.toUserFormat(e,r)).toString()).replace("a","A")).replace("p","P")).replace("m","M");let o=this.getUserFormat();return o=o.replace("aaaaa'm'","a"),tt.DateTime.fromFormat(e,o,n)}fromInternalFormat(e,n){const r=this.getInternalFormat();return tt.DateTime.fromFormat(e.toString(),r,n)}validateUserFormat(e,n=""){const r=this.formUtils.getTrimmedInputValue(e);return!this.formUtils.isEmptyInputValue(r)&&!this.fromUserFormat(r,{},{fromFormat:n}).isValid}userTimeZone(){let e=this.preferences.getUserPreference("timezone")??"GMT";e||(e="GMT");const n=tt.DateTime.now().setZone(e).toMillis();return tt.IANAZone.create(e).formatOffset(n,"techie")}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Xt),t.\u0275\u0275inject(bo),t.\u0275\u0275inject(t.LOCALE_ID))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ad=(()=>{class i{constructor(e,n,r){this.preferences=e,this.numberFormatter=n,this.locale=r}toUserFormat(e,n=null){if((0,S.isVoid)(e)||""===e)return"";const r=n&&n.symbol||this.getSymbol(),o=n&&n.code||this.getCode();let a=null;n&&null!==n.digits&&isFinite(n.digits)&&(a=n.digits);const l=this.getDigitsInfo(a);let c;return n&&"edit"===n.mode?(c=(0,I.formatNumber)(Number(e),this.locale,l),this.replaceSeparators(c)):(c=(0,I.formatCurrency)(Number(e),this.locale,r,o,l),this.replaceSeparators(c))}toInternalFormat(e){if(!e)return"";const n=e.replace(this.getSymbol(),"");return this.numberFormatter.toInternalFormat(n)}getCurrencyFormat(){return this.preferences.getUserPreference("currency")||this.getDefaultFormat()}getDefaultFormat(){return{iso4217:"USD",name:"US Dollars",symbol:"$"}}getCode(){return this.getCurrencyFormat().iso4217}getSymbol(){return this.getCurrencyFormat().symbol}getDigits(){return this.preferences.getUserPreference("default_currency_significant_digits")||2}getDigitsInfo(e){let n="1.2-2",r=this.getDigits();return null!==e&&isFinite(e)&&(r=e),null!==r&&isFinite(r)&&(n=r<1?"1.0-0":`1.${r}-${r}`),n}replaceSeparators(e){return this.numberFormatter.replaceSeparators(e)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Xt),t.\u0275\u0275inject(Co),t.\u0275\u0275inject(t.LOCALE_ID))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),eo=(()=>{class i extends Fr{getInternalFormat(){return this.getInternalDateFormat()}getUserFormat(){return this.getDateFormat()}toInternalFormat(e,n){const r=n&&n.fromFormat||this.getUserFormat();if(e){let o=this.toDateTime(e,r);return(!o||!o.isValid)&&(o=this.toDateTime(e)),(0,I.formatDate)(o.toJSDate(),this.getInternalFormat(),this.locale)}return""}toUserFormat(e,n){const r=n&&n.fromFormat||this.getInternalFormat(),o=n&&n.toFormat||this.getUserFormat();if(e){const a=this.toDateTime(e,r);return a.isValid?(0,I.formatDate)(a.toJSDate(),o,this.locale):e}return""}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=t.\u0275\u0275getInheritedFactory(i)))(r||i)}}();static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ld=(()=>{class i{constructor(e){this.formUtils=e}toUserFormat(e){return e}toInternalFormat(e){return e}getUserFormatPattern(){return"^([\\+]?|00)((([(]{0,1}\\s*[0-9]{1,4}\\s*[)]{0,1})\\s*)*|([\\-\\s\\./0-9])*)+$"}validateUserFormat(e){const n=this.formUtils.getTrimmedInputValue(e);return!this.formUtils.isEmptyInputValue(n)&&!new RegExp(this.getUserFormatPattern()).test(n)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(bo))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),mt=(()=>{class i{constructor(e,n,r,o,a){this.currencyFormatter=e,this.numberFormatter=n,this.dateFormatter=r,this.datetimeFormatter=o,this.phoneFormatter=a,this.map={},this.map.int=n,this.map.float=n,this.map.date=r,this.map.datetime=o,this.map.currency=e,this.map.phone=a}toUserFormat(e,n,r){if(!e)return n;const o=this.map[e];return o?o.toUserFormat(n,r):n}toInternalFormat(e,n){if(!e)return n;const r=this.map[e];return r?r.toInternalFormat(n):n}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ad),t.\u0275\u0275inject(Co),t.\u0275\u0275inject(eo),t.\u0275\u0275inject(Fr),t.\u0275\u0275inject(ld))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),$l=(()=>{class i{constructor(e,n,r,o){this.typeFormatter=e,this.language=n,this.configs=r,this.preferences=o,this.valuePipes={},this.fieldPipes={},this.valuePipes.int=a=>this.valueTypeFormat("int",a),this.valuePipes.float=a=>this.valueTypeFormat("float",a),this.valuePipes.date=a=>this.valueTypeFormat("date",a),this.valuePipes.datetime=a=>this.valueTypeFormat("datetime",a),this.valuePipes.currency=a=>this.valueTypeFormat("currency",a),this.valuePipes.enum=(a,l=[])=>this.enumFormat(a,l),this.fieldPipes.int=a=>this.fieldTypeFormat("int",a),this.fieldPipes.float=a=>this.fieldTypeFormat("float",a),this.fieldPipes.date=a=>this.fieldTypeFormat("date",a),this.fieldPipes.datetime=a=>this.fieldTypeFormat("datetime",a),this.fieldPipes.currency=a=>this.fieldTypeFormat("currency",a),this.fieldPipes.phone=a=>this.fieldTypeFormat("phone",a),this.fieldPipes.enum=a=>this.enumFieldFormat(a),this.fieldPipes.dynamicenum=a=>this.enumFieldFormat(a),this.fieldPipes.multienum=a=>this.multiEnumFormat(a)}addValuePipe(e,n){this.valuePipes[e]=n}addFieldPipe(e,n){this.fieldPipes[e]=n}parse(e,n,r){if(!e)return e;const a=e.match(/({{[\s\S]+?}})/g);if(!a||a.length<1)return e;let l=e;const c=n&&n.module||"";return a.forEach(u=>{if(!l.includes(u))return;let d="",p=[],f="",m="context",g=[],h=""+u;h=h.replace("{{",""),h=h.replace("}}",""),h=h.trim();let _=h;if(h.includes("|")){const[M,y,...w]=h.split("|");if(d=y.trim(),y.trim().includes(":")){let[x,...C]=y.trim().split(":");d=x.trim(),p=C}h=M.trim(),_=M.trim()}h.includes(".")&&(g=h.split("."),m=g[0],h=g[1]);let b=n;if("fields"===m&&(b=r),"fields"===m){if(!b||!(h in b))return void(l=l.replace(u,f));const M=r[h];return M?g[2]&&"value"===g[2]&&M.type in this.fieldPipes?(f=this.fieldPipes[M.type](M),void(l=l.replace(u,f))):g[2]&&"label"===g[2]?(f=this.getFieldLabel(M.labelKey,c),void(l=l.replace(u,f))):(f=(0,je.Z)({fields:r},_,""),void(l=l.replace(u,f))):void(l=l.replace(u,""))}"config"!==m?"preferences"!==m?b&&h in b?(f=(0,je.Z)({context:n},_,""),d in this.valuePipes&&(f=this.valuePipes[d](f)),l=l.replace(u,f)):l=l.replace(u,f):l=this.parseObjectContext(h,l,u,d,p,M=>this.preferences.getUserPreference(M)):l=this.parseObjectContext(h,l,u,d,p,M=>this.configs.getConfigValue(M))}),l}valueTypeFormat(e,n){return this.typeFormatter.toUserFormat(e,n)}enumFormat(e,n){const r=n[0]??"";return r&&e?this.language.getListLabel(r,e):""}fieldTypeFormat(e,n){return this.typeFormatter.toUserFormat(e,n.value)}enumFieldFormat(e){return(0,S.isVoid)(e.definition.options)||(0,S.isVoid)(e.value)?"":this.language.getListLabel(e.definition.options,e.value)}multiEnumFormat(e){if((0,S.isVoid)(e.definition.options)||(0,S.isVoid)(e.valueList)||e.valueList.length<1)return"";const n=[];return e.valueList.forEach(r=>{(0,S.isVoid)(r)||n.push(this.language.getListLabel(e.definition.options,r))}),n.join(", ")}getFieldLabel(e,n=""){return(0,S.isVoid)(e)?"":this.language.getFieldLabel(e,n)}parseObjectContext(e,n,r,o,a,l){let c=e;if(e.includes(".")){let[d,...p]=e.split(".");c=d}let u=l(c);return e.includes(".")&&"object"==typeof u&&(u=(0,je.Z)({value:u},e,"")),u&&"object"!=typeof u?(o in this.valuePipes&&(u=this.valuePipes[o](u,a)),n.replace(r,u)):n.replace(r,"")}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(mt),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(ht),t.\u0275\u0275inject(Xt))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function D6(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"span",1),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.parsedLabel)}}let So=(()=>{class i{constructor(e,n){this.dynamicLabels=e,this.language=n,this.template="",this.labelKey="",this.context={},this.fields={},this.module=null,this.parsedLabel=""}ngOnInit(){this.vm$=this.language.vm$.pipe((0,v.tap)(()=>{this.labelKey&&(this.template=this.language.getFieldLabel(this.labelKey,this.module)),this.parseLabel()}))}ngOnChanges(e){(e.template||e.context||e.labelKey||e.fields)&&this.parseLabel()}parseLabel(){this.parsedLabel=this.dynamicLabels.parse(this.template,this.context,this.fields)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject($l),t.\u0275\u0275directiveInject(Ue))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-dynamic-label"]],inputs:{template:"template",labelKey:"labelKey",context:"context",fields:"fields",module:"module"},features:[t.\u0275\u0275NgOnChangesFeature],decls:2,vars:3,consts:[[4,"ngIf"],[1,"dynamic-label"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,D6,3,1,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[I.NgIf,I.AsyncPipe],encapsulation:2})}return i})(),zl=(()=>{class i{constructor(){this.klass=""}ngOnInit(){}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-inline-loading-spinner"]],inputs:{klass:"klass"},decls:4,vars:3,consts:[[1,"bounce1"],[1,"bounce2"],[1,"bounce3"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"div",0)(2,"div",1)(3,"div",2),t.\u0275\u0275elementEnd()),2&n&&t.\u0275\u0275classMapInterpolate1("inline-spinner ",r.klass,"")},styles:[".inline-spinner[_ngcontent-%COMP%]{text-align:center}.inline-spinner[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border-radius:100%;display:inline-block;animation:_ngcontent-%COMP%_sk-bouncedelay 1.4s infinite ease-in-out both}.inline-spinner[_ngcontent-%COMP%]   .bounce1[_ngcontent-%COMP%]{animation-delay:-.32s}.inline-spinner[_ngcontent-%COMP%]   .bounce2[_ngcontent-%COMP%]{animation-delay:-.16s}@keyframes _ngcontent-%COMP%_sk-bouncedelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}"]})}return i})();function x6(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-button-group",2),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("config$",e.config$)("klass",e.buttonGroupClass)}}function E6(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,x6,1,2,"scrm-button-group",1),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.config$)}}function I6(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",6),t.\u0275\u0275element(1,"scrm-label",7),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("labelKey",e.confirmationLabel)}}const F6=function(){return{}};function A6(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",6),t.\u0275\u0275element(1,"scrm-dynamic-label",8),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(3);let n,r;t.\u0275\u0275advance(1),t.\u0275\u0275property("labelKey",e.confirmationDynamicLabel)("module",null!==(n=null==e.actionContext?null:e.actionContext.module)&&void 0!==n?n:"")("fields",null!==(r=null==e.actionContext||null==e.actionContext.record?null:e.actionContext.record.fields)&&void 0!==r?r:t.\u0275\u0275pureFunction0(3,F6))}}function T6(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",9),t.\u0275\u0275element(1,"scrm-button",10),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.inlineCancelButton)}}function O6(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",9),t.\u0275\u0275element(1,"scrm-button",10),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.inlineConfirmButton)}}function L6(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",3),t.\u0275\u0275template(2,I6,2,1,"div",4),t.\u0275\u0275template(3,A6,2,4,"div",4),t.\u0275\u0275template(4,T6,2,1,"div",5),t.\u0275\u0275template(5,O6,2,1,"div",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.confirmationLabel),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.confirmationDynamicLabel&&!e.confirmationLabel),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.inlineCancelButton),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.inlineConfirmButton)}}function N6(i,s){1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-inline-loading-spinner",11),t.\u0275\u0275elementContainerEnd())}function R6(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div"),t.\u0275\u0275template(2,E6,2,1,"ng-container",0),t.\u0275\u0275template(3,L6,6,4,"ng-container",0),t.\u0275\u0275template(4,N6,2,0,"ng-container",0),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate1("",e.klass," float-right action-group-menu"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.inlineConfirmationEnabled&&!e.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.inlineConfirmationEnabled&&!e.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.loading)}}let Ar=(()=>{class i{constructor(e,n,r){this.languages=e,this.screenSize=n,this.systemConfigStore=r,this.klass="",this.buttonClass="btn btn-sm",this.buttonGroupClass="",this.actionLimitConfig="recordview_actions_limits",this.configState=new D.BehaviorSubject({buttons:[]}),this.config$=this.configState.asObservable(),this.inlineConfirmationEnabled=!1,this.confirmationLabel="",this.confirmationDynamicLabel="",this.inlineCancelButton=null,this.inlineConfirmButton=null,this.loading=!1,this.buttonGroupDropdownClass="dropdown-button-secondary",this.screen=ii.Medium,this.defaultBreakpoint=3}ngOnInit(){this.vm$=this.config?.getActions().pipe((0,D.combineLatestWith)(this.screenSize.screenSize$,this.languages.vm$),(0,v.map)(([e,n,r])=>(n&&(this.screen=n),this.configState.next(this.getButtonGroupConfig(e)),{actions:e,screenSize:n,languages:r})))}isXSmallScreen(){return this.screen===ii.XSmall}getButtonGroupConfig(e){const n=[],r=[];e.forEach(c=>{const u=this.buildButton(c);c.params&&c.params.expanded?n.push(u):r.push(u)});let a=e.length;!0===(this.config.collapseButtons??!0)&&(a=this.getBreakpoint(),n.length<a&&(a=n.length));const l=n.concat(r);return{buttonKlass:[this.buttonClass],dropdownLabel:this.languages.getAppString("LBL_ACTIONS")||"",breakpoint:a,dropdownOptions:{placement:["bottom-right"],wrapperKlass:[this.buttonGroupDropdownClass]},buttons:l}}getBreakpoint(){const e=this.systemConfigStore.getConfigValue(this.actionLimitConfig);return this.screen&&e&&e[this.screen]?(this.breakpoint=e[this.screen],this.breakpoint):this.breakpoint?this.breakpoint:this.defaultBreakpoint}buildButton(e){const n={label:e.label||"",labelModule:this?.actionContext?.module??"",labelKey:e.labelKey||"",klass:this.buttonClass,titleKey:e.titleKey||"",onClick:()=>{e?.params?.inlineConfirmation?(this.triggerTemporaryLoading(),this.initInlineConfirmation(e,()=>{this.config.runAction(e,this.actionContext)})):this.config.runAction(e,this.actionContext)}};n.label||(n.labelKey=e.labelKey??"");const r=e?.params?.debounceClick??null;return n.debounceClick=!0,(0,S.isFalse)(r)&&(n.debounceClick=!1),e.icon&&(n.icon=e.icon),e.status&&S.Button.appendClasses(n,[e.status]),e.klass&&S.Button.appendClasses(n,e.klass),n}triggerTemporaryLoading(){this.loading=!0;const e=parseInt(this.systemConfigStore.getUi("inline_confirmation_loading_delay"))??200;setTimeout(()=>{this.loading=!1},e)}initInlineConfirmation(e,n){const r=e?.params?.inlineConfirmationButtons?.cancel??{},o=e?.params?.inlineConfirmationButtons?.confirm??{};this.confirmationLabel=e?.params?.confirmationLabel??"",this.confirmationDynamicLabel=e?.params?.confirmationDynamicLabel??"",this.inlineCancelButton=this.buildInlineCancelButton(r),this.inlineConfirmButton=this.buildInlineConfirmButton(o,n),this.inlineConfirmationEnabled=!0}buildInlineCancelButton(e){const r={labelKey:"LBL_NO",klass:"btn btn-sm p-0 m-0 btn-link border-0 line-height-initial",debounceClick:!0,...e??{}};return r.onClick=()=>{this.triggerTemporaryLoading(),this.resetInlineConfirmation()},r}buildInlineConfirmButton(e,n){const o={labelKey:"LBL_YES",klass:"btn btn-sm p-0 m-0 btn-link border-0 line-height-initial",debounceClick:!0,...e??{}};return o.onClick=()=>{this.triggerTemporaryLoading(),n(),this.resetInlineConfirmation()},o}resetInlineConfirmation(){this.inlineConfirmationEnabled=!1,this.confirmationDynamicLabel="",this.confirmationLabel="",this.inlineConfirmButton=null,this.inlineCancelButton=null}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(li),t.\u0275\u0275directiveInject(ht))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-action-group-menu"]],inputs:{klass:"klass",buttonClass:"buttonClass",buttonGroupClass:"buttonGroupClass",actionContext:"actionContext",config:"config",actionLimitConfig:"actionLimitConfig"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"config$","klass",4,"ngIf"],[3,"config$","klass"],[1,"d-flex","align-items-start","justify-content-end","inline-confirmation"],["class","pl-1 inline-confirmation-label",4,"ngIf"],["class","pl-1 inline-confirmation-button",4,"ngIf"],[1,"pl-1","inline-confirmation-label"],[3,"labelKey"],[3,"labelKey","module","fields"],[1,"pl-1","inline-confirmation-button"],[3,"config"],["klass","inline-spinner-md"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,R6,5,6,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[I.NgIf,Un,yo,qt,So,zl,I.AsyncPipe],encapsulation:2})}return i})(),sn=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Ge.AngularSvgIconModule]})}return i})(),gb=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,sn,me.NgbModule]})}return i})(),Vt=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})(),Tr=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,me.NgbDropdownModule,sn,gb,Vt,me.NgbTooltipModule]})}return i})(),an=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,sn,Vt,me.NgbTooltipModule]})}return i})(),vb=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,an]})}return i})(),Or=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,an,Tr,vb]})}return i})(),Mo=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})(),wo=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})(),Lr=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,sn,an,Or,Vt,Mo,wo]})}return i})();function B6(i,s){1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-label",17),t.\u0275\u0275elementContainerEnd())}let cd=(()=>{class i{constructor(e){this.languageStore=e,this.subs=[],this.status=S.SelectionStatus.NONE,this.count=0,this.SelectionStatus=S.SelectionStatus}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe()),this.subs=[],this.count=0,this.status=S.SelectionStatus.NONE}ngOnInit(){this.subs=[],this.subs.push(this.selectionSource.getSelectionStatus().subscribe(e=>this.status=e)),this.subs.push(this.selectionSource.getSelectedCount().subscribe(e=>this.count=e)),this.subs.push(this.actionSource.getBulkActions().subscribe(e=>{const n={labelKey:"LBL_BULK_ACTION_BUTTON_LABEL",klass:["bulk-action-button","btn","btn-sm"],wrapperKlass:["bulk-action-group","float-left"],items:[]},r={labelKey:"LBL_ACTION",klass:["bulk-action-button","btn","btn-sm"],wrapperKlass:["bulk-action-group","float-left"],items:[]};Object.keys(e).forEach(o=>{const a=e[o];n.items.push({labelKey:a.labelKey??"",klass:[`${o}-bulk-action`],onClick:()=>{this.actionSource.executeBulkAction(a.key)}}),r.items.push({labelKey:a.labelKey??"",klass:[`${o}-bulk-action`],onClick:()=>{this.actionSource.executeBulkAction(a.key)}})}),this.dropdownConfig=n,this.dropdownSmallConfig=r}))}selectPage(){this.selectionSource.updateSelection(S.SelectionStatus.PAGE)}selectAll(){this.selectionSource.updateSelection(S.SelectionStatus.ALL)}deselectAll(){this.selectionSource.updateSelection(S.SelectionStatus.NONE)}toggleSelection(e){this.selectionSource.updateSelection(e!==S.SelectionStatus.ALL?S.SelectionStatus.ALL:S.SelectionStatus.NONE)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-bulk-action-menu"]],inputs:{selectionSource:"selectionSource",actionSource:"actionSource"},decls:18,vars:8,consts:[[1,"bulk-action","d-flex"],["ngbDropdown","",1,"dropdown","select-action-group"],["type","button","ngbDropdownToggle","","aria-haspopup","true","aria-expanded","false","aria-hidden","true","aria-label","Select Action Menu",1,"bulk-action-button","dropdown-toggle","btn","btn-sm"],[1,"checkbox-container"],["type","checkbox","aria-hidden","true",3,"checked","indeterminate","change"],[1,"checkmark"],[1,"bulk-action-selected-number"],[4,"ngIf"],["ngbDropdownMenu","","aria-hidden","true",1,"dropdown-menu"],[1,"dropdown-item","select-all",3,"click"],["labelKey","LBL_LISTVIEW_OPTION_ENTIRE"],[1,"dropdown-item","select-page",3,"click"],["labelKey","LBL_LISTVIEW_OPTION_CURRENT"],[1,"dropdown-item","deselect-all",3,"click"],["labelKey","LBL_LISTVIEW_NONE"],[1,"d-block","d-sm-none",3,"disabled","config"],[1,"d-none","d-sm-block",3,"disabled","config"],["labelKey","LBL_LISTVIEW_SELECTED_OBJECTS",1,"d-none","d-sm-inline"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"button",2)(3,"label",3)(4,"input",4),t.\u0275\u0275listener("change",function(){return r.toggleSelection(r.status)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(5,"span",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"span",6),t.\u0275\u0275template(7,B6,2,0,"ng-container",7),t.\u0275\u0275text(8),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"div",8)(10,"a",9),t.\u0275\u0275listener("click",function(){return r.selectAll()}),t.\u0275\u0275element(11,"scrm-label",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"a",11),t.\u0275\u0275listener("click",function(){return r.selectPage()}),t.\u0275\u0275element(13,"scrm-label",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"a",13),t.\u0275\u0275listener("click",function(){return r.deselectAll()}),t.\u0275\u0275element(15,"scrm-label",14),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275element(16,"scrm-dropdown-button",15)(17,"scrm-dropdown-button",16),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(4),t.\u0275\u0275property("checked","ALL"===r.status)("indeterminate","SOME"===r.status||"PAGE"===r.status),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",r.count>0),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",r.count>0?r.count:""," "),t.\u0275\u0275advance(8),t.\u0275\u0275property("disabled",r.count<1)("config",r.dropdownSmallConfig),t.\u0275\u0275advance(1),t.\u0275\u0275property("disabled",r.count<1)("config",r.dropdownConfig))},dependencies:[I.NgIf,me.NgbDropdown,me.NgbDropdownToggle,me.NgbDropdownMenu,Ul,qt],encapsulation:2})}return i})(),ud=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,me.NgbModule,Tr,Vt]})}return i})(),_b=(()=>{class i{constructor(){}addOnClickPartial(e,n){const r={...e};if(e&&"items"in r){const o=r.items;return r.items=[],o.forEach(a=>{r.items.push(this.addOnClickPartial(a,n))}),r}return r.onClick=r.onClick&&(0,ut.Z)(r.onClick,n),r}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Hl=(()=>{class i{constructor(e,n){this.elementRef=e,this.screenSize=n,this.height=300,this.view=(0,t.signal)([300,this.height]),this.subs=[]}onResize(){this.calculateView()}initResizeListener(){const e=(0,D.fromEvent)(window,"resize").pipe((0,v.tap)(()=>this.view.set([])),(0,v.debounceTime)(300));this.view.set([]),this.subs.push(e.pipe((0,v.debounceTime)(50)).subscribe(()=>{this.calculateView()}))}calculateView(){let e;const n=this.elementRef&&this.elementRef.nativeElement||{},r=n.parentElement&&n.parentElement.parentElement||{},o=r&&r.offsetWidth||0;o>0?e=o:(e=.7*window.innerWidth,window.innerWidth>990&&(e=.23*window.innerWidth)),this.view.set([e,this.height])}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(li))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],inputs:{dataSource:"dataSource"},decls:0,vars:0,template:function(n,r){},encapsulation:2})}return i})(),k6=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})();function j6(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",2),t.\u0275\u0275element(1,"scrm-label",3),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("labelKey",e.labelKey)}}let bs=(()=>{class i{constructor(e){this.language=e,this.labelKey=""}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-chart-message-area"]],inputs:{labelKey:"labelKey"},decls:2,vars:1,consts:[[1,"d-flex","mb-4","mt-4","justify-content-center"],["class","lead",4,"ngIf"],[1,"lead"],[3,"labelKey"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275template(1,j6,2,1,"div",1),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.labelKey))},dependencies:[I.NgIf,qt],encapsulation:2})}return i})(),Nr=(()=>{class i{constructor(){this.overlay=!1}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-loading-spinner"]],inputs:{overlay:"overlay"},decls:19,vars:2,consts:[[1,"loading-spinner"],[1,"sk-cube-grid"],[1,"sk-cube","sk-cube1","sk-cube-primary"],[1,"sk-cube","sk-cube2","sk-cube-secondary"],[1,"sk-cube","sk-cube3","sk-cube-secondary"],[1,"sk-cube","sk-cube4","sk-cube-primary"],[1,"sk-cube","sk-cube5","sk-cube-secondary"],[1,"sk-cube","sk-cube6","sk-cube-secondary"],[1,"sk-cube","sk-cube7","sk-cube-primary"],[1,"sk-cube","sk-cube8","sk-cube-primary"],[1,"sk-cube","sk-cube9","sk-cube-primary"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div")(1,"div",0)(2,"div",1),t.\u0275\u0275element(3,"div",2)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",8)(16,"div",8)(17,"div",9)(18,"div",10),t.\u0275\u0275elementEnd()()()),2&n&&t.\u0275\u0275classProp("overlay",r.overlay)},styles:[".sk-cube-grid[_ngcontent-%COMP%]{width:6.25em;height:6.25em}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube[_ngcontent-%COMP%]{width:25%;height:25%;float:left;animation:_ngcontent-%COMP%_sk-cubeGridScaleDelay 1.3s infinite ease-in-out}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube1[_ngcontent-%COMP%]{animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube2[_ngcontent-%COMP%]{animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube3[_ngcontent-%COMP%]{animation-delay:.4s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube4[_ngcontent-%COMP%]{animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube5[_ngcontent-%COMP%]{animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube6[_ngcontent-%COMP%]{animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube7[_ngcontent-%COMP%]{animation-delay:0s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube8[_ngcontent-%COMP%]{animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube9[_ngcontent-%COMP%]{animation-delay:.2s}@keyframes _ngcontent-%COMP%_sk-cubeGridScaleDelay{0%,70%,to{transform:scaleZ(1)}35%{transform:scale3D(0,0,1)}}"]})}return i})();function P6(i,s){1&i&&t.\u0275\u0275element(0,"scrm-chart-message-area",3)}function V6(i,s){if(1&i&&t.\u0275\u0275element(0,"ngx-charts-pie-grid",5),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("animations",!1)("view",e.view())("scheme",e.scheme)("minWidth",e.minWidth)("label",e.language.getFieldLabel(e.label))("results",e.results)}}function U6(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,V6,1,6,"ngx-charts-pie-grid",4),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.results&&e.results.length>0)}}function $6(i,s){1&i&&(t.\u0275\u0275elementStart(0,"div",6),t.\u0275\u0275element(1,"scrm-loading-spinner"),t.\u0275\u0275elementEnd()),2&i&&t.\u0275\u0275classProp("m-5",!0)}let yb=(()=>{class i extends Hl{constructor(e,n,r){super(n,r),this.language=e,this.elementRef=n,this.screenSize=r,this.height=700,this.minWidth=100}ngOnInit(){this.dataSource.options.height&&(this.height=this.dataSource.options.height),this?.dataSource?.options?.minWidth&&(this.minWidth=this.dataSource.options.minWidth),this.initResizeListener(),this.subs.push(this.dataSource.getResults().pipe((0,v.debounceTime)(500)).subscribe(e=>{this.parseResults(e),this.calculateHeightBasedOnResults(),this.calculateView()}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}get scheme(){return this.dataSource.options.scheme||"picnic"}get label(){return this.dataSource.options.label||""}onResize(){this.calculateHeightBasedOnResults(),this.calculateView()}calculateHeightBasedOnResults(){if(this.results&&this.results.length){const e=Math.floor(this.view()[0]/170);this.height=200*Math.floor(this.results.length/e)}else this.height=50}parseResults(e){this.results=[],e.singleSeries&&e.singleSeries.length&&e.singleSeries.forEach(n=>{const r=parseFloat(""+n.value);this.results.push(r?{name:n.name,value:r}:n)})}calculateView(){let e;const n=this.elementRef&&this.elementRef.nativeElement||{},r=n.parentElement&&n.parentElement.parentElement||{},o=r&&r.offsetWidth||0;o>0?e=o:(e=.7*window.innerWidth,window.innerWidth>990&&(e=.23*window.innerWidth)),this.view.set(e>239?[e,this.height]:[e,800])}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(li))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-pie-grid-chart"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:3,vars:3,consts:[["labelKey","LBL_NO_DATA",4,"ngIf"],[4,"ngIf"],["class","chart-loading",3,"m-5",4,"ngIf"],["labelKey","LBL_NO_DATA"],[3,"animations","view","scheme","minWidth","label","results",4,"ngIf"],[3,"animations","view","scheme","minWidth","label","results"],[1,"chart-loading"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,P6,1,0,"scrm-chart-message-area",0),t.\u0275\u0275template(1,U6,2,1,"ng-container",1),t.\u0275\u0275template(2,$6,2,2,"div",2)),2&n&&(t.\u0275\u0275property("ngIf",!r.results||!r.results.length||r.results.length<1),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.view().length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.view().length&&r.results&&r.results.length>0))},dependencies:[I.NgIf,Pe.PieGridComponent,bs,Nr],encapsulation:2})}return i})();function z6(i,s){1&i&&t.\u0275\u0275element(0,"scrm-chart-message-area",3)}function H6(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"div"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()),2&i){const e=s.model,n=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.name),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(n.formatTooltipValue(e.value))}}function W6(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"ngx-charts-bar-vertical",5),t.\u0275\u0275template(1,H6,4,2,"ng-template",null,6,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("animations",!1)("results",e.results)("view",e.view())("scheme",e.scheme)("gradient",e.gradient)("xAxis",e.xAxis)("yAxis",e.yAxis)("legend",e.legend)("legendPosition","below")("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.xAxisLabel)("yAxisLabel",e.yAxisLabel)("yAxisTickFormatting",e.yAxisTickFormatting)}}function K6(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,W6,3,14,"ngx-charts-bar-vertical",4),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.results&&e.results.length>0)}}function G6(i,s){1&i&&(t.\u0275\u0275elementStart(0,"div",7),t.\u0275\u0275element(1,"scrm-loading-spinner"),t.\u0275\u0275elementEnd()),2&i&&t.\u0275\u0275classProp("m-5",!0)}let bb=(()=>{class i extends Hl{constructor(e,n){super(e,n),this.elementRef=e,this.screenSize=n}ngOnInit(){this.dataSource.options.height&&(this.height=this.dataSource.options.height),this.initResizeListener(),this.subs.push(this.dataSource.getResults().pipe((0,v.debounceTime)(500)).subscribe(e=>{this.results=e.singleSeries,this.calculateView()}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}get scheme(){return this.dataSource.options.scheme||"picnic"}get gradient(){return this.dataSource.options.gradient||!1}get xAxis(){return this.dataSource.options.xAxis||!1}get yAxis(){return!(0,S.isFalse)(this.dataSource.options.yAxis)}get legend(){return!(0,S.isFalse)(this.dataSource.options.legend)}get showXAxisLabel(){return this.dataSource.options.showXAxisLabel||!1}get showYAxisLabel(){return this.dataSource.options.showYAxisLabel||!1}get xAxisLabel(){return this.dataSource.options.xAxisLabel||""}get yAxisLabel(){return this.dataSource.options.yAxisLabel||""}get yAxisTickFormatting(){return this.dataSource.options.yAxisTickFormatting?this.dataSource.tickFormatting:null}formatTooltipValue(e){return this.dataSource&&this.dataSource.tooltipFormatting?this.dataSource.tooltipFormatting(e):e}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(li))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-vertical-bar-chart"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:3,vars:3,consts:[["labelKey","LBL_NO_DATA",4,"ngIf"],[4,"ngIf"],["class","chart-loading",3,"m-5",4,"ngIf"],["labelKey","LBL_NO_DATA"],["class","vertical-bar-chart",3,"animations","results","view","scheme","gradient","xAxis","yAxis","legend","legendPosition","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting",4,"ngIf"],[1,"vertical-bar-chart",3,"animations","results","view","scheme","gradient","xAxis","yAxis","legend","legendPosition","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting"],["tooltipTemplate",""],[1,"chart-loading"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,z6,1,0,"scrm-chart-message-area",0),t.\u0275\u0275template(1,K6,2,1,"ng-container",1),t.\u0275\u0275template(2,G6,2,2,"div",2)),2&n&&(t.\u0275\u0275property("ngIf",!r.results||!r.results.length||r.results.length<1),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.view().length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.view().length&&r.results&&r.results.length>0))},dependencies:[I.NgIf,Pe.BarVerticalComponent,bs,Nr],encapsulation:2})}return i})(),Cs=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Vt]})}return i})(),Rr=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})(),Cb=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Pe.NgxChartsModule,Cs,Rr]})}return i})(),Sb=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Pe.NgxChartsModule,Cs,Rr]})}return i})();function Z6(i,s){1&i&&t.\u0275\u0275element(0,"scrm-chart-message-area",3)}function q6(i,s){if(1&i&&t.\u0275\u0275element(0,"ngx-charts-line-chart",5),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("animations",!1)("results",e.results)("view",e.view())("scheme",e.scheme)("gradient",e.gradient)("xAxis",e.xAxis)("yAxis",e.yAxis)("legend",e.legend)("xScaleMin",e.xScaleMin)("xScaleMax",e.xScaleMax)("xAxisTicks",e.xAxisTicks)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.xAxisLabel)("legendPosition","below")("autoScale",!0)("yAxisTickFormatting",e.yAxisTickFormatting)("xAxisTickFormatting",e.xAxisTickFormatting)("tooltipDisabled",e.tooltipDisabled)("yAxisLabel",e.yAxisLabel)}}function Q6(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,q6,1,20,"ngx-charts-line-chart",4),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.results&&e.results.length>0)}}function J6(i,s){1&i&&(t.\u0275\u0275elementStart(0,"div",6),t.\u0275\u0275element(1,"scrm-loading-spinner"),t.\u0275\u0275elementEnd()),2&i&&t.\u0275\u0275classProp("m-5",!0)}let Mb=(()=>{class i extends Hl{constructor(e,n){super(e,n),this.elementRef=e,this.screenSize=n}ngOnInit(){this.dataSource.options.height&&(this.height=this.dataSource.options.height),this.initResizeListener(),this.subs.push(this.dataSource.getResults().subscribe(e=>{this.results=e.multiSeries,this.calculateView()})),this.scheme=this.getScheme(),this.gradient=this.getGradient(),this.xAxis=this.getXAxis(),this.yAxis=this.getYAxis(),this.legend=this.getLegend(),this.xScaleMin=this.getXScaleMin(),this.xScaleMax=this.getXScaleMax(),this.xAxisTicks=this.getXAxisTicks(),this.showXAxisLabel=this.getShowXAxisLabel(),this.showYAxisLabel=this.getShowYAxisLabel(),this.xAxisLabel=this.getXAxisLabel(),this.yAxisLabel=this.getYAxisLabel(),this.yAxisTickFormatting=this.getYAxisTickFormatting(),this.xAxisTickFormatting=this.getXAxisTickFormatting(),this.tooltipDisabled=this.getTooltipDisabled()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getScheme(){return this.dataSource.options.scheme||"picnic"}getGradient(){return this.dataSource.options.gradient||!1}getXAxis(){return!(0,S.isFalse)(this.dataSource.options.xAxis)}getYAxis(){return!(0,S.isFalse)(this.dataSource.options.yAxis)}getLegend(){return!(0,S.isFalse)(this.dataSource.options.legend)}getXScaleMin(){return this.dataSource.options.xScaleMin||null}getXScaleMax(){return this.dataSource.options.xScaleMax||null}getXAxisTicks(){return this.dataSource.options.xAxisTicks||null}getShowXAxisLabel(){return!(0,S.isFalse)(this.dataSource.options.showXAxisLabel)}getShowYAxisLabel(){return this.dataSource.options.showYAxisLabel||!1}getXAxisLabel(){return this.dataSource.options.xAxisLabel||""}getYAxisLabel(){return this.dataSource.options.yAxisLabel||""}getYAxisTickFormatting(){return this.dataSource.options.yAxisTickFormatting&&this.dataSource.tickFormatting||null}getXAxisTickFormatting(){return this.dataSource.options.xAxisTickFormatting&&this.dataSource.tickFormatting||null}getTooltipDisabled(){return this.dataSource.options.tooltipDisabled||!1}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(li))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-line-chart"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:3,vars:3,consts:[["labelKey","LBL_NO_DATA",4,"ngIf"],[4,"ngIf"],["class","chart-loading",3,"m-5",4,"ngIf"],["labelKey","LBL_NO_DATA"],["class","line-chart",3,"animations","results","view","scheme","gradient","xAxis","yAxis","legend","xScaleMin","xScaleMax","xAxisTicks","showXAxisLabel","showYAxisLabel","xAxisLabel","legendPosition","autoScale","yAxisTickFormatting","xAxisTickFormatting","tooltipDisabled","yAxisLabel",4,"ngIf"],[1,"line-chart",3,"animations","results","view","scheme","gradient","xAxis","yAxis","legend","xScaleMin","xScaleMax","xAxisTicks","showXAxisLabel","showYAxisLabel","xAxisLabel","legendPosition","autoScale","yAxisTickFormatting","xAxisTickFormatting","tooltipDisabled","yAxisLabel"],[1,"chart-loading"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,Z6,1,0,"scrm-chart-message-area",0),t.\u0275\u0275template(1,Q6,2,1,"ng-container",1),t.\u0275\u0275template(2,J6,2,2,"div",2)),2&n&&(t.\u0275\u0275property("ngIf",!r.results||!r.results.length||r.results.length<1),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.view().length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.view().length&&r.results&&r.results.length>0))},dependencies:[I.NgIf,Pe.LineChartComponent,bs,Nr],encapsulation:2})}return i})(),wb=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Pe.NgxChartsModule,Cs,Rr]})}return i})();const Db=[wb,Sb,Cb],dd={"line-chart":Mb,"pie-grid":yb,"vertical-bar":bb};let xb=(()=>{class i extends S.BaseComponentRegistry{constructor(){super()}initDefault(){Object.keys(dd).forEach(e=>{this.register("default",e,dd[e])})}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Y6(i,s){1&i&&t.\u0275\u0275element(0,"scrm-chart-message-area",2)}const X6=function(i){return{dataSource:i}};function e9(i,s){if(1&i&&t.\u0275\u0275element(0,"ndc-dynamic",3),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ndcDynamicComponent",e.chartType)("ndcDynamicInputs",t.\u0275\u0275pureFunction1(2,X6,e.dataSource))}}let Eb=(()=>{class i{constructor(e){this.registry=e,this.dataSource=null}get chartType(){return this.registry.get("default",this.type)}ngOnInit(){}isConfigured(){return!!(this.type&&this.dataSource&&this.chartType)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(xb))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-chart"]],inputs:{dataSource:"dataSource",type:"type"},decls:2,vars:2,consts:[["labelKey","LBL_BAD_CONFIG",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],["labelKey","LBL_BAD_CONFIG"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,Y6,1,0,"scrm-chart-message-area",0),t.\u0275\u0275template(1,e9,1,4,"ndc-dynamic",1)),2&n&&(t.\u0275\u0275property("ngIf",!r.isConfigured()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.isConfigured()))},dependencies:[I.NgIf,Gt,$t,bs],encapsulation:2})}return i})(),Ib=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Db,vt,Cs]})}return i})();function t9(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"scrm-button",1)(1,"span",2),t.\u0275\u0275text(2,"\xd7"),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("config",e.getConfig())}}let pd=(()=>{class i{constructor(){this.buttonClasses=["close-button"]}getConfig(){const e=S.Button.fromButton(this.config);return e.addClasses(this.buttonClasses),e}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-close-button"]],inputs:{config:"config"},decls:1,vars:1,consts:[[3,"config",4,"ngIf"],[3,"config"],["aria-hidden","true"]],template:function(n,r){1&n&&t.\u0275\u0275template(0,t9,3,1,"scrm-button",0),2&n&&t.\u0275\u0275property("ngIf",r.config)},dependencies:[I.NgIf,Un],encapsulation:2})}return i})(),da=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,an]})}return i})();function n9(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-label",3),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("labelKey",e.titleKey)}}function i9(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-close-button",4),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("config",e.close)}}const r9=[[["","modal-body",""]],[["","modal-footer",""]]],o9=["[modal-body]","[modal-footer]"];let Ss=(()=>{class i{constructor(){this.klass="",this.headerKlass="",this.bodyKlass="",this.footerKlass="",this.titleKey="",this.closable=!1,this.close={klass:["btn","btn-outline-light","btn-sm"]}}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-modal"]],inputs:{klass:"klass",headerKlass:"headerKlass",bodyKlass:"bodyKlass",footerKlass:"footerKlass",titleKey:"titleKey",closable:"closable",close:"close"},ngContentSelectors:o9,decls:9,vars:13,consts:[[1,"modal-title"],[3,"labelKey",4,"ngIf"],[3,"config",4,"ngIf"],[3,"labelKey"],[3,"config"]],template:function(n,r){1&n&&(t.\u0275\u0275projectionDef(r9),t.\u0275\u0275elementStart(0,"div")(1,"div")(2,"div",0),t.\u0275\u0275template(3,n9,1,1,"scrm-label",1),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(4,i9,1,1,"scrm-close-button",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"div"),t.\u0275\u0275projection(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"div"),t.\u0275\u0275projection(8,1),t.\u0275\u0275elementEnd()()),2&n&&(t.\u0275\u0275classMap(r.klass),t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate1("modal-header ",r.headerKlass," d-flex align-items-center"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",r.titleKey),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.closable),t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate1("modal-body ",r.bodyKlass,""),t.\u0275\u0275advance(2),t.\u0275\u0275classMapInterpolate1("modal-footer ",r.footerKlass,""))},dependencies:[I.NgIf,pd,qt],encapsulation:2})}return i})();function s9(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",16),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.getColumnLabel(e.label)," ")}}function a9(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",17),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.getColumnLabel(e.label)," ")}}const Fb=function(i){return[i]};let Ab=(()=>{class i{constructor(e,n,r){this.appState=e,this.languageStore=n,this.modal=r,this.titleKey="LBL_COLUMN_SELECTOR_MODAL_TITLE"}drop(e){e.previousContainer===e.container?sm(e.container.data,e.previousIndex,e.currentIndex):function OD(i,s,e,n){const r=Ws(e,i.length-1),o=Ws(n,s.length);i.length&&s.splice(o,0,i.splice(r,1)[0])}(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex)}getHeaderLabel(){return this.languageStore.getFieldLabel("LBL_COLUMN_SELECTOR_MODAL_TITLE")}getColumnLabel(e){return this.languageStore.getFieldLabel(e,this.appState.getModule())}ngOnInit(){this.closeButtonIcon={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.modal.close({type:"close-button"})}},this.closeButton={klass:["btn","modal-button-cancel"],labelKey:"LBL_COLUMN_SELECTOR_CLOSE_BUTTON",onClick:()=>{this.modal.close({type:"close-button"})}},this.saveButton={klass:["btn","modal-button-save"],labelKey:"LBL_COLUMN_SELECTOR_SAVE_BUTTON",onClick:()=>{this.modal.close({type:"close-button",displayed:this.displayed,hidden:this.hidden})}}}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ht),t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(me.NgbActiveModal))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-columnchooser"]],inputs:{displayed:"displayed",hidden:"hidden"},decls:19,vars:16,consts:[["klass","column-chooser-modal",3,"closable","close","title","titleKey"],["modal-body",""],[1,"d-flex","bd-highlight"],[1,"p-2","flex-fill","bd-highlight","column-chooser-container"],[1,"column-chooser-title"],["labelKey","LBL_COLUMN_SELECTOR_DISPLAYED_COLS"],["cdkDropList","",1,"column-chooser-list",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["displayedList","cdkDropList"],["class","column-chooser-item column-displayed","cdkDrag","",4,"ngFor","ngForOf"],["labelKey","LBL_COLUMN_SELECTOR_HIDDEN_COLS"],["hiddenList","cdkDropList"],["class","column-chooser-item column-hidden","cdkDrag","",4,"ngFor","ngForOf"],["modal-footer",""],[1,"modal-buttons"],["data-dismiss","modal",3,"config"],[3,"config"],["cdkDrag","",1,"column-chooser-item","column-displayed"],["cdkDrag","",1,"column-chooser-item","column-hidden"]],template:function(n,r){if(1&n&&(t.\u0275\u0275elementStart(0,"scrm-modal",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),t.\u0275\u0275element(5,"scrm-label",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",6,7),t.\u0275\u0275listener("cdkDropListDropped",function(a){return r.drop(a)}),t.\u0275\u0275template(8,s9,2,1,"div",8),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"div",3)(10,"h2",4),t.\u0275\u0275element(11,"scrm-label",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"div",6,10),t.\u0275\u0275listener("cdkDropListDropped",function(a){return r.drop(a)}),t.\u0275\u0275template(14,a9,2,1,"div",11),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(15,"div",12)(16,"div",13),t.\u0275\u0275element(17,"scrm-button",14)(18,"scrm-button",15),t.\u0275\u0275elementEnd()()()),2&n){const o=t.\u0275\u0275reference(7),a=t.\u0275\u0275reference(13);t.\u0275\u0275property("closable",!0)("close",r.closeButtonIcon)("title",r.getHeaderLabel())("titleKey",r.titleKey),t.\u0275\u0275advance(6),t.\u0275\u0275property("cdkDropListData",r.displayed)("cdkDropListConnectedTo",t.\u0275\u0275pureFunction1(12,Fb,a)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",r.displayed),t.\u0275\u0275advance(4),t.\u0275\u0275property("cdkDropListData",r.hidden)("cdkDropListConnectedTo",t.\u0275\u0275pureFunction1(14,Fb,o)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",r.hidden),t.\u0275\u0275advance(3),t.\u0275\u0275property("config",r.closeButton),t.\u0275\u0275advance(1),t.\u0275\u0275property("config",r.saveButton)}},dependencies:[I.NgForOf,gm,hm,Ss,qt,Un],encapsulation:2})}return i})(),Do=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Ge.AngularSvgIconModule,da,Vt,me.NgbModalModule]})}return i})(),Tb=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,vm,da,Do,Vt,an]})}return i})(),fd=(()=>{class i{constructor(e){this.breakpointObserver=e,this.special=!1,this.actions=!1,this.appendActions=!1,this.labelDisplay="top",this.labelClass={},this.inputClass={},this.rowClass={},this.colClass={},this.colAlignItems="",this.sizeMap={handset:1,tablet:2,web:3,wide:4},this.baseColClass={col:!0,"form-group":!0,"m-1":!0},this.baseRowClass={"form-row":!0,"align-items-center":!0},this.baseLabelClass={"col-form-label-sm":!0,"mb-0":!0},this.baseInputClass={"form-control":!0,"form-control-sm":!0},this.currentSize="web",this.subscriptions=[]}ngOnInit(){this.initScreenSizeObserver(this.breakpointObserver),this.buildGrid(),this.colClass={...this.colClass,...this.baseColClass},this.rowClass={...this.baseRowClass,...this.rowClass},this.labelClass={...this.labelClass,...this.baseLabelClass},this.inputClass={...this.inputClass,...this.baseInputClass}}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}get colNumber(){const e=this.sizeMap[this.currentSize];return this.maxColumns&&e>this.maxColumns?this.maxColumns:e}addSpecialSlots(e){if(!e||0===e.length)return;const n=this.getNeededExtraSlots();if(0!==n.length)if(1===this.colNumber)n.reverse().forEach(r=>{const o={cols:[]};this.fillRow(o),e.push(o),o.cols[0][r]=!0});else if(!0===this.appendActions){const r=e[e.length-1],o=this.colNumber-1;n.forEach(a=>{r.cols[o][a]=!0})}else{let o=e[e.length-1];o.cols[this.colNumber-n.length].field&&(o={cols:[]},this.fillRow(o),e.push(o));let a=this.colNumber-1;n.forEach(l=>{o.cols[a][l]=!0,a--})}}getNeededExtraSlots(){const e=[];return this.actions&&e.push("actionSlot"),this.special&&e.push("specialSlot"),e}fillRow(e){for(let r=e.cols.length;r<this.colNumber;r++)e.cols.push({field:{type:"",display:"none"}})}initScreenSizeObserver(e){this.subscriptions.push(e.observe(["(max-width: 599.98px) and (orientation: portrait)"]).subscribe(n=>{n.matches&&(this.currentSize="handset",this.buildGrid())})),this.subscriptions.push(e.observe(["(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)"]).subscribe(n=>{n.matches&&(this.currentSize="tablet",this.buildGrid())})),this.subscriptions.push(e.observe(["(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)","(min-width: 840px) and (orientation: portrait)","(min-width: 1280px) and (orientation: landscape)"]).subscribe(n=>{n.matches&&(this.currentSize="web",this.buildGrid())})),this.subscriptions.push(e.observe(["(min-width: 1920px)"]).subscribe(n=>{n.matches&&(this.currentSize="wide",this.buildGrid())}))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(z))};static#t=this.\u0275dir=t.\u0275\u0275defineDirective({type:i,inputs:{special:"special",actions:"actions",appendActions:"appendActions",labelDisplay:"labelDisplay",labelClass:"labelClass",inputClass:"inputClass",rowClass:"rowClass",colClass:"colClass",colAlignItems:"colAlignItems",maxColumns:"maxColumns",sizeMap:"sizeMap"}})}return i})(),Ci=(()=>{class i{constructor(){this.actions={edit:{},create:{},list:{},detail:{},massupdate:{},filter:{}}}run(e,n,r){!this.actions||!this.actions[n]||!this.actions[n][e.key]||this.actions[n][e.key].run(r,e)}getHandler(e,n){let r=e.key;return e&&e.asyncProcess&&(r="async-process"),this.actions&&this.actions[n]&&this.actions[n][r]?this.actions[n][r]:null}addHandler(e,n,r){this.actions[n]||(this.actions[n]={}),this.actions[n][e.key]=r}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class fr extends S.ActionHandler{shouldDisplay(s){return!0}getTriggeringStatus(){return["onValueChange"]}}class xo{}let Ob=(()=>{class i extends xo{constructor(){super(),this.key="greater-than"}run(e,n,r){const o=r.field?e.fields[r.field].value:r.value;return Number(n.value)>Number(o)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Lb=(()=>{class i extends xo{constructor(){super(),this.key="less-than"}run(e,n,r){const o=r.field?e.fields[r.field].value:r.value;return Number(n.value)<Number(o)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Nb=(()=>{class i extends xo{constructor(){super(),this.key="not-empty"}run(e,n,r){return!(0,S.isEmptyString)(n.value)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Rb=(()=>{class i extends xo{constructor(){super(),this.key="is-empty"}run(e,n,r){return!!(0,S.isEmptyString)(n.value)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Bb=(()=>{class i extends xo{constructor(){super(),this.key="is-equal"}run(e,n,r){const o=r.field?[e.fields[r.field].value]:(Array.isArray(r.values)?r.values:[r.value]).map(a=>a.toString());return!!o&&o.includes(n.value.toString())}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),kb=(()=>{class i extends xo{constructor(){super(),this.key="not-equal"}run(e,n,r){const o=r.field?[e.fields[r.field].value]:(Array.isArray(r.values)?r.values:[r.value]).map(a=>a.toString());return!!o&&!o.includes(n.value.toString())}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),md=(()=>{class i{constructor(e,n,r,o,a,l){this.greaterThanAction=e,this.lessThanAction=n,this.notEmptyAction=r,this.isEmptyAction=o,this.isEqualAction=a,this.notEqualAction=l}get(e){return{"greater-than":this.greaterThanAction,"less-than":this.lessThanAction,"not-empty":this.notEmptyAction,"is-empty":this.isEmptyAction,"is-equal":this.isEqualAction,"not-equal":this.notEqualAction}[e]}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ob),t.\u0275\u0275inject(Lb),t.\u0275\u0275inject(Nb),t.\u0275\u0275inject(Rb),t.\u0275\u0275inject(Bb),t.\u0275\u0275inject(kb))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),jb=(()=>{class i extends fr{constructor(e){super(),this.operatorManager=e,this.key="displayType",this.modes=["edit","detail","list","create","massupdate","filter"]}run(e,n){const r=e.record;if(!r||!e.field)return;const a=n.params&&n.params.activeOnFields||{},l=Object.keys(a),c=n.params&&n.params.activeOnAttributes||{},u=Object.keys(c);if(!l.length&&!u.length)return;const d=n.params&&n.params.targetDisplayType;if(!d)return;let p=this.isActive(l,r,a,u,c),f=e.field.defaultDisplay;p&&(f=d),e.field.display=f,(n.params&&n.params.resetOn||"none")===f&&(e.field.valueList&&e.field.valueList.length&&(e.field.valueList=[]),e.field.value&&(e.field.value=""))}isActive(e,n,r,o,a){let l=!1;return!l&&!(0,ie.isEmpty)(r)&&(l=this.areFieldsActive(e,n,r)),!l&&!(0,ie.isEmpty)(a)&&(l=this.areAttributesActive(o,n,a)),l}areAttributesActive(e,n,r){return e.some(o=>{const l=n.fields&&n.fields[o]||null,c=r[o]&&Object.keys(r[o]);if(l&&c&&c.length)return c.some(u=>{const d=r[o][u],p=l.attributes&&l.attributes[u];if(d&&d.length&&p)return this.isValueActive(n,p,d)})})}areFieldsActive(e,n,r){return e.every(o=>{const l=n.fields&&n.fields[o]||null,c=r[o];if(l&&c&&c.length)return this.isValueActive(n,l,c)})}isValueActive(e,n,r){let o=!1;if(n.valueList&&n.valueList.length)return n.valueList.some(c=>r.some(u=>{if(u===c)return o=!0,!0})),o;const a=Object.keys(e.fields);let l=[];return r.some(n.value?c=>{if((!c.field||a.includes(c.field))&&(c===n.value&&!c.operator&&(o=!0),c.operator)){const d=this.operatorManager.get(c.operator);l.push(d.run(e,n,c)),o=l.every(p=>p)}}:c=>{if(c.operator){if(c.field&&!a.includes(c.field))return;const d=this.operatorManager.get(c.operator);l.push(d.run(e,n,c)),o=l.every(p=>p)}}),o}getTriggeringStatus(){return["onValueChange","onFieldInitialize"]}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(md))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Pb=(()=>{class i extends fr{constructor(){super(),this.key="emailPrimarySelect",this.modes=["edit","create","massupdate"]}run(e,n){const o=e.field;if(!e.record||!o)return;const a=o.items;if(!o||!a||!a.length)return;const l=a.filter(p=>!(p&&p.attributes&&p.attributes.deleted));if(l&&1!==l.length)return;const c=l[0],u=c.fields&&c.fields["email-fields"]||{},d=u.attributes&&u.attributes.primary_address||null;d&&!(0,S.isTrue)(d.value)&&(d.value="true",d.formControl.setValue("true"),u.formControl.updateValueAndValidity({onlySelf:!0,emitEvent:!0}))}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Vb=i=>s=>i.isEmptyTrimmedInputValue(s.value)?{required:{required:!0,message:{labelKey:"LBL_VALIDATION_ERROR_REQUIRED",context:{value:s.value}}}}:null,Ub=i=>s=>i.isEmptyBooleanInputValue(s.value)?{required:{required:!0,message:{labelKey:"LBL_VALIDATION_ERROR_REQUIRED",context:{value:s.value}}}}:null;let hd=(()=>{class i{constructor(e){this.utils=e}applies(e,n){return!(!n||!n.fieldDefinition)&&(0,S.isTrue)(n.fieldDefinition.required)}getValidator(e){return"boolean"===e.type?[Ub(this.utils)]:[Vb(this.utils)]}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(bo))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Ms=(()=>{class i{constructor(e){this.operatorManager=e}isActive(e,n,r,o,a){let l=!0;return(0,ie.isEmpty)(r)||(l=this.areFieldsActive(e,n,r)),(0,ie.isEmpty)(a)||(l=l&&this.areAttributesActive(o,n,a)),l}areAttributesActive(e,n,r){return e.every(o=>{const l=n.fields&&n.fields[o]||null,c=r[o]&&Object.keys(r[o]);if(l&&c&&c.length)return c.some(u=>{const d=r[o][u],p=l.attributes&&l.attributes[u];if(d&&d.length&&p)return this.isValueActive(n,p,d)})})}areFieldsActive(e,n,r){return e.every(o=>{const l=n.fields&&n.fields[o]||null,c=r[o];return!(l&&c&&c.length)||this.isValueActive(n,l,c)})}isValueActive(e,n,r){let o=!1;if(n.valueList&&n.valueList.length)return n.valueList.some(c=>r.some(u=>{if(u===c)return o=!0,!0})),o;const a=Object.keys(e.fields);let l=[];return r.some(n.value?c=>{if((!c.field||a.includes(c.field))&&(c===n.value&&!c.operator&&(o=!0),c.operator)){const d=this.operatorManager.get(c.operator);l.push(d.run(e,n,c)),o=l.every(p=>p)}}:c=>{if(c.operator){if(c.field&&!a.includes(c.field))return;const d=this.operatorManager.get(c.operator);l.push(d.run(e,n,c)),o=l.every(p=>p)}}),o}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(md))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),$b=(()=>{class i extends fr{constructor(e,n){super(),this.requiredValidator=e,this.activeFieldsChecker=n,this.key="required",this.modes=["edit","create","massupdate","filter"]}run(e,n){const r=e.record,o=e.field;if(!r||!o)return;const a=n.params&&n.params.activeOnFields||{},l=Object.keys(a),c=n.params&&n.params.activeOnAttributes||{},u=Object.keys(c);if(!l.length&&!u.length)return;const d=this.activeFieldsChecker.isActive(l,r,a,u,c);let p=!1,f=[...e.field.validators||[]];d&&(p=!0,f=f.concat(this.requiredValidator.getValidator(o))),e.field.formControl.updateValueAndValidity({onlySelf:!0,emitEvent:!0}),r.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0}),e.field.definition.required=p,e.field.formControl.setValidators(f),e.field.formControl.updateValueAndValidity({onlySelf:!0,emitEvent:!0}),r.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}getTriggeringStatus(){return["onValueChange","onFieldInitialize"]}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(hd),t.\u0275\u0275inject(Ms))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),pa=(()=>{class i{constructor(e,n){this.config=e,this.preferences=n}getFieldCurrencyValue(e,n){const r=this.isBase(e),o=this.getCurrencyId(n);if(!r&&null!==o)return e.value;const a=parseFloat(e.value);if(!isFinite(a))return e.value;const l=this.getUserCurrency();return this.baseToCurrency(l.id,a).toString()}baseToCurrency(e,n){const r=this.getConversionRate(e);return isFinite(r)?this.round(xn(n,r)):n}currencyToBase(e,n){const r=this.getConversionRate(e);return isFinite(r)?this.round(Bi(n,r)):n}round(e){const n=this.getPrecision();return us(e,n)}getCurrencyId(e){return e?.fields?.currency_id?.value??null}isBase(e){return e?.metadata?.isBaseCurrency??!1}getCurrency(e){return this.config.getConfigValue("currencies")[e]??[]}getBaseCurrency(){return this.config.getConfigValue("currency")}getUserCurrency(){return this.preferences.getUserPreference("currency")}getPrecision(){const e=parseInt(this.preferences.getUserPreference("default_currency_significant_digits"));if(isFinite(e))return e;const n=parseInt(this.config.getConfigValue("default_currency_significant_digits"));return isFinite(n)?n:0}getConversionRate(e){const n=this.getCurrency(e);return parseFloat(n.conversion_rate)}getCode(e){return this.getCurrency(e).iso4217}getSymbol(e){return this.getCurrency(e).symbol}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ht),t.\u0275\u0275inject(Xt))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),zb=(()=>{class i extends fr{constructor(e){super(),this.currencyService=e,this.key="update-base-currency",this.modes=["edit","create","massupdate","filter"]}run(e,n){const r=e.record,o=e.field;if(!r||!o)return;const a=n.params.currencyIdField??"currency_id",l=n.params.currencyField??"amount",c=r?.fields[a]?.value??null;let u=parseFloat(r?.fields[l]?.value??null);if(!isFinite(u))return;null===c&&this.updateValue(o,u,r);const d=this.currencyService.currencyToBase(c,u);isFinite(d)&&this.updateValue(o,d,r)}updateValue(e,n,r){e.value=n.toString(),e.formControl.setValue(n.toString()),r.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(pa))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Hb=(()=>{class i extends fr{constructor(e){super(),this.currencyService=e,this.key="update-currency",this.modes=["edit","create","massupdate","filter"]}run(e,n){const r=e.record,o=e.field;if(!r||!o||o?.definition?.metadata?.isBaseCurrency)return;const l=n.params.currencyIdField??"currency_id",c=n.params.baseCurrencyField??"amount_usdollar",u=r?.fields[l]?.value??null;let d=parseFloat(o?.value??null),p=parseFloat(r?.fields[c]?.value??null);if(!isFinite(d)||!isFinite(p)||null===u)return;const f=this.currencyService.baseToCurrency(u,p);isFinite(f)&&this.updateValue(o,f,r)}updateValue(e,n,r){e.value=n.toString(),e.formControl.setValue(n.toString()),r.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(pa))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Wb=(()=>{class i extends fr{constructor(){super(),this.key="update-flex-relate-module",this.modes=["edit","create","massupdate","filter"]}run(e,n){const r=e.record,o=e.field;if(!r||!o)return;const a=o.definition.type_name??"";""!==a&&(r?.fields[a]?.value??"")!==(o?.definition?.module??"")&&(o.definition.module=r?.fields[a]?.value??"",this.updateValue(o,{},"",r))}updateValue(e,n,r,o){e.value=r,e.valueObject=n,e.formControl.setValue(r),o.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Kb=(()=>{class i extends fr{constructor(e){super(),this.activeFieldsChecker=e,this.key="updateValue",this.modes=["edit","detail","list","create","massupdate","filter"]}run(e,n){const r=e.record,o=e.field;if(!r||!o)return;const a=n.params&&n.params.activeOnFields||{},l=Object.keys(a),c=n.params&&n.params.activeOnAttributes||{},u=Object.keys(c);if(!l.length&&!u.length)return;const d=n.params&&n.params.targetValue;if(!d)return;const p=this.activeFieldsChecker.isActive(l,r,a,u,c);let f=e.field?.value;p&&(f=d),this.updateValue(o,f.toString(),r)}updateValue(e,n,r){e.value=n.toString(),e.formControl.setValue(n),r.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ms))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),dt=(()=>{class i{constructor(e){this.config=e,this.messages=[],this.timeout=3,this.messagesStage=new D.BehaviorSubject([]),this.messages$=this.messagesStage.asObservable(),this.initTimeOut()}updateState(e){this.messagesStage.next(this.messages=e)}removeMessages(){this.updateState([])}contains(e,n=!1){let r=!1;for(let o=0;o<this.messages.length;o++)if(this.isSame(e,this.messages[o])){if(r=!0,n){const a=[...this.messages];a.splice(o,1),this.updateState(a)}break}return r}addMessage(e){let n=-1;if(!this.contains(e)){const r=[...this.messages];n=r.push(e),(e.type===S.MessageTypes.success||e.type===S.MessageTypes.warning)&&setTimeout(()=>{this.contains(e,!0)},1e3*this.timeout),this.updateState(r)}return n}addPrimaryMessage(e){return this.addMessage({type:S.MessageTypes.primary,text:e})}addSecondaryMessage(e){return this.addMessage({type:S.MessageTypes.secondary,text:e})}addSuccessMessage(e){return this.addMessage({type:S.MessageTypes.success,text:e})}addSuccessMessageByKey(e){return this.addMessage({type:S.MessageTypes.success,labelKey:e})}addDangerMessage(e){return this.addMessage({type:S.MessageTypes.danger,text:e})}addDangerMessageByKey(e){return this.addMessage({type:S.MessageTypes.danger,labelKey:e})}addWarningMessage(e){return this.addMessage({type:S.MessageTypes.warning,text:e})}addWarningMessageByKey(e){return this.addMessage({type:S.MessageTypes.warning,labelKey:e})}addInfoMessage(e){return this.addMessage({type:S.MessageTypes.info,text:e})}addDarkMessage(e){return this.addMessage({type:S.MessageTypes.dark,text:e})}log(...e){console.log.apply(console,e)}error(...e){console.error.apply(console,e)}initTimeOut(){const e=this.config.getConfigValue("ui");if(e&&e.alert_timeout){const n=parseInt(e.alert_timeout,10);isNaN(n)||(this.timeout=n)}}isSame(e,n){let r="text";return e.labelKey&&(r="labelKey"),e[r]===n[r]}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ht))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class fa{}let Gb=(()=>{class i extends fa{constructor(e,n){super(),this.router=e,this.message=n,this.key="redirect"}run(e){if(!e||!e.route)return void this.message.addDangerMessageByKey("LBL_MISSING_HANDLER_DATA_ROUTE");const n={queryParams:{}};e.queryParams&&(n.queryParams=e.queryParams),this.router.navigate([e.route],n).then()}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ot.Router),t.\u0275\u0275inject(dt))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Zb=(()=>{class i extends fa{constructor(e){super(),this.message=e,this.key="export"}run(e){e&&e.url&&e.formData?this.download(e.url,e.formData):this.message.addDangerMessageByKey("LBL_MISSING_HANDLER_DATA_ROUTE")}download(e,n){const r=document.createElement("form");r.setAttribute("id","export-download"),r.setAttribute("method","post"),r.setAttribute("action",e),r.setAttribute("target","_self"),r.setAttribute("style","display: none;"),Object.keys(n).forEach(o=>{const a=document.createElement("input");a.setAttribute("name",o),a.setAttribute("value",n[o]),r.appendChild(a)}),document.body.appendChild(r),r.submit(),document.body.removeChild(r)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(dt))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),qb=(()=>{class i extends fa{constructor(){super(),this.key="noop"}run(e){}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class gd{constructor(){}init(s){this.iframe=s,this.initialSizeAdjustment(),this.addBodyResizeListener()}destroy(){this.observer&&this.observer.disconnect(),this.iframe=null,this.observer=null}initialSizeAdjustment(){setTimeout(this.onResize.bind(this),200)}addBodyResizeListener(){const s={document:this.iframe.contentWindow.document,element:this.iframe.contentWindow.document.body,height:this.iframe.contentWindow.document.body.scrollHeight,watched:[{getHeight:()=>{const e=s.document.getElementsByClassName("modal in"),n=e&&e[0],r=n&&n.firstElementChild;return r&&r.scrollHeight+200||-1}},{getHeight:()=>{const e=s.document.getElementById("bootstrap-container"),n=e&&e.scrollHeight+150||-1;return n>0?n:s.element.scrollHeight+50}}]};this.observer=(new vD.MutationObserverFactory).create(()=>{const e=[];s.watched.forEach(o=>{const a=o.getHeight();a>0&&e.push(a)}),e.sort((o,a)=>o-a);const n=e.pop(),r=this.calculateResizing(s.height,n);r.resized&&(s.height=r.height)}),this.observer.observe(this.iframe.contentWindow.document.body,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}calculateResizing(s,e){const n=window.innerHeight-50;return e<n&&(e=n),s===e?{resized:!1}:s<e-20||this.iframe.scrollHeight>e?(this.resizeIFrame(e),{resized:!0,height:e}):{resized:!1}}onResize(){this.calculateResizing(this.iframe.offsetHeight,this.iframe.contentWindow.document.body.scrollHeight+120)}resizeIFrame(s){this.iframe.style.height=s+1+"px"}}class vd{constructor(s,e=null,n=null,r=null){this.changeCallback=null,this.loadCallback=null,this.unLoadCallback=null,this.unloadListener=null,this.loadListener=null,this.iframe=s,this.changeCallback=e,this.loadCallback=n,this.unLoadCallback=r}init(){this.loadListener=this.loadHandler.bind(this),this.unloadListener=this.unloadHandler.bind(this),this.iframe.contentWindow.addEventListener("load",this.loadListener),this.iframe.contentWindow.removeEventListener("unload",this.unloadListener)}destroy(){const s=this.iframe&&this.iframe.contentWindow;s&&(s.removeEventListener("unload",this.unloadListener),s.removeEventListener("load",this.loadListener)),this.iframe=null,this.lastDispatched=null,this.changeCallback=null,this.loadCallback=null,this.unLoadCallback=null,this.loadListener=null,this.unloadListener=null}loadHandler(){this.loadCallback(),this.bindUnload()}bindUnload(){this.iframe.contentWindow.removeEventListener("unload",this.unloadListener),this.unloadListener=this.unloadHandler.bind(this),this.iframe.contentWindow.addEventListener("unload",this.unloadListener)}unloadHandler(){this.unLoadCallback(),setTimeout(this.triggerPageChange.bind(this),0)}triggerPageChange(){const s=this.iframe&&this.iframe.contentWindow&&this.iframe.contentWindow.location.href;s&&s!==this.lastDispatched&&(this.lastDispatched=s,this.changeCallback(s))}}const l9=["dataContainer"];let Qb=(()=>{class i{constructor(e,n){this.languageStore=e,this.activeModal=n,this.url="",this.titleKey="",this.asyncActionCallback=null,this.iframe=null}ngOnInit(){this.closeButton={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.activeModal.close({type:"close-button"})}}}ngAfterViewInit(){this.initIframe()}ngOnDestroy(){this.cleanObservers(),this.iframe=null;const e=this.wrapper;this.wrapper.firstChild&&e.removeChild(e.firstChild),e.innerHTML="<iframe></iframe>",this.wrapper=null}cleanObservers(){this.iframeResizeHandler&&(this.iframeResizeHandler.destroy(),this.iframeResizeHandler=null),this.iframePageChangeHandler&&(this.iframePageChangeHandler.destroy(),this.iframePageChangeHandler=null)}initIframe(){this.wrapper=this.dataContainer.nativeElement,this.wrapper.firstChild&&this.wrapper.removeChild(this.wrapper.firstChild);const e=document.createElement("iframe");e.src=this.url,this.wrapper.appendChild(e),this.iframe=e,this.iframe.style.display="block",this.initObservers()}initObservers(){this.iframePageChangeHandler=this.buildIframePageChangeObserver(),this.iframeResizeHandler=this.buildIframeResizeHandlerHandler(),this.iframePageChangeHandler&&this.iframePageChangeHandler.init()}onIFrameLoad(){this.iframe.contentWindow.document.body.style.overflow="hidden",null!==this.asyncActionCallback&&this.asyncActionCallback(this.iframe),this.iframeResizeHandler.init(this.iframe)}onIFrameUnload(){this.iframe.style.display="none",this.iframeResizeHandler.destroy()}buildIframePageChangeObserver(){return new vd(this.iframe,null,this.onIFrameLoad.bind(this),this.onIFrameUnload.bind(this))}buildIframeResizeHandlerHandler(){return new gd}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(me.NgbActiveModal))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-classic-modal"]],viewQuery:function(n,r){if(1&n&&t.\u0275\u0275viewQuery(l9,7),2&n){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.dataContainer=o.first)}},inputs:{url:"url",titleKey:"titleKey",asyncActionCallback:"asyncActionCallback"},decls:5,vars:3,consts:[["bodyKlass","m-0 small-font","footerKlass","border-0","klass","classic-view-modal",3,"closable","close","titleKey"],["modal-body",""],[1,"classic-view-container"],["dataContainer",""]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"scrm-modal",0)(1,"div",1)(2,"div",2,3),t.\u0275\u0275element(4,"iframe"),t.\u0275\u0275elementEnd()()()),2&n&&t.\u0275\u0275property("closable",!0)("close",r.closeButton)("titleKey",r.titleKey)},dependencies:[Ss],encapsulation:2,data:{animation:[(0,yt.trigger)("modalFade",[(0,yt.transition)("void <=> *",[(0,yt.animate)("800ms")])])]}})}return i})(),Jb=(()=>{class i extends fa{constructor(e,n,r){super(),this.router=e,this.modalService=n,this.message=r,this.key="audit"}run(e){e&&e.url?this.showClassicViewModal(e.url):this.message.addDangerMessageByKey("LBL_MISSING_HANDLER_DATA_ROUTE")}changeLogLegacyContentFormatter(e){if(!e)return;const n=e.contentDocument.getElementsByClassName("moduleTitle")[0];n&&(n.innerText="")}showClassicViewModal(e){const n=this.modalService.open(Qb,{size:"xl",centered:!0,scrollable:!0});n.componentInstance.titleKey="LBL_CHANGE_LOG",n.componentInstance.url=e,n.componentInstance.asyncActionCallback=this.changeLogLegacyContentFormatter.bind(this)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ot.Router),t.\u0275\u0275inject(me.NgbModal),t.\u0275\u0275inject(dt))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),nn=(()=>{class i{constructor(e,n,r,o,a,l,c){this.processService=e,this.appStateStore=n,this.message=r,this.redirectAction=o,this.exportAction=a,this.noopAction=l,this.changelogAction=c,this.actions={},this.registerHandler(o),this.registerHandler(a),this.registerHandler(l),this.registerHandler(c)}registerHandler(e){this.actions[e.key]=e}run(e,n,r=null){const o={...n};return this.appStateStore.updateLoading(e,!0),this.processService.submit(e,o).pipe((0,v.take)(1),(0,v.tap)(a=>{this.appStateStore.updateLoading(e,!1);let l="addSuccessMessageByKey";if("error"===a.status&&(l="addDangerMessageByKey"),a.messages&&a.messages.forEach(d=>{d&&this.message[l](d)}),"error"===a.status)return;const c=r||a.data&&a.data.handler||null;if(!c)return;const u=this.actions[c];u?u.run(a.data.params):this.message.addDangerMessageByKey("LBL_MISSING_HANDLER")}),(0,v.catchError)(a=>"Access Denied."===(a?.message??"")?(this.appStateStore.updateLoading(e,!1),(0,D.of)(null)):(this.message.addDangerMessageByKey("LBL_ACTION_ERROR"),this.appStateStore.updateLoading(e,!1),(0,D.of)(null))))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(qi),t.\u0275\u0275inject(Ht),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Gb),t.\u0275\u0275inject(Zb),t.\u0275\u0275inject(qb),t.\u0275\u0275inject(Jb))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ws=(()=>{class i{getKey(){return"base"}map(e){!e.fields||!Object.keys(e.fields).length||Object.keys(e.fields).forEach(n=>{const r=e.fields[n],o=r.type||"",a=r.definition.source||"",l=r.definition.rname||"name",c=r.definition.id_name||"";if("relate"!==o||"non-db"!==a||c!==n){if("relate"===o&&"non-db"===a&&""!==l&&r.valueObject){const u=e.attributes[n]||{};return u[l]=r.valueObject[l],u.id=r.valueObject.id,e.attributes[n]=u,void(e.attributes[c]=r.valueObject.id)}if(!r.valueObject)return r.items?(e.attributes[n]=[],void r.items.forEach(u=>{e.attributes[n].push({id:u.id,module:u.module,attributes:(0,S.deepClone)(u.attributes)})})):void(r.valueObjectArray?e.attributes[n]=r.valueObjectArray:r.valueList?e.attributes[n]=r.valueList:!r.vardefBased||!(0,ie.isNil)(r.value)&&""!==r.value?e.attributes[n]=r.value:(0,ie.isNil)(e.attributes[n])||delete e.attributes[n]);e.attributes[n]=r.valueObject}else e.attributes[n]=r.value})}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Yb=(()=>{class i extends fr{constructor(e,n,r,o,a,l){super(),this.asyncActionService=e,this.processService=n,this.messages=r,this.recordMappers=o,this.baseMapper=a,this.activeFieldsChecker=l,this.key="updateValueBackend",this.modes=["edit","detail","list","create","massupdate","filter"],o.register("default",a.getKey(),a)}run(e,n){const r=e.record,o=e.field;if(!r||!o)return;const a=n.params&&n.params.activeOnFields||{},l=Object.keys(a),c=n.params&&n.params.activeOnAttributes||{},u=Object.keys(c);if(!l.length&&!u.length)return;const d=n.params&&n.params.process;if(d&&this.activeFieldsChecker.isActive(l,r,a,u,c)){const f=d,m=this.getBaseRecord(r),g={action:f,module:r.module??"",record:m};o.loading=!0,this.processService.submit(f,g).pipe((0,v.take)(1)).subscribe(h=>{const _=h?.data?.value??null;o.loading=!1,null!==_?this.updateValue(o,_.toString(),r):this.messages.addDangerMessageByKey("ERR_FIELD_LOGIC_BACKEND_CALCULATION")},h=>{o.loading=!1,this.messages.addDangerMessageByKey("ERR_FIELD_LOGIC_BACKEND_CALCULATION")})}}getBaseRecord(e){return e?(this.mapRecordFields(e),(0,S.deepClone)({id:e.id,type:e.type,module:e.module,attributes:e.attributes,acls:e.acls})):null}mapRecordFields(e){const n=this.recordMappers.get(e.module);Object.keys(n).forEach(r=>{n[r].map(e)})}updateValue(e,n,r){e.value=n.toString(),e.formControl.setValue(n),r.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(nn),t.\u0275\u0275inject(qi),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(S.RecordMapperRegistry),t.\u0275\u0275inject(ws),t.\u0275\u0275inject(Ms))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Xb=(()=>{class i extends fr{constructor(e,n,r,o,a,l){super(),this.asyncActionService=e,this.processService=n,this.messages=r,this.recordMappers=o,this.baseMapper=a,this.activeFieldsChecker=l,this.key="displayTypeBackend",this.modes=["edit","detail","list","create","massupdate","filter"],o.register("default",a.getKey(),a)}run(e,n){const r=e.record,o=e.field;if(!r||!o)return;const a=n.params&&n.params.activeOnFields||{},l=Object.keys(a),c=n.params&&n.params.activeOnAttributes||{},u=Object.keys(c);if(!l.length&&!u.length)return;const d=n.params&&n.params.process;if(!d)return;const p=this.activeFieldsChecker.isActive(l,r,a,u,c);let f=e.field.defaultDisplay;if(p){const g=d,h=this.getBaseRecord(r),_={action:g,module:r.module??"",record:h};o.loading=!0,this.processService.submit(g,_).subscribe(b=>{const M=b?.data?.value??null;o.loading=!1,null!==M?(f=M,e.field.display=f):this.messages.addDangerMessageByKey("ERR_FIELD_LOGIC_BACKEND_CALCULATION")},b=>{o.loading=!1,this.messages.addDangerMessageByKey("ERR_FIELD_LOGIC_BACKEND_CALCULATION")})}(n.params&&n.params.resetOn||"none")===f&&(e.field.valueList&&e.field.valueList.length&&(e.field.valueList=[]),e.field.value&&(e.field.value=""))}getBaseRecord(e){return e?(this.mapRecordFields(e),(0,S.deepClone)({id:e.id,type:e.type,module:e.module,attributes:e.attributes,acls:e.acls})):null}mapRecordFields(e){const n=this.recordMappers.get(e.module);Object.keys(n).forEach(r=>{n[r].map(e)})}getTriggeringStatus(){return["onValueChange","onFieldInitialize"]}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(nn),t.\u0275\u0275inject(qi),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(S.RecordMapperRegistry),t.\u0275\u0275inject(ws),t.\u0275\u0275inject(Ms))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),wt=(()=>{class i extends Ci{constructor(e,n,r,o,a,l,c,u,d){super(),this.actions={edit:{},create:{},list:{},detail:{},massupdate:{},filter:{}},e.modes.forEach(p=>this.actions[p][e.key]=e),n.modes.forEach(p=>this.actions[p][n.key]=n),r.modes.forEach(p=>this.actions[p][r.key]=r),o.modes.forEach(p=>this.actions[p][o.key]=o),a.modes.forEach(p=>this.actions[p][a.key]=a),c.modes.forEach(p=>this.actions[p][c.key]=c),l.modes.forEach(p=>this.actions[p][l.key]=l),u.modes.forEach(p=>this.actions[p][u.key]=u),d.modes.forEach(p=>this.actions[p][d.key]=d)}runLogic(e,n,r,o=""){if(!e.logic)return;const a=Object.keys(e.logic).map(u=>e.logic[u]),l=this.parseModeActions(a,n,o),c={record:r,field:e,module:r.module};l.forEach(u=>{this.runAction(u,n,c)})}runAction(e,n,r=null){this.runFrontEndAction(e,n,r)}runFrontEndAction(e,n,r=null){const o=this.buildActionData(e,r);this.run(e,n,o)}getModuleName(e){return e.module}buildActionData(e,n){return{field:n.field,record:n&&n.record||null}}parseModeActions(e,n,r){if(!e)return[];const o={list:[],detail:[],edit:[],create:[],massupdate:[],filter:[]};e&&e.length&&e.forEach(c=>{!c.modes||!c.modes.length||c.modes.forEach(u=>{!o[u]&&!c.asyncProcess||o[u].push(c)})});const a=[],l=["onValueChange"];return o[n].forEach(c=>{const u=this?.actions[n][c.key]?.getTriggeringStatus()??null;r&&!(c?.triggeringStatus??u??l).includes(r)||a.push(c)}),a}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(jb),t.\u0275\u0275inject(Pb),t.\u0275\u0275inject($b),t.\u0275\u0275inject(zb),t.\u0275\u0275inject(Hb),t.\u0275\u0275inject(Kb),t.\u0275\u0275inject(Wb),t.\u0275\u0275inject(Yb),t.\u0275\u0275inject(Xb))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class e1 extends S.ActionHandler{shouldDisplay(s){return!0}}let t1=(()=>{class i extends e1{constructor(e){super(),this.activeFieldsChecker=e,this.key="displayType",this.modes=["edit","detail","list","create","massupdate","filter"]}run(e,n){const r=e.record;if(!r||!e.field)return!0;const a=n.params&&n.params.activeOnFields||{},l=Object.keys(a),c=n.params&&n.params.activeOnAttributes||{},u=Object.keys(c);return!l.length&&!u.length||this.activeFieldsChecker.isActive(l,r,a,u,c)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ms))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Dt=(()=>{class i extends Ci{constructor(e){super(),e.modes.forEach(n=>this.actions[n][e.key]=e)}runAll(e,n,r){let o="show";if(!e.displayLogic)return;const a=Object.values(e.displayLogic).filter(p=>{const f=p.modes??[];return!(!f.length||!f.includes(r))});if(!a||!a.length)return;let l=e.defaultDisplay??"show",c="none";"none"===l&&(c="show");const u={record:n,field:e,module:n.module};a.some(p=>{const f=this.buildActionData(p,u);return this.actions[r][p.key].run(f,p)})&&(l=c),o=l,"show"===l&&(o="show"),e.display=o}buildActionData(e,n){return{field:n.field,record:n&&n.record||null}}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(t1))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),_d=(()=>{class i{initDefaultValue(e,n){if(e.defaultValueInitialized)return;const r=e?.default??e?.definition?.default??null;!e.value&&r?(e.value=r,e?.formControl?.setValue(r),e.defaultValueInitialized=!0):null===e.value&&(e.value="")}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),c9=(()=>{class i extends _d{constructor(e,n){super(),this.processService=e,this.messages=n}initDefaultValue(e,n){if(e.defaultValueInitialized)return;let r=e?.default??e?.definition?.default??null,o=e?.definition?.display_default??null;if(!r&&!o)return void(e.defaultValueInitialized=!0);if("string"!=typeof r&&"string"!=typeof o)return;if(r&&"string"!=typeof r)return void super.initDefaultValue(e,n);const a="calculate-date-default",l={action:a,module:n.module??"",field:e.name,displayDefault:o};e.loading=!0,this.processService.submit(a,l).pipe((0,v.take)(1)).subscribe(c=>{const u=c?.data?.value??null;e.loading=!1,null!==u?(this.updateValue(e,u.toString(),n),e.defaultValueInitialized=!0):this.messages.addDangerMessageByKey("ERR_FIELD_LOGIC_BACKEND_CALCULATION")})}updateValue(e,n,r){e.value=n.toString(),e.formControl.setValue(n),r.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(qi),t.\u0275\u0275inject(dt))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),u9=(()=>{class i extends _d{initDefaultValue(e,n){if(e.defaultValueInitialized)return;let r=e?.default??e?.definition?.default??null;if(!r)return void(e.defaultValueInitialized=!0);if("string"!=typeof r)return;r=(0,ie.trimStart)(r,"^"),r=(0,ie.trimEnd)(r,"^");const o=r.split("^,^");r?(o&&o.length&&(e.valueList=o),e.defaultValueInitialized=!0):e.defaultValueInitialized=!0}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=t.\u0275\u0275getInheritedFactory(i)))(r||i)}}();static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),d9=(()=>{class i extends _d{static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=t.\u0275\u0275getInheritedFactory(i)))(r||i)}}();static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),n1=(()=>{class i extends S.BaseServiceRegistry{constructor(e,n,r){super(),this.defaultFieldHandler=e,this.dateFieldHandler=n,this.multienumFieldHandler=r,this.defaultMap={},this.defaultMap={default:e,date:n,multienum:r},this.initDefault()}initDefault(){Object.keys(this.getDefaultMap()).forEach(e=>{this.register("default",e,this.getDefaultMap()[e])})}getDefaultMap(){return this.defaultMap??{}}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(d9),t.\u0275\u0275inject(c9),t.\u0275\u0275inject(u9))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Mn=(()=>{class i{get mode(){return this._mode}set mode(e){this._mode=e,this.modeState.next(this._mode)}constructor(e,n,r){this.typeFormatter=e,this.logic=n,this.logicDisplay=r,this.originalMode="",this.klass=null,this._mode="",this.dependentFields={},this.dependentAttributes=[],this.subs=[],this.modeState=new D.BehaviorSubject(""),this.mode$=this.modeState.asObservable(),this.fieldHandlerRegistry=(0,t.inject)(n1)}ngOnInit(){this.baseInit(),this.originalMode||(this.originalMode=this.mode),(this?.field?.defaultValueModes??[]).includes(this.originalMode)&&this.fieldHandlerRegistry.get(this.record.module,this.field.type).initDefaultValue(this.field,this.record)}ngOnDestroy(){this.unsubscribeAll()}baseInit(){this.initDependencyHandlers()}initDependencyHandlers(){if(!this.record)return;const e=this.record.fields&&Object.keys(this.record.fields)||[];e.length>1&&(this.calculateDependentFields(e),this.field.previousValue=this.field.value,(this.dependentFields&&Object.keys(this.dependentFields).length||this.dependentAttributes.length)&&Object.keys(this.dependentFields).forEach(n=>{const r=this.record.fields[n]||null;if(!r)return;const o=this.dependentFields[n].type??[];o.includes("logic")&&this.logic.runLogic(r,this.mode,this.record,"onFieldInitialize"),o.includes("displayLogic")&&this.logicDisplay.runAll(r,this.record,this.mode)}),this.field.valueChanges$&&(this.dependentFields&&Object.keys(this.dependentFields).length||this.dependentAttributes.length)&&this.subs.push(this.field.valueChanges$.pipe((0,v.debounceTime)(500)).subscribe(n=>{Object.keys(this.dependentFields).forEach(r=>{const a=this.record.fields[r]||null;if(a&&this.field.previousValue!=n.value){const l=this.dependentFields[r].type??[];l.includes("logic")&&this.logic.runLogic(a,this.mode,this.record,"onValueChange"),l.includes("displayLogic")&&this.logicDisplay.runAll(a,this.record,this.mode)}}),this.field.previousValue=n.value,this.dependentAttributes.forEach(r=>{const o=this.record.fields[r.field]||{},a=o&&o.attributes&&o.attributes[r.attribute]||null;a&&this.logic.runLogic(a,this.mode,this.record,"onValueChange")})})))}calculateDependentFields(e){e.forEach(n=>{"field"!==this.field.source&&"groupField"!==this.field.source?"attribute"!==this.field.source||this.addAttributeDependency(n,this.dependentFields,this.dependentAttributes):this.addFieldDependency(n,this.dependentFields,this.dependentAttributes)})}addFieldDependency(e,n,r){const o=this.record.fields[e],a=this.field.name||this.field.definition.name||"";e!==a&&o&&(o.fieldDependencies&&this.isDependencyField(o.fieldDependencies)&&(n[e]=o.fieldDependencies[a]),(o.attributes&&Object.keys(o.attributes)||[]).forEach(c=>{const u=o.attributes[c];!u||!u.fieldDependencies||!u.fieldDependencies.length||this.isDependencyField(u.fieldDependencies)&&r.push({field:e,attribute:c,types:n[a].types??[]})}))}isDependencyField(e){return!!e[this.field.name||this.field.definition.name||""]}addAttributeDependency(e,n,r){const o=this.record.fields[e],a=this.field.name||this.field.definition.name||"";e!==a&&o&&(o.attributeDependencies&&o.attributeDependencies.length&&this.isDependencyAttribute(o.attributeDependencies)&&(n[a]=o.fieldDependencies[a]),(o.attributes&&Object.keys(o.attributes)||[]).forEach(c=>{const u=o.attributes[c];!u||!u.attributeDependencies||!u.attributeDependencies.length||this.isDependencyAttribute(u.attributeDependencies)&&r.push({field:e,attribute:c,types:(n[a]??{}).types??[]})}))}isDependencyAttribute(e){const n=this.field.parentKey||"",r=this.field.name||this.field.definition.name||"";return e.some(o=>n===o.field&&r===o.attribute)}subscribeValueChanges(){this.field&&this.field.formControl&&this.subs.push(this.field.formControl.valueChanges.subscribe(e=>{e=(0,S.isVoid)(e)?"":e.trim(),this.typeFormatter&&this.field.type&&(e=this.toInternalFormat(this.field.type,e)),this.setFieldValue(e)}))}toInternalFormat(e,n){return this.typeFormatter.toInternalFormat(e,n)}setFieldValue(e){this.field.value=e}setFormControlValue(e){this.field.formControl.markAsDirty(),!(0,ie.isEqual)(this.field.formControl.value,e)&&this.field.formControl.setValue(e)}unsubscribeAll(){this.subs.forEach(e=>e.unsubscribe())}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],inputs:{originalMode:"originalMode",field:"field",record:"record",parent:"parent",klass:"klass",mode:"mode"},decls:0,vars:0,template:function(n,r){},encapsulation:2})}return i})(),Wl=(()=>{class i extends Mn{constructor(e,n,r){super(e,n,r),this.typeFormatter=e,this.logic=n,this.logicDisplay=r}getTelLink(e){return e?"tel:"+this.getUnFormatted(e):null}getUnFormatted(e){return e?e.replace(/\s+/g,""):""}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-phone-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[[3,"href"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"a",0),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275property("href",r.getTelLink(r.field.value),t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(r.field.value))},encapsulation:2})}return i})(),to=(()=>{class i extends Mn{constructor(e,n,r,o){super(n,r,o),this.languages=e,this.typeFormatter=n,this.logic=r,this.logicDisplay=o,this.selectedValues=[],this.valueLabel="",this.options=[],this.subs=[],this.isDynamicEnum=!1}ngOnInit(){super.ngOnInit();const e=this?.field?.metadata?.options$??null;if(e)return void this.subs.push(this.field.metadata.options$.subscribe(r=>{this.buildProvidedOptions(r),this.initValue()}));const n=this?.field?.definition?.options??null;n&&this.subs.push(this.languages.vm$.subscribe(r=>{this.buildAppStringListOptions(r.appListStrings),this.initValue()})),!n&&!e&&this.initValue()}ngOnDestroy(){this.isDynamicEnum=!1,this.subs.forEach(e=>e.unsubscribe()),this.options=[],this.optionsMap={},this.selectedValues=[]}getInvalidClass(){return this.field.formControl&&this.field.formControl.invalid&&this.field.formControl.touched?"is-invalid":""}buildProvidedOptions(e){this.options=e,this.optionsMap={},e.forEach(n=>{this.optionsMap[n.value]=n.label})}buildAppStringListOptions(e){if(this.optionsMap={},this.addExtraOptions(),e&&this.field.definition.options&&e[this.field.definition.options]){const n=e[this.field.definition.options];this.options&&Object.keys(this.options)&&(this.optionsMap={...this.optionsMap,...n})}this.buildOptionsArray(e)}addExtraOptions(){(this.field.metadata&&this.field.metadata.extraOptions||[]).forEach(n=>{if((0,S.isVoid)(n.value))return;let r=n.label||"";n.labelKey&&(r=this.languages.getFieldLabel(n.labelKey)),this.optionsMap[n.value]=r})}buildOptionsArray(e){this.options=[],Object.keys(this.optionsMap).forEach(n=>{(0,S.isEmptyString)(this.optionsMap[n])&&!this.addEmptyStringOption()||this.options.push({value:n,label:this.optionsMap[n]})}),this.isDynamicEnum&&this.buildDynamicEnumOptions(e)}addEmptyStringOption(){return"multienum"!==this.field.type}initValue(){this.selectedValues=[],(this.field.criteria||"string"==typeof this.field.value&&this.optionsMap&&"string"==typeof this.optionsMap[this.field.value])&&this.initValueLabel()}initValueLabel(){const e=this.field.value||this.field.criteria?.target||void 0;void 0!==e&&(this.valueLabel=this.optionsMap[e],this.selectedValues.push({value:e,label:this.valueLabel}))}initEnumDefault(){if(!(0,S.isEmptyString)(this.record?.id))return void this.field?.formControl.setValue("");let e=this?.field?.default??this?.field?.definition?.default??null;"string"==typeof e&&(e=e.trim()),e?(this.selectedValues.push({value:e,label:this.optionsMap[e]}),this.initEnumDefaultFieldValues(e)):this.field.formControl.setValue("")}initEnumDefaultFieldValues(e){if("multienum"===this.field.type){const n=this.selectedValues.map(r=>r.value);this.field.valueList=n,this.field.formControl.setValue(n)}else this.field.value=e,this.field.formControl.setValue(e);this.field.formControl.markAsDirty()}checkAndInitAsDynamicEnum(){const e=this.field&&this.field.definition||{},r=e&&e.parentenum||"",o=this.record&&this.record.fields||null;if(e&&e.dynamic&&r&&o){this.isDynamicEnum=!0;const a=o[r];a&&this.subscribeToParentValueChanges(a)}}buildDynamicEnumOptions(e){const n=this.record.fields[this.field.definition.parentenum];if(n){const r=e[n.definition.options];if(r&&0!==Object.keys(r).length){this.mappedOptions=this.createParentChildOptionsMap(r,this.options);let o=[];"multienum"===n.definition.type?o=n.valueList:o.push(n.value),this.options=this.filterMatchingOptions(o),o&&o.length&&this.setValueToAvailableOption()}}}filterMatchingOptions(e){let n=[];return e&&e.length?(e.forEach(r=>{this.mappedOptions[r]&&(n=n.concat([...this.mappedOptions[r]]))}),n):[]}createParentChildOptionsMap(e,n){const r={};return Object.keys(e).forEach(o=>{r[o]=n.filter(a=>String(a.value).startsWith(o))}),r}subscribeToParentValueChanges(e){e.formControl&&this.subs.push(e.formControl.valueChanges.subscribe(n=>{"string"==typeof n&&(n=[n]),this.options=this.filterMatchingOptions(n),this.setValueToAvailableOption(),this.initValue()}))}setValueToAvailableOption(){if(!this?.options?.length)return this.field.value="",void this.field.formControl.setValue("");this.options.some(e=>e.value===this.field.value)||(this.field.value=this.options[0].value,this.field.formControl.setValue(this.options[0].value))}buildOptionFromValue(e){const n={value:"",label:""};if((0,ie.isNull)(e))return n;n.value=("string"!=typeof e?JSON.stringify(e):e).trim(),n.label=n.value;const r=this.optionsMap[n.value]??n.label;return(0,ie.isObject)(r)||(n.label=("string"!=typeof r?JSON.stringify(r):r).trim()),n}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}return i})(),Kl=(()=>{class i extends to{constructor(e,n,r,o){super(e,n,r,o),this.languages=e,this.typeFormatter=n,this.logic=r,this.logicDisplay=o}subscribeValueChanges(){}initValue(){const e=this.field.valueList;(0,S.isVoid)(e)||(0,ie.isEmpty)(e)||this.updateInternalState(e)}updateInternalState(e=[]){const n=(0,ie.isArray)(e)?e:[e];this.selectedValues=n.map(r=>this.buildOptionFromValue(r)),this.selectedValues=(0,ie.uniqBy)(this.selectedValues,"value"),this.syncSelectedValuesWithForm()}syncSelectedValuesWithForm(){const e=this.selectedValues.map(n=>n.value);return this.setFormControlValue(e),e}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}return i})();const p9=["multiSelect"];function f9(i,s){1&i&&t.\u0275\u0275element(0,"scrm-image",6)}function m9(i,s){1&i&&t.\u0275\u0275element(0,"scrm-image",7)}function h9(i,s){1&i&&t.\u0275\u0275element(0,"scrm-image",8)}let Ds=(()=>{class i extends Kl{constructor(e,n,r,o,a,l,c){super(e,n,r,o),this.languages=e,this.typeFormatter=n,this.logic=r,this.logicDisplay=o,this.screenSize=a,this.systemConfigStore=l,this.primengConfig=c,this.placeholderLabel="",this.selectedItemsLabel="",this.emptyFilterLabel="",this.maxSelectedLabels=20,this.selectAll=!1}ngOnInit(){this.field.valueList=[],this.field.criteria.values&&this.field.criteria.values.length>0&&(this.field.valueList=this.field.criteria.values);const e=this.systemConfigStore.getUi("multiselect_max_number");this.screenSize.screenSize$.pipe((0,v.take)(1)).subscribe(n=>{this.maxSelectedLabels=e[n]||this.maxSelectedLabels}),this.getTranslatedLabels(),super.ngOnInit(),this.primengConfig.ripple=!0}onAdd(){const e=this.selectedValues.map(n=>n.value);this.field.valueList=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty(),this.field.criteria.operator="=",this.field.criteria.values=e,this.calculateSelectAll()}onRemove(){let e=this.selectedValues.map(n=>n.value);e||(e=[]),this.field.valueList=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty(),this.field.criteria.operator="=",this.field.criteria.values=e,this.calculateSelectAll()}onClear(){this.selectedValues=[],this.multiSelect.filterValue="",this.onRemove()}onPanelShow(){this.multiSelect.filterInputChild.nativeElement.focus(),this.multiSelect.filterValue="",this.calculateSelectAll()}onFilter(){this.calculateSelectAll()}getPlaceholderLabel(){return this.languages.getAppString("LBL_SELECT_ITEM")||""}onSelectAll(e){this.selectAll=e.checked,this.selectAll?(this.selectedValues=this.multiSelect.visibleOptions()&&this.multiSelect.visibleOptions().length?this.multiSelect.visibleOptions():this.options,this.onAdd()):(this.selectedValues=[],this.onRemove())}getTranslatedLabels(){this.placeholderLabel=this.languages.getAppString("LBL_SELECT_ITEM")||"",this.selectedItemsLabel=this.languages.getAppString("LBL_ITEMS_SELECTED")||"",this.emptyFilterLabel=this.languages.getAppString("ERR_SEARCH_NO_RESULTS")||""}addEmptyStringOption(){return!1}calculateSelectAll(){const e=this?.multiSelect?.visibleOptions()??[],n=(this?.selectedValues??[]).map(r=>r.value);this.selectAll=!(!e.length||!n.length)&&!(e.length>n.length)&&e.every(r=>n.includes(r.value))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt),t.\u0275\u0275directiveInject(li),t.\u0275\u0275directiveInject(ht),t.\u0275\u0275directiveInject(Jr))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-multienum-filter"]],viewQuery:function(n,r){if(1&n&&t.\u0275\u0275viewQuery(p9,5),2&n){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.multiSelect=o.first)}},features:[t.\u0275\u0275InheritDefinitionFeature],decls:6,vars:14,consts:[[1,"d-flex","align-items-center"],[3,"options","ngModel","optionLabel","placeholder","selectedItemsLabel","emptyFilterMessage","maxSelectedLabels","styleClass","showToggleAll","selectAll","autoOptionFocus","autofocusFilter","showClear","focusOnHover","ngModelChange","onChange","onSelectAllChange","onRemove","onPanelShow","onFilter","onClear"],["multiSelect",""],["pTemplate","dropdownicon"],["pTemplate","filtericon"],["pTemplate","checkicon"],["image","down_carret"],["image","search"],["image","checkbox_cross"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",0)(1,"p-multiSelect",1,2),t.\u0275\u0275listener("ngModelChange",function(a){return r.selectedValues=a})("onChange",function(){return r.onAdd()})("onSelectAllChange",function(a){return r.onSelectAll(a)})("onRemove",function(){return r.onRemove()})("onPanelShow",function(){return r.onPanelShow()})("onFilter",function(){return r.onFilter()})("onClear",function(){return r.onClear()}),t.\u0275\u0275template(3,f9,1,0,"ng-template",3),t.\u0275\u0275template(4,m9,1,0,"ng-template",4),t.\u0275\u0275template(5,h9,1,0,"ng-template",5),t.\u0275\u0275elementEnd()()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("options",r.options)("ngModel",r.selectedValues)("optionLabel","label")("placeholder",r.placeholderLabel)("selectedItemsLabel","{0} "+r.selectedItemsLabel)("emptyFilterMessage",r.emptyFilterLabel)("maxSelectedLabels",r.maxSelectedLabels)("styleClass","w-100 "+r.getInvalidClass())("showToggleAll",!0)("selectAll",r.selectAll)("autoOptionFocus",!1)("autofocusFilter",!0)("showClear",!0)("focusOnHover",!0))},dependencies:[De.NgControlStatus,De.NgModel,ln,Ll,ki],encapsulation:2})}return i})(),Gl=(()=>{class i extends to{constructor(e,n,r,o){super(e,n,r,o),this.languages=e,this.typeFormatter=n,this.logic=r,this.logicDisplay=o}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-enum-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(n,r){1&n&&t.\u0275\u0275text(0),2&n&&t.\u0275\u0275textInterpolate1("\n",r.valueLabel,"\n")},encapsulation:2})}return i})(),r1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,De.FormsModule]})}return i})(),o1=(()=>{class i extends Mn{constructor(e,n,r){super(e,n,r),this.typeFormatter=e,this.logic=n,this.logicDisplay=r}getNameField(e,n){if(!e.value||!n.attributes)return;const r=e.value.split(" "),o=[];return r.forEach(a=>{n.attributes[a]&&o.push(n.attributes[a])}),o.join(" ")}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}return i})(),Zl=(()=>{class i extends o1{constructor(e,n,r){super(e,n,r),this.typeFormatter=e,this.logic=n,this.logicDisplay=r}ngOnInit(){super.ngOnInit(),this.data=this.getNameField(this.field,this.record)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-fullname-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(n,r){1&n&&t.\u0275\u0275text(0),2&n&&t.\u0275\u0275textInterpolate1("\n",r.data,"\n")},encapsulation:2})}return i})(),s1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})(),xs=(()=>{class i extends Mn{constructor(e,n,r){super(e,n,r),this.typeFormatter=e,this.logic=n,this.logicDisplay=r}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-varchar-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(n,r){1&n&&t.\u0275\u0275text(0),2&n&&t.\u0275\u0275textInterpolate1("\n",r.field.value,"\n")},encapsulation:2})}return i})(),Es=(()=>{class i extends Mn{constructor(e,n,r){super(e,n,r),this.typeFormatter=e,this.logic=n,this.logicDisplay=r}get target(){return this.field.metadata&&this.field.metadata.target?this.field.metadata.target:"_blank"}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-url-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[3,"target","href"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"a",0),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275propertyInterpolate("href",r.field.value,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275property("target",r.target),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(r.field.value))},encapsulation:2})}return i})(),ma=(()=>{class i extends Mn{constructor(e,n,r,o){super(n,r,o),this.formatter=e,this.typeFormatter=n,this.logic=r,this.logicDisplay=o,this.vm$=this.formatter.format$}getDateFormat(){return this.field.metadata.date_time_format?this.field.metadata.date_time_format:this.formatter.getDateFormat()}getDateTimeFormat(){return this.formatter.getDateTimeFormat()}toInternalFormat(e,n){return this.formatter.toInternalFormat(n,{fromFormat:this.getDateTimeFormat()})}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Fr),t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}return i})(),yd=(()=>{class i extends ma{constructor(e,n,r,o){super(e,n,r,o),this.formatter=e,this.typeFormatter=n,this.logic=r,this.logicDisplay=o}toInternalFormat(e,n){return this.formatter.toInternalFormat(n,{fromFormat:this.getDateFormat()})}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Fr),t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}return i})();function g9(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"date"),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind2(2,1,e.field.value,e.getDateFormat()),"\n")}}let ql=(()=>{class i extends yd{constructor(e,n,r,o){super(e,n,r,o),this.formatter=e,this.typeFormatter=n,this.logic=r,this.logicDisplay=o}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(eo),t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-date-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,g9,3,4,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[I.NgIf,I.AsyncPipe,I.DatePipe],encapsulation:2})}return i})(),a1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})(),l1=(()=>{class i{constructor(e){this.formatter=e}transform(e,n=null){return this.formatter.toUserFormat(e,n)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(ad,16))};static#t=this.\u0275pipe=t.\u0275\u0275definePipe({name:"formatCurrency",type:i,pure:!0})}return i})(),c1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})(),Ql=(()=>{class i extends Mn{constructor(e,n,r,o,a){super(r,o,a),this.userPreferences=e,this.systemConfig=n,this.typeFormatter=r,this.logic=o,this.logicDisplay=a,this.preferences$=this.userPreferences.userPreferences$,this.configs$=this.systemConfig.configs$,this.vm$=this.configs$.pipe((0,D.combineLatestWith)(this.preferences$),(0,v.map)(([l,c])=>({configs:l,preferences:c})))}get format(){return!this.field.metadata||!1!==this.field.metadata.format}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Xt),t.\u0275\u0275directiveInject(ht),t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}return i})();function v9(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"formatCurrency"),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind2(2,1,e.getCurrencyValue(),e.getOptions()),"\n")}}let Jl=(()=>{class i extends Ql{constructor(e,n,r,o,a,l){super(e,n,r,o,l),this.userPreferences=e,this.systemConfig=n,this.typeFormatter=r,this.logic=o,this.currencyService=a,this.logicDisplay=l}getOptions(){let e={};this.field&&this.field.metadata&&null!==this.field.metadata.digits&&isFinite(this.field.metadata.digits)&&(e={digits:this.field.metadata.digits});const n=this.currencyService.isBase(this.field);let r=this.currencyService.getCurrencyId(this.record);return(n||null===r)&&(r=this.currencyService.getUserCurrency().id),e.symbol=this.currencyService.getSymbol(r),e.code=this.currencyService.getCode(r),e}getCurrencyValue(){return this.currencyService.getFieldCurrencyValue(this.field,this.record)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Xt),t.\u0275\u0275directiveInject(ht),t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(pa),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-currency-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,v9,3,4,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[I.NgIf,I.AsyncPipe,l1],encapsulation:2})}return i})(),u1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,c1]})}return i})(),bd=(()=>{class i extends Mn{constructor(e,n,r){super(e,n,r),this.typeFormatter=e,this.logic=n,this.logicDisplay=r}get rows(){return this.field.metadata&&this.field.metadata.rows?this.field.metadata.rows:6}get cols(){return this.field.metadata&&this.field.metadata.cols?this.field.metadata.cols:20}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-text-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[["readonly","",1,"detail-pre-styling"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"pre",0),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(r.field.value))},encapsulation:2})}return i})(),Cd=(()=>{class i extends Mn{constructor(e,n,r){super(e,n,r),this.typeFormatter=e,this.logic=n,this.logicDisplay=r}ngOnInit(){super.ngOnInit(),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-varchar-edit"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:5,consts:[["type","text",3,"formControl","value","ngClass"]],template:function(n,r){1&n&&t.\u0275\u0275element(0,"input",0),2&n&&(t.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),t.\u0275\u0275property("formControl",r.field.formControl)("value",r.field.value)("ngClass",r.klass))},dependencies:[I.NgClass,De.DefaultValueAccessor,De.NgControlStatus,De.FormControlDirective],encapsulation:2})}return i})();class mr{constructor(s){this.hourStep=1,this.minuteStep=15,this.secondStep=30,this.displaySeconds=!1,Object.assign(this,s)}static toDateTimeStruct(s,e){if(!e)return null;const n=s.userDateTimeFormatToStruct(e);if(!n)return null;const{date:r,time:o}=n;return new mr({date:r,time:o})}static internalToDateTimeStruct(s,e){if(!e)return null;const n=s.internalDateTimeFormatToStruct(e);if(!n)return null;const{date:r,time:o}=n;return new mr({date:r,time:o})}toUserFormat(s){const r=[[this.date.year,this.date.month,this.date.day].join("-"),[this.time.hour,this.time.minute,this.time.second].join(":")].join(" "),o=s.toInternalFormat(r,{fromFormat:"yyyy-M-d H:m:s"});return s.toUserFormat(o,{fromFormat:"yyyy-M-d H:m:s"})}}function _9(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"div")(2,"ngb-datepicker",5),t.\u0275\u0275listener("dateSelect",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.onDateChange(r))}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(3,"div",6)(4,"ngb-timepicker",7),t.\u0275\u0275listener("ngModelChange",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.onTimeChange(r))}),t.\u0275\u0275elementEnd()()()}if(2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",e.dateTimeModel.date)("startDate",e.dateTimeModel.date),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",e.dateTimeModel.time)("seconds",e.dateTimeModel.displaySeconds)("hourStep",e.dateTimeModel.hourStep)("minuteStep",e.dateTimeModel.minuteStep)("secondStep",e.dateTimeModel.secondStep)}}let Sd=(()=>{class i extends ma{constructor(e,n,r,o,a,l){super(e,n,a,l),this.formatter=e,this.typeFormatter=n,this.calendar=r,this.config=o,this.logic=a,this.logicDisplay=l,this.dateTimeModel=new mr,o.autoClose="outside",o.placement=this.getPlacement()}ngOnInit(){if((0,S.isVoid)(this.field.value)||(0,S.isEmptyString)(this.field.value))this.dateTimeModel.date=this.calendar.getToday(),this.dateTimeModel.time={hour:0,minute:0,second:0},this.field.formControl.setValue(null);else{if(this.dateTimeModel=mr.internalToDateTimeStruct(this.formatter,this.field.value),null===this.dateTimeModel)return void this.field.formControl.setValue(null);this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}this.formatter.getTimeFormat().includes("ss")&&(this.dateTimeModel.displaySeconds=!0),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}setFormValues(e){this.field.formControl.setValue(e),this.field.formControl.markAsDirty()}onDateChange(e){this.dateTimeModel.date=e,this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}onTimeChange(e){this.dateTimeModel.time=e,this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}onInputChange(e){const n=mr.toDateTimeStruct(this.formatter,e.target.value);n&&(this.dateTimeModel=n)}getOpenButton(){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",icon:"calendar"}}getPlacement(){return["bottom-right","top-right","bottom-left","top-left"]}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Fr),t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(me.NgbCalendar),t.\u0275\u0275directiveInject(me.NgbPopoverConfig),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-datetime-edit"]],viewQuery:function(n,r){if(1&n&&t.\u0275\u0275viewQuery(me.NgbPopover,7),2&n){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.popover=o.first)}},features:[t.\u0275\u0275InheritDefinitionFeature],decls:6,vars:8,consts:[[1,"input-group","mr-2"],[3,"ngClass","placeholder","formControl","ngbPopover","change"],[1,"input-group-append"],[3,"config","ngbPopover"],["calendarContent",""],["name","datepicker",3,"ngModel","startDate","dateSelect"],[1,"d-flex","justify-content-center","mt-auto"],["name","timepicker",3,"ngModel","seconds","hourStep","minuteStep","secondStep","ngModelChange"]],template:function(n,r){if(1&n&&(t.\u0275\u0275elementStart(0,"div",0)(1,"input",1),t.\u0275\u0275listener("change",function(a){return r.onInputChange(a)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275element(3,"scrm-button",3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(4,_9,5,7,"ng-template",null,4,t.\u0275\u0275templateRefExtractor)),2&n){const o=t.\u0275\u0275reference(5);t.\u0275\u0275advance(1),t.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),t.\u0275\u0275property("ngClass",r.klass)("placeholder",r.getDateTimeFormat().toLowerCase())("formControl",r.field.formControl)("ngbPopover",o),t.\u0275\u0275advance(2),t.\u0275\u0275property("config",r.getOpenButton())("ngbPopover",o)}},dependencies:[I.NgClass,De.DefaultValueAccessor,De.NgControlStatus,De.NgModel,me.NgbDatepicker,me.NgbTimepicker,Un,De.FormControlDirective,me.NgbPopover],encapsulation:2})}return i})(),d1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,De.FormsModule,me.NgbDatepickerModule,me.NgbTimepickerModule,sn,an,De.ReactiveFormsModule,me.NgbModule]})}return i})(),Md=(()=>{class i extends me.NgbDateParserFormatter{constructor(e){super(),this.formatter=e}getUserFormat(){return this.userFormat}setUserFormat(e){this.userFormat=e}parse(e){if(!e)return null;const n={fromFormat:"yyyy-M-d"};return this.userFormat&&(n.toFormat=this.userFormat),this.formatter.dateFormatToStruct(e,n.toFormat||this.formatter.getUserFormat())}format(e){if(!e)return null;const n=[e.year,e.month,e.day].join("-"),r={fromFormat:"yyyy-M-d"};return this.userFormat&&(r.toFormat=this.userFormat),this.formatter.toUserFormat(n,r)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(eo))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),wd=(()=>{class i extends me.NgbDateAdapter{constructor(e){super(),this.formatter=e}getUserFormat(){return this.userFormat}setUserFormat(e){this.userFormat=e}fromModel(e){return e?this.formatter.dateFormatToStruct(e,this.userFormat||""):null}toModel(e){if(!e)return null;const n=[e.year,e.month,e.day].join("-"),r={fromFormat:"yyyy-M-d"};return this.userFormat&&(r.toFormat=this.userFormat),this.formatter.toUserFormat(n,r)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(eo))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Yl=(()=>{class i extends yd{constructor(e,n,r,o,a,l){super(e,o,a,l),this.formatter=e,this.dateAdapter=n,this.dateParserFormatter=r,this.typeFormatter=o,this.logic=a,this.logicDisplay=l}ngOnInit(){(0,S.isVoid)(this.field.value)||(0,S.isEmptyString)(this.field.value)?this.field.formControl.setValue(null):this.field.formControl.setValue(this.formatter.toUserFormat(this.field.value,{toFormat:this.getDateFormat()})),this.dateAdapter.setUserFormat(this.getDateFormat()),this.dateParserFormatter.setUserFormat(this.getDateFormat()),this.dateModel=this.formatter.dateFormatToStruct(this.field.value,this.formatter.getInternalFormat()),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}setModel(e){this.field.value=this.formatter.toInternalFormat(e,{fromFormat:this.getDateFormat()}),this.dateModel=this.formatter.dateFormatToStruct(e,this.getDateFormat())}getOpenButton(e){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",onClick:()=>{e.toggle(),e.navigateTo(this.dateModel)},icon:"calendar"}}openDatePicker(e){e.toggle(),e.navigateTo(this.dateModel)}getPlacement(){return["bottom-left","bottom-right","top-left","top-right"]}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(eo),t.\u0275\u0275directiveInject(me.NgbDateAdapter),t.\u0275\u0275directiveInject(me.NgbDateParserFormatter),t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-date-edit"]],features:[t.\u0275\u0275ProvidersFeature([{provide:me.NgbDateAdapter,useClass:wd},{provide:me.NgbDateParserFormatter,useClass:Md}]),t.\u0275\u0275InheritDefinitionFeature],decls:5,vars:8,consts:[[1,"field-datetime-edit","input-group"],["ngbDatepicker","",3,"ngClass","placement","placeholder","formControl","startDate","ngModelChange","click"],["datepicker","ngbDatepicker"],[1,"input-group-append","align-items-end"],[3,"config"]],template:function(n,r){if(1&n){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",0)(1,"input",1,2),t.\u0275\u0275listener("ngModelChange",function(l){return r.setModel(l)})("click",function(){t.\u0275\u0275restoreView(o);const l=t.\u0275\u0275reference(2);return t.\u0275\u0275resetView(r.openDatePicker(l))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"span",3),t.\u0275\u0275element(4,"scrm-button",4),t.\u0275\u0275elementEnd()()}if(2&n){const o=t.\u0275\u0275reference(2);t.\u0275\u0275advance(1),t.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),t.\u0275\u0275property("ngClass",r.klass)("placement",r.getPlacement())("placeholder",r.getDateFormat().toLowerCase())("formControl",r.field.formControl)("startDate",r.dateModel),t.\u0275\u0275advance(3),t.\u0275\u0275property("config",r.getOpenButton(o))}},dependencies:[I.NgClass,De.DefaultValueAccessor,De.NgControlStatus,me.NgbInputDatepicker,Un,De.FormControlDirective],encapsulation:2})}return i})(),Xl=(()=>{class i extends Yl{constructor(e,n,r,o,a,l){super(e,n,r,o,a,l),this.formatter=e,this.dateAdapter=n,this.dateParserFormatter=r,this.typeFormatter=o,this.logic=a,this.logicDisplay=l}ngOnInit(){let e=null;this.field.criteria.values&&this.field.criteria.values.length>0&&(e=this.field.criteria.values[0]),!(0,S.isVoid)(e)&&!(0,S.isEmptyString)(e)&&(e=e.trim()),this.field.value=e??"",super.ngOnInit()}setFieldValue(e){super.setFieldValue(e),this.field.criteria.operator="=",this.field.criteria.values=[e]}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(eo),t.\u0275\u0275directiveInject(me.NgbDateAdapter),t.\u0275\u0275directiveInject(me.NgbDateParserFormatter),t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-date-filter"]],features:[t.\u0275\u0275ProvidersFeature([{provide:me.NgbDateAdapter,useClass:wd},{provide:me.NgbDateParserFormatter,useClass:Md}]),t.\u0275\u0275InheritDefinitionFeature],decls:5,vars:8,consts:[[1,"input-group"],["ngbDatepicker","",3,"ngClass","placement","placeholder","formControl","startDate","ngModelChange"],["datepicker","ngbDatepicker"],[1,"input-group-append","align-items-end"],[3,"config"]],template:function(n,r){if(1&n&&(t.\u0275\u0275elementStart(0,"div",0)(1,"input",1,2),t.\u0275\u0275listener("ngModelChange",function(a){return r.setModel(a)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"span",3),t.\u0275\u0275element(4,"scrm-button",4),t.\u0275\u0275elementEnd()()),2&n){const o=t.\u0275\u0275reference(2);t.\u0275\u0275advance(1),t.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),t.\u0275\u0275property("ngClass",r.klass)("placement",r.getPlacement())("placeholder",r.getDateFormat().toLowerCase())("formControl",r.field.formControl)("startDate",r.dateModel),t.\u0275\u0275advance(3),t.\u0275\u0275property("config",r.getOpenButton(o))}},dependencies:[I.NgClass,De.DefaultValueAccessor,De.NgControlStatus,me.NgbInputDatepicker,Un,De.FormControlDirective],encapsulation:2})}return i})();function y9(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"date"),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind3(2,1,e.toDateTime(e.field.value),e.getDateTimeFormat(),e.getUserTimeZone())," ")}}function b9(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,y9,3,5,"span",0),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.field.value)}}let ec=(()=>{class i extends ma{constructor(e,n,r,o){super(e,n,r,o),this.formatter=e,this.typeFormatter=n,this.logic=r,this.logicDisplay=o}getUserTimeZone(){return this.formatter.userTimeZone()}toDateTime(e){return this.formatter.toDateTime(e,this.formatter.getInternalFormat(),{zone:"GMT"}).toJSDate()}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Fr),t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-datetime-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,b9,2,1,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[I.NgIf,I.AsyncPipe,I.DatePipe],encapsulation:2})}return i})(),p1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})();function C9(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"div")(2,"ngb-datepicker",5),t.\u0275\u0275listener("dateSelect",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.onDateChange(r))}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(3,"div",6)(4,"ngb-timepicker",7),t.\u0275\u0275listener("ngModelChange",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.onTimeChange(r))}),t.\u0275\u0275elementEnd()()()}if(2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",e.dateTimeModel.date)("startDate",e.dateTimeModel.date),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",e.dateTimeModel.time)("seconds",e.dateTimeModel.displaySeconds)("hourStep",e.dateTimeModel.hourStep)("minuteStep",e.dateTimeModel.minuteStep)("secondStep",e.dateTimeModel.secondStep)}}let f1=(()=>{class i extends ma{constructor(e,n,r,o,a,l){super(e,n,a,l),this.formatter=e,this.typeFormatter=n,this.calendar=r,this.config=o,this.logic=a,this.logicDisplay=l,this.dateTimeModel=new mr,o.autoClose="outside",o.placement=this.getPlacement()}ngOnInit(){super.ngOnInit();let n="";if((this.field&&this.field.criteria&&this.field.criteria.values||[]).length>0&&(n=this.field.criteria.values[0]),(0,S.isEmptyString)(n))this.dateTimeModel.date=this.calendar.getToday(),this.dateTimeModel.time={hour:0,minute:0,second:0},this.field.formControl.setValue(null);else{if(this.dateTimeModel=mr.internalToDateTimeStruct(this.formatter,n),null===this.dateTimeModel)return void this.field.formControl.setValue(null);this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}this.formatter.getTimeFormat().includes("ss")&&(this.dateTimeModel.displaySeconds=!0),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}setFormValues(e){this.field.formControl.setValue(e),this.field.formControl.markAsDirty()}setFieldValue(e){this.field.value=e,this.field.criteria.operator="=",this.field.criteria.values=[e]}onDateChange(e){this.dateTimeModel.date=e,this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}onTimeChange(e){this.dateTimeModel.time=e,this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}onInputChange(e){const n=mr.toDateTimeStruct(this.formatter,e.target.value);n&&(this.dateTimeModel=n)}getOpenButton(){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",icon:"calendar"}}getPlacement(){return["bottom-right","top-right","bottom-left","top-left"]}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Fr),t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(me.NgbCalendar),t.\u0275\u0275directiveInject(me.NgbPopoverConfig),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-datetime-filter"]],viewQuery:function(n,r){if(1&n&&t.\u0275\u0275viewQuery(me.NgbPopover,7),2&n){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.popover=o.first)}},features:[t.\u0275\u0275InheritDefinitionFeature],decls:6,vars:7,consts:[[1,"input-group","mr-2"],[3,"ngClass","placeholder","formControl","change"],[1,"input-group-append"],[3,"config","ngbPopover"],["calendarContent",""],["name","datepicker",3,"ngModel","startDate","dateSelect"],[1,"d-flex","justify-content-center","mt-auto"],["name","timepicker",3,"ngModel","seconds","hourStep","minuteStep","secondStep","ngModelChange"]],template:function(n,r){if(1&n&&(t.\u0275\u0275elementStart(0,"div",0)(1,"input",1),t.\u0275\u0275listener("change",function(a){return r.onInputChange(a)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275element(3,"scrm-button",3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(4,C9,5,7,"ng-template",null,4,t.\u0275\u0275templateRefExtractor)),2&n){const o=t.\u0275\u0275reference(5);t.\u0275\u0275advance(1),t.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),t.\u0275\u0275property("ngClass",r.klass)("placeholder",r.getDateTimeFormat().toLowerCase())("formControl",r.field.formControl),t.\u0275\u0275advance(2),t.\u0275\u0275property("config",r.getOpenButton())("ngbPopover",o)}},dependencies:[I.NgClass,De.DefaultValueAccessor,De.NgControlStatus,De.NgModel,me.NgbDatepicker,me.NgbTimepicker,Un,De.FormControlDirective,me.NgbPopover],encapsulation:2})}return i})(),m1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,De.FormsModule,me.NgbDatepickerModule,me.NgbTimepickerModule,sn,an,De.ReactiveFormsModule,me.NgbModule]})}return i})();function S9(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"li"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.label)}}let tc=(()=>{class i extends Kl{constructor(e,n,r,o){super(e,n,r,o),this.languages=e,this.typeFormatter=n,this.logic=r,this.logicDisplay=o}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-multienum-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"ul"),t.\u0275\u0275template(1,S9,2,1,"li",0),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",r.selectedValues))},dependencies:[I.NgForOf],encapsulation:2})}return i})();const M9=["tag"];let Dd=(()=>{class i extends to{constructor(e,n,r,o){super(e,n,r,o),this.languages=e,this.typeFormatter=n,this.logic=r,this.logicDisplay=o}ngOnInit(){this.checkAndInitAsDynamicEnum(),super.ngOnInit()}onAdd(e){if(e&&e.value)return this.field.value=e.value,this.field.formControl.setValue(e.value),void this.field.formControl.markAsDirty();this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),this.selectedValues=[]}onRemove(){this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),setTimeout(()=>{this.tag.focus(!0,!0),this.tag.dropdown.show()},200)}getPlaceholderLabel(){return this.languages.getAppString("LBL_SELECT_ITEM")||""}selectFirstElement(){const e=this.tag.dropdown.items;if(0!==e.length){const n=e[0];this.selectedValues.push(n),this.onAdd(n),this.tag.dropdown.hide()}}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-enum-edit"]],viewQuery:function(n,r){if(1&n&&t.\u0275\u0275viewQuery(M9,5),2&n){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.tag=o.first)}},features:[t.\u0275\u0275InheritDefinitionFeature],decls:3,vars:15,consts:[["maxItems","1",3,"ngModel","onlyFromAutocomplete","clearOnBlur","displayBy","identifyBy","placeholder","secondaryPlaceholder","inputClass","ngModelChange","onAdd","onRemove","keyup.enter"],["tag",""],[3,"displayBy","identifyBy","showDropdownIfEmpty","keepOpen","autocompleteItems"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"tag-input",0,1),t.\u0275\u0275listener("ngModelChange",function(a){return r.selectedValues=a})("onAdd",function(a){return r.onAdd(a)})("onRemove",function(){return r.onRemove()})("keyup.enter",function(){return r.selectFirstElement()}),t.\u0275\u0275element(2,"tag-input-dropdown",2),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275classMap(r.getInvalidClass()),t.\u0275\u0275property("ngModel",r.selectedValues)("onlyFromAutocomplete",!0)("clearOnBlur",!0)("displayBy","label")("identifyBy","value")("placeholder",r.getPlaceholderLabel())("secondaryPlaceholder",r.getPlaceholderLabel())("inputClass",r.getInvalidClass()),t.\u0275\u0275advance(2),t.\u0275\u0275property("displayBy","label")("identifyBy","value")("showDropdownIfEmpty",!0)("keepOpen",!1)("autocompleteItems",r.options))},dependencies:[sa.TagInputComponent,sa.TagInputDropdown,De.NgControlStatus,De.NgModel],encapsulation:2})}return i})(),xd=(()=>{class i extends Mn{get checked(){return(0,S.isTrue)(this.field.value)}toggle(){let e="true";this.checked&&(e="false"),this.field.value=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty()}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=t.\u0275\u0275getInheritedFactory(i)))(r||i)}}();static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}return i})(),Is=(()=>{class i extends xd{constructor(e,n,r){super(e,n,r),this.typeFormatter=e,this.logic=n,this.logicDisplay=r}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-boolean-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:3,vars:1,consts:[[1,"checkbox-container"],["type","checkbox","disabled","","readonly","","aria-hidden","true",3,"checked"],[1,"checkmark"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"label",0),t.\u0275\u0275element(1,"input",1)(2,"span",2),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("checked",r.checked))},encapsulation:2})}return i})(),En=(()=>{class i{constructor(e){this.systemConfig=e}toFrontend(e){const n=this.getLegacyToFrontendMap();return n&&n[e]?n[e]:e}toLegacy(e){const n=this.getFrontendToLegacyMap();return n[e]?n[e]:e}isValid(e){let r=!1;return this.getFrontendToLegacyMap()[e]&&(r=!0),r}getLegacyToFrontendMap(){return this.systemConfig.getConfigValue("module_name_map")}getFrontendToLegacyMap(){const e=this.systemConfig.getConfigValue("module_name_map"),n={};return Object.keys(e).forEach(r=>{n[e[r]]=r}),n}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ht))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Eo=(()=>{class i{constructor(e){this.systemConfig=e}toFrontend(e){const n=this.getLegacyToFrontendMap();return n[e]?n[e]:e}toLegacy(e){const n=this.getFrontendToLegacyMap();return n[e]?n[e]:e}isValid(e){let r=!1;return this.getFrontendToLegacyMap()[e]&&(r=!0),r}getLegacyToFrontendMap(){return this.systemConfig.getConfigValue("action_name_map")}getFrontendToLegacyMap(){const e=this.systemConfig.getConfigValue("action_name_map"),n={};return Object.keys(e).forEach(r=>{n[e[r]]=r}),n}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ht))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const nc="./#";let In=(()=>{class i{constructor(e,n,r){this.router=e,this.moduleNameMapper=n,this.actionNameMapper=r}getModuleInfo(e,n){return n&&n.modules?n.modules[e]:null}getModuleLabel(e,n){if(!n||!n.moduleList||!e)return"";const r=e&&e.labelKey||"";return n.moduleList[r]||r}getModuleRoute(e){let n=e&&e.defaultRoute||"",r=null;return n.startsWith(nc)&&(r=n.replace(nc,""),n=null),{route:r,url:n,params:null}}navigate(e){const n=this.getActionRoute(e);return this.router.navigate([n.route],{queryParams:n.params})}navigateUsingMenuItem(e){e.link.route?this.router.navigate([e.link.route??""],{queryParams:e.link.params??{}}).then():e.link.url&&this.router.navigateByUrl(e.link.url??"").then()}getActionRoute(e){let n=e.url,r=null,o={},a=e?.process;if(n.startsWith(nc))if(r=n.replace(nc,""),n=null,e.params)o=e.params;else{const l=r.split("?");r=l[0];const c=l[1],u={};c&&c.split("&").forEach(d=>{const p=d.split("=");u[p[0]]=p[1]}),o=u}return{route:r,url:n,params:o,process:a}}getActionLabel(e,n,r,o=""){if(!(r&&r.modStrings&&n&&e))return"";let a=o;a||(a=n.labelKey);let l=r.modStrings[e]&&r.modStrings[e][a];return l||(l=r.appStrings&&r.appStrings[a]),!l&&n.module&&(l=r.modStrings[n.module]&&r.modStrings[n.module][a]),l||(l=r.modStrings.administration&&r.modStrings.administration[a]),l||""}getRecordRouterLink(e,n){return`/${e}/record/${n}`}navigateBack(e,n,r){let o=this.getReturnModule(r),a=this.getReturnAction(r);const l=this.getReturnId(r);let c="";o&&(c+="/"+o),a&&(c+="/"+a),l&&(c+="/"+l),o===n&&"record"===a&&(c="/"+n+"/record/"+(l||e.id)),!c&&e&&e.id&&(c="/"+n+"/record/"+e.id),!c&&e&&e.id&&(c="/"+n),this.router.navigate([c]).then()}getReturnId(e){return e.return_id||""}getReturnAction(e){let n="";return e.return_action&&(n=this.actionNameMapper.toFrontend(e.return_action)),n}getReturnModule(e){let n="";return e.return_module&&(n=this.moduleNameMapper.toFrontend(e.return_module)),n}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ot.Router),t.\u0275\u0275inject(En),t.\u0275\u0275inject(Eo))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function w9(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"a",3),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275propertyInterpolate1("href","mailto:",e.field.value,"",t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.field.value)}}function D9(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"a",4),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.openEmail())}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.field.value)}}let ic=(()=>{class i extends Mn{constructor(e,n,r,o,a,l,c,u,d,p){super(e,n,r),this.typeFormatter=e,this.logic=n,this.logicDisplay=r,this.preferences=o,this.navigation=a,this.moduleNameMapper=l,this.actionNameMapper=c,this.appState=u,this.modalService=d,this.router=p}ngOnInit(){this.linkType=this.preferences.getUserPreference("email_link_type")||"mailto"}openEmail(){const e=this.actionNameMapper.toLegacy(this.appState.getView()),n=this.moduleNameMapper.toLegacy(this.parent.module),r=this.parent.id;let l;"ListView"!==e&&"index"!==e&&(l=r),this.router.navigate(["emails","compose"],{queryParams:{return_module:n,return_action:e,return_id:l,to_addrs_names:this.field.value,parent_type:n,parent_name:this.parent.attributes.name,parent_id:r}})}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt),t.\u0275\u0275directiveInject(Xt),t.\u0275\u0275directiveInject(In),t.\u0275\u0275directiveInject(En),t.\u0275\u0275directiveInject(Eo),t.\u0275\u0275directiveInject(Ht),t.\u0275\u0275directiveInject(me.NgbModal),t.\u0275\u0275directiveInject(Ot.Router))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-email-list"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"mailto-field"],[3,"href",4,"ngIf"],["class","clickable field-link",3,"click",4,"ngIf"],[3,"href"],[1,"clickable","field-link",3,"click"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275template(1,w9,2,2,"a",1),t.\u0275\u0275template(2,D9,2,1,"a",2),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","mailto"===r.linkType),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","sugar"===r.linkType))},dependencies:[I.NgIf],encapsulation:2})}return i})(),h1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})(),Ed=(()=>{class i extends Mn{constructor(e,n,r){super(e,n,r),this.typeFormatter=e,this.logic=n,this.logicDisplay=r}ngOnInit(){super.ngOnInit();let e="";this.field.criteria&&this.field.criteria.values&&this.field.criteria.values.length>0&&(e=this.field.criteria.values[0]),e=(0,S.isVoid)(e)?"":e.trim(),this.field.value=e;const n=this.typeFormatter.toUserFormat(this.field.type,e,{mode:"edit"});this.field.formControl.setValue(n),this.field.formControl.markAsDirty(),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}setFieldValue(e){this.field.value=e,this.field.criteria.operator="=",this.field.criteria.values=[e]}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-varchar-filter"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:5,consts:[["type","text",3,"formControl","value","ngClass"]],template:function(n,r){1&n&&t.\u0275\u0275element(0,"input",0),2&n&&(t.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),t.\u0275\u0275property("formControl",r.field.formControl)("value",r.field.value)("ngClass",r.klass))},dependencies:[I.NgClass,De.DefaultValueAccessor,De.NgControlStatus,De.FormControlDirective],encapsulation:2})}return i})(),g1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,sa.TagInputModule,De.FormsModule]})}return i})(),v1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,De.FormsModule]})}return i})(),_1=(()=>{class i{getDownloadEntrypointLink(e,n){return"./index.php"+this.buildQueryString({entryPoint:"download",id:e,type:n})}buildQueryString(e,n=[]){let r=new Yr.HttpParams;return Object.keys(e).forEach(o=>{n.includes(o)||(r=r.set(o,e[o]))}),r.keys().length>0?"?"+r.toString():""}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Id=(()=>{class i extends Mn{constructor(e,n,r,o){super(e,n,r),this.typeFormatter=e,this.logic=n,this.logicDisplay=r,this.legacyEntrypointLinkBuilder=o,this.filenameLink=""}ngOnInit(){this.filenameLink=this.legacyEntrypointLinkBuilder.getDownloadEntrypointLink(this.record.id,this.record.module)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt),t.\u0275\u0275directiveInject(_1))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-file-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"clickable","field-link",3,"href"]],template:function(n,r){1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"a",0),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("href",r.filenameLink,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",r.field.value," "))},encapsulation:2})}return i})(),y1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Ot.RouterModule]})}return i})(),Fd=(()=>{class i extends I.DecimalPipe{constructor(e,n){super(n),this.formatter=e,this.locale=n}transform(e,n,r){return e?this.formatter.toUserFormat(""+e):null}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Co,16),t.\u0275\u0275directiveInject(t.LOCALE_ID,16))};static#t=this.\u0275pipe=t.\u0275\u0275definePipe({name:"formatNumber",type:i,pure:!0})}return i})();function x9(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"formatNumber"),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,e.field.value),"\n")}}let rc=(()=>{class i extends Ql{constructor(e,n,r,o,a){super(e,n,r,o,a),this.userPreferences=e,this.systemConfig=n,this.typeFormatter=r,this.logic=o,this.logicDisplay=a}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Xt),t.\u0275\u0275directiveInject(ht),t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-float-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,x9,3,3,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[I.NgIf,I.AsyncPipe,Fd],encapsulation:2})}return i})(),Ad=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})(),b1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Ad]})}return i})(),C1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,De.FormsModule,De.ReactiveFormsModule]})}return i})(),oc=(()=>{class i extends Mn{constructor(e,n,r){super(e,n,r),this.typeFormatter=e,this.logic=n,this.logicDisplay=r}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-relate-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(n,r){1&n&&t.\u0275\u0275text(0),2&n&&t.\u0275\u0275textInterpolate1("\n",r.field.value,"\n")},encapsulation:2})}return i})(),S1=(()=>{class i{getConfig(e){return{klass:"light-filter",panelMode:"collapsible",isCollapsed:!0,collapseOnSearch:!0,savedFilterEdit:!1,displayHeader:!0,module:e.recordList.getModule(),filter$:e.recordList.criteria$.pipe((0,v.map)(n=>({key:"default",criteria:n}))),savedFilters$:(0,D.of)([]),searchFields$:e.searchMetadata$.pipe((0,v.map)(n=>{if(!n)return{};let r="advanced";return n.layout.advanced||(r="basic"),n.layout[r]})),listFields:[],onClose:()=>{},onSearch:()=>{},updateFilter:(n,r=!0)=>{e.recordList.updateSearchCriteria(n.criteria,r)},resetFilter:n=>{e.recordList.resetSearchCriteria(n)},addSavedFilter:n=>{},removeSavedFilter:n=>{},setOpenFilter:n=>{}}}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();class M1{constructor(s,e){this.systemConfigs=s,this.preferences=e}getTable(s,e=!1){const n={showHeader:!0,showFooter:!0,klass:"light-table",module:s.recordList.getModule(),columns:s.columns$.pipe((0,v.map)(r=>this.mapColumns(s,r))),sort$:s.recordList.sort$,maxColumns$:(0,D.of)(5),loading$:s.recordList.loading$,dataSource:s.recordList,pagination:s.recordList,toggleRecordSelection:r=>{s.recordList.toggleSelection(r)},updateSorting:(r,o)=>{s.recordList.updateSorting(r,o),s.saveCurrentSort()},maxListHeight:this.preferences.getUserPreference("record_modal_max_height")??this.systemConfigs.getConfigValue("record_modal_max_height"),paginationType:this.preferences.getUserPreference("record_modal_pagination_type")??this.systemConfigs.getConfigValue("record_modal_pagination_type"),loadMore:()=>{const r=this.preferences.getUserPreference("list_max_entries_per_modal")??this.systemConfigs.getConfigValue("list_max_entries_per_modal"),o=s.recordList.getPagination(),l=Number(o.pageSize||0)+Number(r);s.recordList.setPageSize(l),s.recordList.updatePagination(o.current)},allLoaded:()=>{const r=s.recordList.getPagination();return!!r&&(Number(r.pageLast)>=Number(r.total)||Number(r.pageSize)>=Number(r.total))}};return e&&(n.selection$=s.recordList.selection$,n.selectedCount$=s.recordList.selectedCount$,n.selectedStatus$=s.recordList.selectedStatus$),n}mapColumns(s,e){const n=[];return e.forEach(r=>{const o={...r};o.metadata={...r.metadata||{}},this.disableRelateFieldsLink(o),this.addLinkSelectHandler(s,o),n.push(o)}),n}disableRelateFieldsLink(s){"relate"===s.type&&(s.link=!1,s.metadata.link=!1)}addLinkSelectHandler(s,e){e.link&&(e.metadata.onClick=(n,r)=>{s.recordList.clearSelection(),s.recordList.toggleSelection(r.id),s.emitLinkClicked()})}}let sc=(()=>{class i{constructor(e){this.apollo=e,this.fieldsMetadata={fields:["id","_id","meta","records"]}}fetch(e,n,r,o,a,l){const u={query:W.gql`
              query getRecordList($module: String!, $limit: Int, $offset: Int, $criteria: Iterable, $sort: Iterable) {
                getRecordList(module: $module, limit: $limit, offset: $offset, criteria: $criteria, sort: $sort) {
                  ${l.fields.join("\n")}
                }
              }
            `,variables:{module:e,limit:n,offset:r,criteria:o,sort:a}};return this.apollo.query(u)}get(e,n,r,o){const a=this.mapSort(r);return this.fetch(e,o.pageSize,o.current,n,a,this.fieldsMetadata).pipe((0,v.map)(({data:l})=>{const c={records:[],pagination:{...o}};if(!l||!l.getRecordList)return c;const u=l.getRecordList;if(u.records&&u.records.forEach(d=>{c.records.push(this.mapRecord(d))}),!u.meta)return c;if(u.meta.offsets){const d={current:"current",next:"next",prev:"previous",total:"total",end:"last"};Object.keys(d).forEach(p=>{p in u.meta.offsets&&(c.pagination[d[p]]=u.meta.offsets[p])})}return c.meta=u.meta,c}))}mapSort(e){return{sortOrder:{NONE:"",ASC:"ASC",DESC:"DESC"}[e.sortOrder],orderBy:e.orderBy}}mapRecord(e){return e}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(W.Apollo))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Td={key:"default",module:"saved-search",attributes:{contents:""},criteria:{name:"default",filters:{}}},E9={default:(0,S.deepClone)(Td)},ac={filters:{}},lc={orderBy:"",sortOrder:S.SortDirection.DESC},Od={pageSize:5,current:0,previous:0,next:5,last:0,total:0,pageFirst:0,pageLast:0},cc={all:!1,status:S.SelectionStatus.NONE,selected:{},count:0},I9={module:"",records:[],criteria:(0,S.deepClone)(ac),activeFilters:(0,S.deepClone)(E9),sort:(0,S.deepClone)(lc),pagination:(0,S.deepClone)(Od),selection:(0,S.deepClone)(cc),openFilter:(0,S.deepClone)(Td),loading:!1,meta:{}};let Ld=(()=>{class i{constructor(e,n,r,o,a,l){this.listGQL=e,this.configStore=n,this.preferencesStore=r,this.languageStore=o,this.message=a,this.localStorageService=l,this.cache$=null,this.internalState=(0,S.deepClone)(I9),this.store=new D.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.pageKey=null,this.records$=this.state$.pipe((0,v.map)(c=>c.records),(0,v.distinctUntilChanged)()),this.criteria$=this.state$.pipe((0,v.map)(c=>c.criteria),(0,v.distinctUntilChanged)()),this.sort$=this.state$.pipe((0,v.map)(c=>c.sort),(0,v.distinctUntilChanged)()),this.pagination$=this.state$.pipe((0,v.map)(c=>c.pagination),(0,v.distinctUntilChanged)()),this.selection$=this.state$.pipe((0,v.map)(c=>c.selection),(0,v.distinctUntilChanged)()),this.selectedCount$=this.state$.pipe((0,v.map)(c=>c.selection.count),(0,v.distinctUntilChanged)()),this.selectedStatus$=this.state$.pipe((0,v.map)(c=>c.selection.status),(0,v.distinctUntilChanged)()),this.activeFilters$=this.state$.pipe((0,v.map)(c=>c.activeFilters),(0,v.distinctUntilChanged)()),this.openFilter$=this.state$.pipe((0,v.map)(c=>c.openFilter),(0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(c=>c.loading))}connect(){return this.records$}disconnect(){}get criteria(){return(0,S.deepClone)(this.internalState.criteria?this.internalState.criteria:ac)}set criteria(e){this.updateState({...this.internalState,criteria:e})}get activeFilters(){return(0,S.deepClone)(this.internalState.activeFilters)}get sort(){return(0,S.deepClone)(this.internalState.sort?this.internalState.sort:lc)}set sort(e){this.updateState({...this.internalState,sort:e})}get pagination(){return(0,S.deepClone)(this.internalState.pagination?this.internalState.pagination:Od)}set pagination(e){this.updateState({...this.internalState,pagination:e})}get selection(){return(0,S.deepClone)(this.internalState.selection?this.internalState.selection:cc)}get records(){return this.internalState.records?this.internalState.records:[]}getModule(){return this.internalState.module}getRecord(e){let n=null;return this.records.some(r=>{if(r.id===e)return n=r,!0}),n}destroy(){this.clear()}init(e,n=!0,r="list_max_entries_per_page",o=(0,S.deepClone)(Td),a=""){return this.internalState.module=e,this.preferenceKey=a,r&&this.watchPageSize(r),this.setBaseFilter(o),this.loadCurrentFilter(e),!1===n?null:this.load()}setBaseFilter(e){this.baseFilterMap={default:(0,S.deepClone)(e)},this.baseFilter=(0,S.deepClone)(e),this.updateState({...this.internalState,activeFilters:(0,S.deepClone)(this.baseFilterMap),openFilter:(0,S.deepClone)(this.baseFilter)})}loadCurrentFilter(e){const n=this.loadPreference(e,"current-filters")??this.baseFilterMap;if(!n||(0,S.emptyObject)(n))return;let r=this.loadPreference(e,"current-sort");!r&&(0,S.emptyObject)(r)&&(r=null),this.setFilters(n,!1,r)}setFilters(e,n=!0,r=null){const a=e[Object.keys(e).shift()];if(this.updateState({...this.internalState,activeFilters:(0,S.deepClone)(e),openFilter:(0,S.deepClone)(a)}),a.criteria){let l=a.criteria.orderBy??"",u=this.mapSortOrder(a.criteria.sortOrder??"desc");null!==r&&(l=r.orderBy,u=r.sortOrder),this.updateSorting(l,u,!1),this.updateSortLocalStorage(),this.updateSearchCriteria(a.criteria,n)}this.updateFilterLocalStorage()}updateFilterLocalStorage(){this.savePreference(this.internalState.module,"current-filters",this.internalState.activeFilters)}updateSortLocalStorage(){this.savePreference(this.internalState.module,"current-sort",this.sort)}updatePaginationLocalStorage(){null!==this.pageKey&&this.localStorageService.set(this.internalState.module+"-"+this.pageKey+"-current-pagination",this.pagination)}load(e=!0){return this.updateState({...this.internalState,loading:!0}),this.getRecords(this.internalState.module,this.internalState.criteria,this.internalState.sort,this.internalState.pagination,e).pipe((0,v.catchError)(()=>(this.message.addDangerMessageByKey("LBL_GET_RECORD_LIST_ERROR"),(0,D.of)({records:[],criteria:(0,S.deepClone)(ac),sort:(0,S.deepClone)(lc),pagination:(0,S.deepClone)(Od),openFilter:(0,S.deepClone)(this.baseFilter),activeFilters:(0,S.deepClone)(this.baseFilterMap),selection:(0,S.deepClone)(cc),meta:{}}))),(0,v.tap)(n=>{this.calculatePageCount(n.records,n.pagination),this.updateState({...this.internalState,records:n.records,pagination:n.pagination,loading:!1,meta:n.meta??{}})}))}updateSearchCriteria(e,n=!0){this.updateState({...this.internalState,criteria:e}),n&&(this.updateSelection(S.SelectionStatus.NONE),this.resetPagination())}resetSearchCriteria(e=!0){this.updateSearchCriteria((0,S.deepClone)(ac),e)}updateSorting(e,n,r=!0){n===S.SortDirection.NONE&&(e="",n=S.SortDirection.DESC),this.updateState({...this.internalState,sort:{orderBy:e,sortOrder:n}}),r&&this.load(!1).pipe((0,v.take)(1)).subscribe()}mapSortOrder(e){let n=S.SortDirection.NONE;const r=e.toLowerCase();return"asc"===r?n=S.SortDirection.ASC:"desc"===r&&(n=S.SortDirection.DESC),n}updatePagination(e){const n={...this.internalState.pagination,current:e};this.updateState({...this.internalState,pagination:n}),this.updatePaginationLocalStorage(),this.load(!1).pipe((0,v.take)(1)).subscribe()}setOpenFilter(e){this.updateState({...this.internalState,openFilter:(0,S.deepClone)(e)})}resetFilters(e=!0){this.updateState({...this.internalState,activeFilters:(0,S.deepClone)(this.baseFilterMap),openFilter:(0,S.deepClone)(this.baseFilter)}),this.clearSort(),this.updateSortLocalStorage(),this.updateFilterLocalStorage(),this.updateSearchCriteria(this.baseFilter.criteria,e)}savePreference(e,n,r){const o=this.preferenceKey??null;if(!o)return null;this.preferencesStore.setUi(e,`${o}${n}`,r)}loadPreference(e,n){const r=this.preferenceKey??null;return r?this.preferencesStore.getUi(e,`${r}${n}`):null}resetPagination(){this.updatePagination(0)}clear(){this.cache$=null,this.store.unsubscribe(),this.preferencesSub.unsubscribe()}clearAuthBased(){this.clear()}getSelectionStatus(){return this.selectedStatus$}getSelectedCount(){return this.selectedCount$}updateSelection(e){e!==S.SelectionStatus.NONE?e!==S.SelectionStatus.ALL?e!==S.SelectionStatus.PAGE||this.selectPage():this.selectAll():this.clearSelection()}clearSelection(){this.updateState({...this.internalState,selection:(0,S.deepClone)(cc)})}clearSort(){this.updateState({...this.internalState,sort:(0,S.deepClone)(lc)})}selectAll(){this.updateState({...this.internalState,selection:{all:!0,status:S.SelectionStatus.ALL,selected:{},count:this.internalState.pagination.total}})}selectPage(){const e={...this.internalState.selection.selected};this.internalState.records&&this.internalState.records.length&&this.internalState.records.forEach(n=>{n&&n.id&&(e[n.id]=n.id)}),this.updateState({...this.internalState,selection:{all:!1,status:S.SelectionStatus.SOME,selected:e,count:Object.keys(e).length}})}toggleSelection(e){const n=(0,S.deepClone)(this.internalState.selection);n.selected[e]?delete n.selected[e]:n.selected[e]=e,n.count=Object.keys(n.selected).length,n.status=0===n.count?S.SelectionStatus.NONE:S.SelectionStatus.SOME,this.updateState({...this.internalState,selection:n})}getPaginationCount(){return this.pagination$.pipe((0,v.map)(e=>({pageFirst:e.pageFirst,pageLast:e.pageLast,total:e.total})),(0,v.distinctUntilChanged)())}getPagination(){return this.store.value.pagination}getMeta(){return this.store.value.meta}changePage(e){let n=0;const r={};if(r[S.PageSelection.FIRST]=0,r[S.PageSelection.PREVIOUS]=this.internalState.pagination.previous,r[S.PageSelection.NEXT]=this.internalState.pagination.next,r[S.PageSelection.LAST]=this.internalState.pagination.last,e in r&&r[e]>=0){if(n=r[e],Number(n)>this.internalState.pagination.last||n<0)return;this.updatePagination(n)}}setPageSize(e){const n={...this.internalState.pagination,pageSize:e};this.updateState({...this.internalState,pagination:n})}getPageSize(){return this?.internalState?.pagination?.pageSize??10}watchPageSize(e){const n=this.preferencesStore.getUserPreference(e),r=this.configStore.getConfigValue(e);this.determinePageSize(n,r),this.preferencesSub=this.configStore.configs$.pipe((0,D.combineLatestWith)(this.preferencesStore.userPreferences$),(0,v.tap)(([o,a])=>{this.determinePageSize(a&&a[e]||null,o&&o[e]&&o[e].value||null)})).subscribe()}determinePageSize(e,n){let r=20;e?r=e:n&&(r=parseInt(n,10)),this.setPageSize(r)}updateState(e){this.store.next(this.internalState=e)}calculatePageCount(e,n){const r=e&&e.length||0;let o=0,a=0;r>0&&(o=n.current+1,a=n.current+r),n.pageFirst=o,n.pageLast=a}getRecords(e,n,r,o,a=!0){return(null==this.cache$||!1===a)&&(this.cache$=this.listGQL.get(e,n,r,o).pipe((0,v.shareReplay)(1))),this.cache$}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(sc),t.\u0275\u0275inject(ht),t.\u0275\u0275inject(Xt),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(bi))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Qi=(()=>{class i{constructor(e,n,r,o,a,l){this.listGQL=e,this.configStore=n,this.preferencesStore=r,this.languageStore=o,this.message=a,this.localStorageService=l}create(){return new Ld(this.listGQL,this.configStore,this.preferencesStore,this.languageStore,this.message,this.localStorageService)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(sc),t.\u0275\u0275inject(ht),t.\u0275\u0275inject(Xt),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(bi))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Nd={module:"",detailView:{},editView:{},listView:{},search:{},recordView:{},subPanel:{},massUpdate:{},recentlyViewed:[],favorites:[]},w1={};let uc=(0,S.deepClone)(Nd),Fs=(0,S.deepClone)(w1);const D1={};let Io=(0,S.deepClone)(D1),bt=(()=>{class i{constructor(e,n){this.recordGQL=e,this.appState=n,this.typeKeys={listView:"listView",search:"search",recordView:"recordView",subPanel:"subPanel",massUpdate:"massUpdate",recentlyViewed:"recentlyViewed",favorites:"favorites"},this.store=new D.BehaviorSubject(uc),this.state$=this.store.asObservable(),this.allModuleStore=new D.BehaviorSubject(Fs),this.allModulesState$=this.allModuleStore.asObservable(),this.resourceName="moduleMetadata",this.fieldsMetadata={fields:["id","_id"]},this.types=["listView","search","recordView","subPanel","massUpdate","recentlyViewed","favorites"],this.baseTypes=["listView","search","recordView","favorites"],this.listViewColumns$=this.state$.pipe((0,v.map)(r=>r.listView.fields),(0,v.distinctUntilChanged)()),this.listViewLineActions$=this.state$.pipe((0,v.map)(r=>r.listView.lineActions),(0,v.distinctUntilChanged)()),this.listViewTableActions$=this.state$.pipe((0,v.map)(r=>r.listView.tableActions),(0,v.distinctUntilChanged)()),this.listMetadata$=this.state$.pipe((0,v.map)(r=>r.listView),(0,v.distinctUntilChanged)()),this.searchMetadata$=this.state$.pipe((0,v.map)(r=>r.search),(0,v.distinctUntilChanged)()),this.recordViewMetadata$=this.state$.pipe((0,v.map)(r=>r.recordView),(0,v.distinctUntilChanged)()),this.subPanelMetadata$=this.state$.pipe((0,v.map)(r=>r.subPanel),(0,v.distinctUntilChanged)()),this.metadata$=this.state$,this.allModuleMetadata$=this.allModulesState$}clear(){Io=(0,S.deepClone)(D1),Fs=(0,S.deepClone)(w1),this.updateState("",(0,S.deepClone)(Nd))}clearAuthBased(){this.clear()}getMetadataTypes(){return this.types}getModule(){return uc.module}get(){return uc}getModuleMeta(e){return{...Fs[e]??{}}}setModuleMetadata(e,n){Io[e]=(0,D.of)(n).pipe((0,v.shareReplay)(1)),this.updateAllModulesState(e,n)}reloadModuleMetadata(e,n,r=!0){return n||(n=this.getMetadataTypes()),this.getMetadata(e,n,r).pipe((0,v.tap)(o=>{this.updateAllModulesState(e,o)}))}load(e,n,r=!0){return n||(n=this.getMetadataTypes()),this.getMetadata(e,n,r).pipe((0,v.tap)(o=>{this.updateState(e,o)}))}isCached(e){return null!==(Io[e]??null)}getEmpty(){return(0,S.deepClone)(Nd)}set(e,n){Io[e]=(0,D.of)(n).pipe((0,v.shareReplay)(1)),this.updateState(e,n)}getMetadata(e,n=null,r=!0){return(null==Io[e]||!1===r)&&(Io[e]=this.fetchMetadata(e,n).pipe((0,v.shareReplay)(1))),Io[e]}mapMetadata(e,n){const o={...Fs[e]??{}};return this.parseListViewMetadata(n,o),this.parseSearchMetadata(n,o),this.parseRecordViewMetadata(n,o),this.parseSubPanelMetadata(n,o),this.parseMassUpdateMetadata(n,o),this.parseRecentlyViewedMetadata(n,o),this.parseFavoritesMetadata(n,o),o}updateState(e,n){this.updateAllModulesState(e,n),this.store.next(uc={...n,module:e})}updateAllModulesState(e,n){if(""!==e){const r={...Fs};r[e]={...n},this.allModuleStore.next(Fs=r)}}fetchMetadata(e,n){const r={fields:[...this.fieldsMetadata.fields,...n??this.baseTypes]};return this.recordGQL.fetch(this.resourceName,`/api/module-metadata/${e}`,r).pipe((0,v.map)(({data:o})=>this.mapMetadata(e,o.moduleMetadata)))}parseListViewMetadata(e,n){if(!e||!e.listView)return;const r={fields:[],bulkActions:{},lineActions:[],tableActions:[],chartTypes:{},filters:[]};e.listView.columns&&e.listView.columns.forEach(a=>{r.fields.push(a)}),this.addDefinedMeta(r,e.listView,{bulkActions:"bulkActions",lineActions:"lineActions",tableActions:"tableActions",sidebarWidgets:"sidebarWidgets",availableFilters:"filters",paginationType:"paginationType"}),n.listView=r}parseSearchMetadata(e,n){e&&e.search&&(n.search=e.search)}parseSubPanelMetadata(e,n){e&&e.subPanel&&(n.subPanel=e.subPanel)}parseMassUpdateMetadata(e,n){e&&e.massUpdate&&(n.massUpdate=e.massUpdate)}parseRecordViewMetadata(e,n){if(!e||!e.recordView)return;const r={actions:[],templateMeta:{},panels:[]};this.addDefinedMeta(r,e.recordView,{templateMeta:"templateMeta",actions:"actions",panels:"panels",topWidget:"topWidget",sidebarWidgets:"sidebarWidgets",bottomWidgets:"bottomWidgets",summaryTemplates:"summaryTemplates",vardefs:"vardefs"}),n.recordView=r}parseRecentlyViewedMetadata(e,n){e&&e.recentlyViewed&&(n.recentlyViewed=e.recentlyViewed)}parseFavoritesMetadata(e,n){e&&e.favorites&&(n.favorites=e.favorites)}addDefinedMeta(e,n,r){Object.keys(r).forEach(o=>{n[o]&&(e[r[o]]=n[o])})}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(vs),t.\u0275\u0275inject(Ht))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),x1=(()=>{class i{constructor(e,n,r){this.listStoreFactory=e,this.meta=n,this.preferences=r,this.module="",this.parentModule="",this.recordList=e.create(),this.loading$=this.recordList.loading$,this.metadataLoadingState=new D.BehaviorSubject(!1),this.linkClickedState=new D.BehaviorSubject(!1),this.linkClicked$=this.linkClickedState.asObservable(),this.metadataLoading$=this.metadataLoadingState.asObservable(),this.selection$=this.recordList.selection$,this.selectedCount$=this.recordList.selectedCount$,this.selectedStatus$=this.recordList.selectedStatus$}clear(){this.recordList.clear(),this.recordList=null}clearAuthBased(){this.recordList.clearAuthBased()}init(e,n=""){this.module=e,this.parentModule=n,this.loadCurrentSort(),this.metadataLoadingState.next(!0);const r=this.meta.getMetadata(e).pipe((0,v.tap)(()=>{this.metadataLoadingState.next(!1),this.recordList.load().pipe((0,v.take)(1)).subscribe()}));this.listMetadata$=r.pipe((0,v.map)(o=>o.listView)),this.searchMetadata$=r.pipe((0,v.map)(o=>o.search)),this.recordList.init(e,!1,"list_max_entries_per_modal"),this.columns$=this.listMetadata$.pipe((0,v.map)(o=>o.fields))}load(e=!0){return this.recordList.load(e)}loadCurrentSort(){if(!this.parentModule)return;const e=this.loadPreference(this.parentModule,"current-sort");!e||(0,S.emptyObject)(e)||(this.recordList.sort=e)}saveCurrentSort(){this.parentModule&&this.savePreference(this.parentModule,"current-sort",this.recordList.sort)}emitLinkClicked(){this.linkClickedState.next(!0)}getPreferenceKey(e){return this.module+"-record-list-modal-"+e}savePreference(e,n,r){this.preferences.setUi(e,this.getPreferenceKey(n),r)}loadPreference(e,n){return this.preferences.getUi(e,this.getPreferenceKey(n))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Qi),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Xt))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),E1=(()=>{class i{constructor(e,n,r){this.listStoreFactory=e,this.metadataStore=n,this.preferences=r}create(){return new x1(this.listStoreFactory,this.metadataStore,this.preferences)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Qi),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Xt))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Fo=(()=>{class i{constructor(e,n){this.screenSize=e,this.systemConfigStore=n,this.screen=ii.Medium,this.maxColumns=5}getMaxColumns(e){return e.pipe((0,D.combineLatestWith)(this.screenSize.screenSize$),(0,v.map)(([n,r])=>(r&&(this.screen=r),this.calculateMaxColumns(n))),(0,v.distinctUntilChanged)())}calculateMaxColumns(e=!0){let n;if(n=this.systemConfigStore.getConfigValue("listview_column_limits"),n=e?n.with_sidebar:n.without_sidebar,this.screen&&n){const r=n[this.screen];r&&(this.maxColumns=r)}return this.maxColumns}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(li),t.\u0275\u0275inject(ht))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();function F9(i,s){1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-label",3),t.\u0275\u0275elementContainerEnd())}function A9(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-list-filter",9),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("config",e.filterConfig)}}function T9(i,s){1&i&&t.\u0275\u0275element(0,"scrm-loading-spinner",11),2&i&&t.\u0275\u0275property("overlay",!0)}function O9(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,T9,1,1,"scrm-loading-spinner",10),t.\u0275\u0275elementContainerEnd()),2&i){const e=s.ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e)}}function L9(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-button",9),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.buildSelectButton())}}function N9(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div")(2,"div",4)(3,"div",5)(4,"div",6),t.\u0275\u0275template(5,A9,1,1,"scrm-list-filter",7),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div",8)(7,"div",6),t.\u0275\u0275element(8,"scrm-table",9),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275template(9,O9,2,1,"ng-container",2),t.\u0275\u0275pipe(10,"async"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(11,L9,2,1,"ng-container",2),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",e.filterConfig),t.\u0275\u0275advance(3),t.\u0275\u0275property("config",e.tableConfig),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(10,4,e.loading$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.multiSelect)}}let As=(()=>{class i{constructor(e,n,r,o,a,l){this.activeModal=e,this.storeFactory=n,this.languages=r,this.maxColumnCalculator=o,this.preferences=a,this.systemConfigs=l,this.titleKey="",this.multiSelect=!1,this.multiSelectButtonLabel="LBL_SAVE",this.adapter=null,this.filterAdapter=null,this.subs=[],this.store=this.storeFactory.create()}ngOnInit(){this.closeButton={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.activeModal.close({type:"close-button"})}},this.init()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}init(){this.module&&(this.initStore(),this.initTableAdapter(),this.initFilterAdapters())}getMaxColumns(){return this.maxColumnCalculator.getMaxColumns((0,D.of)(!0))}linkSelectedRecords(){this.activeModal.close({selection:this.store.recordList.selection,records:this.store.recordList.records})}buildSelectButton(){return{klass:["btn","btn-primary","btn-sm"],onClick:()=>{this.linkSelectedRecords()},labelKey:this.multiSelectButtonLabel}}initTableAdapter(){if(null===this.adapter&&(this.adapter=new M1(this.systemConfigs,this.preferences)),this.tableConfig=this.adapter.getTable(this.store,this.multiSelect),this.store?.listMetadata?.maxHeight&&(this.tableConfig.maxListHeight=this.store.listMetadata.maxHeight),!this.tableConfig?.maxListHeight){const e=this.systemConfigs.getConfigValue("ui")??{},n=this.systemConfigs.getConfigValue("record_modal_max_height")??"";this.tableConfig.maxListHeight=e.record_modal_max_height??n}this.tableConfig.maxColumns$=this.getMaxColumns()}initFilterAdapters(){null===this.filterAdapter&&(this.filterAdapter=new S1),this.filterConfig=this.filterAdapter.getConfig(this.store)}initStore(){this.store.init(this.module,this.parentModule??""),this.loading$=this.store.metadataLoading$,this.subs.push(this.store.linkClicked$.pipe((0,v.distinctUntilChanged)(),(0,v.skip)(1)).subscribe(e=>{e&&this.linkSelectedRecords()}))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(me.NgbActiveModal),t.\u0275\u0275directiveInject(E1),t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(Fo),t.\u0275\u0275directiveInject(Xt),t.\u0275\u0275directiveInject(ht))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-list-modal"]],inputs:{titleKey:"titleKey",module:"module",parentModule:"parentModule",multiSelect:"multiSelect",multiSelectButtonLabel:"multiSelectButtonLabel",adapter:"adapter",filterAdapter:"filterAdapter"},features:[t.\u0275\u0275ProvidersFeature([Fo])],decls:4,vars:5,consts:[["bodyKlass","m-0 small-font","footerKlass","border-0","headerKlass","border-0","klass","record-list-modal",3,"closable","close","title"],["modal-body",""],[4,"ngIf"],["labelKey","LBL_CONFIG_NO_CONFIG"],[1,"container-fluid"],[1,"row","pb-3"],[1,"col"],[3,"config",4,"ngIf"],[1,"row"],[3,"config"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"scrm-modal",0)(1,"div",1),t.\u0275\u0275template(2,F9,2,0,"ng-container",2),t.\u0275\u0275template(3,N9,12,6,"ng-container",2),t.\u0275\u0275elementEnd()()),2&n&&(t.\u0275\u0275property("closable",!0)("close",r.closeButton)("title",r.titleKey),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!r.tableConfig),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.tableConfig))},encapsulation:2,data:{animation:[(0,yt.trigger)("modalFade",[(0,yt.transition)("void <=> *",[(0,yt.animate)("800ms")])])]}})}return i})(),Ts=(()=>{class i{constructor(e){this.recordList=e.create()}init(e){this.recordList.init(e,!1)}search(e,n){const r=this.recordList.criteria;return r.filters[n]={field:n,operator:"=",values:[e]},this.recordList.updateSearchCriteria(r,!1),this.recordList.load(!1).pipe((0,v.map)(o=>o.records),(0,v.take)(1),(0,v.shareReplay)(1))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Qi))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Rd=(()=>{class i extends Mn{constructor(e,n,r,o,a,l){super(n,a,l),this.languages=e,this.typeFormatter=n,this.relateService=r,this.moduleNameMapper=o,this.logic=a,this.logicDisplay=l,this.selectedValues=[],this.options=[],this.status="",this.initModule="",this.search=c=>""===c?(0,D.of)([]):(this.status="searching",this.relateService.search(c,this.getRelateFieldName()).pipe((0,v.tap)(()=>this.status="found"),(0,v.catchError)(()=>(this.status="error",(0,D.of)([]))),(0,v.map)(u=>{if(!u||u.length<1)return this.status="not-found",[];const d=[];return u.forEach(p=>{p&&p.attributes&&d.push(p.attributes)}),this.status="",d})))}get module(){return this.record&&this.record.module?this.record.module:null}ngOnInit(){super.ngOnInit(),this.init(),this.subs.push(this.field.valueChanges$.subscribe(()=>{this.onModuleChange()}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}onModuleChange(){const e=this.initModule,n=this?.field?.definition?.module??"";e!==n&&(this.initModule=n,""===e&&e!==n&&this.init(),""===n?this.status="no-module":(this.init(),this.status="",this.selectedValues=[],this.options=[]))}getRelateFieldName(){return this.field?.definition?.metadata?.relateSearchField?this.field.definition.metadata.relateSearchField:this.field&&this.field.definition&&this.field.definition.rname||"name"}getRelateIdField(){return this.field&&this.field.definition&&this.field.definition.id_name||""}getRelatedModule(){const e=this.field&&this.field.definition&&this.field.definition.module||"";return e?this.moduleNameMapper.toFrontend(e):""}getMessage(){const e={searching:"LBL_SEARCHING","not-found":"LBL_NOT_FOUND",error:"LBL_SEARCH_ERROR",found:"LBL_FOUND","no-module":"LBL_NO_MODULE_SELECTED"};return e[this.status]?e[this.status]:""}getInvalidClass(){return this.field.formControl&&this.field.formControl.invalid&&this.field.formControl.touched||this.hasSearchError()?"is-invalid":""}hasSearchError(){return"error"===this.status||"not-found"===this.status}resetStatus(){this.status=""}getPlaceholderLabel(){return this.languages.getAppString("LBL_TYPE_TO_SEARCH")||""}init(){this.initModule=this?.field?.definition?.module??"",this.relateService&&this.relateService.init(this.getRelatedModule())}buildRelate(e,n){const r={id:e};return this.getRelateFieldName()&&(r[this.getRelateFieldName()]=n),r}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(Ts),t.\u0275\u0275directiveInject(En),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}return i})();const R9=["tag"],B9=["dropdownFilterInput"];function k9(i,s){1&i&&t.\u0275\u0275element(0,"scrm-image",8)}function j9(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",9),t.\u0275\u0275listener("click",function(r){return r.stopPropagation()}),t.\u0275\u0275elementStart(1,"input",10,11),t.\u0275\u0275listener("ngModelChange",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.filterValue=r)})("keyup",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.onFilterInput(r))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(3,"scrm-image",12),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngModel",e.filterValue)}}function P9(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",2)(2,"p-dropdown",3,4),t.\u0275\u0275listener("ngModelChange",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.selectedValue=r)})("onChange",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.onAdd(r.value))})("onLazyLoad",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.onFilter())})("onShow",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.focusFilterInput())})("onHide",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275reference(3),o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.resetFunction(r.options))})("onClear",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.onClear(r))}),t.\u0275\u0275template(4,k9,1,0,"ng-template",5),t.\u0275\u0275template(5,j9,4,1,"ng-template",6),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div"),t.\u0275\u0275element(7,"scrm-button",7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("options",e.options)("ngModel",e.selectedValue)("optionLabel",e.getRelateFieldName())("emptyMessage",e.emptyFilterLabel)("emptyFilterMessage",e.emptyFilterLabel)("placeholder",e.placeholderLabel)("autoOptionFocus",!1)("autofocusFilter",!1)("focusOnHover",!0)("filter",!0)("lazy",!0)("dataKey","id")("filterBy",e.getRelateFieldName())("showClear",!0)("styleClass","w-100 "+e.getInvalidClass()),t.\u0275\u0275advance(5),t.\u0275\u0275property("config",e.selectButton)}}let Bd=(()=>{class i extends Rd{constructor(e,n,r,o,a,l,c){super(e,n,r,o,l,c),this.languages=e,this.typeFormatter=n,this.relateService=r,this.moduleNameMapper=o,this.modalService=a,this.logic=l,this.logicDisplay=c,this.selectedValue={},this.placeholderLabel="",this.emptyFilterLabel="",this.filterValue=""}ngOnInit(){super.ngOnInit(),this.init(),this.getTranslatedLabels(),this.selectButton={klass:["btn","btn-sm","btn-outline-secondary","m-0","border-0"],onClick:()=>{this.showSelectModal()},icon:"cursor"}}init(){super.init(),this.initValue();const e=this.getRelateIdField();e&&this.record&&this.record.fields&&this.record.fields[e]&&(this.idField=this.record.fields[e])}initValue(){return this.field.valueObject&&this.field.valueObject.id?(this.field?.metadata?.relateSearchField&&(this.field.valueObject[this.field.metadata.relateSearchField]=this.field.valueObject[this.field?.definition?.rname??"name"]),this.selectedValue=this.field.valueObject,void(this.options=[this.field.valueObject])):(this.selectedValue={},void this.field.formControl.setValue(""))}onAdd(e){if(e){const n=this.getRelateFieldName();this.setValue(e.id,e[n])}else this.setValue("",""),this.selectedValue={}}onRemove(){this.setValue("",""),this.selectedValue={},this.options=[]}onClear(e){this.selectedValue={},this.filterValue="",this.options=[],this.onRemove()}onFilter(){const e=this.getRelateFieldName();this.filterValue=this.filterValue??"";const n=this.filterValue.match(/^\s*$/g);n&&n.length&&(this.filterValue=""),this.search(this.filterValue).pipe((0,v.take)(1),(0,v.map)(o=>o.filter(a=>""!==a[e])),(0,v.map)(o=>o.map(a=>({id:a.id,[e]:a[e]})))).subscribe(o=>{if(this.options=o,!this?.selectedValue||!this?.selectedValue?.id)return;let a=!1;o.some(l=>l?.id===this.selectedValue.id&&(a=!0,!0)),!1===a&&this.selectedValue&&this.options.push(this.selectedValue)})}resetFunction(e){this.filterValue="",this.options=[],(0,S.emptyObject)(this.selectedValue)||(this.options=[this.selectedValue])}onFilterInput(e){e.stopPropagation(),this.tag.onLazyLoad.emit()}setValue(e,n){const r=this.buildRelate(e,n);if(this.field.value=n,this.field.valueObject=r,this.field.formControl.setValue(n),this.field.formControl.markAsDirty(),this.idField&&(this.idField.value=e,this.idField.formControl.setValue(e),this.idField.formControl.markAsDirty()),n){const o=this.getRelateFieldName();this.selectedValue={id:e,[o]:n}}this.options=[this.selectedValue]}showSelectModal(){const e=this.modalService.open(As,{size:"xl",scrollable:!0});e.componentInstance.module=this.getRelatedModule(),e.result.then(n=>{if(!n||!n.selection||!n.selection.selected)return;const r=this.getSelectedRecord(n);this.setItem(r)})}getSelectedRecord(e){let n="";Object.keys(e.selection.selected).some(o=>(n=o,!0));let r=null;return e.records.some(o=>{if(o&&o.id===n)return r=o,!0}),r}setItem(e){this.tag.writeValue(e.attributes),this.onAdd(e.attributes)}getTranslatedLabels(){this.placeholderLabel=this.languages.getAppString("LBL_SELECT_ITEM")||"",this.emptyFilterLabel=this.languages.getAppString("ERR_SEARCH_NO_RESULTS")||""}focusFilterInput(){this.dropdownFilterInput.nativeElement.focus()}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(Ts),t.\u0275\u0275directiveInject(En),t.\u0275\u0275directiveInject(me.NgbModal),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-relate-edit"]],viewQuery:function(n,r){if(1&n&&(t.\u0275\u0275viewQuery(R9,5),t.\u0275\u0275viewQuery(B9,5)),2&n){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.tag=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.dropdownFilterInput=o.first)}},features:[t.\u0275\u0275ProvidersFeature([Ts]),t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[1,"d-flex","align-items-center"],[4,"ngIf"],[1,"flex-grow-1","w-100","mr-1"],[3,"options","ngModel","optionLabel","emptyMessage","emptyFilterMessage","placeholder","autoOptionFocus","autofocusFilter","focusOnHover","filter","lazy","dataKey","filterBy","showClear","styleClass","ngModelChange","onChange","onLazyLoad","onShow","onHide","onClear"],["tag",""],["pTemplate","dropdownicon"],["pTemplate","filter"],[3,"config"],["image","down_carret"],[1,"p-dropdown-filter-container",3,"click"],["type","text","pInputText","","autocomplete","off","tabindex","0",1,"p-dropdown-filter","p-component",3,"ngModel","ngModelChange","keyup"],["dropdownFilterInput",""],["image","search",1,"p-element","p-dropdown-filter-search-icon"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275template(1,P9,8,16,"ng-container",1),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.initModule))},dependencies:[I.NgIf,De.DefaultValueAccessor,De.NgControlStatus,De.NgModel,Un,ki,ln,U0,$0],encapsulation:2})}return i})(),I1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Vt,De.FormsModule,an,Nl,sn,Ku,Rl]})}return i})();const V9=["tag"],U9=["dropdownFilterInput"];function $9(i,s){1&i&&t.\u0275\u0275element(0,"scrm-image",9)}function z9(i,s){1&i&&t.\u0275\u0275element(0,"scrm-image",10)}function H9(i,s){1&i&&t.\u0275\u0275element(0,"scrm-image",10)}function W9(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",11),t.\u0275\u0275listener("click",function(r){return r.stopPropagation()}),t.\u0275\u0275elementStart(1,"div",12),t.\u0275\u0275element(2,"input",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",14),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.onSelectAll())}),t.\u0275\u0275template(4,H9,1,0,"scrm-image",15),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"div",16),t.\u0275\u0275listener("click",function(r){return r.stopPropagation()}),t.\u0275\u0275elementStart(6,"input",17,18),t.\u0275\u0275listener("ngModelChange",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.filterValue=r)})("keyup",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.onFilterInput(r))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"span",19),t.\u0275\u0275element(9,"scrm-image",20),t.\u0275\u0275elementEnd()()}if(2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",e.selectAll),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",e.filterValue)}}function K9(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",2)(2,"p-multiSelect",3,4),t.\u0275\u0275listener("ngModelChange",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.selectedValues=r)})("onChange",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.onAdd())})("onLazyLoad",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.onFilter())})("onRemove",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.onRemove())})("onPanelShow",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.onPanelShow())})("onPanelHide",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.resetFunction())})("onClear",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.onClear())}),t.\u0275\u0275template(4,$9,1,0,"ng-template",5),t.\u0275\u0275template(5,z9,1,0,"ng-template",6),t.\u0275\u0275template(6,W9,10,2,"ng-template",7),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"div"),t.\u0275\u0275element(8,"scrm-button",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("options",e.options)("ngModel",e.selectedValues)("optionLabel",e.getRelateFieldName())("placeholder",e.placeholderLabel)("selectedItemsLabel","{0} "+e.selectedItemsLabel)("emptyFilterMessage",e.emptyFilterLabel)("emptyMessage",e.emptyFilterLabel)("maxSelectedLabels",e.maxSelectedLabels)("styleClass","w-100 "+e.getInvalidClass())("showToggleAll",!0)("selectAll",e.selectAll)("autoOptionFocus",!1)("autofocusFilter",!1)("focusOnHover",!0)("showClear",!0)("filter",!0)("lazy",!0)("dataKey","id")("filterBy",e.getRelateFieldName()),t.\u0275\u0275advance(6),t.\u0275\u0275property("config",e.selectButton)}}let kd=(()=>{class i extends Rd{constructor(e,n,r,o,a,l,c){super(e,n,r,o,l,c),this.languages=e,this.typeFormatter=n,this.relateService=r,this.moduleNameMapper=o,this.modalService=a,this.logic=l,this.logicDisplay=c,this.placeholderLabel="",this.selectedItemsLabel="",this.emptyFilterLabel="",this.maxSelectedLabels=20,this.selectAll=!1,this.filterValue="",this.selectButton={klass:["btn","btn-sm","btn-outline-secondary","m-0","border-0"],onClick:()=>{this.showSelectModal()},icon:"cursor"}}ngOnInit(){this.selectAll=!1;const e=this.record;this.field.valueList=[],this.field.valueObjectArray=[];let n=this.field&&this.field.criteria&&this.field.criteria.values||[];n=n.filter(a=>!a),n.length>0&&(this.field.valueList=n);let r=this.field&&this.field.criteria&&this.field.criteria.valueObjectArray||[];r=r.map(a=>{const l={...a};return l[this.getRelateFieldName()]=a[this.getRelateFieldName()]??a?.name??"",l}),r.length>0&&(this.field.valueObjectArray=(0,S.deepClone)(r),this.selectedValues=(0,S.deepClone)(r)),super.ngOnInit(),this.options=this.options??[],this.getTranslatedLabels(),this.addCurrentlySelectedToOptions(this.options??[]);const o=this.getRelateIdField();if(o&&e&&e.criteriaFields&&e.criteriaFields[o]){this.idField=e.criteriaFields[o],this.idField.valueList=[];let a=this.idField&&this.idField.criteria&&this.idField.criteria.values||[];a=a.filter(l=>!!l),a.length>0&&(this.idField.valueList=(0,S.deepClone)(a))}}onAdd(){this.updateFieldValues(),this.calculateSelectAll()}onRemove(){this.updateFieldValues(),this.calculateSelectAll()}onClear(){this.options=[],this.selectedValues=[],this.selectAll=!1,this.filterValue="",this.onRemove()}onSelectAll(){this.selectAll=!this.selectAll,this.selectAll?(this.selectedValues=this.tag.visibleOptions()&&this.tag.visibleOptions().length?this.tag.visibleOptions():this.options,this.onAdd()):(this.selectedValues=[],this.onRemove())}getTranslatedLabels(){this.placeholderLabel=this.languages.getAppString("LBL_SELECT_ITEM")||"",this.selectedItemsLabel=this.languages.getAppString("LBL_ITEMS_SELECTED")||"",this.emptyFilterLabel=this.languages.getAppString("ERR_SEARCH_NO_RESULTS")||""}onPanelShow(){this.dropdownFilterInput.nativeElement.focus(),this.calculateSelectAll()}resetFunction(){this.filterValue="",this.options=this.selectedValues}onFilterInput(e){e?.stopPropagation(),this.selectAll=!1,this.tag.onLazyLoad.emit()}onFilter(){const e=this.getRelateFieldName();this.filterValue=this.filterValue??"";const n=this.filterValue.match(/^\s*$/g);n&&n.length&&(this.filterValue=""),this.search(this.filterValue).pipe((0,v.take)(1),(0,v.map)(o=>o.filter(a=>""!==a[e])),(0,v.map)(o=>o.map(a=>({id:a.id,[e]:a[e]})))).subscribe(o=>{this.options=o,this.addCurrentlySelectedToOptions(o),this.calculateSelectAll()})}updateFieldValues(){let e=this?.selectedValues?.map(n=>n[this.getRelateFieldName()])??null;e||(e=[]),this.field.valueList=e,this.field.valueObjectArray=(0,S.deepClone)(this.selectedValues??[]),this.updateSearchCriteria(this.field),this.field.criteria.valueObjectArray=(0,S.deepClone)(this.field.valueObjectArray),this.updateIdField()}updateIdField(){this.idField&&(this.idField.valueList=this?.selectedValues?.map(e=>e.id)??[],this.updateSearchCriteria(this.idField))}setValue(e){const n=this.getRelateFieldName(),r=e?.id??"",o=e[n];if(this.idField&&this.idField.valueList.includes(r)||!this.idField&&this.field.valueList.includes(o))return;const a={};a.id=r,a[n]=o,this.field.valueObjectArray.push(a),this.field.valueList.push(o),this.idField&&(this.idField.valueList.push(r),this.updateSearchCriteria(this.idField)),this.updateSearchCriteria(this.field),this.field.criteria.valueObjectArray||(this.field.criteria.valueObjectArray=[]),this.field.criteria.valueObjectArray.push(a)}updateSearchCriteria(e){e.criteria.operator="=",e.criteria.values=e.valueList,e.formControl.setValue(e.valueList),e.formControl.markAsDirty()}showSelectModal(){const e=this.modalService.open(As,{size:"xl",scrollable:!0});e.componentInstance.module=this.getRelatedModule(),e.result.then(n=>{if(!n||!n.selection||!n.selection.selected)return;const r=this.getSelectedRecord(n);this.field.valueObjectArray.find(a=>a.id===r.id)||(this.setItem(r),this.tag.updateModel(this.selectedValues))})}getSelectedRecord(e){let n="";Object.keys(e.selection.selected).some(o=>(n=o,!0));let r=null;return e.records.some(o=>{if(o&&o.id===n)return r=o,!0}),r}setItem(e){const n=this.getRelateFieldName(),r={id:e?.attributes?.id,[n]:e?.attributes[n]};this.isInList(this.selectedValues,r)||(this.selectedValues.push(r),this.addCurrentlySelectedToOptions(this.options),this.onAdd())}addCurrentlySelectedToOptions(e){!this?.selectedValues||!this?.selectedValues.length||this.selectedValues.forEach(n=>{!1===this.isInList(e,n)&&n&&this.options.push(n)})}isInList(e,n){let r=!1;return e.some(o=>o?.id===n?.id&&(r=!0,!0)),r}calculateSelectAll(){const e=this?.tag?.visibleOptions()??[],n=(this?.selectedValues??[]).map(r=>r.value);this.selectAll=!(!e.length||!n.length)&&!(e.length>n.length)&&e.every(r=>n.includes(r.value))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(Ts),t.\u0275\u0275directiveInject(En),t.\u0275\u0275directiveInject(me.NgbModal),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-relate-filter"]],viewQuery:function(n,r){if(1&n&&(t.\u0275\u0275viewQuery(V9,5),t.\u0275\u0275viewQuery(U9,5)),2&n){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.tag=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.dropdownFilterInput=o.first)}},features:[t.\u0275\u0275ProvidersFeature([Ts]),t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[1,"d-flex","align-items-center"],[4,"ngIf"],[1,"flex-grow-1","w-100","mr-1"],[3,"options","ngModel","optionLabel","placeholder","selectedItemsLabel","emptyFilterMessage","emptyMessage","maxSelectedLabels","styleClass","showToggleAll","selectAll","autoOptionFocus","autofocusFilter","focusOnHover","showClear","filter","lazy","dataKey","filterBy","ngModelChange","onChange","onLazyLoad","onRemove","onPanelShow","onPanelHide","onClear"],["tag",""],["pTemplate","dropdownicon"],["pTemplate","checkicon"],["pTemplate","filter"],[3,"config"],["image","down_carret"],["image","checkbox_cross"],[1,"p-checkbox","p-component",3,"click"],["data-p-hidden-accessible","true",1,"p-hidden-accessible"],["type","checkbox","checked","false","aria-label","All items unselected"],["role","checkbox","aria-checked","false",1,"p-checkbox-box",3,"click"],["image","checkbox_cross",4,"ngIf"],[1,"p-multiselect-filter-container",3,"click"],["type","text","pInputText","","autocomplete","off","tabindex","0",1,"p-multiselect-filter","p-inputtext","p-component",3,"ngModel","ngModelChange","keyup"],["dropdownFilterInput",""],[1,"p-multiselect-filter-icon"],["image","search",1,"p-element","p-dropdown-filter-search-icon"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275template(1,K9,9,20,"ng-container",1),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.initModule))},dependencies:[I.NgIf,De.DefaultValueAccessor,De.NgControlStatus,De.NgModel,Un,ln,Ll,ki,$0],encapsulation:2})}return i})(),F1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,De.FormsModule]})}return i})(),A1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})(),T1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,De.FormsModule,me.NgbDatepickerModule,an,De.ReactiveFormsModule]})}return i})(),O1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,De.FormsModule,De.ReactiveFormsModule,sa.TagInputModule,sn,Nl,ji,an,Rl]})}return i})(),L1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})(),N1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,sa.TagInputModule,Vt,De.FormsModule,wo,an,sn,Nl,ji,Ku,Rl]})}return i})(),dc=(()=>{class i extends xd{constructor(e,n,r){super(e,n,r),this.typeFormatter=e,this.logic=n,this.logicDisplay=r}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-boolean-edit"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:4,vars:1,consts:[[1,"pb-4","checkbox-field"],[1,"checkbox-container"],["type","checkbox","aria-hidden","true",3,"checked","change"],[1,"checkmark"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",0)(1,"label",1)(2,"input",2),t.\u0275\u0275listener("change",function(){return r.toggle()}),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(3,"span",3),t.\u0275\u0275elementEnd()()),2&n&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("checked",r.checked))},encapsulation:2})}return i})(),R1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})(),B1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,De.FormsModule,De.ReactiveFormsModule,Vt]})}return i})(),k1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})(),j1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})();const G9=["multiSelect"];function Z9(i,s){1&i&&t.\u0275\u0275element(0,"scrm-image",6)}function q9(i,s){1&i&&t.\u0275\u0275element(0,"scrm-image",7)}function Q9(i,s){1&i&&t.\u0275\u0275element(0,"scrm-image",8)}let jd=(()=>{class i extends Kl{constructor(e,n,r,o,a,l,c){super(e,n,r,o),this.languages=e,this.typeFormatter=n,this.logic=r,this.logicDisplay=o,this.screenSize=a,this.systemConfigStore=l,this.primengConfig=c,this.placeholderLabel="",this.selectedItemsLabel="",this.emptyFilterLabel="",this.maxSelectedLabels=20,this.selectAll=!1,this.filteredOptions=[],this.filteredWord=""}ngOnInit(){this.checkAndInitAsDynamicEnum(),this.getTranslatedLabels(),super.ngOnInit();const e=this.systemConfigStore.getUi("multiselect_max_number");this.screenSize.screenSize$.pipe((0,v.take)(1)).subscribe(n=>{this.maxSelectedLabels=e[n]||this.maxSelectedLabels}),this.primengConfig.ripple=!0,this.clearButton={klass:["btn","btn-sm","btn-outline-secondary","m-0","border-0"],onClick:n=>{this.onRemove()},icon:"cross"}}onAdd(){const e=this.selectedValues.map(n=>n.value);this.field.valueList=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty(),this.calculateSelectAll()}onSelectAll(e){this.selectAll=e.checked,this.selectAll?(this.selectedValues=this.multiSelect.visibleOptions()&&this.multiSelect.visibleOptions().length?this.multiSelect.visibleOptions():this.options,this.onAdd()):(this.selectedValues=[],this.onRemove())}onRemove(){const e=this.selectedValues.map(n=>n.value);this.field.valueList=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty(),this.calculateSelectAll()}onClear(){this.selectedValues=[],this.multiSelect.filterValue="",this.onRemove()}onPanelShow(){this.multiSelect.filterInputChild.nativeElement.focus(),this.multiSelect.filterValue="",this.calculateSelectAll()}onFilter(){this.calculateSelectAll()}getTranslatedLabels(){this.placeholderLabel=this.languages.getAppString("LBL_SELECT_ITEM")||"",this.selectedItemsLabel=this.languages.getAppString("LBL_ITEMS_SELECTED")||"",this.emptyFilterLabel=this.languages.getAppString("ERR_SEARCH_NO_RESULTS")||""}calculateSelectAll(){const e=this?.multiSelect?.visibleOptions()??[],n=(this?.selectedValues??[]).map(r=>r.value);this.selectAll=!(!e.length||!n.length)&&!(e.length>n.length)&&e.every(r=>n.includes(r.value))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt),t.\u0275\u0275directiveInject(li),t.\u0275\u0275directiveInject(ht),t.\u0275\u0275directiveInject(Jr))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-multienum-edit"]],viewQuery:function(n,r){if(1&n&&t.\u0275\u0275viewQuery(G9,5),2&n){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.multiSelect=o.first)}},features:[t.\u0275\u0275InheritDefinitionFeature],decls:6,vars:14,consts:[[1,"d-flex","align-items-center"],[3,"options","ngModel","optionLabel","placeholder","selectedItemsLabel","emptyFilterMessage","maxSelectedLabels","styleClass","showToggleAll","selectAll","autoOptionFocus","autofocusFilter","showClear","focusOnHover","ngModelChange","onChange","onSelectAllChange","onRemove","onPanelShow","onFilter","onClear"],["multiSelect",""],["pTemplate","dropdownicon"],["pTemplate","filtericon"],["pTemplate","checkicon"],["image","down_carret"],["image","search"],["image","checkbox_cross"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",0)(1,"p-multiSelect",1,2),t.\u0275\u0275listener("ngModelChange",function(a){return r.selectedValues=a})("onChange",function(){return r.onAdd()})("onSelectAllChange",function(a){return r.onSelectAll(a)})("onRemove",function(){return r.onRemove()})("onPanelShow",function(){return r.onPanelShow()})("onFilter",function(){return r.onFilter()})("onClear",function(){return r.onClear()}),t.\u0275\u0275template(3,Z9,1,0,"ng-template",3),t.\u0275\u0275template(4,q9,1,0,"ng-template",4),t.\u0275\u0275template(5,Q9,1,0,"ng-template",5),t.\u0275\u0275elementEnd()()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("options",r.options)("ngModel",r.selectedValues)("optionLabel","label")("placeholder",r.placeholderLabel)("selectedItemsLabel","{0} "+r.selectedItemsLabel)("emptyFilterMessage",r.emptyFilterLabel)("maxSelectedLabels",r.maxSelectedLabels)("styleClass","w-100 "+r.getInvalidClass())("showToggleAll",!0)("selectAll",r.selectAll)("autoOptionFocus",!1)("autofocusFilter",!0)("showClear",!0)("focusOnHover",!0))},dependencies:[De.NgControlStatus,De.NgModel,Ll,ki,ln],encapsulation:2})}return i})();function J9(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.field.value)}}function Y9(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"formatNumber"),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,e.field.value),"\n")}}let pc=(()=>{class i extends Ql{constructor(e,n,r,o,a){super(e,n,r,o,a),this.userPreferences=e,this.systemConfig=n,this.typeFormatter=r,this.logic=o,this.logicDisplay=a}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Xt),t.\u0275\u0275directiveInject(ht),t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-int-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[4,"ngIf"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,J9,2,1,"ng-container",0),t.\u0275\u0275template(1,Y9,3,3,"ng-container",0),t.\u0275\u0275pipe(2,"async")),2&n&&(t.\u0275\u0275property("ngIf",!r.format),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.format&&t.\u0275\u0275pipeBind1(2,2,r.vm$)))},dependencies:[I.NgIf,I.AsyncPipe,Fd],encapsulation:2})}return i})(),P1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,De.FormsModule,Nl,an,Ku,sn,Rl]})}return i})(),V1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Ad]})}return i})(),U1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})(),Pd=(()=>{class i extends Mn{constructor(e,n,r){super(e,n,r),this.typeFormatter=e,this.logic=n,this.logicDisplay=r}ngOnInit(){super.ngOnInit(),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}get rows(){return this.field.metadata&&this.field.metadata.rows?this.field.metadata.rows:6}get cols(){return this.field.metadata&&this.field.metadata.cols?this.field.metadata.cols:20}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-text-edit"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:6,consts:[[3,"rows","cols","ngClass","formControl"]],template:function(n,r){1&n&&t.\u0275\u0275element(0,"textarea",0),2&n&&(t.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),t.\u0275\u0275property("rows",r.rows)("cols",r.cols)("ngClass",r.klass)("formControl",r.field.formControl))},dependencies:[I.NgClass,De.DefaultValueAccessor,De.NgControlStatus,De.FormControlDirective],encapsulation:2})}return i})(),$1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,De.FormsModule,me.NgbDatepickerModule,an,De.ReactiveFormsModule]})}return i})(),z1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,De.FormsModule,De.ReactiveFormsModule]})}return i})();function X9(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"option",4),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275classMap(n.getId(e)),t.\u0275\u0275property("ngValue",e.value),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.label," ")}}function e7(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,X9,2,5,"option",3),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.options)}}let ha=(()=>{class i extends to{constructor(e,n,r,o){super(e,n,r,o),this.languages=e,this.typeFormatter=n,this.logic=r,this.logicDisplay=o}ngOnInit(){this.checkAndInitAsDynamicEnum(),super.ngOnInit(),this.subscribeValueChanges()}getId(e){return this.field.name+"-"+e.value}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-dropdownenum-edit"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"dropdownenum"],[1,"custom-select","custom-select-sm",3,"formControl"],[4,"ngIf"],[3,"class","ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",0)(1,"select",1),t.\u0275\u0275template(2,e7,2,1,"ng-container",2),t.\u0275\u0275elementEnd()()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("formControl",r.field.formControl),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.options&&r.options.length))},dependencies:[I.NgForOf,I.NgIf,De.NgSelectOption,De.\u0275NgSelectMultipleOption,De.SelectControlValueAccessor,De.NgControlStatus,De.FormControlDirective],encapsulation:2})}return i})(),H1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,De.FormsModule,De.ReactiveFormsModule]})}return i})(),no=(()=>{class i extends to{constructor(e,n,r,o){super(e,n,r,o),this.languages=e,this.typeFormatter=n,this.logic=r,this.logicDisplay=o}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-dropdownenum-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(n,r){1&n&&t.\u0275\u0275text(0),2&n&&t.\u0275\u0275textInterpolate1("\n",r.valueLabel,"\n")},encapsulation:2})}return i})(),W1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,De.FormsModule]})}return i})(),fc=(()=>{class i extends to{constructor(e,n,r,o){super(e,n,r,o),this.languages=e,this.typeFormatter=n,this.logic=r,this.logicDisplay=o}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-radioenum-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(n,r){1&n&&t.\u0275\u0275text(0),2&n&&t.\u0275\u0275textInterpolate1("\n",r.valueLabel,"\n")},encapsulation:2})}return i})(),K1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,De.FormsModule]})}return i})();function t7(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"input",2),t.\u0275\u0275elementStart(2,"label",3),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275classMapInterpolate1("form-check radioenum-input ",n.getId(e),""),t.\u0275\u0275classProp("form-check-inline","row"===n.displayDirection),t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("id",n.getId(e)),t.\u0275\u0275property("checked",n.field.value===e.value)("formControl",n.field.formControl)("value",e.value),t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("for",n.getId(e)),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.label," ")}}let Vd=(()=>{class i extends to{constructor(e,n,r,o){super(e,n,r,o),this.languages=e,this.typeFormatter=n,this.logic=r,this.logicDisplay=o}get displayDirection(){return this.field&&this.field.definition&&this.field.definition.displayDirection?this.field.definition.displayDirection:""}ngOnInit(){this.checkAndInitAsDynamicEnum(),super.ngOnInit(),this.subscribeValueChanges(),this.record&&this.record.formGroup?this.formGroup=this.record.formGroup:(this.formGroup=new De.UntypedFormGroup({}),this.formGroup.addControl(this.field.name,this.field.formControl))}getId(e){return this.field.name+"-"+e.value}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-radioenum-edit"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[1,"radioenum"],[3,"form-check-inline","class",4,"ngFor","ngForOf"],["type","radio",1,"form-check-input",3,"checked","formControl","value","id"],[1,"form-check-label",3,"for"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275template(1,t7,4,11,"div",1),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",r.options))},dependencies:[I.NgForOf,De.DefaultValueAccessor,De.RadioControlValueAccessor,De.NgControlStatus,De.FormControlDirective],encapsulation:2})}return i})(),G1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,De.FormsModule,De.ReactiveFormsModule]})}return i})(),Z1=(()=>{class i extends Mn{constructor(e,n,r){super(e,n,r),this.typeFormatter=e,this.logic=n,this.logicDisplay=r}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-html-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[1,"field-html","text-break",3,"innerHTML"]],template:function(n,r){1&n&&t.\u0275\u0275element(0,"div",0),2&n&&t.\u0275\u0275property("innerHTML",r.field.value,t.\u0275\u0275sanitizeHtml)},encapsulation:2})}return i})(),q1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,De.FormsModule]})}return i})(),mc=(()=>{class i extends Mn{constructor(e,n,r){super(e,n,r),this.typeFormatter=e,this.logic=n,this.logicDisplay=r}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-password-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:0,template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1,"*****"),t.\u0275\u0275elementEnd())},encapsulation:2})}return i})(),Q1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})(),Ud=(()=>{class i extends Mn{constructor(e,n,r){super(e,n,r),this.typeFormatter=e,this.logic=n,this.logicDisplay=r}ngOnInit(){super.ngOnInit(),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-password-edit"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:5,consts:[["type","password",3,"formControl","ngClass","value"]],template:function(n,r){1&n&&t.\u0275\u0275element(0,"input",0),2&n&&(t.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),t.\u0275\u0275property("formControl",r.field.formControl)("ngClass",r.klass)("value",r.field.value))},dependencies:[I.NgClass,De.DefaultValueAccessor,De.NgControlStatus,De.FormControlDirective],encapsulation:2})}return i})(),J1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,De.FormsModule,De.ReactiveFormsModule,Vt]})}return i})(),$d=(()=>{class i extends Mn{constructor(e,n,r,o){super(e,n,o),this.typeFormatter=e,this.logic=n,this.config=r,this.logicDisplay=o,this.settings={},this.initialValue=""}ngOnInit(){super.ngOnInit(),this.initSettings(),this.initialValue=this.field.value}initSettings(){const r=this.config.getConfigValue("ui")?.tinymce?.detail??{};let a={};a=(0,ie.merge)(a,{toolbar:!1,menubar:!1,readonly:!0,deprecation_warnings:!1},r,this.field?.metadata?.tinymce?.detail??{}),this.settings=a}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(ht),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-tinymce-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:3,consts:[[1,"field-html","text-break",3,"initialValue","init","disabled"]],template:function(n,r){1&n&&t.\u0275\u0275element(0,"editor",0),2&n&&t.\u0275\u0275property("initialValue",r.initialValue)("init",r.settings)("disabled",!0)},dependencies:[jl],encapsulation:2,changeDetection:0})}return i})(),Y1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({providers:[{provide:Gu,useValue:"tinymce/tinymce.min.js"}],imports:[I.CommonModule,De.FormsModule,Q0,De.ReactiveFormsModule]})}return i})(),zd=(()=>{class i extends Mn{constructor(e,n,r,o){super(e,n,r),this.typeFormatter=e,this.logic=n,this.logicDisplay=r,this.config=o,this.settings={},this.modelEvents="change",this.ignoreEvents="onKeyDown,onKeyPress,onKeyUp,onSelectionChange",this.value=""}ngOnInit(){super.ngOnInit(),this.initSettings(),this.subscribeValueChanges(),this.value=this.field.value??""}ngOnDestroy(){this.unsubscribeAll()}initSettings(){const r=this.config.getConfigValue("ui")?.tinymce?.edit??{};let a={};a=(0,ie.merge)(a,{height:300,menubar:!1,deprecation_warnings:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify |  bullist numlist outdent indent | removeformat | help",toolbar_mode:"floating"},r,this?.field?.metadata?.tinymce?.edit??{}),this.modelEvents=a?.modelEvents??"change",this.ignoreEvents=a?.ignoreEvents??"onKeyDown,onKeyPress,onKeyUp,onSelectionChange",this.settings=a}setModel(){this.field.formControl.setValue(this.value)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt),t.\u0275\u0275directiveInject(ht))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-tinymce-edit"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:4,consts:[[1,"field-html",3,"init","modelEvents","ignoreEvents","formControl"]],template:function(n,r){1&n&&t.\u0275\u0275element(0,"editor",0),2&n&&t.\u0275\u0275property("init",r.settings)("modelEvents",r.modelEvents)("ignoreEvents",r.ignoreEvents)("formControl",r.field.formControl)},dependencies:[De.NgControlStatus,jl,De.FormControlDirective],encapsulation:2,changeDetection:0})}return i})(),X1=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({providers:[{provide:Gu,useValue:"tinymce/tinymce.min.js"}],imports:[I.CommonModule,De.FormsModule,Q0,De.ReactiveFormsModule]})}return i})(),ga=(()=>{class i extends Mn{constructor(e,n,r){super(e,n,r),this.typeFormatter=e,this.logic=n,this.logicDisplay=r}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-icon-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"image"]],template:function(n,r){1&n&&t.\u0275\u0275element(0,"scrm-image",0),2&n&&t.\u0275\u0275property("image",r.field.value)},dependencies:[ln],encapsulation:2})}return i})(),eC=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,sn]})}return i})();function n7(i,s){1&i&&t.\u0275\u0275element(0,"br")}function i7(i,s){1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1," ... "),t.\u0275\u0275elementContainerEnd())}function r7(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",1)(1,"span"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(3,n7,1,0,"br",2),t.\u0275\u0275template(4,i7,2,0,"ng-container",2),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=s.last,r=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngClass",r.klass)("title",r.field.value),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n&&r.isTruncated)}}let Hd=(()=>{class i extends Mn{constructor(e,n,r){super(e,n,r),this.typeFormatter=e,this.logic=n,this.logicDisplay=r,this.isTruncated=!1}truncateValue(e){let r=e.slice(0,50),o=r.split("\n");const l=o.slice(0,3);return this.isTruncated=r.length!==e.length||o.length>3,l}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-text-list"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"ngClass","title",4,"ngFor","ngForOf"],[3,"ngClass","title"],[4,"ngIf"]],template:function(n,r){1&n&&t.\u0275\u0275template(0,r7,5,5,"div",0),2&n&&t.\u0275\u0275property("ngForOf",r.truncateValue(r.field.value))},dependencies:[I.NgClass,I.NgForOf,I.NgIf],encapsulation:2})}return i})(),tC=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,De.FormsModule]})}return i})();const nC=[U1,B1,C1,Q1,J1,V1,eC,y1,b1,A1,a1,T1,$1,p1,d1,m1,j1,u1,h1,F1,z1,tC,L1,I1,N1,s1,r1,g1,W1,H1,K1,G1,v1,P1,O1,k1,R1,q1,Y1,X1],iC=[xs,Cd,Ed,mc,Ud,pc,Id,rc,Wl,ql,Yl,Xl,ec,Sd,f1,Es,ga,Jl,ic,bd,Pd,Hd,oc,Bd,kd,Zl,Gl,Dd,no,ha,fc,Vd,tc,jd,Ds,Is,dc,Z1,$d,zd],Wd={"varchar.list":xs,"varchar.detail":xs,"varchar.edit":Cd,"varchar.filter":Ed,"password.list":mc,"password.detail":mc,"password.edit":Ud,"char.list":xs,"char.detail":xs,"int.list":pc,"int.detail":pc,"file.detail":Id,"float.list":rc,"float.detail":rc,"phone.list":Wl,"phone.detail":Wl,"date.list":ql,"date.detail":ql,"date.edit":Yl,"date.filter":Xl,"datetime.list":ec,"datetime.detail":ec,"datetime.edit":Sd,"datetime.filter":Xl,"url.list":Es,"url.detail":Es,"icon.detail":ga,"icon.edit":ga,"icon.list":ga,"link.list":Es,"link.detail":Es,"currency.list":Jl,"currency.detail":Jl,"email.list":ic,"email.detail":ic,"text.detail":bd,"text.edit":Pd,"text.list":Hd,"relate.list":oc,"relate.edit":Bd,"relate.detail":oc,"relate.filter":kd,"fullname.list":Zl,"fullname.detail":Zl,"enum-radio.list":fc,"enum-radio.detail":fc,"enum-radio.edit":Vd,"enum-dropdown.list":no,"enum-dropdown.detail":no,"enum-dropdown.edit":ha,"enum-chips.list":Gl,"enum-chips.detail":Gl,"enum-chips.edit":Dd,"enum.list":no,"enum.detail":no,"enum.edit":ha,"enum.filter":Ds,"multienum.list":tc,"multienum.detail":tc,"multienum.edit":jd,"multienum.filter":Ds,"dynamicenum.list":no,"dynamicenum.detail":no,"dynamicenum.edit":ha,"dynamicenum.filter":Ds,"boolean.list":Is,"boolean.detail":Is,"boolean.edit":dc,"bool.list":Is,"bool.detail":Is,"bool.edit":dc,"bool.filter":Ds,"html.detail":$d,"html.edit":zd};class Fi{constructor(){this.init()}register(s,e,n,r){this.map.addEntry(s,Fi.getKey(e,n),r)}registerField(s,e,n,r){this.fieldMap.addEntry(s,Fi.getKey(e,n),r)}exclude(s,e){this.map.excludeEntry(s,e)}getDisplayType(s,e,n,r,o){const a=this.getDisplayTypeKey(e,n);return this.hasFieldOverride(s,o,r)?this.getFieldOverride(s,e,r,o):n&&this.has(s,a,r)?this.get(s,a,r,o):this.get(s,e,r,o)}get(s,e,n,r){const o=this.map.getGroupEntries(s);let a=Fi.getKey(e,n);return o[a]||"massupdate"===n&&(a=Fi.getKey(e,"edit"),o[a])?o[a]:o[Fi.getKey("varchar",n)]}getFieldOverride(s,e,n,r){const o=this.fieldMap.getGroupEntries(s);let a=Fi.getKey(r,n);return o[a]||"massupdate"===n&&(a=Fi.getKey(r,"edit"),o[a])?o[a]:null}has(s,e,n){return!!this.map.getGroupEntries(s)[Fi.getKey(e,n)]}hasFieldOverride(s,e,n){return!!this.fieldMap.getGroupEntries(s)[Fi.getKey(e,n)]}static getKey(s,e){return s+"."+e}getDisplayTypeKey(s,e){return s&&e?s+"-"+e:""}init(){this.map=new S.OverridableMap,this.fieldMap=new S.OverridableMap,Object.keys(this.getDefaultMap()).forEach(s=>{const[e,n]=s.split(".",2);this.register("default",e,n,this.getDefaultMap()[s])})}getDefaultMap(){return{}}}let hc=(()=>{class i extends Fi{constructor(){super()}getDefaultMap(){return Wd}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),rC=(()=>{class i{constructor(e){this.asyncActionService=e}run(e,n,r){this.asyncActionService.run(e,{payload:{fieldName:n.name??"",fieldValue:n.value??""},record:{id:r.id??"",type:r.type??"",module:r.module??"",favorite:r.favorite??"",attributes:r.attributes??{},acls:r.acls??[]}})}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(nn))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Kd=function(i,s,e,n,r,o){return{mode:i,originalMode:s,field:e,klass:n,record:r,parent:o}};function o7(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"a",1),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.onClick())}),t.\u0275\u0275element(2,"ndc-dynamic",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("ndcDynamicComponent",e.componentType)("ndcDynamicInputs",t.\u0275\u0275pureFunction6(2,Kd,e.mode,e.originalMode,e.field,e.klass,e.record,e.parent))}}function s7(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"a",3),t.\u0275\u0275element(2,"ndc-dynamic",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("routerLink",e.getLink()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ndcDynamicComponent",e.componentType)("ndcDynamicInputs",t.\u0275\u0275pureFunction6(3,Kd,e.mode,e.originalMode,e.field,e.klass,e.record,e.parent))}}function a7(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"ndc-dynamic",2),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ndcDynamicComponent",e.componentType)("ndcDynamicInputs",t.\u0275\u0275pureFunction6(2,Kd,e.mode,e.originalMode,e.field,e.klass,e.record,e.parent))}}function l7(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,o7,3,9,"ng-container",0),t.\u0275\u0275template(2,s7,3,10,"ng-container",0),t.\u0275\u0275template(3,a7,2,9,"ng-container",0),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.hasOnClick()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.isLink()&&!e.hasOnClick()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.isLink()&&!e.hasOnClick())}}function c7(i,s){1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",4),t.\u0275\u0275element(2,"div",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd())}const u7=function(i){return{field:i}};function d7(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",7),t.\u0275\u0275element(1,"scrm-dynamic-label",8),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("context",n.getMessageContext(e.value,n.record))("fields",t.\u0275\u0275pureFunction1(3,u7,n.field))("labelKey",n.getMessageLabelKey(e.value))}}function p7(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,d7,2,5,"div",6),t.\u0275\u0275pipe(2,"keyvalue"),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(2,1,e.field.formControl.errors))}}function f7(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,p7,3,3,"ng-container",0),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.field.formControl.invalid&&e.field.formControl.touched)}}let va=(()=>{class i{constructor(e,n,r,o,a,l){this.navigation=e,this.moduleNameMapper=n,this.router=r,this.dynamicLabelService=o,this.linkRouteAsyncActionService=a,this.cd=l,this.record=null,this.parent=null,this.klass=null,this.class="dynamic-field"}get getRelateLink(){let e=this.field.definition.module;if("parent_type"===this.field.definition.type_name&&(e=this.record.attributes.parent_type),this.field.definition.id_name&&e){const n=this.moduleNameMapper.toFrontend(e);return this.navigation.getRecordRouterLink(n,this.record.attributes[this.field.definition.id_name])}return""}ngOnInit(){this.setHostClass(),this.cd.detectChanges()}isLink(){return!(S.EDITABLE_VIEW_MODES.includes(this.mode)||!this.field||!this.record||"relate"!==this.type&&(!this?.field?.metadata||!this?.field?.metadata?.link))}hasOnClick(){const e=this?.field?.metadata??{};return!(!e?.linkAsyncAction&&!e?.onClick)}isEdit(){return"edit"===this.mode||"filter"===this.mode}getLink(){if("relate"===this.type)return this.getRelateLink;const e=this?.field?.metadata??null,n=e.linkRoute??null;return e&&n?this.dynamicLabelService.parse(n,{},this.record.fields):this.navigation.getRecordRouterLink(this.record.module,this.record.id)}getMessageContext(e,n){const r=e&&e.message&&e.message.context||{};return r.module=n&&n.module||"",r}getMessageLabelKey(e){return e&&e.message&&e.message.labelKey||""}onClick(){const e=this?.field?.metadata??null;if(e&&e.onClick)return void this.field.metadata.onClick(this.field,this.record);const n=e.linkAsyncAction??null;if(!e||!n)return this.router.navigateByUrl(this.getLink()).then(),!1;this.linkRouteAsyncActionService.run(n,this.field,this.record)}setHostClass(){const e=[];e.push("dynamic-field"),this.mode&&e.push("dynamic-field-mode-"+this.mode),this.type&&e.push("dynamic-field-type-"+this.type),this.field&&this.field.name&&e.push("dynamic-field-name-"+this.field.name),this.class=e.join(" ")}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(In),t.\u0275\u0275directiveInject(En),t.\u0275\u0275directiveInject(Ot.Router),t.\u0275\u0275directiveInject($l),t.\u0275\u0275directiveInject(rC),t.\u0275\u0275directiveInject(t.ChangeDetectorRef))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-dynamic-field"]],hostVars:2,hostBindings:function(n,r){2&n&&t.\u0275\u0275classMap(r.class)},inputs:{mode:"mode",originalMode:"originalMode",type:"type",field:"field",record:"record",parent:"parent",klass:"klass",componentType:"componentType"},decls:3,vars:3,consts:[[4,"ngIf"],[1,"clickable","field-link",3,"click"],[3,"ndcDynamicComponent","ndcDynamicInputs"],[1,"field-link",3,"routerLink"],[1,"dynamic-field"],[1,"flex-grow-1","text-break","rounded","box-loading","skeleton-field-content"],["class","invalid-feedback d-block",4,"ngFor","ngForOf"],[1,"invalid-feedback","d-block"],[3,"context","fields","labelKey"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,l7,4,3,"ng-container",0),t.\u0275\u0275template(1,c7,3,0,"ng-container",0),t.\u0275\u0275template(2,f7,2,1,"ng-container",0)),2&n&&(t.\u0275\u0275property("ngIf",!r.field.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.field.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.isEdit()&&r.field.formControl&&r.field.formControl.errors))},dependencies:[I.NgForOf,I.NgIf,Ot.RouterLink,So,Gt,$t,I.KeyValuePipe],encapsulation:2})}return i})();const m7=["wrapper"];function h7(i,s){1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-label",1),t.\u0275\u0275elementContainerEnd())}function g7(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"span",8)(1,"label"),t.\u0275\u0275element(2,"scrm-label",9),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext(2).$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("labelKey",e.labelKey)("module",n.getModule())}}function v7(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"span",10),t.\u0275\u0275element(1,"scrm-dynamic-field",11),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2).$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("componentType",n.getComponentType(e.type,e.definition))("field",e)("klass",n.klass)("mode",n.mode)("originalMode",n.originalMode)("record",n.record)("parent",n.parent)("type",e.type)}}function _7(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",5),t.\u0275\u0275template(1,g7,3,2,"span",6),t.\u0275\u0275template(2,v7,2,8,"span",7),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275classProp("flex-fill","edit"===n.mode&&"flex-row"===n.direction())("h-100","flex-row"===n.direction()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.labelKey&&n.showLabel(e.definition.name)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.type)}}function y7(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,_7,3,6,"div",4),t.\u0275\u0275elementContainerEnd()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isModeEnabled(n.mode,e))}}function b7(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",null,2),t.\u0275\u0275template(3,y7,2,1,"ng-container",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate1("d-flex ",e.direction()," justify-content-start align-items-start field-group h-100 w-100"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.getFields())}}let Os=(()=>{class i extends Mn{onResize(){this.triggerRecalculateDirection()}constructor(e,n,r,o,a){super(e,r,o),this.typeFormatter=e,this.registry=n,this.logic=r,this.logicDisplay=o,this.config=a,this.direction=(0,t.signal)(""),this.recalculateDirectionBuffer=new D.Subject,this.recalculateDirectionBuffer$=this.recalculateDirectionBuffer.asObservable()}ngOnInit(){super.ngOnInit(),this.subs.push(this.recalculateDirectionBuffer$.pipe((0,v.debounceTime)(50)).subscribe(()=>{this.calculateDirection()})),this.subs.push(this.mode$.subscribe(()=>{this.triggerRecalculateDirection()})),this.triggerRecalculateDirection(),this.hasValidConfig=this.isConfigured()}ngAfterViewInit(){this.triggerRecalculateDirection()}getComponentType(e,n){return this.registry.getDisplayType(this.record&&this.record.module||"default",e,n&&n.displayType||"",this.mode,this.field.name)}getFields(){const e=[];return this.field.definition.layout.forEach(n=>{!this.record.fields[n]||"none"===this.record.fields[n].display||e.push(this.record.fields[n])}),e}getModule(){return this.record?this.record.module:null}calculateDirection(){const e=this?.wrapper?.nativeElement?.offsetWidth??null;let n="flex-column";"inline"===(this?.field?.definition?.display??"")&&(n="flex-row"),e&&"detail"!==this.mode&&"list"!==this.mode&&e<(this?.config?.getUi("group_field_mobile_breakdown_limit")??350)?this.direction.set("flex-column"):this.direction.set(n)}isConfigured(){return this.hasDisplay()&&this.hasLayout()&&this.hasGroupFields()}showLabel(e){const n=this.field.definition||null;if(!n||!n.showLabel)return!1;const o=n.showLabel[this.mode]||null;return!(!o||typeof o>"u")&&(o.includes("*")||o.includes(e))}isModeEnabled(e,n){const r=n.definition.modes;return!r||r.length<1||r.includes(e)}triggerRecalculateDirection(){this.recalculateDirectionBuffer.next(!0)}hasGroupFields(){return!(!this.field.definition.groupFields||!Object.keys(this.field.definition.groupFields).length)}hasLayout(){return!(!this.field.definition.layout||!this.field.definition.layout.length)}hasDisplay(){return!!this.field.definition.display}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(hc),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt),t.\u0275\u0275directiveInject(ht))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-group-field"]],viewQuery:function(n,r){if(1&n&&t.\u0275\u0275viewQuery(m7,5),2&n){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.wrapper=o.first)}},hostBindings:function(n,r){1&n&&t.\u0275\u0275listener("resize",function(a){return r.onResize(a)},!1,t.\u0275\u0275resolveWindow)},features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[[4,"ngIf"],["labelKey","LBL_BAD_GROUP_FIELD_CONFIG"],["wrapper",""],[4,"ngFor","ngForOf"],["class","field-group-item d-flex flex-column justify-content-end w-100",3,"flex-fill","h-100",4,"ngIf"],[1,"field-group-item","d-flex","flex-column","justify-content-end","w-100"],["class","field-group-label pt-2 pr-1",4,"ngIf"],["class","field-group-field pr-1",4,"ngIf"],[1,"field-group-label","pt-2","pr-1"],[3,"labelKey","module"],[1,"field-group-field","pr-1"],[3,"componentType","field","klass","mode","originalMode","record","parent","type"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,h7,2,0,"ng-container",0),t.\u0275\u0275template(1,b7,4,4,"ng-container",0)),2&n&&(t.\u0275\u0275property("ngIf",!r.hasValidConfig),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.hasValidConfig))},dependencies:[I.NgForOf,I.NgIf,qt,va],encapsulation:2})}return i})(),_a=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Ot.RouterModule,Mo,vt]})}return i})(),oC=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Vt,_a]})}return i})();const sC=i=>s=>i.validateFloatUserFormat(s.value)?{currencyValidator:{valid:!1,format:i.getFloatUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_CURRENCY_FORMAT",context:{value:s.value,expected:i.toUserFormat("1000.50")}}}}:null;let aC=(()=>{class i{constructor(e){this.formatter=e}applies(e,n){return!(!n||!n.fieldDefinition)&&"currency"===n.type}getValidator(e){return e&&e.fieldDefinition?[sC(this.formatter)]:[]}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Co))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const lC=(i,s)=>e=>i.validateUserFormat(e.value,s)?{invalidDate:{value:e.value,message:{labelKey:"LBL_VALIDATION_ERROR_DATE_FORMAT",context:{value:e.value,expected:i.toUserFormat("2020-01-23")}}}}:null;let cC=(()=>{class i{constructor(e,n){this.formatter=e,this.utils=n}applies(e,n){return!(!n||!n.fieldDefinition)&&"date"===n.type}getValidator(e){return e&&e.fieldDefinition?[lC(this.formatter,e?.metadata?.date_time_format||"")]:[]}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(eo),t.\u0275\u0275inject(bo))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const uC=i=>s=>i.validateUserFormat(s.value)?{dateTimeValidator:{value:s.value,message:{labelKey:"LBL_VALIDATION_ERROR_DATETIME_FORMAT",context:{value:s.value,expected:i.toUserFormat("2020-01-23 12:30:40")}}}}:null;let dC=(()=>{class i{constructor(e){this.formatter=e}applies(e,n){return!(!n||!n.fieldDefinition)&&"datetime"===n.type}getValidator(e){return e&&e.fieldDefinition?[uC(this.formatter)]:[]}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Fr))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const pC=i=>s=>i.validateFloatUserFormat(s.value)?{floatValidator:{valid:!1,format:i.getFloatUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_FLOAT_FORMAT",context:{value:s.value,expected:i.toUserFormat("1000.50")}}}}:null;let fC=(()=>{class i{constructor(e){this.formatter=e}applies(e,n){return!(!n||!n.fieldDefinition)&&"float"===n.type}getValidator(e){return e&&e.fieldDefinition?[pC(this.formatter)]:[]}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Co))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const mC=i=>s=>i.validateIntUserFormat(s.value)?{intValidator:{valid:!1,format:i.getIntUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_INT_FORMAT",context:{value:s.value,expected:i.toUserFormat("1000")}}}}:null;let hC=(()=>{class i{constructor(e){this.formatter=e}applies(e,n){return!(!n||!n.fieldDefinition)&&"int"===n.type}getValidator(e){return e&&e.fieldDefinition?[mC(this.formatter)]:[]}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Co))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),gC=(()=>{class i{constructor(e){this.formUtils=e}toUserFormat(e){return e}toInternalFormat(e){return e}getUserFormatPattern(){return/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/}validateUserFormat(e){const n=this.formUtils.getTrimmedInputValue(e);return!this.formUtils.isEmptyInputValue(n)&&!new RegExp(this.getUserFormatPattern()).test(n)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(bo))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const vC=i=>s=>i.validateUserFormat(s.value)?{emailValidator:{valid:!1,format:i.getUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_EMAIL_FORMAT",context:{value:s.value,expected:"example@example.org"}}}}:null;let _C=(()=>{class i{constructor(e){this.formatter=e}applies(e,n){return!(!n||!n.fieldDefinition)&&"email"===n.type}getValidator(e){return e&&e.fieldDefinition?[vC(this.formatter)]:[]}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(gC))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const yC=i=>s=>i.validateUserFormat(s.value)?{phoneValidator:{valid:!1,format:i.getUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_PHONE_FORMAT",context:{value:s.value}}}}:null;let bC=(()=>{class i{constructor(e){this.formatter=e}applies(e,n){return!(!n||!n.fieldDefinition)&&"phone"===n.type}getValidator(e){return e&&e.fieldDefinition?[yC(this.formatter)]:[]}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ld))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const CC=i=>s=>{const e=De.Validators.min(i)(s);return null===e?null:{emailValidator:{...e,message:{labelKey:"LBL_VALIDATION_ERROR_MIN",context:{value:s.value,min:""+i}}}}},SC=i=>s=>{const e=De.Validators.max(i)(s);return null===e?null:{emailValidator:{...e,message:{labelKey:"LBL_VALIDATION_ERROR_MAX",context:{value:s.value,max:""+i}}}}};let MC=(()=>{class i{applies(e,n){return!(!n||!n.fieldDefinition)&&null!==this.getRangeValidation(n.fieldDefinition)}getValidator(e){if(!e||!e.fieldDefinition)return[];const n=this.getRangeValidation(e.fieldDefinition);if(!n)return[];const r=n.min&&parseInt(""+n.min,10),o=n.max&&parseInt(""+n.max,10),a=[];return isFinite(r)&&a.push(CC(r)),isFinite(o)&&a.push(SC(o)),a}getRangeValidation(e){if(this.isRangeValidation(e.validation))return e.validation;if(!e.validations||!e.validations.length)return null;let n=null;return e.validations.some(r=>(n=r,this.isRangeValidation(r))),n}isRangeValidation(e){return e&&"range"===e.type}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const wC=(i,s)=>e=>{const n=i.name||"";if(!n||!s||!s.fields)return null;const r=s.fields[n]||{},o=r.items;if(!r||!o||!o.length)return null;let a=0;const l=o.filter(c=>!(c&&c.attributes&&c.attributes.deleted));return l&&l.length<1||(l.some(c=>{const u=c.fields&&c.fields["email-fields"]||{},d=u.attributes&&u.attributes.primary_address||null;return!!d&&((0,S.isTrue)(d.value)&&a++,a>1)}),1==a)?null:0==a?{primaryEmailValidation:{valid:!1,message:{labelKey:"LBL_NO_PRIMARY_EMAIL_VALIDATION_ERROR",context:{}}}}:{primaryEmailValidation:{valid:!1,message:{labelKey:"LBL_MULTIPLE_PRIMARY_EMAIL_VALIDATION_ERROR",context:{}}}}};let DC=(()=>{class i{constructor(){}applies(e,n){return!(!n||!n.fieldDefinition)&&("line-items"===(n.type||n.fieldDefinition.type||"")&&"email_addresses"===(n.name||n.fieldDefinition.name||""))}getValidator(e,n){return e&&e.fieldDefinition&&n?[wC(e,n)]:[]}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const xC=(i,s)=>e=>{const n=i.name||"";if(!n||!s||!s.fields)return null;const r=s.fields[n]||{},o=r.items;if(!r||!o||!o.length)return null;const a={};let l=0;const c=o.filter(u=>!(u&&u.attributes&&u.attributes.deleted));return c&&c.length<1||(c.some(u=>{const d=u.fields&&u.fields["email-fields"]||{},p=d.attributes&&d.attributes.email_address||null;if(!p.value)return!1;const f=(""+p.value).toUpperCase();return a[f]?(l++,!0):(a[f]=!0,l>1)}),0==l)?null:{duplicateEmailValidation:{valid:!1,message:{labelKey:"LBL_DUPLICATE_EMAIL_VALIDATION_ERROR",context:{}}}}};let EC=(()=>{class i{constructor(){}applies(e,n){return!(!n||!n.fieldDefinition)&&("line-items"===(n.type||n.fieldDefinition.type||"")&&"email_addresses"===(n.name||n.fieldDefinition.name||""))}getValidator(e,n){return e&&e.fieldDefinition&&n?[xC(e,n)]:[]}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Ao=(()=>{class i{constructor(e,n,r,o,a,l,c,u,d,p,f){this.requiredValidator=e,this.rangeValidator=n,this.currencyValidator=r,this.dateValidator=o,this.datetimeValidator=a,this.emailValidator=l,this.floatValidator=c,this.intValidator=u,this.phoneValidator=d,this.primaryEmailValidator=p,this.duplicateEmailValidator=f,this.filterFieldExclusion={default:{}},this.saveFieldExclusions={default:{}},this.saveValidators=new S.OverridableMap,this.asyncSaveValidators=new S.OverridableMap,this.filterValidators=new S.OverridableMap,this.saveValidators.addEntry("default",this.getKey("required","all"),e),this.saveValidators.addEntry("default",this.getKey("range","all"),n),this.saveValidators.addEntry("default",this.getKey("currency","all"),r),this.saveValidators.addEntry("default",this.getKey("date","all"),o),this.saveValidators.addEntry("default",this.getKey("datetime","all"),a),this.saveValidators.addEntry("default",this.getKey("email","all"),l),this.saveValidators.addEntry("default",this.getKey("float","all"),c),this.saveValidators.addEntry("default",this.getKey("int","all"),u),this.saveValidators.addEntry("default",this.getKey("phone","all"),d),this.saveValidators.addEntry("default",this.getKey("primary-email","all"),p),this.saveValidators.addEntry("default",this.getKey("duplicate-email","all"),f),this.filterValidators.addEntry("default",this.getKey("date","all"),o),this.filterValidators.addEntry("default",this.getKey("datetime","all"),a),this.filterValidators.addEntry("default",this.getKey("float","all"),c),this.filterValidators.addEntry("default",this.getKey("currency","all"),r),this.filterValidators.addEntry("default",this.getKey("int","all"),u),this.filterValidators.addEntry("default",this.getKey("phone","all"),d)}registerFieldSaveValidator(e,n,r,o){this.saveValidators.addEntry(e,this.getKey(n,r),o)}registerSaveValidator(e,n,r){this.saveValidators.addEntry(e,this.getKey(n,"all"),r)}registerFieldFilterValidator(e,n,r,o){this.filterValidators.addEntry(e,this.getKey(n,r),o)}registerFilterValidator(e,n,r){this.filterValidators.addEntry(e,this.getKey(n,"all"),r)}excludeFieldSaveValidator(e,n,r){const o=this.saveFieldExclusions[e]||{},a=this.getKey(n,r);o[a]=a,this.saveFieldExclusions[e]=o}excludeSaveValidator(e,n){this.saveValidators.excludeEntry(e,this.getKey(n,"all"))}excludeFieldFilterValidator(e,n,r){const o=this.filterFieldExclusion[e]||{},a=this.getKey(n,r);o[a]=a,this.filterFieldExclusion[e]=o}excludeFilterValidator(e,n){this.filterValidators.excludeEntry(e,this.getKey(n,"all"))}registerAsyncSaveValidator(e,n,r){this.asyncSaveValidators.addEntry(e,this.getKey(n,"all"),r)}excludeAsyncSaveValidator(e,n){this.saveValidators.excludeEntry(e,this.getKey(n,"all"))}getSaveValidations(e,n,r){const o=this.saveValidators.getGroupEntries(e),a=this.getExclusions(e,this.saveFieldExclusions);return this.filterValidations(o,a,r,n)}getFilterValidations(e,n,r){const o=this.filterValidators.getGroupEntries(e),a=this.getExclusions(e,this.filterFieldExclusion);return this.filterValidations(o,a,r,n)}getAsyncSaveValidations(e,n,r){const o=[],a=this.asyncSaveValidators.getGroupEntries(e);return Object.keys(a).forEach(l=>{const c=a[l];c.applies(r,n)&&o.push(c.getValidator(n,r))}),o}getKey(e,n){return`${e}.${n}`}parseType(e){return(e.split(".")||[])[0]||""}getExclusions(e,n){return{...n.default||{},...n[e]||{}}}filterValidations(e,n,r,o){let a=[];return Object.keys(e).forEach(l=>{const c=this.getKey(this.parseType(l),o.name);if(n[l]||n[c])return;const u=e[l];u.applies(r,o)&&(a=a.concat(u.getValidator(o,r)))}),a}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(hd),t.\u0275\u0275inject(MC),t.\u0275\u0275inject(aC),t.\u0275\u0275inject(cC),t.\u0275\u0275inject(dC),t.\u0275\u0275inject(_C),t.\u0275\u0275inject(fC),t.\u0275\u0275inject(hC),t.\u0275\u0275inject(bC),t.\u0275\u0275inject(DC),t.\u0275\u0275inject(EC))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class IC extends S.BaseField{get value(){return this.valueListState.join(",")}set value(s){this.valueState="",this.valueListState=[],(0,ie.isArray)(s)&&(0,ie.isString)(s[0])?this.valueList=s:s&&this.emitValueChanges()}}const FC={default:S.BaseField,multienum:IC};let To=(()=>{class i extends S.BaseTypeRegistry{initDefault(){Object.keys(this.getDefaultMap()).forEach(e=>{this.register("default",e,this.getDefaultMap()[e])})}getDefaultMap(){return FC}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=t.\u0275\u0275getInheritedFactory(i)))(r||i)}}();static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ya=(()=>{class i{constructor(e,n,r){this.validationManager=e,this.typeFormatter=n,this.fieldRegistry=r}buildField(e,n,r=null){const o=e?.module??"";let a=n?.fieldDefinition??{};const c=(n?.multiModuleDefinitions??{})[o]??{};(0,ie.isEmpty)(c)||(a=c);const{value:u,valueList:d,valueObject:p}=this.parseValue(n,a,e),{validators:f,asyncValidators:m}=this.getSaveValidators(e,n);return this.setupField(e.module,n,u,d,p,e,a,f,m,r)}getFieldLabel(e,n,r){const o=r.getLanguageStrings();return r.getFieldLabel(e,n,o)}parseValue(e,n,r){const o=e&&e.type||"",l=n&&n.rname||"name",c=e.name||"";let u=null,d=null;if(c&&r.attributes[c]){if("relate"===o&&"non-db"===(n&&n.source||"")&&""!==l)return u=r.attributes[c][l],{value:u,valueList:d,valueObject:r.attributes[c]};u=r.attributes[c]}else u="";return"line-items"===o?{value:null,valueList:d}:(Array.isArray(u)&&(d=u,u=null),{value:u,valueList:d})}setupField(e,n,r,o,a,l,c,u,d,p){const f=(0,ie.merge)(c?.metadata??{},n?.metadata??{}),m=this.typeFormatter.toUserFormat(n.type,r,{mode:"edit",metadata:f});n.link&&(f.link=n.link);const g=n.type||c.type,_=new(this.fieldRegistry.get(e,g));_.type=g,_.name=n.name||c.name||"",_.vardefBased=n?.vardefBased??c?.vardefBased??!1,_.readonly=(0,S.isTrue)(n.readonly)||(0,S.isTrue)(c.readonly)||!1,_.display=n.display||c.display||"default",_.defaultDisplay=_.display,"default"===_.defaultDisplay&&(_.defaultDisplay="show"),_.value=r,_.metadata=f,_.definition=c,n?.lineItems&&(_.definition.lineItems=n.lineItems),_.labelKey=n.label||c.vname||"",_.dynamicLabelKey=n.dynamicLabelKey||c.dynamicLabelKey||"";const b=n?.defaultValue??c?.default??c?.defaultValue??null;b&&(_.default=b),_.defaultValueModes=n?.defaultValueModes??c?.defaultValueModes??[],_.validators=u,_.asyncValidators=d,"line-items"===_.type?(_.valueObjectArray=l.attributes[_.name],_.itemFormArray=new De.UntypedFormArray([]),_.formControl=new De.UntypedFormControl(m)):_.formControl=new De.UntypedFormControl(m),_.attributes={},_.source="field",_.logic=n.logic||c.logic||null,_.displayLogic=n.displayLogic||c.displayLogic||null;const M={},y={};return this.addFieldDependencies(_.logic,M,y,"logic"),this.addFieldDependencies(_.displayLogic,M,y,"displayLogic"),_.attributeDependencies=Object.keys(y).map(w=>y[w]),_.fieldDependencies=M,o&&(_.valueList=o),a&&(_.valueObject=a),p&&(_.label=this.getFieldLabel(n.label,e,p)),!_.labelKey&&n.label&&(_.labelKey=n.label),_}addFieldDependencies(e,n,r,o){e&&Object.keys(e).length&&Object.keys(e).forEach(a=>{const l=e[a]||{};l.params&&(l.params&&l.params.attributeDependencies&&l.params.attributeDependencies.forEach(c=>{r[c.field+"."+c.attribute]=c}),l.params&&l.params.fieldDependencies&&l.params.fieldDependencies.forEach(c=>{const d=(n[c]??{}).types??[];d.push(o),n[c]={field:c,type:d}}))})}getSaveValidators(e,n){return{validators:this.validationManager.getSaveValidations(e.module,n,e),asyncValidators:this.validationManager.getAsyncSaveValidations(e.module,n,e)}}getParentValue(e,n,r,o){const a=o.valueParent??"field";return o.valuePath?(0,je.Z)("record"===a?e:n,o.valuePath,""):(0,je.Z)("record"===a?e.attributes:n.valueObject,r,"")}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ao),t.\u0275\u0275inject(mt),t.\u0275\u0275inject(To))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),AC=(()=>{class i extends ya{constructor(e,n,r){super(e,n,r),this.validationManager=e,this.typeFormatter=n,this.fieldRegistry=r}addGroupFields(e,n,r,o,a,l){const u=(n&&n.fieldDefinition||{}).groupFields||{};Object.keys(u).forEach(p=>{const f=u[p];if(o(e,p))return;f&&"relate"===f.type&&"parent_type"===f.type_name&&(f.module=e.attributes.parent_type);const g=a(e,{name:f.name,label:f.vname,type:f.type,fieldDefinition:f},r);g.source="groupField",l(e,f.name,g)})}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ao),t.\u0275\u0275inject(mt),t.\u0275\u0275inject(To))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Gd=(()=>{class i extends ya{constructor(e,n,r){super(e,n,r),this.validationManager=e,this.typeFormatter=n,this.fieldRegistry=r}addAttributes(e,n,r,o,a,l){const c=Object.keys(n)||[];c.length<1||c.forEach(u=>{this.addFieldAttributes(e,n[u],o,a,l)})}addFieldAttributes(e,n,r,o,a){const c=(n&&n.definition||{}).attributeFields||{};Object.keys(c).forEach(d=>{const p=c[d];if(n.attributes[d])return;const m=o(e,n,{name:p.name,label:p.vname,type:p.type,fieldDefinition:p},r);a(e,n,p.name,m)})}buildAttribute(e,n,r,o=null){const a=r&&r.fieldDefinition||{},{value:l,valueList:c,valueObject:u}=this.parseAttributeValue(r,a,e,n),{validators:d,asyncValidators:p}=this.getSaveValidators(e,r),m=this.setupField(e.module,r,l,c,u,e,a,d,p,o);return m.valuePath=a.valuePath,m.valueParent=a.valueParent,m.source="attribute",m.parentKey=n.name,m}addAttributeToRecord(e,n,r,o){!e||!r||!n||!o||(n.attributes=n.attributes||{},n.attributes[r]=o,e.formGroup&&o.formControl&&e.formGroup.addControl(r,o.formControl))}parseAttributeValue(e,n,r,o){const c=n&&n.rname||"name",u=e.name||"";let d;return"relate"===(e&&e.type||"")&&"non-db"===(n&&n.source||"")&&""!==c?(d=this.getParentValue(r,o,u,n)[c],{value:d,valueList:null,valueObject:this.getParentValue(r,o,u,n)}):(d=u?this.getParentValue(r,o,u,n):"",d=this.getParentValue(r,o,u,n),Array.isArray(d)?{value:null,valueList:d,valueObject:null}:(0,J0.Z)(d)?{value:null,valueList:null,valueObject:d}:{value:d,valueList:null,valueObject:null})}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ao),t.\u0275\u0275inject(mt),t.\u0275\u0275inject(To))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Zd=(()=>{class i extends ya{constructor(e,n,r){super(e,n,r),this.validationManager=e,this.typeFormatter=n,this.fieldRegistry=r}buildFilterField(e,n,r=null){const o=n&&n.fieldDefinition||{},{validators:a,asyncValidators:l}=this.getFilterValidators(e,n),c=this.setupField(e.searchModule,n,null,null,null,e,o,a,l,r);return c.criteria=this.initFieldFilter(e.criteria,n,c),c}getFilterValidators(e,n){return{validators:this.validationManager.getFilterValidations(e.searchModule,n,e),asyncValidators:[]}}initFieldFilter(e,n,r){let o;const a=n.name;let l=n.type;return"composite"===l&&(l=r.definition.type),o=e.filters[a]&&e.filters[a].fieldType?(0,S.deepClone)(e.filters[a]):{field:a,fieldType:l,operator:"",values:[]},this.mapEnumEmptyOption(o,r),this.mapRelateFields(o,r,e),o}mapEnumEmptyOption(e,n){!["multienum","enum"].includes(e.fieldType)||!this.getEmptyOption(n)||!e.values||!e.values.length||(e.values=e.values.map(o=>""!==o?o:"__SuiteCRMEmptyString__"))}mapRelateFields(e,n,r){if(!["relate"].includes(e.fieldType)||!e.values||!e.values.length)return;const o=n&&n.definition&&n.definition.id_name||"",a=n&&n.definition&&n.definition.rname||"name",l=r?.filters[o]?.values??[];e.valueObjectArray=e.valueObjectArray??[];const c={};e.valueObjectArray.length&&e.valueObjectArray.forEach(u=>{c[u.id]=u});for(let u=0;u<e.values.length;u++){const p={};p[a]=e.values[u],p.id=l[u]??"",c[p.id]||(c[p.id]=p,e.valueObjectArray.push(p))}}getEmptyOption(e){let n=null;return(e?.definition?.metadata?.extraOptions??[]).forEach(o=>{"__SuiteCRMEmptyString__"===o.value&&(n=o)}),n}isCriteriaFieldInitialized(e,n){const r=e.criteriaFields[n];return!!r&&!r.vardefBased}addToSavedFilter(e,n,r){!e||!n||!r||(e.criteriaFields||(e.criteriaFields={}),e.criteriaFields[n]=r,e.criteria.filters||(e.criteria.filters={}),e.criteria.filters[n]=r.criteria,e.criteriaFormGroup&&r.formControl&&e.criteriaFormGroup.addControl(n,r.formControl))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ao),t.\u0275\u0275inject(mt),t.\u0275\u0275inject(To))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),TC=(()=>{class i extends Zd{constructor(e,n,r){super(e,n,r),this.validationManager=e,this.typeFormatter=n,this.fieldRegistry=r}buildFilterAttribute(e,n,r,o=null){const a=r&&r.fieldDefinition||{};a.valuePath||(a.valuePath="criteria."+(r.name||a.name));const{value:l,valueList:c,valueObject:u}=this.parseFilterAttributeValue(r,a,e,n),{validators:d,asyncValidators:p}=this.getFilterValidators(e,r),m=this.setupField(e.searchModule,r,l,c,u,e,a,d,p,o);return m.valuePath=a.valuePath,m.source="attribute",m.parentKey=n.definition.name,m}addAttributeToSavedFilter(e,n,r,o){!e||!r||!n||!o||(n.attributes=n.attributes||{},n.attributes[r]=o,e.criteriaFormGroup&&o.formControl&&e.criteriaFormGroup.addControl(r,o.formControl))}parseFilterAttributeValue(e,n,r,o){const a=e.name||"";let l;return l=a?this.getParentValue(r,o,a,n):"",Array.isArray(l)?{value:null,valueList:l,valueObject:null}:(0,J0.Z)(l)?{value:null,valueList:null,valueObject:l}:{value:l,valueList:null,valueObject:null}}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ao),t.\u0275\u0275inject(mt),t.\u0275\u0275inject(To))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),OC=(()=>{class i extends Gd{constructor(e,n,r){super(e,n,r),this.validationManager=e,this.typeFormatter=n,this.fieldRegistry=r}addLineItems(e,n,r,o,a){const l=Object.keys(n)||[];l.length<1||l.forEach(c=>{this.addFieldLineItems(e,n[c],o,a)})}addFieldLineItems(e,n,r,o){const a=n&&n.definition||{},c=n.valueObjectArray&&n.valueObjectArray||[];if("line-items"!==(n&&n.type||"")||!c.length)return;const u=a.lineItems?.definition||{};n.items=[],c.forEach(d=>{this.addLineItem(u,d,o,r,e,n)})}addLineItem(e,n,r,o,a,l){const c={name:e.name,label:e.vname,type:e.type,fieldDefinition:(0,S.deepClone)(e)},u={id:n.id||"",type:n.type||"",module:n.module||"",attributes:n.attributes||{},fields:{},formGroup:new De.UntypedFormGroup({})};r(u,c,o),l.itemFormArray.push(u.formGroup),l.items.push(u)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ao),t.\u0275\u0275inject(mt),t.\u0275\u0275inject(To))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),hi=(()=>{class i{constructor(e,n,r,o,a,l,c){this.fieldBuilder=e,this.groupFieldBuilder=n,this.attributeBuilder=r,this.filterFieldBuilder=o,this.filterAttributeBuilder=a,this.lineItemBuilder=l,this.languageStore=c}buildShallowField(e,n){return{type:e,value:n,definition:{type:e}}}addField(e,n,r=null){const o=this.fieldBuilder.buildField(e,n,r);return this.addToRecord(e,n.name,o),this.groupFieldBuilder.addGroupFields(e,n,r,this.isFieldInitialized.bind(this),this.fieldBuilder.buildField.bind(this.fieldBuilder),this.addToRecord.bind(this)),this.attributeBuilder.addAttributes(e,e.fields,n,r,this.attributeBuilder.buildAttribute.bind(this.attributeBuilder),this.attributeBuilder.addAttributeToRecord.bind(this.attributeBuilder)),this.lineItemBuilder.addLineItems(e,e.fields,n,r,this.addField.bind(this)),o}addFilterField(e,n,r=null){if(n.vardefBased&&!(0,ie.isEmpty)(e.criteriaFields[n.name]))return e.criteriaFields[n.name];const o=this.filterFieldBuilder.buildFilterField(e,n,r);return this.filterFieldBuilder.addToSavedFilter(e,n.name,o),this.groupFieldBuilder.addGroupFields(e,n,r,this.filterFieldBuilder.isCriteriaFieldInitialized.bind(this.filterFieldBuilder),this.filterFieldBuilder.buildFilterField.bind(this.filterFieldBuilder),this.filterFieldBuilder.addToSavedFilter.bind(this.filterFieldBuilder)),this.attributeBuilder.addAttributes(e,e.criteriaFields,n,r,this.filterAttributeBuilder.buildFilterAttribute.bind(this.filterAttributeBuilder),this.filterAttributeBuilder.addAttributeToSavedFilter.bind(this.filterAttributeBuilder)),o}addLineItem(e,n,r,o=null){o||(o={id:"",module:r.definition.module||"",attributes:{},fields:{},formGroup:new De.UntypedFormGroup({})}),this.lineItemBuilder.addLineItem(e,o,this.addField.bind(this),this.languageStore,n,r),r.itemFormArray.updateValueAndValidity()}removeLineItem(e,n){const r=e.items[n];r&&(r.id?r.attributes.deleted=1:e.items=n>-1?[...e.items.slice(0,n),...e.items.slice(n+1)]:e.items,e.itemFormArray.clear(),e.items.forEach(o=>{!o||o&&o.attributes&&o.attributes.deleted||e.itemFormArray.push(o.formGroup)}),e.itemFormArray.updateValueAndValidity())}addToRecord(e,n,r){!e||!n||!r||(e.fields||(e.fields={}),e.fields[n]=r,e.formGroup&&r.itemFormArray&&e.formGroup.addControl(n+"-items",r.itemFormArray),e.formGroup&&r.formControl&&e.formGroup.addControl(n,r.formControl))}addVardefOnlyField(e,n,r=null){const o=this.fieldBuilder.buildField(e,n,r);return this.addVardefOnlyFieldToRecord(e,n.name,o),o}addVardefOnlyFieldToRecord(e,n,r){!e||!n||!r||(e.fields||(e.fields={}),e.fields[n]=r)}isFieldInitialized(e,n){return!!e.fields[n]}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ya),t.\u0275\u0275inject(AC),t.\u0275\u0275inject(Gd),t.\u0275\u0275inject(Zd),t.\u0275\u0275inject(TC),t.\u0275\u0275inject(OC),t.\u0275\u0275inject(Ue))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Si=(()=>{class i{constructor(e,n,r){this.fieldManager=e,this.language=n,this.fieldHandlerRegistry=r}buildEmptyRecord(e){return{id:"",module:e,attributes:{id:""},fields:{},formGroup:new De.UntypedFormGroup({})}}initFields(e,n){return e.fields||(e.fields={}),e.formGroup||(e.formGroup=new De.UntypedFormGroup({})),n.forEach(r=>{r&&r.name&&!e.fields[r.name]&&(r?.vardefBased?this.fieldManager.addVardefOnlyField(e,r,this.language):this.fieldManager.addField(e,r,this.language))}),e.fields}initFieldDefaults(e){e.fields&&Object.entries(e.fields).forEach(([n,r])=>{this.fieldHandlerRegistry.get(e.module,r.type).initDefaultValue(r,e)})}injectParamFields(e,n,r){Object.keys(e).forEach(o=>{const a=r[o];if((0,S.isVoid)(a))this.handleLinkTypeRelationship(o,e,r,n);else{const l=a.type||"";let c=a.id_name||"",d=a.rname||"";if("relate"===l&&c===(a.name||""))return void(n.attributes[o]=e[o]);if("parent"===l){const p={};let f="name",m="parent_id";const _=(r[o+"-group"]??{}).groupFields[o];return _&&_.rname&&(f=_.rname),f&&(p[f]=e[o]),m&&e[m]&&(p.id=e[m]),void(n.attributes[o]=p)}if("relate"===l){const p={};return d&&(p[d]=e[o]),c&&e[c]&&(p.id=e[c]),void(n.attributes[o]=p)}n.attributes[o]=e[o]}})}handleLinkTypeRelationship(e,n,r,o){if("return_relationship"===e){const a=n.return_relationship;if(!a)return;Object.keys(r).forEach(l=>{const c=r[l];if("link"!==(c.type||""))return;const d=c.relationship||"";if(d&&d===a){const p=c.name,f=c.module??n.return_module??"";if(!f)return;const m=n.parent_name;if(!m)return;const g=c?.relationshipMetadata?.related_id,h=n[g]??"";if(!h)return;o.attributes[p]=[{id:h,module:f,attributes:{id:h,name:m}}]}})}}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(hi),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(n1))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),LC=(()=>{class i extends Mn{constructor(e,n,r,o,a){super(e,o,a),this.typeFormatter=e,this.registry=n,this.recordManager=r,this.logic=o,this.logicDisplay=a}ngOnInit(){super.ngOnInit(),this.initUpdateParentSubscription()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getComponentType(e,n){return this.registry.getDisplayType(this.record&&this.record.module||"default",e,n&&n.displayType||"",this.getMode(),this.field.name)}getAttributes(){const e=[];return this.field.definition.layout.forEach(n=>{!this.field.attributes[n]||"none"===this.field.attributes[n].display||e.push(this.field.attributes[n])}),e}getModule(){return this.record?this.record.module:null}getMode(){return"filter"===this.mode?"edit":this.mode}getDirection(){let e="flex-column";return"inline"===this.field.definition.display&&(e="flex-row"),e}isConfigured(){return this.hasDisplay()&&this.hasLayout()&&this.hasAttributes()}showLabel(e){const n=e.definition||null,r=n.showLabel||null;return!(!n||!r||"hide"===(e.metadata&&e.metadata.labelDisplay||""))&&(r.includes("*")||r.includes(this.mode))}hasAttributes(){return!(!this.field.definition.attributeFields||(0,S.emptyObject)(this.field.definition.attributeFields))}hasLayout(){return!(!this.field.definition.layout||!this.field.definition.layout.length)}hasDisplay(){return!!this.field.definition.display}initUpdateParentSubscription(){this.field.attributes&&Object.keys(this.field.attributes).forEach(e=>{const n=this.field.attributes[e];n.valueChanges$&&this.subs.push(n.valueChanges$.subscribe(r=>{this.setValueOnParent(n,r.valueObject||r.valueList||r.value)}))})}setValueOnParent(e,n){const r=e.valueParent??"field";e.valuePath?(0,la.Z)("record"===r?this.record:this.field,e.valuePath,n):(0,la.Z)("record"===r?this.record.attributes:this.field.valueObject,e.name,n)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(hc),t.\u0275\u0275directiveInject(Si),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}return i})();function C7(i,s){1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-label",1),t.\u0275\u0275elementContainerEnd())}function S7(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"label"),t.\u0275\u0275element(1,"scrm-label",6),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("labelKey",e.labelKey)("module",n.getModule())}}function M7(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"span",7),t.\u0275\u0275element(1,"scrm-dynamic-field",8),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("componentType",n.getComponentType(e.type,e.definition))("field",e)("klass",n.klass)("mode",n.getMode())("originalMode",n.originalMode)("record",n.record)("parent",n.parent)("type",e.type)}}function w7(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",3)(1,"span",4),t.\u0275\u0275template(2,S7,2,2,"label",0),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(3,M7,2,8,"span",5),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275classProp("flex-fill","edit"===n.mode&&"flex-row"===n.getDirection())("align-self-start","flex-row"===n.getDirection()&&e.labelKey&&n.showLabel(e)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.labelKey&&n.showLabel(e)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.type)}}function D7(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div"),t.\u0275\u0275template(2,w7,4,6,"div",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate1("d-flex ",e.getDirection()," justify-content-start align-items-end field-group h-100 composite-field-wrapper"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.getAttributes())}}let Ls=(()=>{class i extends LC{constructor(e,n,r,o,a){super(e,n,r,o,a),this.typeFormatter=e,this.registry=n,this.recordManager=r,this.logic=o,this.logicDisplay=a}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(hc),t.\u0275\u0275directiveInject(Si),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-composite-field"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[[4,"ngIf"],["labelKey","LBL_BAD_GROUP_FIELD_CONFIG"],["class","field-group-item d-flex flex-column justify-content-end h-100 w-100",3,"flex-fill","align-self-start",4,"ngFor","ngForOf"],[1,"field-group-item","d-flex","flex-column","justify-content-end","h-100","w-100"],[1,"field-group-label","pt-2","pr-1"],["class","field-group-field pr-1 pb-1 composite-field",4,"ngIf"],[3,"labelKey","module"],[1,"field-group-field","pr-1","pb-1","composite-field"],[3,"componentType","field","klass","mode","originalMode","record","parent","type"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,C7,2,0,"ng-container",0),t.\u0275\u0275template(1,D7,3,4,"ng-container",0)),2&n&&(t.\u0275\u0275property("ngIf",!r.isConfigured()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.isConfigured()))},dependencies:[I.NgForOf,I.NgIf,qt,va],encapsulation:2})}return i})(),NC=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Vt,_a]})}return i})();const RC=[...nC,oC,NC],x7=[...iC,Os,Ls],qd={...Wd,"grouped-field.list":Os,"grouped-field.detail":Os,"grouped-field.edit":Os,"grouped-field.filter":Os,"composite.list":Ls,"composite.detail":Ls,"composite.edit":Ls,"composite.filter":Ls};let gc=(()=>{class i extends Fi{constructor(){super()}getDefaultMap(){return qd}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),BC=(()=>{class i extends Mn{constructor(e,n,r,o,a,l){super(e,o,l),this.typeFormatter=e,this.registry=n,this.recordManager=r,this.logic=o,this.fieldManager=a,this.logicDisplay=l}ngOnInit(){super.ngOnInit(),this.initUpdateParentSubscription()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getComponentType(e,n){return this.registry.getDisplayType(this.record&&this.record.module||"default",e,n&&n.displayType||"",this.getMode(),this.field.name)}getItems(){this.field.items=this.field.items||[];const e=this.field.items,n=e&&e.filter(o=>!(o&&o.attributes&&o.attributes.deleted)),r=!!this.field?.definition?.lineItems?.labelOnFirstLine;return n.forEach((o,a)=>{this.setAttributeLabelDisplay(o,!r||a<=0)}),this.field.items}getItemFields(e){const n=e.fields||{};return Object.keys(n).map(r=>n[r])}removeItem(e){this.fieldManager.removeLineItem(this.field,e),this.updateItems(this.field.items),this.triggerLineActionEvents(S.LineActionEvent.onLineItemRemove)}addEmptyItem(){this.fieldManager.addLineItem(this.field?.definition?.lineItems?.definition||{},this.record,this.field),this.triggerLineActionEvents(S.LineActionEvent.onLineItemAdd)}updateItems(e){this.field.items=e}getModule(){return this.record?this.record.module:null}getMode(){return"filter"===this.mode?"edit":this.mode}getDirection(){let e="flex-column";return"inline"===this.field.definition.display&&(e="flex-row"),e}isConfigured(){return this.hasItemConfig()}isEditable(){return(0,S.isEditable)(this.mode)}showLabel(e){const n=e.definition||null,r=n.showLabel||null;return!(!n||!r)&&(r.includes("*")||r.includes(this.mode))}getMessageContext(e,n){const r=e&&e.message&&e.message.context||{};return r.module=n&&n.module||"",r}getMessageLabelKey(e){return e&&e.message&&e.message.labelKey||""}hasItemConfig(){return!!this.field?.definition?.lineItems?.definition}initUpdateParentSubscription(){this.field.attributes&&Object.keys(this.field.attributes).forEach(e=>{const n=this.field.attributes[e];n.valueChanges$&&this.subs.push(n.valueChanges$.subscribe(r=>{this.setValueOnParent(n,r.valueObject||r.valueList||r.value)}))})}setValueOnParent(e,n){e.valuePath?(0,la.Z)(this.field,e.valuePath,n):(0,la.Z)(this.field.valueObject,e.name,n)}setAttributeLabelDisplay(e,n){const r=e.fields||{};Object.keys(r).forEach(o=>{const a=r[o];if("composite"!==a.type)return;const l=a.attributes||{};Object.keys(l).forEach(c=>{const u=l[c],d=u.metadata||{};d.labelDisplay=n?"default":"hide",u.metadata=d})})}triggerLineActionEvents(e){const n=this.field?.logic||{};(0,S.emptyObject)(n)||Object.keys(n).forEach(r=>{const a=(n[r]||null)?.params?.triggerOnEvents?.[e];(0,S.isTrue)(a)&&this.logic.runLogic(this.field,this.mode,this.record)})}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(gc),t.\u0275\u0275directiveInject(Si),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(hi),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}return i})();function E7(i,s){1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-label",1),t.\u0275\u0275elementContainerEnd())}function I7(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"scrm-dynamic-field",10),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(2).$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275classMapInterpolate2("",e.type," ",e.name,""),t.\u0275\u0275advance(1),t.\u0275\u0275property("componentType",r.getComponentType(e.type,e.definition))("field",e)("klass",r.klass)("mode",r.mode)("originalMode",r.originalMode)("record",n)("parent",r.parent)("type",e.type)}}function F7(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-button",11),2&i){const e=t.\u0275\u0275nextContext(2),n=e.$implicit,r=e.index,o=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("config",o.getRemoveItemButton(n,r))}}function A7(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",6)(1,"div",7),t.\u0275\u0275template(2,I7,2,12,"div",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",9),t.\u0275\u0275template(4,F7,1,1,"scrm-button",4),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",n.getItemFields(e)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.isEditable())}}function T7(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,A7,5,2,"div",5),t.\u0275\u0275elementContainerEnd()),2&i){const e=s.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(e&&e.attributes&&e.attributes.deleted))}}function O7(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-button",11),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("config",e.getAddItemButton())}}const L7=function(i){return{field:i}};function N7(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",13),t.\u0275\u0275element(1,"scrm-dynamic-label",14),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("context",n.getMessageContext(e.value,n.record))("fields",t.\u0275\u0275pureFunction1(3,L7,n.field))("labelKey",n.getMessageLabelKey(e.value))}}function R7(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,N7,2,5,"div",12),t.\u0275\u0275pipe(2,"keyvalue"),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(2,1,e.field.itemFormArray.errors))}}function B7(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,R7,3,3,"ng-container",0),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.field.itemFormArray.invalid)}}function k7(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div")(2,"div"),t.\u0275\u0275template(3,T7,2,1,"ng-container",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",3),t.\u0275\u0275template(5,O7,1,1,"scrm-button",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(6,B7,2,1,"ng-container",0),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate2("line-items d-flex flex-column ",e.field.type," ",e.field.name,""),t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate1("d-flex ",e.getDirection()," justify-content-start align-items-end line-item h-100"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.getItems()),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.isEditable()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.isEditable()&&e.field.itemFormArray&&e.field.itemFormArray.errors)}}let kC=(()=>{class i extends BC{constructor(e,n,r,o,a,l){super(e,n,r,o,a,l),this.typeFormatter=e,this.registry=n,this.recordManager=r,this.logic=o,this.fieldManager=a,this.logicDisplay=l}getAddItemButton(){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",icon:"plus",onClick:()=>{this.addEmptyItem()}}}getRemoveItemButton(e,n){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",icon:"minimise",onClick:()=>{this.removeItem(n)}}}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(gc),t.\u0275\u0275directiveInject(Si),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(hi),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-line-items-field"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[[4,"ngIf"],["labelKey","LBL_LINE_ITEMS_FIELD_CONFIG"],[4,"ngFor","ngForOf"],[1,"line-item-buttons","d-flex","justify-content-end","mt-1"],[3,"config",4,"ngIf"],["class","d-flex flex-row line-item-entry w-100 align-items-end",4,"ngIf"],[1,"d-flex","flex-row","line-item-entry","w-100","align-items-end"],[1,"flex-grow-1","line-item-entry-composite"],[3,"class",4,"ngFor","ngForOf"],[1,"line-item-entry-buttons","mb-1"],[3,"componentType","field","klass","mode","originalMode","record","parent","type"],[3,"config"],["class","invalid-feedback d-block",4,"ngFor","ngForOf"],[1,"invalid-feedback","d-block"],[3,"context","fields","labelKey"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,E7,2,0,"ng-container",0),t.\u0275\u0275template(1,k7,7,10,"ng-container",0)),2&n&&(t.\u0275\u0275property("ngIf",!r.isConfigured()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.isConfigured()))},dependencies:[I.NgForOf,I.NgIf,qt,va,Un,So,I.KeyValuePipe],encapsulation:2})}return i})();function j7(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-dynamic-field",3),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("componentType",e.componentType)("field",e.field)("klass",e.klass)("mode",e.componentMode)("originalMode",e.mode)("record",e.record)("parent",e.record)("type",e.type)}}function P7(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-line-items-field",4),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("field",e.field)("klass",e.klass)("mode",e.componentMode)("originalMode",e.mode)("record",e.record)("parent",e.record)}}function V7(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,j7,1,8,"scrm-dynamic-field",1),t.\u0275\u0275template(2,P7,1,6,"scrm-line-items-field",2),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","line-items"!==e.type),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","line-items"===e.type)}}let hr=(()=>{class i{constructor(e){this.registry=e,this.record=null,this.klass=null,this.class="field",this.map=qd}ngOnInit(){this.setHostClass()}get componentMode(){let e=this.mode;return"create"===e&&(e="edit"),["edit","filter"].includes(e)&&this.field.readonly&&(e="detail"),e}get componentType(){return this.registry.getDisplayType(this.record&&this.record.module||"default",this.type,this.field.definition&&this.field.definition.displayType||"",this.componentMode,this.field.name)}setHostClass(){const e=[];e.push("field"),this.mode&&e.push("field-mode-"+this.mode),this.type&&e.push("field-type-"+this.type),this.field&&this.field.name&&e.push("field-name-"+this.field.name),this.class=e.join(" ")}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(gc))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-field"]],hostVars:2,hostBindings:function(n,r){2&n&&t.\u0275\u0275classMap(r.class)},inputs:{mode:"mode",type:"type",field:"field",record:"record",klass:"klass"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"componentType","field","klass","mode","originalMode","record","parent","type",4,"ngIf"],[3,"field","klass","mode","originalMode","record","parent",4,"ngIf"],[3,"componentType","field","klass","mode","originalMode","record","parent","type"],[3,"field","klass","mode","originalMode","record","parent"]],template:function(n,r){1&n&&t.\u0275\u0275template(0,V7,3,2,"ng-container",0),2&n&&t.\u0275\u0275property("ngIf",r.field&&"none"!==r.field.display)},dependencies:[I.NgIf,va,kC],encapsulation:2})}return i})();function U7(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"label",1),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2).$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngClass",n.labelClass),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.field.label)}}function $7(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-label",8),2&i){const e=t.\u0275\u0275nextContext(2).$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("labelKey",e.field.labelKey)("ngClass",n.labelClass)}}function z7(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,U7,2,2,"label",6),t.\u0275\u0275template(2,$7,1,2,"scrm-label",7),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275classProp("pr-3","inline"===n.labelDisplay),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.field.label),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.field.label&&e.field.labelKey)}}function H7(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"scrm-field",9),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275classProp("flex-grow-1","inline"===n.labelDisplay),t.\u0275\u0275advance(1),t.\u0275\u0275property("field",e.field)("klass",n.inputClass)("mode",n.fieldMode)("record",n.record)("type",e.field.type)}}function W7(i,s){1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275projection(1),t.\u0275\u0275elementContainerEnd())}function K7(i,s){1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275projection(1,1),t.\u0275\u0275elementContainerEnd())}function G7(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",1)(1,"div",2),t.\u0275\u0275template(2,z7,3,4,"div",3),t.\u0275\u0275template(3,H7,2,7,"div",4),t.\u0275\u0275template(4,W7,2,0,"ng-container",5),t.\u0275\u0275template(5,K7,2,0,"ng-container",5),t.\u0275\u0275elementEnd()()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngClass",n.colClass),t.\u0275\u0275advance(1),t.\u0275\u0275classProp("align-items-center","inline"===n.labelDisplay&&!n.colAlignItems)("flex-column","top"===n.labelDisplay)("flex-row","inline"===n.labelDisplay)("justify-content-end",!e.field),t.\u0275\u0275property("ngClass",n.colAlignItems?n.colAlignItems:""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.field&&"none"!==e.field.display),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.field&&"none"!==e.field.display),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.actionSlot),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.specialSlot)}}function Z7(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275template(1,G7,6,14,"div",0),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngClass",n.rowClass),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.cols)}}const q7=[[["","field-grid-actions",""]],[["","field-grid-actions",""]]],Q7=["[field-grid-actions]","[field-grid-actions]"];let Qd=(()=>{class i extends fd{constructor(e){super(e),this.breakpointObserver=e,this.fieldMode="detail"}ngOnChanges(){this.buildGrid()}buildGrid(){const e=[];if(!this.fields||0===this.fields.length)return void(this.fieldGrid=[]);let n=0,r={cols:[]};e.push(r),this.fields.forEach(a=>{n>=this.colNumber&&(n=0,r={cols:[]},e.push(r)),r.cols.push({field:a}),n++}),n<this.colNumber&&this.fillRow(e[e.length-1]),this.addSpecialSlots(e),this.fieldGrid=e}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(z))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-field-grid"]],inputs:{fields:"fields",record:"record",fieldMode:"fieldMode"},features:[t.\u0275\u0275InheritDefinitionFeature,t.\u0275\u0275NgOnChangesFeature],ngContentSelectors:Q7,decls:2,vars:1,consts:[[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"d-flex",3,"ngClass"],[3,"pr-3",4,"ngIf"],[3,"flex-grow-1",4,"ngIf"],[4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"labelKey","ngClass",4,"ngIf"],[3,"labelKey","ngClass"],[3,"field","klass","mode","record","type"]],template:function(n,r){1&n&&(t.\u0275\u0275projectionDef(q7),t.\u0275\u0275elementStart(0,"form"),t.\u0275\u0275template(1,Z7,2,2,"div",0),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",r.fieldGrid))},dependencies:[I.NgClass,I.NgForOf,I.NgIf,hr,qt],encapsulation:2})}return i})(),jC=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Vt,_a,an,Mo]})}return i})(),Jn=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[RC,I.CommonModule,_a,jC]})}return i})(),Oo=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,an,Jn,Vt]})}return i})();function J7(i,s){1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"span",10),t.\u0275\u0275text(2,"*"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd())}function Y7(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",11),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(r.dataSource.getEditAction())}),t.\u0275\u0275element(1,"scrm-image",12),t.\u0275\u0275elementEnd()}}const X7=function(){return["edit","create"]};function eU(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",5)(2,"strong")(3,"label",1),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"uppercase"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(6,": "),t.\u0275\u0275template(7,J7,3,0,"ng-container",3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(8,"div",6)(9,"div",7),t.\u0275\u0275element(10,"scrm-field",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"div"),t.\u0275\u0275template(12,Y7,2,0,"button",9),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(3),t.\u0275\u0275property("ngClass",n.labelClass),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(5,9,e.field.label)),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",e.field.definition.required&&t.\u0275\u0275pureFunction0(11,X7).includes(n.config.mode)),t.\u0275\u0275advance(3),t.\u0275\u0275property("type",e.field.type)("mode",n.config.mode)("klass",n.inputClass)("field",e.field)("record",n.record),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!1!==e.field.definition.inline_edit&&!e.field.readonly&&!e.field.definition.readonly&&n.dataSource.inlineEdit&&"detail"===n.config.mode)}}function tU(i,s){1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275projection(1),t.\u0275\u0275elementContainerEnd())}function nU(i,s){1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275projection(1,1),t.\u0275\u0275elementContainerEnd())}function iU(i,s){1&i&&t.\u0275\u0275element(0,"div",13)}function rU(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275template(1,eU,13,12,"ng-container",3),t.\u0275\u0275template(2,tU,2,0,"ng-container",3),t.\u0275\u0275template(3,nU,2,0,"ng-container",3),t.\u0275\u0275template(4,iU,1,0,"div",4),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=s.index,r=t.\u0275\u0275nextContext(),o=r.$implicit,a=r.index,l=t.\u0275\u0275nextContext();t.\u0275\u0275classProp("field-column-bordered",o.cols.length>1&&n<o.cols.length-1),t.\u0275\u0275property("ngClass",l.colClass),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.field&&"none"!==e.field.display),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.actionSlot),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.specialSlot),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.field&&"none"!==(null==e.field?null:e.field.display)&&a<l.fieldGrid.length-1)}}function oU(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275template(1,rU,5,7,"div",2),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngClass",n.rowClass),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.cols)}}const sU=[[["","field-grid-actions",""]],[["","field-grid-special",""]]],aU=["[field-grid-actions]","[field-grid-special]"];let PC=(()=>{class i extends fd{constructor(e){super(e),this.breakpointObserver=e,this.baseColClass={col:!0,"form-group":!0,"m-1":!1,"m-0":!0,"pl-3":!0,"pb-2":!0,"pr-3":!0,"d-flex":!0,"flex-column":!0,"justify-content-between":!0},this.baseRowClass={"form-row":!0,"align-items-stretch":!0}}ngOnInit(){this.subscriptions.push(this.dataSource.getConfig().subscribe(e=>{this.config={...e}})),this.subscriptions.push(this.dataSource.getLayout().subscribe(e=>{this.layout={...e}})),this.subscriptions.push(this.dataSource.getFields().subscribe(e=>{this.fields={...e}})),this.subscriptions.push(this.dataSource.getRecord().subscribe(e=>{this.record={...e}})),super.ngOnInit()}buildGrid(){const e=[];this.fields&&0!==Object.keys(this.fields).length?(this.layout.rows.forEach(n=>{let r={cols:[]};n.cols.forEach((o,a)=>{const c=this.fields[o.name]||null;c?(r.cols.push({field:c}),1===this.colNumber&&a<n.cols.length-1&&(e.push(r),r={cols:[]})):r.cols.push({})}),r.cols.length<this.colNumber&&this.fillRow(r),e.push(r)}),this.addSpecialSlots(e),this.fieldGrid=e):this.fieldGrid=[]}get colNumber(){return 1===this.sizeMap[this.currentSize]?1:this.config.maxColumns}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(z))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-field-layout"]],inputs:{dataSource:"dataSource"},features:[t.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:aU,decls:2,vars:4,consts:[[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"field-column-bordered","ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],["class","field-separation mt-2",4,"ngIf"],[1,"label-container"],[1,"d-flex","flex-grow-1"],[1,"flex-grow-1","text-break"],[3,"type","mode","klass","field","record"],["type","button","class","record-action-button",3,"click",4,"ngIf"],[1,"required"],["type","button",1,"record-action-button",3,"click"],["image","pencil",1,"sicon"],[1,"field-separation","mt-2"]],template:function(n,r){1&n&&(t.\u0275\u0275projectionDef(sU),t.\u0275\u0275elementStart(0,"form"),t.\u0275\u0275template(1,oU,2,2,"div",0),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275classMapInterpolate1("field-layout ",r.config.mode,""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",r.fieldGrid))},dependencies:[I.NgClass,I.NgForOf,I.NgIf,hr,ln,I.UpperCasePipe],encapsulation:2})}return i})(),Jd=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Jn,Oo,sn]})}return i})();const VC={tabs:[],groupedTabs:[],modules:{},userActionMenu:[],quickActions:[],maxTabs:0};let vc=(0,S.deepClone)(VC),Ns=null,Ai=(()=>{class i{constructor(e){this.recordGQL=e,this.store=new D.BehaviorSubject(vc),this.state$=this.store.asObservable(),this.resourceName="navbar",this.fieldsMetadata={fields:["tabs","groupedTabs","modules","userActionMenu","maxTabs"]},this.tabs$=this.state$.pipe((0,v.map)(n=>n.tabs),(0,v.distinctUntilChanged)()),this.groupedTabs$=this.state$.pipe((0,v.map)(n=>n.groupedTabs),(0,v.distinctUntilChanged)()),this.modules$=this.state$.pipe((0,v.map)(n=>n.modules),(0,v.distinctUntilChanged)()),this.userActionMenu$=this.state$.pipe((0,v.map)(n=>n.userActionMenu),(0,v.distinctUntilChanged)()),this.maxTabs$=this.state$.pipe((0,v.map)(n=>n.maxTabs),(0,v.distinctUntilChanged)()),this.quickActions$=this.state$.pipe((0,v.map)(n=>n.quickActions),(0,v.distinctUntilChanged)()),this.vm$=this.tabs$.pipe((0,D.combineLatestWith)(this.groupedTabs$,this.modules$,this.userActionMenu$,this.maxTabs$,this.quickActions$),(0,v.map)(([n,r,o,a,l,c])=>({tabs:n,groupedTabs:r,modules:o,userActionMenu:a,maxTabs:l,quickActions:c})))}clear(){Ns=null,this.updateState((0,S.deepClone)(VC))}clearAuthBased(){this.clear()}load(){return this.getNavigation().pipe((0,v.tap)(e=>{this.updateState({...vc,tabs:e.tabs,groupedTabs:e.groupedTabs,userActionMenu:e.userActionMenu,modules:e.modules,maxTabs:e.maxTabs,quickActions:e?.quickActions??[]})}))}isCached(){return null!==Ns}set(e){Ns=(0,D.of)(e).pipe((0,v.shareReplay)(1)),this.updateState({...vc,tabs:e.tabs,groupedTabs:e.groupedTabs,userActionMenu:e.userActionMenu,modules:e.modules,maxTabs:e.maxTabs,quickActions:e?.quickActions??[]})}updateState(e){this.store.next(vc=e)}getNavigation(){return null===Ns&&(Ns=this.fetch("1").pipe((0,v.shareReplay)(1))),Ns}fetch(e){return this.recordGQL.fetch(this.resourceName,`/api/navbars/${e}`,this.fieldsMetadata).pipe((0,v.map)(({data:n})=>{let r=null;return n&&n.navbar&&(r={tabs:n.navbar.tabs,groupedTabs:n.navbar.groupedTabs,userActionMenu:n.navbar.userActionMenu,modules:n.navbar.modules,maxTabs:n.navbar.maxTabs,quickActions:n?.navbar?.quickActions??[]}),r}))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(vs))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const UC={adminPanel:[]};let Yd=(0,S.deepClone)(UC),Xd=null,ep=(()=>{class i{constructor(e){this.appStateStore=e,this.store=new D.BehaviorSubject(Yd),this.state$=this.store.asObservable(),this.adminPanel$=this.state$.pipe((0,v.map)(n=>n.adminPanel),(0,v.distinctUntilChanged)())}clear(){Xd=null,this.updateState((0,S.deepClone)(UC))}clearAuthBased(){this.clear()}getAdminPanel(){return Yd.adminPanel}isCached(){return null!==Xd}updateState(e){this.store.next(Yd=e)}set(e){Xd=(0,D.of)(e).pipe((0,v.shareReplay)(1)),this.updateState(e)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ht))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const $C={globalRecentlyViewed:[]};let tp=(0,S.deepClone)($C),np=null,_c=(()=>{class i{constructor(){this.store=new D.BehaviorSubject(tp),this.state$=this.store.asObservable(),this.globalRecentlyViewed$=this.state$.pipe((0,v.map)(e=>e.globalRecentlyViewed),(0,v.distinctUntilChanged)())}clear(){np=null,this.updateState((0,S.deepClone)($C))}clearAuthBased(){this.clear()}getGlobalRecentlyViewed(){return tp.globalRecentlyViewed}isCached(){return null!==np}updateState(e){this.store.next(tp=e)}set(e){np=(0,D.of)(e).pipe((0,v.shareReplay)(1)),this.updateState({globalRecentlyViewed:e})}addToState(e){const r=this.getGlobalRecentlyViewed().filter(o=>o?.attributes?.item_id!==e?.attributes?.item_id);r.unshift(e),this.updateState({globalRecentlyViewed:r})}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const zC={systemConfig:!1,userPreferences:!1,appStrings:!1,appListStrings:!1,modStrings:!1,themeImages:!1,navigation:!1,moduleMetadata:!1,adminMetadata:!1,globalRecentlyViewed:!1};let Lo=(0,S.deepClone)(zC),yc=null,Fn=(()=>{class i{constructor(e,n,r,o,a,l,c,u,d){this.recordGQL=e,this.metadata=n,this.language=r,this.themeImages=o,this.config=a,this.preferences=l,this.navigation=c,this.adminMetadataStore=u,this.globalRecentlyViewedStore=d,this.store=new D.BehaviorSubject(Lo),this.state$=this.store.asObservable(),this.resourceName="appMetadata",this.fieldsMetadata={fields:["id","_id"]},this.types=["systemConfig","userPreferences","language","themeImages","navigation","moduleMetadata","adminMetadata","globalRecentlyViewed"],this.metadata$=this.state$}clear(){yc=null,this.updateState((0,S.deepClone)(zC))}clearAuthBased(){this.clear()}get(){return Lo}load(e="login",n=[],r=!0){const o=this.getNotLoadedTypes();return r=r&&o.length<1,(!n||n.length<1)&&(n=o).push("minimalModuleMetadata"),this.getMetadata(e,n,r).pipe((0,v.tap)(a=>{this.updateState(a)}))}loadModuleMetadata(e="login",n=!0){return this.getMetadata(e,["moduleMetadata"],n=n&&(Lo?.moduleMetadata??!1)).pipe((0,v.tap)(o=>{this.updateState(o)}))}getMetadata(e="app",n=[],r=!0){return(!n||n.length<1)&&(n=[...this.types]),(null==yc||!0!==r)&&(yc=this.fetch(e,n).pipe((0,v.shareReplay)(1))),yc}getNotLoadedTypes(){const e=[];return this.isNavigationLoaded()||e.push("navigation"),this.arePreferencesLoaded()||e.push("userPreferences"),this.areSystemConfigsLoaded()||e.push("systemConfig"),this.areAllLanguageStringsLoaded()||e.push("language"),this.areThemeImagesLoaded()||e.push("themeImages"),this.isAdminMetadataLoaded()||e.push("adminMetadata"),this.isGlobalRecentlyViewedLoaded()||e.push("globalRecentlyViewed"),e}areAllLanguageStringsLoaded(){return this.language.areAllCached()}arePreferencesLoaded(){return this.preferences.isCached()}areSystemConfigsLoaded(){return this.config.isCached()}areThemeImagesLoaded(){return this.themeImages.isCached()}isNavigationLoaded(){return this.navigation.isCached()}isAdminMetadataLoaded(){return!!Lo.adminMetadata}isGlobalRecentlyViewedLoaded(){return!!Lo.globalRecentlyViewed}updateState(e){this.store.next(Lo=e)}fetch(e,n=[]){const r={fields:[...this.fieldsMetadata.fields,...n]};return this.recordGQL.fetch(this.resourceName,`/api/app-metadata/${e}`,r).pipe((0,v.catchError)(()=>(0,D.of)({})),(0,v.map)(({data:o})=>{const a=o?.appMetadata,l={...Lo};return(0,S.emptyObject)(a)||(this.setConfig(l,a),this.setPreferences(l,a),this.setThemeImages(l,a),this.setNavigation(l,a),this.setLanguages(l,a),this.setModuleMetadata(l,a),this.setAdminMetadata(l,a),this.setGlobalRecentlyViewed(l,a)),l}))}setModuleMetadata(e,n){let r=n?.moduleMetadata??{},o="moduleMetadata";(0,S.emptyObject)(r)&&(r=n?.minimalModuleMetadata??{},o="minimalModuleMetadata"),(0,S.emptyObject)(r)||(e[o]=!0,Object.keys(r).forEach(a=>{if(!(0,S.emptyObject)(r[a]??{})){const c=this.metadata.mapMetadata(a,r[a]);this.metadata.getModule()!==a?this.metadata.setModuleMetadata(a,c):this.metadata.isCached(a)||this.metadata.set(a,c)}}))}setLanguages(e,n){const r=n?.language??{};if(!(0,S.emptyObject)(r)){const o={};o.languageKey=r.id??"",o.appStrings=r?.appStrings?.items??{},o.appListStrings=r?.appListStrings?.items??{},o.modStrings=r?.modStrings?.items??{},e.appStrings=!(0,S.emptyObject)(o.appStrings),e.appListStrings=!(0,S.emptyObject)(o.appListStrings),e.modStrings=!(0,S.emptyObject)(o.modStrings),this.language.set(o.languageKey,o)}}setNavigation(e,n){const r=n?.navigation??{};(0,S.emptyObject)(r)||(e.navigation=!0,this.navigation.set(r))}setThemeImages(e,n){const r=n?.themeImages??{},o=r?.items??{};(0,S.emptyObject)(r)||(0,S.emptyObject)(o)||(e.themeImages=!0,this.themeImages.set(r.id,o))}setPreferences(e,n){const r=n?.userPreferences??{};if(!(0,S.emptyObject)(r)){e.userPreferences=!0;const o=this.mapPreferences(r);this.preferences.set(o)}}setConfig(e,n){const r=n?.systemConfig??{};(0,S.emptyObject)(r)||(e.systemConfig=!0,this.config.set(r))}setAdminMetadata(e,n){const r=n?.adminMetadata??{};(0,S.emptyObject)(r)||(e.adminMetadata=!0,this.adminMetadataStore.set(r))}setGlobalRecentlyViewed(e,n){const r=n?.globalRecentlyViewed??[];r.length?(e.globalRecentlyViewed=!0,this.globalRecentlyViewedStore.set(r)):n?.globalRecentlyViewed&&this.globalRecentlyViewedStore.set(r)}mapPreferences(e){const n={};return Object.keys(e).forEach(r=>{e[r].items&&Object.keys(e[r].items).forEach(o=>{n[o]=e[r].items[o]})}),n}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(vs),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(Xr),t.\u0275\u0275inject(ht),t.\u0275\u0275inject(Xt),t.\u0275\u0275inject(Ai),t.\u0275\u0275inject(ep),t.\u0275\u0275inject(_c))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ba=(()=>{class i{constructor(e,n,r,o,a,l,c,u){this.appStore=e,this.languageStore=n,this.metadataStore=r,this.navigationStore=o,this.systemConfigStore=a,this.themeImagesStore=l,this.userPreferenceStore=c,this.appMetadataStore=u,this.stateStores={},this.showErrorMessageSignal=(0,t.signal)(!1),this.stateStores.appStore=this.buildMapEntry(e,!1),this.stateStores.navigationStore=this.buildMapEntry(o,!0),this.stateStores.languageStore=this.buildMapEntry(n,!0),this.stateStores.metadataStore=this.buildMapEntry(r,!1),this.stateStores.systemConfigStore=this.buildMapEntry(a,!1),this.stateStores.themeImagesStore=this.buildMapEntry(l,!1),this.stateStores.userPreferenceStore=this.buildMapEntry(c,!0),this.stateStores.appMetadataStore=this.buildMapEntry(u,!0)}clear(){Object.keys(this.stateStores).forEach(e=>{this.stateStores[e].store.clear()})}clearAuthBased(){Object.keys(this.stateStores).forEach(e=>{this.stateStores[e].authBased&&this.stateStores[e].store.clearAuthBased()})}clearBackendCacheable(){this.clearAuthBased(),this.systemConfigStore.clear()}buildMapEntry(e,n){return{store:e,authBased:n}}showErrorMessage(e){this.showErrorMessageSignal.set(e)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ht),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Ai),t.\u0275\u0275inject(ht),t.\u0275\u0275inject(Xr),t.\u0275\u0275inject(Xt),t.\u0275\u0275inject(Fn))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),HC=(()=>{class i{constructor(){}calculateRoute(e){const n=window.location.pathname;return n.includes("index.php")&&(e=`${n}/${e}`),e}appendNativeAuth(e){return window.location.pathname.includes("auth")&&(e=`auth/${e}`),e}removeNativeAuth(){let e=window.location.pathname;return e.includes("/auth")&&(e=e.replace("/auth","/")),e=e.replace("//","/"),e}isNativeAuth(){return window.location.pathname.includes("auth")}getNativeOutLogoutUrl(){return"auth/logout"}isLoggedOutPath(){return window.location.pathname.includes("logged-out")}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),WC=(()=>{class i{constructor(e,n){this.listStoreFactory=e,this.recordStoreFactory=n,this.subs=[],this.stores=[],this.storeSubject=new D.BehaviorSubject([]),this.state$=this.storeSubject.asObservable(),this.pageSize=10,this.recordList=e.create(),this.stores$=this.state$,this.storesMap$=this.stores$.pipe((0,v.map)(r=>this.getStoreMap(r)))}clear(){this.subs.forEach(e=>e.unsubscribe())}clearAuthBased(){}getItemMetadata(){return null}getRecordList(){return this.recordList}init(e,n=!0,r=null){let o="list_max_entries_per_record_thread";r&&isFinite(r)&&(o="",this.recordList.setPageSize(r));const a=this.recordList.init(e,n,o);this.pageSize=this.recordList.getPageSize(),this.subs.push(this.recordList.records$.subscribe(l=>{this.initStores(l)})),a&&(a.pipe((0,v.tap)(l=>{this.initStores(l.records)})).pipe((0,v.take)(1)).subscribe(),this.module=e)}load(e=!0){return this.recordList.load(e).pipe((0,v.tap)(n=>{this.initStores(n.records)}))}initStores(e){if(!e)return;const n={},r=[],o=this.getStoreMap(this.stores);e.forEach(l=>{if(!l||!l.id)return;const c=l.id;if(o[c]){const u=o[c];return u.setRecord(l),n[c]=u,void r.push(u)}n[c]=this.recordStoreFactory.create(),this.getItemMetadata()&&n[c].setMetadata(this.getItemMetadata()),n[c].initRecord(l,"detail",!1),r.push(n[c])}),Object.keys(o).forEach(l=>{n[l]||o[l].destroy()}),this.updateState(r)}updateState(e){this.storeSubject.next(this.stores=e)}getStoreMap(e){const n={};return!e||!e.length||e.forEach(r=>{n[r.getBaseRecord().id]=r}),n}getItemStores(){const e=this.stores??[];return e&&e.length?e:[]}getRecordIds(){const e=[];return!this.stores||!this.stores.length||this.stores.forEach(n=>{e.push(n.getRecordId())}),e}static#e=this.\u0275fac=function(n){t.\u0275\u0275invalidFactory()};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();const KC={module:"",recordId:"",loading:{data:!1,metadata:!1},mode:"detail"};class ip{constructor(s,e,n,r,o,a){this.appStateStore=s,this.meta=e,this.message=n,this.fieldManager=r,this.language=o,this.storeFactory=a,this.internalState=(0,S.deepClone)(KC),this.metadataState=(0,S.deepClone)({}),this.store=new D.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.metadataStore=new D.BehaviorSubject({}),this.metadataState$=this.metadataStore.asObservable(),this.subs=[],this.meta$=this.metadataState$,this.recordStore=a.create(this.getViewFields$()),this.record$=this.recordStore.state$.pipe((0,v.distinctUntilChanged)()),this.stagingRecord$=this.recordStore.staging$.pipe((0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(l=>l.loading.data||l.loading.metadata)),this.mode$=this.state$.pipe((0,v.map)(l=>l.mode)),this.vm$=this.state$}getModuleName(){return this.internalState.module}getRecordId(){return this.internalState.recordId}getViewContext(){return{module:this.getModuleName(),id:this.getRecordId()}}init(s,e,n="detail"){return this.baseInit(s,e,n),this.setMetadataLoading(!0),(0,D.forkJoin)([this.loadMetadata(),this.load()]).pipe((0,v.map)(([o,a])=>a))}initRecord(s,e="detail",n=!0){this.baseInit(s.module,s.id,e),n&&this.loadMetadata().pipe((0,v.take)(1),(0,v.tap)(()=>{this.setRecord(s)})).subscribe()}initStaging(s){const e=(0,S.deepClone)(this.recordStore.extractBaseRecord(s));this.recordStore.setStaging(e)}setRecord(s,e=!1){const n=(0,S.deepClone)(this.recordStore.extractBaseRecord(s));this.recordStore.setRecord(n,e)}setMetadata(s){this.updateMetadataState(s),this.setMetadataLoading(!1)}destroy(){this.clear()}clear(){this.updateState((0,S.deepClone)(KC)),this.recordStore.destroy(),this.recordStore=null}clearAuthBased(){this.clear()}getBaseRecord(){return this.recordStore.getBaseRecord()}getMode(){return this.internalState?this.internalState.mode:null}setMode(s){this.updateState({...this.internalState,mode:s})}setDataLoading(s){this.updateState({...this.internalState,loading:{...this.internalState.loading,data:s}})}setMetadataLoading(s){this.updateState({...this.internalState,loading:{...this.internalState.loading,metadata:s}})}save(){return this.setDataLoading(!0),this.recordStore.save().pipe((0,v.catchError)(()=>(this.message.addDangerMessageByKey("LBL_ERROR_SAVING"),(0,D.of)({}))),(0,v.finalize)(()=>{this.setDataLoading(!1)}))}validate(){return this.recordStore.validate()}load(s=!0){return this.setDataLoading(!0),this.recordStore.retrieveRecord(this.internalState.module,this.internalState.recordId,s).pipe((0,v.tap)(e=>{this.updateState({...this.internalState,recordId:e.id,module:e.module})}),(0,v.finalize)(()=>{this.setDataLoading(!1)}))}loadMetadata(s=!0){return this.setMetadataLoading(!0),this.meta.getMetadata(this.internalState.module).pipe((0,v.map)(e=>e.recordView),(0,v.tap)(e=>{this.updateMetadataState(e)}),(0,v.finalize)(()=>{this.setMetadataLoading(!1)}))}updateState(s){this.store.next(this.internalState=s)}updateMetadataState(s){this.metadataStore.next(this.metadataState=s)}getMetadata(){return(0,S.deepClone)(this.metadataState)}baseInit(s,e,n="detail"){this.updateState({...this.internalState,module:s,recordId:e,mode:n})}}const GC={id:"",type:"",module:"",attributes:{},acls:[]};class rp{constructor(s,e,n,r,o,a){this.definitions$=s,this.recordSaveGQL=e,this.recordFetchGQL=n,this.message=r,this.recordManager=o,this.recordMappers=a,this.initFieldDefaults=!1,this.fieldDefaultsInitialized=!1,this.cache$=null,this.internalState=(0,S.deepClone)(GC),this.stagingState=(0,S.deepClone)(GC),this.store=new D.BehaviorSubject(this.internalState),this.staging=new D.BehaviorSubject(this.stagingState),this.definitions=[],this.subs=[],this.fieldsMetadata={fields:["_id","id","attributes","module","type","acls","favorite"]},this.state$=this.store.asObservable().pipe((0,v.distinctUntilChanged)()),this.staging$=this.staging.asObservable(),this.subs.push(this.state$.subscribe(l=>{this.updateStaging(l)})),this.subs.push(s.subscribe(l=>{this.definitions=l,this.init(this.internalState)}))}init(s,e=!1){const n={...s};this.initFieldDefaults=e,this.initRecord(n),this.updateState(n)}getStaging(){return this.stagingState?this.stagingState:null}setStaging(s){this.initRecord(s),this.staging.next(this.stagingState=s)}setRecord(s,e=!1){this.initFieldDefaults=e,this.initRecord(s),this.updateState(s)}save(){return this.mapStagingFields(),this.recordSaveGQL.save(this.stagingState).pipe((0,v.tap)(s=>{s&&s.id&&(this.initRecord(s),this.updateState(s))}))}validate(){return this.stagingState.formGroup.markAllAsTouched(),this.stagingState.formGroup.statusChanges.pipe((0,v.startWith)(this.stagingState.formGroup.status),(0,v.filter)(s=>"PENDING"!==s),(0,v.take)(1),(0,v.map)(s=>"VALID"===s))}resetStaging(){this.updateStaging(this.internalState)}destroy(){this.subs.forEach(s=>s.unsubscribe())}getBaseRecord(){return this.internalState?(0,S.deepClone)({id:this.internalState.id,type:this.internalState.type,module:this.internalState.module,attributes:this.internalState.attributes,acls:this.internalState.acls}):null}getBaseStaging(){return this.stagingState?(this.mapStagingFields(),(0,S.deepClone)({id:this.stagingState.id,type:this.stagingState.type,module:this.stagingState.module,attributes:this.stagingState.attributes,acls:this.stagingState.acls})):null}extractBaseRecord(s){const{fields:e,formGroup:n,...r}=s;return{...r}}isDirty(){return!(!this.stagingState||!this.stagingState.formGroup)&&this.stagingState.formGroup.dirty}retrieveRecord(s,e,n=!0){return(null==this.cache$||!1===n)&&(this.cache$=this.fetch(s,e).pipe((0,v.tap)(r=>this.init(r)),(0,v.shareReplay)(1))),this.cache$}updateState(s){this.store.next(this.internalState=s)}updateStaging(s){const e=(0,S.deepClone)(this.extractBaseRecord(s));this.initRecord(e,this.initFieldDefaults),this.staging.next(this.stagingState=e)}mapStagingFields(){const s=this.recordMappers.get(this.stagingState.module);Object.keys(s).forEach(e=>{s[e].map(this.stagingState)})}initRecord(s,e=!1){s.module&&this.definitions&&this.definitions.length>0&&(s.fields=this.recordManager.initFields(s,this.definitions)),e&&(this.recordManager.initFieldDefaults(s),this.fieldDefaultsInitialized=!0)}fetch(s,e){return this.recordFetchGQL.fetch(s,e,this.fieldsMetadata).pipe((0,v.map)(({data:n})=>{const r={type:"",module:"",attributes:{},acls:[]};if(!n)return r;const o=n.getRecord.attributes.id;return o?(r.id=o,r.module=s,r.type=n.getRecord.attributes&&n.getRecord.attributes.object_name,r.attributes=n.getRecord.attributes,r.acls=n.getRecord.acls,r.favorite=n?.getRecord?.favorite??!1,r):(this.message.addDangerMessageByKey("LBL_RECORD_DOES_NOT_EXIST"),r)}),(0,v.catchError)(n=>(0,D.throwError)(n)))}}let io=(()=>{class i{constructor(e){this.apollo=e}fetch(e,n,r){const a={query:W.gql`
            query getRecord($module: String!, $record: String!) {
                getRecord(module: $module, record: $record) {
                    ${r.fields.join("\n")}
                }
            }
        `,variables:{module:e,record:n}};return this.apollo.query(a)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(W.Apollo))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ro=(()=>{class i{constructor(e){this.apollo=e}save(e){const n={module:e.module,attributes:(0,S.deepClone)(e.attributes)};e.id&&(n._id=e.id);const r={mutation:W.gql`
                mutation saveRecord($input: saveRecordInput!) {
                    saveRecord(input: $input) {
                        record {
                            attributes
                            favorite
                            id
                            _id
                            module
                            acls
                        }
                    }
                }
            `,variables:{input:n}};return this.apollo.mutate(r).pipe((0,v.map)(o=>this.mapToRecord(o)))}mapToRecord(e){return e.data&&e.data.saveRecord&&e.data.saveRecord.record?{id:e.data.saveRecord.record._id,type:e?.data?.saveRecord?.record?.type??"",module:e?.data?.saveRecord?.record?.module??"",attributes:e?.data?.saveRecord?.record?.attributes??[],acls:e?.data?.saveRecord?.record?.acls??[],favorite:e?.data.saveRecord?.record?.favorite??!1}:null}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(W.Apollo))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),oo=(()=>{class i{constructor(e,n,r,o,a,l){this.recordFetchGQL=e,this.recordSaveGQL=n,this.message=r,this.recordManager=o,this.recordMappers=a,this.baseMapper=l,a.register("default",l.getKey(),l)}create(e){return new rp(e,this.recordSaveGQL,this.recordFetchGQL,this.message,this.recordManager,this.recordMappers)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(io),t.\u0275\u0275inject(ro),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Si),t.\u0275\u0275inject(S.RecordMapperRegistry),t.\u0275\u0275inject(ws))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),op=(()=>{class i extends ip{constructor(e,n,r,o,a,l){super(e,n,r,o,a,l),this.appStateStore=e,this.meta=n,this.message=r,this.fieldManager=o,this.language=a,this.storeFactory=l}getViewFields$(){return this.meta$.pipe((0,v.map)(e=>{const n={},r=[],o=e.fields??{};return Object.keys(o).forEach(a=>{o[a]&&(n[a]=o[a])}),e.headerLayout&&e.headerLayout.rows&&e.headerLayout.rows.forEach(a=>{a.cols.forEach(l=>{l.field&&(n[l.field.name]=l.field)})}),e.bodyLayout&&e.bodyLayout.rows&&e.bodyLayout.rows.forEach(a=>{a.cols.forEach(l=>{l.field&&(n[l.field.name]=l.field)})}),Object.keys(n).forEach(a=>{r.push(n[a])}),r}))}initRecord(e,n="detail",r=!0,o=!1){super.initRecord(e,n,r),this.setRecord(e,o)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ht),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(hi),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(oo))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),bc=(()=>{class i{constructor(e,n,r,o,a,l){this.appStateStore=e,this.meta=n,this.message=r,this.fieldManager=o,this.language=a,this.storeFactory=l}create(){return new op(this.appStateStore,this.meta,this.message,this.fieldManager,this.language,this.storeFactory)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ht),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(hi),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(oo))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Cc=(()=>{class i extends WC{constructor(e,n){super(e,n),this.listStoreFactory=e,this.recordStoreFactory=n,this.autoRefreshEnabled=!0,this.$loading=this.recordList.loading$}init(e,n=!0,r=null){super.init(e,n,r),this.autoRefreshEnabled=!0}setFilters(e){let n=this.recordList.criteria;if(n={...n,...e},e&&e.orderBy){let r=S.SortDirection.DESC;e.sortOrder&&"ASC"===String(e.sortOrder).toUpperCase()&&(r=S.SortDirection.ASC),this.recordList.updateSorting(e.orderBy,r,!1)}return this.recordList.updateSearchCriteria(n,!1),this.load(!1).pipe((0,v.map)(r=>r.records))}getItemMetadata(){return this.itemMetadata}getListMetadata(){return this.listMetadata}setItemMetadata(e){return this.itemMetadata=e}setListMetadata(e){return this.listMetadata=e}allLoaded(){const e=this.recordList.getPagination();return!!e&&e.pageSize>=e.total}loadMore(e=null){e||(e=this.pageSize);let o=(this.recordList.getPagination().pageSize||0)+e;this.recordList.setPageSize(o),this.recordList.updatePagination(0)}reload(){this.recordList.updatePagination(0)}getViewContext(){return{module:this.module,ids:this.getRecordIds()}}initAutoRefresh(e,n,r,o){const a=new Date,l=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes()+1),c=this.getAutoRefreshTime(e,n,r);return(0,D.timer)(l,c).pipe((0,v.takeWhile)(()=>this.autoRefreshEnabled),(0,v.tap)(()=>{this.load(!1).subscribe(()=>{o&&o()})}))}disableAutoRefresh(){this.autoRefreshEnabled=!1}getAutoRefreshTime(e,n,r){let o=6e4*e;return 0===n&&0===r?o:o+this.getRandomDeviation(n,r)}getRandomDeviation(e,n){return e=Math.ceil(e),n=Math.floor(n),1e3*Math.floor(Math.random()*(n-e+1)+e)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Qi),t.\u0275\u0275inject(bc))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Sc=(()=>{class i{constructor(e,n){this.recordListFactory=e,this.recordStoreFactory=n}create(){return new Cc(this.recordListFactory,this.recordStoreFactory)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Qi),t.\u0275\u0275inject(bc))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),sp=(()=>{class i{constructor(e,n,r,o,a,l){this.systemConfig=e,this.storeFactory=n,this.processService=r,this.messages=o,this.language=a,this.dynamicLabels=l}getOptions(){return this.systemConfig.getConfigValue("ui")?.notifications??null}initStore(){const e=this.getOptions(),n={};this.setupListActions(n,e),this.setupItemConfig(n,e);const r=this.storeFactory.create();r.setItemMetadata(n.itemConfig.metadata),r.setListMetadata({actions:n.listActions});const o={orderBy:e?.filters?.orderBy??"date_entered",sortOrder:e?.filters?.sortOrder??"asc",preset:{type:"alerts"}};return r.init(e.module,!1,e?.pageSize??null),r.setFilters(o).pipe((0,v.take)(1)).subscribe(),r}setupListActions(e,n){e.listActions=n?.listActions??[],null!==(n?.collapseListActions??null)&&(e.collapseListActions=n.collapseListActions)}setupItemConfig(e,n){e.itemConfig={collapsible:n?.item?.collapsible??!1,collapseLimit:n?.item?.collapseLimit??null,klass:n?.item?.itemClass??"",buttonClass:n?.item?.buttonClass??"",buttonGroupClass:n?.item?.buttonGroupClass??"",dynamicClass:n?.item?.dynamicClass??[],containerClass:n?.item?.containerClass??"",flexDirection:n?.item?.flexDirection??"",metadata:{}},this.setupItemMetadata(e.itemConfig.metadata,n.item.layout,n)}setupItemMetadata(e,n,r){n&&n.header&&(e.headerLayout=(0,S.deepClone)(n.header)),n&&n.body&&(e.bodyLayout=(0,S.deepClone)(n.body)),n&&n.actions&&(e.actions=(0,S.deepClone)(n.actions)),r?.item&&r?.item?.fields&&(e.fields=(0,S.deepClone)(r.item.fields)),null!==(r?.item?.collapseActions??null)&&(e.collapseActions=r?.item?.collapseActions)}markNotificationsAsRead(e){const n={action:"record-thread-list-mark-as-read",module:e.module??"alerts",ids:e.getRecordIds()};return this.processService.submit("record-thread-list-mark-as-read",n).pipe((0,v.tap)(r=>{let o="addSuccessMessageByKey";"error"===r.status&&(o="addDangerMessageByKey"),r.messages&&r.messages.forEach(a=>{this.messages[o](a)}),e.getItemStores().forEach(a=>{const c=(a?.recordStore?.getStaging()??{})?.fields.is_read??null;null!=c&&(c.value="true")})}),(0,v.catchError)(r=>{throw this.messages.addDangerMessageByKey("ERR_NOTIFICATIONS_MARK_AS_READ"),r}))}onLoadMore(e){(0,D.timer)(1500).pipe((0,v.take)(1)).subscribe(()=>{e.markNotificationsAsRead()})}onRefresh(e,n){const r=e.getRecordList().getMeta().unreadCount;let o=n.getNotificationsUnreadTotal();if(r>o){let a=(r-o).toString();const l=this.language.getFieldLabel("LBL_NEW_NOTIFICATION"),c=this.dynamicLabels.parse(l,{unread:a},{});this.messages.addSuccessMessage(c)}n.setNotificationsUnreadTotal(r)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ht),t.\u0275\u0275inject(Sc),t.\u0275\u0275inject(qi),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject($l))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const ZC={notificationsEnabled:!1,notificationsTotal:0,notificationsUnreadTotal:0};let Br=(0,S.deepClone)(ZC),ap=null,Rs=(()=>{class i{constructor(e,n,r){this.appStateStore=e,this.configs=n,this.notificationService=r,this.store=new D.BehaviorSubject(Br),this.state$=this.store.asObservable(),this.notificationPageSize=0,this.notificationsUnreadTotal$=this.state$.pipe((0,v.map)(o=>o.notificationsUnreadTotal),(0,v.distinctUntilChanged)()),this.notificationsTotal$=this.state$.pipe((0,v.map)(o=>o.notificationsTotal),(0,v.distinctUntilChanged)()),this.notificationsEnabled$=this.state$.pipe((0,v.map)(o=>o.notificationsEnabled),(0,v.distinctUntilChanged)())}clear(){ap=null,this.updateState((0,S.deepClone)(ZC))}clearAuthBased(){this.clear(),this.notificationStore.clear(),this.notificationStore=null}init(){this.appStateStore.isLoggedIn()&&this.initNotifications()}initNotifications(){this.notificationStore||(this.notificationStore=this.notificationService.initStore())}enableNotifications(){this.initNotifications(),this.updateState({...Br,notificationsEnabled:!0})}disableNotifications(){this.disableNotificationAutoRefresh(),this.updateState({...Br,notificationsEnabled:!1,notificationsTotal:0,notificationsUnreadTotal:0})}areNotificationsEnabled(){return Br.notificationsEnabled}refreshNotifications(){this.areNotificationsEnabled()&&this.notificationStore.load(!1).pipe((0,v.take)(1)).subscribe(()=>{this.notificationService.onRefresh(this.notificationStore,this)})}markNotificationsAsRead(){if(!this.areNotificationsEnabled())return;this.notificationStore.getRecordList().pagination$.pipe((0,v.take)(1),(0,v.tap)(r=>this.notificationPageSize=r.pageSize),(0,v.tap)(r=>this.setNotificationsTotal(r.total))).subscribe();let e=this.notificationStore.getRecordList().records.filter(r=>!1===r.attributes.is_read).length,n=this.getNotificationsTotal()-this.getNotificationsUnreadTotal();(0,D.timer)(500).pipe((0,v.take)(1)).subscribe(()=>{this.getNotificationsUnreadTotal()>0&&(this.notificationPageSize>n||e>0)&&this.notificationService.markNotificationsAsRead(this.notificationStore).subscribe(r=>{this.setNotificationsUnreadTotal(r?.data?.unreadCount??0),this.setRecordAsReadTrue()})})}conditionalNotificationRefresh(e=""){if(!this.areNotificationsEnabled())return;const n=this.configs.getUi("notifications_reload_actions")??null,r=this.getModule();if(e||(e=this.getView()),!n||!r)return;const o=n[r];o&&o.length&&o.some(l=>"any"===l||l===e)&&this.refreshNotifications()}disableNotificationAutoRefresh(){this.notificationStore.disableAutoRefresh()}setRecordAsReadTrue(){this.notificationStore.getRecordList().records.forEach(e=>{e.attributes.is_read||(e.attributes.is_read=!0)})}setNotificationsUnreadTotal(e){this.updateState({...Br,notificationsUnreadTotal:e})}setNotificationsTotal(e){this.updateState({...Br,notificationsTotal:e})}getNotificationsTotal(){return Br.notificationsTotal}getNotificationsUnreadTotal(){return Br.notificationsUnreadTotal}getNotificationStore(){return this.notificationStore}getModule(){return this.appStateStore.getModule()}getView(){return this.appStateStore.getView()}onLogin(){}onLogout(){this.disableNotifications(),this.clearAuthBased()}isCached(){return null!==ap}updateState(e){this.store.next(Br=e)}set(e){ap=(0,D.of)(e).pipe((0,v.shareReplay)(1)),this.updateState(e)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ht),t.\u0275\u0275inject(ht),t.\u0275\u0275inject(sp))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ci=(()=>{class i{constructor(e,n,r,o,a,l,c,u,d,p){this.http=e,this.router=n,this.message=r,this.stateManager=o,this.languageStore=a,this.appStateStore=l,this.localStorage=c,this.configs=u,this.baseRoute=d,this.notificationStore=p,this.isUserLoggedIn=new D.BehaviorSubject(!1),this.currentUserSubject=new D.BehaviorSubject({}),this.currentUser$=this.currentUserSubject.asObservable().pipe((0,v.distinctUntilChanged)())}isLoggedIn(){return this.isUserLoggedIn.value}getCurrentUser(){return this.currentUserSubject.value}setCurrentUser(e){this.appStateStore.setCurrentUser(e),this.currentUserSubject.next(e),this.isUserLoggedIn.next(!0)}doLogin(e,n,r,o){let a="login";a=this.baseRoute.appendNativeAuth(a),a=this.baseRoute.calculateRoute(a);const l=new Yr.HttpHeaders({"Content-Type":"application/json"});return this.http.post(a,{username:e,password:n},{headers:l}).subscribe(c=>{this.baseRoute.isNativeAuth()&&(window.location.href=this.baseRoute.removeNativeAuth()),this.appStateStore.updateInitialAppLoading(!0),r(c),this.isUserLoggedIn.next(!0),this.setCurrentUser(c),this.notificationStore.enableNotifications(),this.notificationStore.refreshNotifications()},c=>{o(c)})}logout(e="LBL_LOGOUT_SUCCESS",n=!0){this.appStateStore.updateLoading("logout",!0,!1);const r=this.configs.getConfigValue("logout")??[];let o=r?.path??"logout";const a=(0,S.isTrue)(r?.redirect??!1);this.baseRoute.isNativeAuth()&&(o=this.baseRoute.getNativeOutLogoutUrl()),o=this.baseRoute.calculateRoute(o);const l=new Yr.HttpParams,c=(new Yr.HttpHeaders).set("Content-Type","text/plain; charset=utf-8");this.appStateStore.getActiveRequests()<1?this.callLogout(o,l,c,n,e,a):this.appStateStore.activeRequests$.pipe((0,v.filter)(u=>u<1),(0,v.take)(1)).subscribe(()=>{this.callLogout(o,l,c,n,e,a)})}callLogout(e,n,r,o,a,l){this.resetState(),l?window.location.href=e:this.http.post(e,n.toString(),{headers:r,responseType:"text"}).pipe((0,v.take)(1),(0,v.catchError)(c=>(this.message.log("Logout failed"),(0,D.throwError)(c))),(0,v.finalize)(()=>{this.appStateStore.updateInitialAppLoading(!0),this.appStateStore.updateLoading("logout",!1,!1),this.appStateStore.setCurrentUser(null),this.stateManager.clearAuthBased(),this.configs.clear(),!0===o&&this.router.navigate(["/Login"]).finally()})).subscribe(()=>{this.message.log("Logout success"),(0,S.isEmptyString)(a)||this.message.addSuccessMessageByKey(a)},()=>{this.message.log("Error on logout"),(0,S.isEmptyString)(a)||this.message.addSuccessMessageByKey(a)})}resetState(){this.stateManager.clearAuthBased(),this.localStorage.clear(),this.isUserLoggedIn.next(!1)}fetchSessionStatus(){let e="session-status";e=this.baseRoute.appendNativeAuth(e),e=this.baseRoute.calculateRoute(e);const n=(new Yr.HttpHeaders).set("Content-Type","text/plain; charset=utf-8");return this.http.get(e,{headers:n})}getSessionExpiredRoute(){return(this.configs.getConfigValue("session-expired")??[])?.path??"Login"}handleInvalidSession(e){this.sessionExpiredRedirect()?this.handleSessionExpiredRedirect():this.logout(e)}handleSessionExpiredRedirect(){window.location.href=this.getSessionExpiredRoute()}sessionExpiredRedirect(){const e=this.configs.getConfigValue("session-expired")??[];return(0,S.isTrue)(e?.redirect??!1)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Yr.HttpClient),t.\u0275\u0275inject(Ot.Router),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(ba),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(Ht),t.\u0275\u0275inject(bi),t.\u0275\u0275inject(ht),t.\u0275\u0275inject(HC),t.\u0275\u0275inject(Rs))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function lU(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",8)(2,"a",9),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.backToTop())}),t.\u0275\u0275elementStart(3,"span"),t.\u0275\u0275text(4," Back To Top "),t.\u0275\u0275element(5,"scrm-image",10),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementContainerEnd()}}function cU(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",11)(1,"div",12)(2,"h5",13),t.\u0275\u0275text(3,"\xa9 Powered By SugarCRM"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"button",14),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275resetView(o.dismiss("Cross click"))}),t.\u0275\u0275element(5,"scrm-image",15),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div",16)(7,"p"),t.\u0275\u0275text(8," \xa9 2004-2013 SugarCRM Inc. The Program is provided AS IS, without warranty. Licensed under AGPLv3. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"p"),t.\u0275\u0275text(10," This program is free software; you can redistribute it and/or modify it under the terms of the GNU Affero General Public License version 3 as published by the Free Software Foundation, including the additional permission set forth in the source code header. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"p"),t.\u0275\u0275text(12," SugarCRM is a trademark of SugarCRM, Inc. All other company and product names may be trademarks of the respective companies with which they are associated. "),t.\u0275\u0275elementEnd()()()}}function uU(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",17)(1,"div",12)(2,"h5",13),t.\u0275\u0275text(3,"\xa9 Supercharged by SuiteCRM"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"button",14),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275resetView(o.dismiss("Cross click"))}),t.\u0275\u0275element(5,"scrm-image",15),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div",16)(7,"p"),t.\u0275\u0275text(8," SuiteCRM has been written and assembled by SalesAgility. The Program is provided AS IS, without warranty. Licensed under AGPLv3. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"p"),t.\u0275\u0275text(10," This program is free software; you can redistribute it and/or modify it under the terms of the GNU Affero General Public License version 3 as published by the Free Software Foundation, including the additional permission set forth in the source code header. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"p"),t.\u0275\u0275text(12," SuiteCRM is a trademark of SalesAgility Ltd. All other company and product names may be trademarks of the respective companies with which they are associated. "),t.\u0275\u0275elementEnd()()()}}let dU=(()=>{class i{constructor(e,n){this.modalService=e,this.authService=n}openSugarCopyright(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"lg"}).result.then(n=>{this.closeResult=`Closed with: ${n}`},n=>{this.closeResult=`Dismissed ${this.getDismissReason(n)}`})}openSuiteCopyright(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"lg"}).result.then(n=>{this.closeResult=`Closed with: ${n}`},n=>{this.closeResult=`Dismissed ${this.getDismissReason(n)}`})}getDismissReason(e){return e===me.ModalDismissReasons.ESC?"by pressing ESC":e===me.ModalDismissReasons.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${e}`}backToTop(){document.body.scrollTop=0,document.documentElement.scrollTop=0}ngOnInit(){this.authSub=this.authService.isUserLoggedIn.subscribe(e=>{this.isUserLoggedIn=e})}ngOnDestroy(){this.authSub.unsubscribe()}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(me.NgbModal),t.\u0275\u0275directiveInject(ci))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-footer-ui"]],decls:12,vars:1,consts:[[1,"footer"],[1,"copyright-links"],["data-toggle","modal","data-target",".copyright-suitecrm",1,"footer-link",3,"click"],["data-toggle","modal","data-target",".copyright-sugarcrm",1,"footer-link",3,"click"],[4,"ngIf"],[1,"copyright"],["sugarcopyright",""],["suitecopyright",""],[1,"back-to-top"],[1,"footer-link",3,"click"],["image","arrow_up_filled",1,"sicon","back-top-icon"],["role","dialog","aria-hidden","true",1,"copyright-sugarcrm"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["image","icon_modal_close",1,"sicon"],[1,"modal-body"],["role","dialog","aria-hidden","true",1,"copyright-suitecrm"]],template:function(n,r){if(1&n){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"a",2),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(o);const l=t.\u0275\u0275reference(11);return t.\u0275\u0275resetView(r.openSuiteCopyright(l))}),t.\u0275\u0275text(3," \xa9 Supercharged by SuiteCRM "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"a",3),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(o);const l=t.\u0275\u0275reference(9);return t.\u0275\u0275resetView(r.openSugarCopyright(l))}),t.\u0275\u0275text(5," \xa9 Powered By SugarCRM "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(6,lU,6,0,"ng-container",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"div",5),t.\u0275\u0275template(8,cU,13,0,"ng-template",null,6,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275template(10,uU,13,0,"ng-template",null,7,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()}2&n&&(t.\u0275\u0275advance(6),t.\u0275\u0275property("ngIf",r.isUserLoggedIn))},dependencies:[I.NgIf,ln],encapsulation:2})}return i})(),pU=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,sn]})}return i})(),fU=(()=>{class i{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["app-full-page-spinner"]],decls:20,vars:0,consts:[[1,"app-overlay"],["id","overlay-spinner"],[1,"app-loading"],[1,"sk-cube-grid"],[1,"sk-cube","sk-cube1","sk-cube-primary"],[1,"sk-cube","sk-cube2","sk-cube-secondary"],[1,"sk-cube","sk-cube3","sk-cube-secondary"],[1,"sk-cube","sk-cube4","sk-cube-primary"],[1,"sk-cube","sk-cube5","sk-cube-secondary"],[1,"sk-cube","sk-cube6","sk-cube-secondary"],[1,"sk-cube","sk-cube7","sk-cube-primary"],[1,"sk-cube","sk-cube8","sk-cube-primary"],[1,"sk-cube","sk-cube9","sk-cube-primary"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.\u0275\u0275element(4,"div",4)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",10)(14,"div",11)(15,"div",12)(16,"div",10)(17,"div",10)(18,"div",11)(19,"div",12),t.\u0275\u0275elementEnd()()()())},styles:[".app-overlay[_ngcontent-%COMP%]{position:fixed;display:flex;justify-content:center;align-items:center;flex-direction:column;width:100%;height:100%;inset:0;background-color:#fff9;z-index:4000;cursor:default}.app-loading[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%}.app-loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{height:200px;width:200px;animation:scaleIn 4s linear infinite;transform-origin:center center;position:absolute;inset:0;margin:auto}.app-loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]   .path[_ngcontent-%COMP%]{stroke-dasharray:1,200;stroke-dashoffset:0;animation:dash 1.5s ease-in-out infinite;stroke-linecap:round;stroke:#ddd}.sk-cube-primary[_ngcontent-%COMP%]{background-color:#e67062}.sk-cube-secondary[_ngcontent-%COMP%]{background-color:#4e5063}.sk-cube-grid[_ngcontent-%COMP%]{width:100px;height:100px}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube[_ngcontent-%COMP%]{width:25%;height:25%;float:left;animation:_ngcontent-%COMP%_sk-cubeGridScaleDelay 1.3s infinite ease-in-out}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube1[_ngcontent-%COMP%]{animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube2[_ngcontent-%COMP%]{animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube3[_ngcontent-%COMP%]{animation-delay:.4s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube4[_ngcontent-%COMP%]{animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube5[_ngcontent-%COMP%]{animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube6[_ngcontent-%COMP%]{animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube7[_ngcontent-%COMP%]{animation-delay:0s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube8[_ngcontent-%COMP%]{animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube9[_ngcontent-%COMP%]{animation-delay:.2s}@keyframes _ngcontent-%COMP%_sk-cubeGridScaleDelay{0%,70%,to{transform:scaleZ(1)}35%{transform:scale3D(0,0,1)}}"]})}return i})(),mU=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Ge.AngularSvgIconModule]})}return i})(),gr=(()=>{class i{constructor(e){this.apollo=e}fetch(e,n){const r={query:W.gql`
            query getBatchedStatistics($module: String!, $queries: Iterable!){
              getBatchedStatistics(module: $module, queries: $queries) {
                  _id
                  id
                  items
              }
            }
        `,variables:{module:e,queries:n}};return this.apollo.query(r).pipe((0,v.map)(o=>{const a={},c=(o.data&&o.data.getBatchedStatistics||{}).items||{},u=Object.keys(c);return u&&u.length&&u.forEach(d=>{const p=c[d];a[d||p._id]={id:p._id,data:p.data,metadata:p.metadata}}),a}))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(W.Apollo))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const hU={module:"",query:{},statistic:{id:"",data:{}},loading:!1};let Mc=(()=>{class i{constructor(e){this.fetchGQL=e,this.cache$=null,this.internalState=(0,S.deepClone)(hU),this.store=new D.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.statistic$=this.state$.pipe((0,v.map)(n=>n.statistic),(0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(n=>n.loading),(0,v.distinctUntilChanged)())}clear(){this.store.unsubscribe(),this.cache$=null}clearAuthBased(){this.clear()}getQuery(){return(0,S.deepClone)(this.internalState.query)}get context(){return this.internalState.query.context}set context(e){const n=(0,S.deepClone)(this.internalState.query);n.context=e,this.updateState({...this.internalState,query:n})}init(e,n,r=!0){return this.internalState.module=e,this.updateState({...this.internalState,module:e,query:n}),!1===r?null:this.load()}load(e=!0){return this.updateState({...this.internalState,loading:!0}),this.fetchStatistics(this.internalState.module,this.getQuery(),e).pipe((0,v.map)(n=>this.mapStatistics(n)),(0,v.tap)(n=>{this.addNewState(n)}))}setLoading(e){this.updateState({...this.internalState,loading:e})}setStatistic(e,n,r=!1){if(this.addNewState(n),!r)return;const o={};o[e]=n,this.cache$=(0,D.of)(o).pipe((0,v.shareReplay)(1))}addNewState(e){this.updateState({...this.internalState,statistic:e,loading:!1})}mapStatistics(e){const n=Object.keys(e),r=n&&n.length&&n[0];let o={id:"",data:{}};return r&&(o=e[r]),o}updateState(e){this.store.next(this.internalState=e)}fetchStatistics(e,n,r=!0){const o={};return o[n.key]=n,(null==this.cache$||!1===r)&&(this.cache$=this.fetchGQL.fetch(e,o).pipe((0,v.shareReplay)(1))),this.cache$}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(gr))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();const gU={module:"",query:{},statistic:{id:"",data:{}},loading:!1};let qC=(()=>{class i extends Mc{constructor(e,n){super(e),this.fetchGQL=e,this.fieldManager=n,this.cache$=null,this.internalState=(0,S.deepClone)(gU),this.store=new D.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.statistic$=this.state$.pipe((0,v.map)(r=>r.statistic),(0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(r=>r.loading),(0,v.distinctUntilChanged)())}addNewState(e){if(!e.metadata||!e.metadata.dataType)return;const n=this.fieldManager.buildShallowField(e.metadata.dataType,e.data.value);n.metadata={digits:0},this.updateState({...this.internalState,statistic:e,field:n,loading:!1})}updateState(e){super.updateState(e)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(gr),t.\u0275\u0275inject(hi))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Ca=(()=>{class i{constructor(e,n){this.fetchGQL=e,this.fieldManager=n}create(){return new qC(this.fetchGQL,this.fieldManager)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(gr),t.\u0275\u0275inject(hi))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function vU(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",2),t.\u0275\u0275element(1,"scrm-label",3),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("labelKey",e.messageLabelKey)}}function _U(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",8),t.\u0275\u0275element(2,"scrm-image",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275property("image",e.icon)("klass",e.iconClass)}}function yU(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",12),t.\u0275\u0275element(1,"scrm-field",13),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("type",e.field.type)("field",e.field)}}function bU(i,s){1&i&&(t.\u0275\u0275elementStart(0,"div",14),t.\u0275\u0275element(1,"scrm-inline-loading-spinner"),t.\u0275\u0275elementEnd())}function CU(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,yU,2,2,"div",10),t.\u0275\u0275template(2,bU,2,0,"div",11),t.\u0275\u0275elementContainerEnd()),2&i){const e=s.ngIf,n=t.\u0275\u0275nextContext(5);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.field),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.loading&&n.loading)}}function SU(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",15),t.\u0275\u0275element(2,"scrm-label",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2).$implicit,n=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(2),t.\u0275\u0275property("labelKey",e.labelKey)("module",n.getContextModule())}}function MU(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",17)(2,"label"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(4).ngIf;t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(e.description)}}function wU(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",19),t.\u0275\u0275element(1,"scrm-dynamic-label",20),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(3).$implicit,n=t.\u0275\u0275nextContext(2).ngIf,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("context",r.getMessageContext())("fields",r.getMessageFields(n.statistics))("labelKey",e.dynamicLabel)}}function DU(i,s){1&i&&(t.\u0275\u0275elementStart(0,"div",14),t.\u0275\u0275element(1,"scrm-inline-loading-spinner"),t.\u0275\u0275elementEnd())}function xU(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,wU,2,3,"div",18),t.\u0275\u0275template(2,DU,2,0,"div",11),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(5);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.loading)}}function EU(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div"),t.\u0275\u0275text(2," - "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2).$implicit,n=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate1("widget-entry-value ",n.getSizeClass(e.size),"")}}function IU(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,_U,3,2,"ng-container",7),t.\u0275\u0275template(2,CU,3,2,"ng-container",7),t.\u0275\u0275template(3,SU,3,2,"ng-container",7),t.\u0275\u0275template(4,MU,4,1,"ng-container",7),t.\u0275\u0275template(5,xU,3,2,"ng-container",7),t.\u0275\u0275template(6,EU,3,3,"ng-container",7),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(2).ngIf,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.icon),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.statistic&&n.statistics[e.statistic]),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.labelKey),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.descriptionKey),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.dynamicLabel),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.statistic&&!r.loading&&(!n.statistics[e.statistic].field||n.statistics[e.statistic].field&&r.isEmptyFieldValue(n.statistics[e.statistic].field.value)))}}function FU(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,IU,7,6,"ng-container",7),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(3);t.\u0275\u0275classMapInterpolate2("",n.getColClass()," ",n.getClass(e),""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","hidden"!==e.display)}}function AU(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div"),t.\u0275\u0275template(2,FU,2,5,"div",6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate4("d-flex ",n.getJustify(e.justify)," ",n.getAlign(e.align)," ",n.getRowClass()," ",n.getLayoutRowClass(e),""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.cols)}}function TU(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",4),t.\u0275\u0275template(1,AU,3,7,"ng-container",5),t.\u0275\u0275elementEnd()),2&i){const e=s.ngIf;t.\u0275\u0275propertyInterpolate("ngbTooltip",e.tooltipTitleText),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.layout)}}let lp=(()=>{class i{constructor(e,n){this.language=e,this.factory=n,this.loading=!0,this.subs=[],this.statistics={}}ngOnInit(){this.validateConfig()&&(this.gridWidgetInput=this.config,this.buildStatistics(),this.setupLoading$(),this.setupVM(),this.setupReload())}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}validateConfig(){return this.config&&this.config.layout?this.config.queryArgs.context&&this.config.queryArgs.module?this.config.widgetConfig?!(!this.config.layout||!this.config.layout.rows)||(this.messageLabelKey="LBL_CONFIG_NO_STATISTICS_KEY",!1):(this.messageLabelKey="LBL_CONFIG_NO_CONFIG",!1):(this.messageLabelKey="LBL_CONFIG_BAD_CONTEXT",!1):(this.messageLabelKey="LBL_CONFIG_NO_CONFIG",!1)}getRowClass(){return this.gridWidgetInput.rowClass}getColClass(){return this.gridWidgetInput.columnClass}getContextModule(){return this.gridWidgetInput.queryArgs.context.module}getMessageContext(){const e=this.getContextModule();return e?{module:e}:{}}getMessageFields(e){if(!e||!Object.keys(e).length)return{};const n={};return Object.keys(e).forEach(r=>{n[r]=e[r].field}),n}getSizeClass(e){return{regular:"text-regular",medium:"text-medium",large:"text-large","x-large":"text-x-large","xx-large":"text-xx-large",huge:"text-huge"}[e]||"text-regular"}getFontWeight(e){let n="font-weight-normal";return e&&(0,S.isTrue)(e)&&(n="font-weight-bolder"),n}getColor(e){return{yellow:"text-yellow",blue:"text-blue",green:"text-green",red:"text-red",purple:"text-purple",dark:"text-dark",grey:"text-grey"}[e]||""}getJustify(e){return{start:"justify-content-start",end:"justify-content-end",center:"justify-content-center",between:"justify-content-between",around:"justify-content-around"}[e]||"justify-content-center"}getAlign(e){return{start:"align-items-start",end:"align-items-end",center:"align-items-center",baseline:"align-items-baseline",stretch:"align-items-stretch"}[e]||"align-items-center"}getLayoutRowClass(e){let n="";return e&&e.class&&(n=e.class),n}getClass(e){let n="";return e&&(n=e.class),n=n+" "+this.getSizeClass(e.size)+" "+this.getFontWeight(e.bold)+" "+this.getColor(e.color),n}isEmptyFieldValue(e){return"string"==typeof e&&(e=e.trim()),null==e||typeof e>"u"||""===e||0===e.length}getLabel(e,n){let r="";return e&&e[n]&&(r=this.language.getFieldLabel(e[n])),r}getLayout(){return this.gridWidgetInput.layout.rows}buildStatistics(){this.gridWidgetInput.layout.rows.forEach(e=>{!e.cols||!e.cols.length||e.cols.forEach(n=>{if(n.statistic){if(n.store)return void(this.statistics[n.statistic]={type:n.statistic,store:n.store});this.statistics[n.statistic]={type:n.statistic,store:this.factory.create()},this.statistics[n.statistic].store.init(this.gridWidgetInput.queryArgs.module,{key:n.statistic,context:{...this.gridWidgetInput.queryArgs.context},params:{...this.gridWidgetInput.queryArgs.params}}).pipe((0,v.take)(1)).subscribe()}})})}setupLoading$(){const e=[];Object.keys(this.statistics).forEach(r=>e.push(this.statistics[r].store.loading$));let n=(0,D.of)([]);if(e.length<1)n=(0,D.of)([]);else if(1===e.length)n=e[0].pipe((0,v.map)(r=>[r]));else{let o,r=null;[r,...o]=e,n=r.pipe((0,D.combineLatestWith)(o))}this.loading$=n.pipe((0,v.map)(r=>{if(!r||r.length<1)return this.loading=!1,!1;let o=!0;return r.forEach(a=>{o=o&&a}),this.loading=o,o})),this.subs.push(this.loading$.subscribe())}setupReload(){this.gridWidgetInput.widgetConfig.reload$&&this.subs.push(this.gridWidgetInput.widgetConfig.reload$.subscribe(()=>{!1===this.loading&&(this.loading=!0,Object.keys(this.statistics).forEach(e=>{const n=this.statistics[e];n.store&&n.store.load(!1).pipe((0,v.take)(1)).subscribe()}))}))}setupVM(){let e=(0,D.of)([]).pipe((0,v.shareReplay)());const n=(0,D.of)(this.getLayout()).pipe((0,v.shareReplay)());if(this.statistics&&Object.keys(this.statistics).length>0){const r=[];if(Object.keys(this.statistics).forEach(o=>r.push(this.statistics[o].store.state$)),r.length<1)e=(0,D.of)([]);else if(1===r.length)e=r[0].pipe((0,v.map)(o=>[o]));else{let a,o=null;[o,...a]=r,e=o.pipe((0,D.combineLatestWith)(a))}}this.vm$=e.pipe((0,D.combineLatestWith)(n),(0,v.map)(([r,o])=>{const a={},l=[],c=[];return r.forEach(u=>{a[u.query.key]=u;const d=this.getLabel(u.statistic.metadata,"tooltip_title_key");d&&l.push(d);const p=this.getLabel(u.statistic.metadata,"descriptionKey");p&&c.push(p)}),{layout:o,statistics:a,tooltipTitleText:l.join(" | "),description:c.join(" | ")}}))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(Ca))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-grid-widget"]],inputs:{config:"config"},decls:3,vars:4,consts:[["class","p-3 widget-message",4,"ngIf"],["class","grid-widget d-flex flex-column","placement","auto","container","body",3,"ngbTooltip",4,"ngIf"],[1,"p-3","widget-message"],[3,"labelKey"],["placement","auto","container","body",1,"grid-widget","d-flex","flex-column",3,"ngbTooltip"],[4,"ngFor","ngForOf"],[3,"class",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"widget-entry-icon"],[3,"image","klass"],["class","widget-entry-value",4,"ngIf"],["class","widget-entry-loading",4,"ngIf"],[1,"widget-entry-value"],["mode","list",3,"type","field"],[1,"widget-entry-loading"],[1,"widget-entry-label","text-truncate"],[3,"labelKey","module"],[1,"text-truncate","widget-entry-label"],["class","widget-entry-dynamic-label",4,"ngIf"],[1,"widget-entry-dynamic-label"],[3,"context","fields","labelKey"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,vU,2,1,"div",0),t.\u0275\u0275template(1,TU,2,2,"div",1),t.\u0275\u0275pipe(2,"async")),2&n&&(t.\u0275\u0275property("ngIf",r.messageLabelKey),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.messageLabelKey&&t.\u0275\u0275pipeBind1(2,2,r.vm$)))},dependencies:[I.NgForOf,I.NgIf,hr,zl,qt,ln,So,me.NgbTooltip,I.AsyncPipe],encapsulation:2})}return i})();function OU(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-button",1),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.internalConfig)}}let QC=(()=>{class i{constructor(){this.status="maximised",this.buttonClasses=["minimise-button"]}ngOnInit(){this.buildButton()}ngOnChanges(e){e.config&&this.buildButton()}buildButton(){const e=S.Button.fromButton(this.config);e.addClasses(this.buttonClasses),e.icon=this.getIcon(),e.onClick=()=>{this.config.onClick(),this.toggleStatus()},this.internalConfig=e}toggleStatus(){let e="minimised";"minimised"===this.status&&(e="maximised"),this.status=e,this.buildButton()}getIcon(){return"minimised"===this.status?"plus_thin":"minimise"}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-minimise-button"]],inputs:{config:"config",status:"status"},features:[t.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],[3,"config"]],template:function(n,r){1&n&&t.\u0275\u0275template(0,OU,2,1,"ng-container",0),2&n&&t.\u0275\u0275property("ngIf",r.internalConfig)},dependencies:[I.NgIf,Un],encapsulation:2})}return i})();function LU(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-close-button",9),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("config",e.getCloseButton())}}function NU(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-minimise-button",10),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("config",e.minimiseButton)("status",e.minimiseStatus)}}function RU(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",11),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.title)}}function BU(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",11),t.\u0275\u0275element(1,"scrm-label",12),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("labelKey",e.titleKey)}}function kU(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",2)(1,"div",3)(2,"div",4),t.\u0275\u0275template(3,LU,1,1,"scrm-close-button",5),t.\u0275\u0275template(4,NU,1,2,"scrm-minimise-button",6),t.\u0275\u0275projection(5,1),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(6,RU,2,1,"div",7),t.\u0275\u0275template(7,BU,2,1,"div",7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"div",8),t.\u0275\u0275projection(9,2),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",e.isClosable()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.isCollapsible()),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.title),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.titleKey)}}const jU=[[["","panel-body",""]],[["","panel-icon-area",""]],[["","panel-header-button",""]]],PU=["[panel-body]","[panel-icon-area]","[panel-header-button]"];let Bs=(()=>{class i{constructor(){this.klass="",this.bodyPadding=2,this.mode="closable",this.close={klass:["btn","btn-outline-light","btn-sm"]},this.showHeader=!0,this.isCollapsed=!1,this.buttonClasses=["btn","btn-outline-light","btn-sm"],this.subs=[]}ngOnInit(){this.isCollapsed$&&this.subs.push(this.isCollapsed$.subscribe(e=>{this.isCollapsed=e,this.initMinimiseButton()})),this.initMinimiseButton()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getCloseButton(){if(!this.close)return null;const e=S.Button.fromButton(this.close);return e.addClasses(this.buttonClasses),this.close=e,e}isClosable(){return"closable"===this.mode}isCollapsible(){return"collapsible"===this.mode}initMinimiseButton(){this.minimiseButton={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.isCollapsed=!this.isCollapsed,this.initMinimiseStatus()}},this.initMinimiseStatus()}initMinimiseStatus(){this.minimiseStatus=this.isCollapsed?"minimised":"maximised"}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-panel"]],inputs:{klass:"klass",bodyPadding:"bodyPadding",title:"title",titleKey:"titleKey",mode:"mode",isCollapsed$:"isCollapsed$",close:"close",showHeader:"showHeader"},ngContentSelectors:PU,decls:4,vars:10,consts:[["class","card-header d-flex justify-content-between align-items-center",4,"ngIf"],[3,"ngbCollapse"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"flex-grow-1","align-items-center","d-flex"],[1,"d-flex","align-items-center"],[3,"config",4,"ngIf"],[3,"config","status",4,"ngIf"],["class","pl-1 panel-title",4,"ngIf"],[1,"panel-buttons","float-right"],[3,"config"],[3,"config","status"],[1,"pl-1","panel-title"],[3,"labelKey"]],template:function(n,r){1&n&&(t.\u0275\u0275projectionDef(jU),t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,kU,10,4,"div",0),t.\u0275\u0275elementStart(2,"div",1),t.\u0275\u0275projection(3),t.\u0275\u0275elementEnd()()),2&n&&(t.\u0275\u0275classMapInterpolate1("card panel-card ",r.klass,""),t.\u0275\u0275classProp("collapsed",r.isCollapsed),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.showHeader),t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate1("card-body p-",r.bodyPadding,""),t.\u0275\u0275property("ngbCollapse",r.isCollapsed))},dependencies:[I.NgIf,pd,me.NgbCollapse,QC,qt],encapsulation:2})}return i})();function VU(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",5),t.\u0275\u0275projection(1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("@widgetContentFade",e.displayContent?"true":"false")}}const UU=[[["","widget-body",""]]],$U=["[widget-body]"];let Sa=(()=>{class i{constructor(e){this.languageStore=e,this.title="",this.mode="none",this.displayContent=!0}ngOnInit(){}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-widget-panel"]],inputs:{title:"title",mode:"mode"},ngContentSelectors:$U,decls:5,vars:3,consts:[[1,"accordion","widget-panel","mr-0","shadow-sm"],["bodyPadding","0",3,"mode","title"],["panel-header-button",""],["panel-body",""],["class","widget collapse show open-close-container","data-parent",".widget-panel",4,"ngIf"],["data-parent",".widget-panel",1,"widget","collapse","show","open-close-container"]],template:function(n,r){1&n&&(t.\u0275\u0275projectionDef(UU),t.\u0275\u0275elementStart(0,"div",0)(1,"scrm-panel",1),t.\u0275\u0275element(2,"span",2),t.\u0275\u0275elementStart(3,"div",3),t.\u0275\u0275template(4,VU,2,1,"div",4),t.\u0275\u0275elementEnd()()()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("mode",r.mode)("title",r.title),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",r.displayContent))},dependencies:[I.NgIf,Bs],encapsulation:2,data:{animation:[(0,yt.trigger)("widgetFade",[(0,yt.transition)("void => *",[(0,yt.style)({transform:"translateX(100%)",opacity:0}),(0,yt.animate)("500ms",(0,yt.style)({transform:"translateX(0)",opacity:1}))]),(0,yt.transition)("* => void",[(0,yt.style)({transform:"translateX(0)",opacity:1}),(0,yt.animate)("500ms",(0,yt.style)({transform:"translateX(100%)",opacity:0}))])]),(0,yt.trigger)("widgetContentFade",[(0,yt.transition)("void => *",[(0,yt.style)({transform:"translateY(-5%)",opacity:0}),(0,yt.animate)("500ms",(0,yt.style)({transform:"translateY(0)",opacity:1}))]),(0,yt.transition)("* => void",[(0,yt.style)({transform:"translateY(0)",opacity:1}),(0,yt.animate)("500ms",(0,yt.style)({transform:"translateY(-5%)",opacity:0}))])])]}})}return i})(),JC=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,an]})}return i})(),so=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,an,da,me.NgbModule,JC,Vt]})}return i})(),kr=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,sn,so]})}return i})(),cp=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Jn,wo,kr,Vt,sn,Mo,me.NgbTooltipModule]})}return i})();function zU(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",5)(1,"div",6)(2,"strong"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"div",7),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(e.getColumnLabel("LBL_CHECKSYS_TITLE")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e.getColumnLabel("ERR_CHECKSYS")," ")}}function HU(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"span",14)(1,"strong"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",n.getColumnLabel(e.value.info)," ")}}function WU(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.getColumnLabel(e.value.error)," ")}}function KU(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"li"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e," ")}}function GU(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",15)(1,"ul"),t.\u0275\u0275template(2,KU,2,1,"li",4),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.value.data)}}function ZU(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"li")(1,"div",8)(2,"div")(3,"span"),t.\u0275\u0275element(4,"scrm-image",9),t.\u0275\u0275elementStart(5,"strong",10),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(7,HU,3,1,"span",11),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(8,WU,2,1,"div",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(9,GU,3,1,"div",13),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate1("alert ",n.getAlertType(e.value),""),t.\u0275\u0275advance(3),t.\u0275\u0275property("image",n.getAlertIcon(e.value)),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",n.getColumnLabel(e.value.label)," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",""!==e.value.info),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",""!==e.value.error),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",0!==e.value.data.length)}}const Ma={success:{alertClass:"alert-success",alertIcon:"info-circle"},error:{alertClass:"alert-danger",alertIcon:"exclamation-circle"},warning:{alertClass:"alert-warning",alertIcon:"exclamation-triangle"},info:{alertClass:"alert-info",alertIcon:"info-circle"},light:{alertClass:"alert-light",alertIcon:"exclamation-circle"}};let up=(()=>{class i{constructor(e,n,r){this.appState=e,this.languageStore=n,this.modal=r,this.titleKey="LBL_CHECKSYS_TITLE"}getHeaderLabel(){return this.languageStore.getFieldLabel("LBL_CHECKSYS_TITLE")}getColumnLabel(e){const n=this.languageStore.getFieldLabel(e,this.appState.getModule());return(0,S.isEmptyString)(n)?e:n}ngOnInit(){this.closeButtonIcon={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.modal.close({type:"close-button"})}},this.closeButton={klass:["btn","modal-button-cancel"],labelKey:"LBL_COLUMN_SELECTOR_CLOSE_BUTTON",onClick:()=>{this.modal.close({type:"close-button"})}}}getAlertType(e){return"error"===e.status?Ma[e.type].alertClass:Ma[e.status].alertClass}getAlertIcon(e){return"error"===e.status?Ma[e.type].alertIcon:Ma[e.status].alertIcon}returnZero(){return 0}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ht),t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(me.NgbActiveModal))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-install-error-modal"]],inputs:{errors:"errors"},decls:8,vars:11,consts:[[3,"closable","close","title","titleKey","headerKlass","bodyKlass"],["modal-body",""],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"list-style-none"],[4,"ngFor","ngForOf"],["role","alert",1,"alert","alert-danger"],[1,"alert-heading"],[1,"alert-desc"],["role","alert"],[3,"image"],[2,"margin-left","2px"],["style","float:right",4,"ngIf"],[4,"ngIf"],["class","alert alert-light","role","alert",4,"ngIf"],[2,"float","right"],["role","alert",1,"alert","alert-light"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"scrm-modal",0)(1,"div",1),t.\u0275\u0275elementContainerStart(2),t.\u0275\u0275template(3,zU,6,2,"div",2),t.\u0275\u0275elementStart(4,"div")(5,"ul",3),t.\u0275\u0275template(6,ZU,10,8,"li",4),t.\u0275\u0275pipe(7,"keyvalue"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementEnd()()),2&n&&(t.\u0275\u0275property("closable",!0)("close",r.closeButtonIcon)("title",r.getHeaderLabel())("titleKey",r.titleKey)("headerKlass","alert-header")("bodyKlass","alert-body"),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",r.errors.hasValidationError&&!0===r.errors.hasValidationError),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind2(7,8,r.errors.data,r.returnZero)))},dependencies:[I.NgForOf,I.NgIf,Ss,ln,I.KeyValuePipe],encapsulation:2})}return i})(),qU=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i,bootstrap:[up]});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,vm,da,Do,Vt,an,me.NgbModule,me.NgbAlertModule,sn]})}return i})();class ks extends S.ActionHandler{}let YC=(()=>{class i extends ks{constructor(e,n){super(),this.moduleNameMapper=e,this.router=n,this.key="create",this.modes=["list"]}run(e){const n=e.module,r=e?.action?.moduleAction??"edit",o=e?.parentId??"",a=e.parentModule??"",l=`/${n}/${r}`,c={return_module:this.moduleNameMapper.toLegacy(a),return_action:"DetailView",return_id:o,relate_to:a,relate_id:o};this.addAdditionalFields(e,c),this.addParams(e,c),this.router.navigate([l],{queryParams:c}).then()}shouldDisplay(){return!0}addAdditionalFields(e,n){const r=e.store.parentRecord&&e.store.parentRecord.attributes||{};if(!r&&!Object.keys(r).length)return;const o=e.action.additionalFields??{};(Object.keys(o)||[]).forEach(l=>{if(!l||!o[l])return;const u=(0,je.Z)(r,o[l],null);(0,S.isVoid)(u)||(n[l]=u)})}addParams(e,n){const r=e.action.extraParams??{};(Object.keys(r)||[]).forEach(a=>{!a||!r[a]||(n[a]=r[a])})}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(En),t.\u0275\u0275inject(Ot.Router))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),XC=(()=>{class i extends ks{constructor(e,n,r){super(),this.modalService=e,this.message=n,this.asyncActionService=r,this.key="select",this.modes=["list"]}shouldDisplay(e){return!0}run(e){this.showSelectModal(e)}showSelectModal(e){const n=this.modalService.open(As,{size:"xl",scrollable:!0}),r=e.module;n.componentInstance.module=r,n.componentInstance.parentModule=e?.parentModule??"",n.componentInstance.multiSelect=!0,n.componentInstance.multiSelectButtonLabel="LBL_LINK",n.result.then(o=>{if(!o||!o.selection||!o.selection.selected)return;const a=this.getSelectedIds(o);let l=e.subpanelMeta.get_subpanel_data;const c=e.subpanelMeta?.collection_list??null;c&&c?.[r]?.get_subpanel_data&&(l=c[r].get_subpanel_data),this.runAsyncAction({action:"record-select",module:e.store.parentModule,id:e.store.parentId||"",payload:{baseModule:e.parentModule,baseRecordId:e.parentId,linkField:l,relateModule:r,relateRecordIds:a}},e)})}getSelectedIds(e){const n=[];return Object.keys(e.selection.selected).forEach(r=>{r&&n.push(r)}),n}runAsyncAction(e,n){this.message.removeMessages(),this.asyncActionService.run("record-select",e).pipe((0,v.take)(1)).subscribe(()=>{n.store.load(!1).pipe((0,v.take)(1)).subscribe(),n.store.loadAllStatistics(!1).pipe((0,v.take)(1)).subscribe()})}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(me.NgbModal),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(nn))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),eS=(()=>{class i extends ks{constructor(){super(),this.key="async-process",this.modes=S.ALL_VIEW_MODES}run(e){}shouldDisplay(e){return!0}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),tS=(()=>{class i extends ks{constructor(){super(...arguments),this.key="show-filter",this.modes=["list"]}shouldDisplay(e){return!0}getStatus(e){return this.isAnyFilterApplied(e.store)?"active":""}run(e){e.store.toggleFilter()}isAnyFilterApplied(e){return e.hasActiveFilter()||!e.areAllCurrentCriteriaFilterEmpty()}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=t.\u0275\u0275getInheritedFactory(i)))(r||i)}}();static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),nS=(()=>{class i extends ks{constructor(){super(...arguments),this.key="clear-filter",this.modes=["list"]}shouldDisplay(e){return this.isAnyFilterApplied(e.store)}run(e){e.store.clearFilter()}isAnyFilterApplied(e){return e.hasActiveFilter()||!e.areAllCurrentCriteriaFilterEmpty()}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=t.\u0275\u0275getInheritedFactory(i)))(r||i)}}();static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),wa=(()=>{class i extends Ci{constructor(e,n,r,o,a){super(),this.create=e,this.select=n,this.async=r,this.showFilter=o,this.clearFilter=a,r.modes.forEach(l=>this.actions[l][r.key]=r),e.modes.forEach(l=>this.actions[l][e.key]=e),n.modes.forEach(l=>this.actions[l][n.key]=n),o.modes.forEach(l=>this.actions[l][o.key]=o),a.modes.forEach(l=>this.actions[l][a.key]=a)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(YC),t.\u0275\u0275inject(XC),t.\u0275\u0275inject(eS),t.\u0275\u0275inject(tS),t.\u0275\u0275inject(nS))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function QU(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-button-group",7),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("config$",e.config$)("klass","icon-bar-block")}}function JU(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",1)(2,"div",2)(3,"div",3)(4,"div"),t.\u0275\u0275template(5,QU,1,2,"scrm-button-group",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"button",5),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.isButtonClicked=!r.isButtonClicked)}),t.\u0275\u0275element(7,"scrm-image",6),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementContainerEnd()}if(2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275classMap(e.wrapperClass),t.\u0275\u0275property("ngClass",e.isButtonClicked?"active":""),t.\u0275\u0275advance(1),t.\u0275\u0275classMap(e.klass),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.config$)}}let iS=(()=>{class i{constructor(e,n,r,o,a){this.languageStore=e,this.actionManager=n,this.languages=r,this.screenSize=o,this.systemConfigStore=a,this.klass="",this.wrapperClass="",this.limitConfigKey="listview_line_actions_limits",this.configState=new D.BehaviorSubject({buttons:[]}),this.config$=this.configState.asObservable(),this.isButtonClicked=!1,this.buttonClass="line-action-item line-action",this.buttonGroupClass="float-right",this.subs=[],this.screen=ii.Medium,this.defaultBreakpoint=3}ngOnInit(){this.subs.push(this.config.getActions({record:this.record}).pipe((0,D.combineLatestWith)(this.screenSize.screenSize$,this.languages.vm$),(0,v.map)(([e,n,r])=>{n&&(this.screen=n),this.configState.next(this.getButtonGroupConfig(e)),this.actions=e})).subscribe())}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getButtonGroupConfig(e){const n=[],r=[];e.forEach(l=>{const c=this.buildButton(l);l.params&&l.params.expanded?n.push(c):r.push(c)});let o=e.length;const a=n.concat(r);return{buttonKlass:[this.buttonClass],dropdownLabel:this.languages.getAppString("LBL_ACTIONS")||"",breakpoint:o,dropdownOptions:{placement:["bottom-right"],wrapperKlass:[this.buttonGroupClass]},buttons:a}}getBreakpoint(){const e=this.systemConfigStore.getConfigValue(this.limitConfigKey);return this.screen&&e&&e[this.screen]?(this.breakpoint=e[this.screen],this.breakpoint):this.breakpoint?this.breakpoint:this.defaultBreakpoint}buildButton(e){const n={titleKey:e.labelKey||"",klass:this.buttonClass,icon:e.icon||"",onClick:()=>{this.config.runAction(e,{module:this.record&&this.record.module||"",record:this.record})}};e.icon&&(n.icon=e.icon);const r=e?.params?.debounceClick??null;return n.debounceClick=!0,(0,S.isFalse)(r)&&(n.debounceClick=!1),e.status&&S.Button.appendClasses(n,[e.status]),n}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(wa),t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(li),t.\u0275\u0275directiveInject(ht))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-line-action-menu"]],inputs:{klass:"klass",wrapperClass:"wrapperClass",record:"record",config:"config",limitConfigKey:"limitConfigKey"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"line-action-container"],["id","line-action-div",1,"line-action","line-action-position"],[3,"ngClass"],[3,"config$","klass",4,"ngIf"],["aria-label","Mobile Menu Button",1,"more-button",3,"click"],["image","apps-line",1,"sicon"],[3,"config$","klass"]],template:function(n,r){1&n&&t.\u0275\u0275template(0,JU,8,8,"ng-container",0),2&n&&t.\u0275\u0275property("ngIf",r.actions.length)},dependencies:[I.NgClass,I.NgIf,ln,yo],encapsulation:2})}return i})(),rS=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,me.NgbModule,sn,Ot.RouterModule,Or]})}return i})(),oS=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-load-more"]],inputs:{loadMoreButton:"loadMoreButton"},decls:3,vars:1,consts:[[1,"float-right"],[1,"",3,"config"],["image","plus_thin",1,"small",2,"fill","#FFFFFF"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",0)(1,"scrm-button",1),t.\u0275\u0275element(2,"scrm-image",2),t.\u0275\u0275elementEnd()()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("config",r.loadMoreButton))},dependencies:[ln,Un],encapsulation:2})}return i})(),sS=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,sn,an]})}return i})();class aS{constructor(){this.url="",this.md5="",this.width=0,this.height=0}}let wc=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-logo-ui"]],decls:1,vars:0,consts:[["image","company_logo",1,"logo"]],template:function(n,r){1&n&&t.\u0275\u0275element(0,"scrm-image",0)},dependencies:[ln],encapsulation:2})}return i})(),Dc=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,sn]})}return i})();function YU(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"a",1),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.doLogout())}),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&i){const e=s.ngIf,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.appStrings[n.logout.logoutAction.label]||"")}}let lS=(()=>{class i{constructor(e,n){this.auth=e,this.languageStore=n,this.logout={logoutAction:{label:"LBL_LOGOUT"}},this.languages$=this.languageStore.vm$,this.vm$=this.languages$.pipe((0,v.map)(r=>({appStrings:r.appStrings||{},appListStrings:r.appListStrings||{}})))}doLogout(){this.auth.logout()}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(ci),t.\u0275\u0275directiveInject(Ue))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-logout-ui"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"dropdown-item","global-links-sublink",3,"click"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,YU,3,1,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[I.NgIf,I.AsyncPipe],encapsulation:2})}return i})(),cS=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})();function XU(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(2).ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(n[e.labelKey]||e.labelKey||"")}}function e$(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.text)}}function t$(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",5),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e).$implicit,a=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(a.close(o))}),t.\u0275\u0275template(1,XU,2,1,"ng-container",6),t.\u0275\u0275template(2,e$,2,1,"ng-container",6),t.\u0275\u0275elementStart(3,"a",7),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e).$implicit,a=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(a.close(o))}),t.\u0275\u0275elementStart(4,"span",8),t.\u0275\u0275text(5,"\xd7"),t.\u0275\u0275elementEnd()()()}if(2&i){const e=s.$implicit;t.\u0275\u0275classMapInterpolate1("message ",e.type," alert-dismissible fade show shadow"),t.\u0275\u0275property("@fade",void 0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.labelKey),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.text&&!e.labelKey)}}function n$(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",3),t.\u0275\u0275template(1,t$,6,6,"div",4),t.\u0275\u0275elementEnd()),2&i){const e=s.ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e)}}function i$(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275template(1,n$,2,1,"div",2),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(2,1,e.messages$))}}let r$=(()=>{class i{constructor(e,n){this.messageService=e,this.languages=n,this.appStrings$=n.appStrings$}ngOnInit(){this.messages$=this.messageService.messages$}close(e){this.messageService.contains(e,!0)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(dt),t.\u0275\u0275directiveInject(Ue))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-message-ui"]],decls:2,vars:3,consts:[["class","container-fluid alert-fixed message-wrapper",4,"ngIf"],[1,"container-fluid","alert-fixed","message-wrapper"],["class","d-flex justify-content-center flex-column align-items-center message-container",4,"ngIf"],[1,"d-flex","justify-content-center","flex-column","align-items-center","message-container"],["role","alert",3,"class","click",4,"ngFor","ngForOf"],["role","alert",3,"click"],[4,"ngIf"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,i$,3,3,"div",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.appStrings$))},dependencies:[I.NgForOf,I.NgIf,I.AsyncPipe],encapsulation:2,data:{animation:[(0,yt.trigger)("fade",[(0,yt.transition)(":enter",(0,yt.useAnimation)(Pl.fadeIn,{params:{timing:.5,delay:0}})),(0,yt.transition)(":leave",(0,yt.useAnimation)(Pl.fadeOut,{params:{timing:.5,delay:0}}))])]}})}return i})(),o$=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})(),s$=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Do]})}return i})(),uS=(()=>{class i{constructor(e,n){this.buttonUtils=e,this.config=n,this.activeModal=null,this.defaultButtonGroup={breakpoint:4,wrapperKlass:["modal-buttons"],buttonKlass:["modal-button","btn","btn-sm"],buttons:[]};const r=this.config.getConfigValue("ui");r&&r.modal_button_group_breakpoint&&(this.defaultButtonGroup.breakpoint=r.modal_buttons_collapse_breakpoint)}ngOnInit(){this.config$&&(this.buttonGroup$=this.config$.pipe((0,v.map)(e=>this.mapButtonGroup(e))))}mapButtonGroup(e){const n=(0,h8.Z)({...e},(0,S.deepClone)(this.defaultButtonGroup));return this.mapButtons(n),n}mapButtons(e){const n=e.buttons||[];e.buttons=[],n.length>0&&n.forEach(r=>{const o=this.buttonUtils.addOnClickPartial(r,this.activeModal);e.buttons.push(o)})}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(_b),t.\u0275\u0275directiveInject(ht))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-modal-button-group"]],inputs:{config$:"config$",activeModal:"activeModal"},decls:1,vars:1,consts:[[3,"config$"]],template:function(n,r){1&n&&t.\u0275\u0275element(0,"scrm-button-group",0),2&n&&t.\u0275\u0275property("config$",r.buttonGroup$)},dependencies:[yo],encapsulation:2})}return i})(),Da=(()=>{class i{constructor(e){this.activeModal=e,this.buttons=[]}ngOnInit(){this.buttonGroup$=(0,D.of)({buttons:this.buttons}),this.closeButton={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.activeModal.close({type:"close-button"})}}}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(me.NgbActiveModal))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-message-modal"]],inputs:{titleKey:"titleKey",textKey:"textKey",buttons:"buttons"},decls:6,vars:6,consts:[["klass","message-modal",3,"closable","close","title"],["modal-body","",1,"p-3"],[3,"labelKey"],["modal-footer",""],[3,"activeModal","config$"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"scrm-modal",0)(1,"div",1)(2,"span"),t.\u0275\u0275element(3,"scrm-label",2),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"div",3),t.\u0275\u0275element(5,"scrm-modal-button-group",4),t.\u0275\u0275elementEnd()()),2&n&&(t.\u0275\u0275property("closable",!0)("close",r.closeButton)("title",r.titleKey||""),t.\u0275\u0275advance(3),t.\u0275\u0275property("labelKey",r.textKey),t.\u0275\u0275advance(2),t.\u0275\u0275property("activeModal",r.activeModal)("config$",r.buttonGroup$))},dependencies:[Ss,qt,uS],encapsulation:2,data:{animation:[(0,yt.trigger)("modalFade",[(0,yt.transition)("void <=> *",[(0,yt.animate)("800ms")])])]}})}return i})(),dS=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Or]})}return i})(),a$=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Do,Or,Vt,dS,me.NgbModule]})}return i})(),dp=(()=>{class i{constructor(){this.title=""}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-module-title"]],inputs:{title:"title"},decls:2,vars:3,template:function(n,r){1&n&&(t.\u0275\u0275text(0),t.\u0275\u0275pipe(1,"uppercase")),2&n&&t.\u0275\u0275textInterpolate1("\n",t.\u0275\u0275pipeBind1(1,1,r.title),"\n")},dependencies:[I.UpperCasePipe],encapsulation:2})}return i})(),xa=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})();var Ea=function(i){return i.none="",i.blank="_blank",i.parent="_parent",i.self="_self",i.top="_top",i}(Ea||{});class l${constructor(){this.target=Ea.none}}class pS{constructor(s,e,n,r,o,a){this.routeConverter=s,this.moduleNavigation=e,this.preferences=n,this.language=r,this.appState=o,this.moduleNameMapper=a,this.authenticated=!0,this.logo=new aS,this.useGroupTabs=!1,this.globalActions=[],this.currentUser={id:"",firstName:"",lastName:""},this.all={modules:[],extra:[]},this.menu=[]}resetMenu(){this.menu=[],this.globalActions=[],this.all.modules=[],this.all.extra=[],this.current=null,this.currentUser={}}buildUserActionMenu(s,e){this.currentUser.id=e.id,this.currentUser.firstName=e.firstName,this.currentUser.lastName=e.lastName,s&&s.forEach(n=>{const r=n.name;let o=n.url;if("logout"===r)return;let a=Ea.none;"training"===r?a=Ea.blank:o=this.routeConverter.toFrontEndLink(o);const l=this.language.getAppString(n.labelKey)??"";this.globalActions.push({link:{url:o,label:l,target:a}})})}build(s,e,n){this.buildUserActionMenu(s.userActionMenu,e);const r=this.preferences.getUserPreference("navigation_paradigm"),o="on"===this.preferences.getUserPreference("sort_modules_by_name");"m"!==r?"gm"!==r||this.buildGroupedNavigation(s,n,o):this.buildModuleNavigation(s,n,o)}buildGroupTabMenu(s,e,n,r,o){const a=[],l=[];s&&s.length>0&&(s.forEach(u=>{l.push(this.buildTabMenuItem(u,e[u]))}),o&&this.sortMenuItems(l));let c=0;r.forEach(u=>{c<=n&&a.push(this.buildTabGroupedMenuItem(u.labelKey,u.modules,e,o)),c++}),this.menu=a,this.all.modules=l}buildModuleNavigation(s,e,n){(0,S.ready)([s.tabs,s.modules])&&(this.buildTabMenu(s.tabs,s.modules,e,n),this.buildSelectedModule(s))}buildGroupedNavigation(s,e,n){(0,S.ready)([s.tabs,s.modules,s.groupedTabs])&&(this.buildGroupTabMenu(s.tabs,s.modules,e,s.groupedTabs,n),this.buildSelectedModule(s))}buildSelectedModule(s){const e=this.appState.getModule()??"";""===e||"home"===e||s.modules[e]&&(this.current=this.buildTabMenuItem(e,s.modules[e]))}buildTabMenu(s,e,n,r){const o=[],a=[];if(!s||0===s.length)return this.menu=o,void(this.all.modules=a);let l=0;s.forEach(c=>{const u=this.buildTabMenuItem(c,e[c]);"home"===c||this.appState.getModule()===c||l>=n?a.push(u):o.push(u),l++}),r&&(this.sortMenuItems(o),this.sortMenuItems(a)),this.menu=o,this.all.modules=a}buildTabGroupedMenuItem(s,e,n,r){return{link:{label:this.language.getAppString(s)||s,url:"",route:null,params:null},icon:"",submenu:this.buildGroupedMenu(e,n,r)}}buildGroupedMenu(s,e,n){const r=[];let o=null;return s.forEach(a=>{const l=e[a];if(!l)return;const c=this.buildTabMenuItem(a,l);"home"!==a?r.push(c):o=c}),n&&this.sortMenuItems(r),o&&r.unshift(o),r}buildTabMenuItem(s,e){e.name&&(s=e.name);const n=this.moduleNavigation.getModuleRoute(e),r=this.language.getLanguageStrings()?.appListStrings??{},o={link:{label:this.moduleNavigation.getModuleLabel(e,r),url:n.url,route:n.route,params:null},icon:this.moduleNameMapper.toLegacy(s)??null,submenu:[],module:s??null,isGroupedMenu:!1};let a=!1;return e&&e.menu.forEach(l=>{const c=l.sublinks||[],u=this.buildSubMenuItem(s,l,c);o.submenu.push(u),c.length>0&&(a=!0)}),o.isGroupedMenu=a,o}buildSubMenuItem(s,e,n){const r=this.moduleNavigation.getActionRoute(e);return{link:{label:this.moduleNavigation.getActionLabel(s,e,this.language.getLanguageStrings()),url:r.url,route:r.route,params:r.params,process:r.process},icon:e.icon||"",submenu:n.map(a=>this.buildSubMenuItem(s,a,[]))}}sortMenuItems(s){s.sort((e,n)=>{const r=e.link.label.toUpperCase(),o=n.link.label.toUpperCase();return r<o?-1:r>o?1:0})}}let ao=(()=>{class i{constructor(e,n,r){this.moduleNameMapper=e,this.actionNameMapper=n,this.systemConfigStore=r}toFrontEndLink(e){return"#/"+this.toFrontEndRoute(e)}toFrontEndRoute(e){if(e&&e.includes("/#/")){const o=e.split("/#/");return o.length<2?"/":o[1]}const n=this.parse(e);if(!n)return"/";let r=this.buildRoute(n.module,n.action,n.record);return r+=this.buildQueryString(n.params,["module","action","record"]),r}toLegacy(e,n){let r="./legacy/index.php";const o={...n};return e.module&&(o.module=this.moduleNameMapper.toLegacy(e.module)),e.action&&(o.action=this.actionNameMapper.toLegacy(e.action)),e.record&&(o.record=e.record),r+=this.buildQueryString(o),r}parse(e){const n=new Ot.DefaultUrlSerializer,o=e.replace("/legacy","").split("?");if(o.length<2)return null;const a=n.parse("/?"+o[1]),l=a.queryParamMap;return{module:l.get("module")||"",action:l.get("action")||"",record:l.get("record")||"",params:a.queryParams}}parseRouteURL(e){return{module:e[0]?.path??"",action:e[1]?.path??"index",record:e[2]?.path??""}}parseRouteInfoFromUrlTree(e){return this.parseRouteURL(e.root.children[Ot.PRIMARY_OUTLET].segments)}isClassicViewRoute(e){const n=this.systemConfigStore.getConfigValue("module_routing"),r=this.parseRouteInfoFromUrlTree(e),o=r.module;return!n[o]||!n[o][r.action]}matchesActiveRoute(e,n){let o=!0;return[{name:"module",map:a=>a&&this.mapModuleToFrontend(a)},{name:"action",map:a=>a&&this.mapActionToFrontEnd(a)},{name:"record",map:a=>a}].forEach(a=>{!e.snapshot.params[a.name]&&!n[a.name]||(o=o&&e.snapshot.params[a.name]===a.map(n[a.name]))}),o}buildRoute(e,n,r){let a=`${this.mapModuleToFrontend(e)}`;return n&&(a+=`/${this.mapActionToFrontEnd(n)}`),r&&(a+=`/${r}`),a}buildQueryString(e,n=[]){let r=new Yr.HttpParams;return Object.keys(e).forEach(o=>{n.includes(o)||(r=r.set(o,e[o]))}),r.keys().length>0?"?"+r.toString():""}mapModuleToFrontend(e){return this.moduleNameMapper.toFrontend(e)}mapActionToFrontEnd(e){return this.actionNameMapper.toFrontend(e)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(En),t.\u0275\u0275inject(Eo),t.\u0275\u0275inject(ht))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),fS=(()=>{class i{constructor(e){this.router=e}navigateToSearch(e,n){let r="/home/search";"UnifiedSearch"===n&&(r="/home/unified-search");let o="";return e&&(o=e),this.router.navigate([r],{queryParams:{query_string:o}})}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ot.Router))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const c$=["searchInput"],u$=function(i){return{"dropdown-active":i}};function d$(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ul",9)(1,"li",10)(2,"a",11),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.searchWithEnter())}),t.\u0275\u0275element(3,"scrm-image",12),t.\u0275\u0275elementStart(4,"span",13),t.\u0275\u0275text(5,'"'),t.\u0275\u0275elementStart(6,"strong"),t.\u0275\u0275text(7),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"lowercase"),t.\u0275\u0275elementEnd()()()()}if(2&i){const e=t.\u0275\u0275nextContext().ngIf,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(5,u$,n.searchWord)),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate(n.searchWord),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1('" ',t.\u0275\u0275pipeBind1(9,3,e.appStrings.LBL_IN_EVERYWHERE),"")}}function p$(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",14),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.searchWithEnter())}),t.\u0275\u0275element(1,"scrm-image",12),t.\u0275\u0275elementEnd()}}function f$(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",15),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.clearSearchTerm())}),t.\u0275\u0275element(1,"scrm-image",16),t.\u0275\u0275elementEnd()}}const m$=function(i){return{"search-focused":i}};function h$(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"form",1)(2,"div",2)(3,"input",3,4),t.\u0275\u0275listener("focus",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.onFocus())})("blur",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.onBlur())})("keydown.enter",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView("enter"===r.searchTrigger?r.searchWithEnter():null)})("input",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275reference(4),o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView("input"===o.searchTrigger?o.searchWithInput(r.value):null)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(5,d$,10,7,"ul",5),t.\u0275\u0275elementStart(6,"div",6),t.\u0275\u0275template(7,p$,2,0,"button",7),t.\u0275\u0275template(8,f$,2,0,"button",8),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementContainerEnd()}if(2&i){const e=s.ngIf,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",n.klass)("formGroup",n.searchForm),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(7,m$,n.isFocused)),t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate1("placeholder","",e.appStrings[n.labelKey]||"","..."),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.searchWord.length&&n.hasSearchTyped&&"enter"===n.searchTrigger),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!n.hasSearchTyped),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.hasSearchTyped)}}let pp=(()=>{class i{constructor(e){this.languageStore=e,this.labelKey="",this.klass="",this.isMobile=!1,this.searchTrigger="enter",this.isSearchVisible=new t.EventEmitter(!1),this.searchExpression=new t.EventEmitter,this.searchWord="",this.isFocused=!1,this.hasSearchTyped=!1,this.subs=[],this.languages$=this.languageStore.vm$,this.vm$=this.languages$.pipe((0,v.map)(n=>({appStrings:n.appStrings||{}})))}ngOnInit(){this.searchForm=new De.FormGroup({searchTerm:new De.FormControl("")}),this.subs.push(this.searchForm.get("searchTerm").valueChanges.pipe((0,v.tap)(e=>{this.hasSearchTyped=!!e}),(0,v.distinctUntilChanged)(),(0,v.filter)(e=>e?.length>1)).subscribe(e=>this.searchWord=e))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}searchWithEnter(){this.searchWord.length?(this.searchExpression.emit(this.searchWord),this.clearSearchTerm(),this.searchInput.nativeElement.blur()):this.isMobile&&this.onBlur()}searchWithInput(e){this.searchExpression.emit(e)}clearSearchTerm(){this.searchForm.reset(),this.hasSearchTyped=!1,this.searchWord="","input"===this.searchTrigger&&this.searchWithInput(this.searchWord)}onFocus(){this.isFocused=!0;const e=this.searchForm?.get("searchTerm")?.value??"";e.length>2&&(this.hasSearchTyped=!0,this.searchWord=e)}onBlur(){setTimeout(()=>{this.isFocused=!1,this.hasSearchTyped=!1},200),this.isMobile&&setTimeout(()=>{this.isSearchVisible.emit(!1)},50)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-search-bar"]],viewQuery:function(n,r){if(1&n&&t.\u0275\u0275viewQuery(c$,5),2&n){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.searchInput=o.first)}},inputs:{labelKey:"labelKey",klass:"klass",isMobile:"isMobile",searchTrigger:"searchTrigger"},outputs:{isSearchVisible:"isSearchVisible",searchExpression:"searchExpression"},decls:2,vars:3,consts:[[4,"ngIf"],["name","search-bar",1,"search-bar",3,"ngClass","formGroup"],[1,"input-group","dropdown",3,"ngClass"],["formControlName","searchTerm","type","text","name","search-bar-term","aria-label","Search","data-toggle","dropdown","autocomplete","off","required","",1,"form-control","dropdown-toggle","search-bar-term",3,"placeholder","focus","blur","keydown.enter","input"],["searchInput",""],["class","dropdown-menu global-search-dropdown",4,"ngIf"],[1,"input-group-append"],["class","btn btn-default search-button d-flex align-items-center","aria-label","Search","scrm-button-loading","",3,"click",4,"ngIf"],["class","btn btn-default search-button d-flex align-items-center","aria-label","Close Search","scrm-button-loading","",3,"click",4,"ngIf"],[1,"dropdown-menu","global-search-dropdown"],[1,"dropdown-item-block",3,"ngClass"],[1,"dropdown-item",3,"click"],["image","search",1,"search-icon","sicon"],[1,"dropdown-text","ml-2"],["aria-label","Search","scrm-button-loading","",1,"btn","btn-default","search-button","d-flex","align-items-center",3,"click"],["aria-label","Close Search","scrm-button-loading","",1,"btn","btn-default","search-button","d-flex","align-items-center",3,"click"],["image","cross",1,"search-icon","sicon"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,h$,9,9,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[I.NgClass,I.NgIf,De.\u0275NgNoValidate,De.DefaultValueAccessor,De.NgControlStatus,De.NgControlStatusGroup,De.RequiredValidator,ln,De.FormGroupDirective,De.FormControlName,I.AsyncPipe,I.LowerCasePipe],encapsulation:2})}return i})(),Bn=(()=>{class i{constructor(e){this.modalService=e}showModal(e,n){const r=this.modalService.open(Da);r.componentInstance.textKey=e??"LBL_GENERIC_CONFIRMATION",r.componentInstance.buttons=[{labelKey:"LBL_CANCEL",klass:["btn-secondary"],onClick:o=>o.dismiss()},{labelKey:"LBL_PROCEED",klass:["btn-main"],onClick:o=>{n(),o.close()}}]}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(me.NgbModal))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),$n=(()=>{class i{constructor(e,n,r){this.languageStore=e,this.message=n,this.modalService=r}showSelectModal(e,n=null){const r=this.modalService.open(As,{size:"xl",scrollable:!0});r.componentInstance.module=e,r.result.then(o=>{if(!o||!o.selection||!o.selection.selected)return;const a=this.getSelectedRecord(o);if(a.id)null!==n&&n(a);else{let l=this.languageStore.getFieldLabel("ERROR_NO_RECORD");this.message.addDangerMessage(l)}})}getSelectedRecord(e){let n="";Object.keys(e.selection.selected).some(o=>(n=o,!0));let r=null;return e.records.some(o=>{if(o&&o.id===n)return r=o,!0}),r}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(me.NgbModal))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class fp{constructor(s,e,n,r,o,a,l,c){this.actionManager=s,this.asyncActionService=e,this.message=n,this.confirmation=r,this.language=o,this.selectModalService=a,this.metadata=l,this.appMetadataStore=c,this.defaultActions={detail:[],list:[],edit:[],create:[],massupdate:[]}}runAction(s,e=null){const n=s&&s.params||{},a=s.params&&s.params.selectModal,l=a&&a.module;n.displayConfirmation?this.confirmation.showModal(n.confirmationLabel||"",()=>{l?this.showSelectModal(a.module,s,e):this.callAction(s,e)}):l?this.showSelectModal(a.module,s,e):this.callAction(s,e)}showSelectModal(s,e,n=null){this.selectModalService.showSelectModal(s,r=>{if(r){const{fields:o,formGroup:a,...l}=r;e.params.modalRecord=l}this.callAction(e,n)})}getActionName(s){return`${s.key}`}parseModeActions(s,e,n=null){if(!s)return[];const r={list:[],detail:[],edit:[],create:[],massupdate:[]};s&&s.length&&s.forEach(a=>{!a.modes||!a.modes.length||a.modes.forEach(l=>{!r[l]&&!a.asyncProcess||r[l].push(a)})}),r.detail=r.detail.concat(this.defaultActions.detail??[]),r.list=r.list.concat(this.defaultActions.list??[]),r.edit=r.edit.concat(this.defaultActions.edit??[]),r.create=r.create.concat(this.defaultActions.create??[]),r.massupdate=r.massupdate.concat(this.defaultActions.massupdate??[]);const o=[];return r[e].forEach(a=>{const l=this.actionManager.getHandler(a,e);if(l){const d=this.buildActionData(a,n);if(!this.shouldDisplay(l,d))return;a.status=l.getStatus(d)||""}const u=this.language.getFieldLabel(a.labelKey,n&&n.module||"");o.push({...a,label:u})}),o}shouldDisplay(s,e){return s&&s.shouldDisplay(e)}callAction(s,e=null){s.asyncProcess?this.runAsyncAction(s,e):this.runFrontEndAction(s,e)}runAsyncAction(s,e=null){const n=this.getActionName(s),r=this.getModuleName(e);this.message.removeMessages();const o=this.buildActionInput(s,n,r,e);this.asyncActionService.run(n,o).pipe((0,v.take)(1)).subscribe(a=>{this.afterAsyncAction(n,r,o,a,s,e)})}afterAsyncAction(s,e,n,r,o,a){this.shouldReload(r)&&this.reload(o,r,a),this.reloadMetadata(e,o,r,a)}reloadMetadata(s,e,n,r){const o=[];this.shouldReloadRecentlyViewed(n)&&o.push(this.metadata.typeKeys.recentlyViewed),this.shouldReloadFavorites(n)&&o.push(this.metadata.typeKeys.favorites),o&&o.length&&this.metadata.reloadModuleMetadata(s,o,!1).pipe((0,v.take)(1)).subscribe(),this.shouldReloadGlobalRecentlyViewed(n)&&this.appMetadataStore.load(s,["globalRecentlyViewed"],!1).pipe((0,v.take)(1)).subscribe()}shouldReloadGlobalRecentlyViewed(s){return!(!s.data||!s.data.reloadGlobalRecentlyViewed)}shouldReloadRecentlyViewed(s){return!(!s.data||!s.data.reloadRecentlyViewed)}shouldReloadFavorites(s){return!(!s.data||!s.data.reloadFavorites)}shouldReload(s){return!(!s.data||!s.data.reload)}runFrontEndAction(s,e=null){const n=this.buildActionData(s,e);this.actionManager.run(s,this.getMode(),n)}}let vr=(()=>{class i extends fp{constructor(e,n,r,o,a,l,c,u){super(e,n,r,o,a,l,c,u),this.actionManager=e,this.asyncActionService=n,this.message=r,this.confirmation=o,this.language=a,this.selectModalService=l,this.metadata=c,this.appMetadataStore=u}getActionName(e){return`record-${e.key}`}buildActionInput(e,n,r,o=null){return{action:n,module:r,id:o&&o.record&&o.record.id||"",params:e&&e.params||[]}}static#e=this.\u0275fac=function(n){t.\u0275\u0275invalidFactory()};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();class mS extends S.ActionHandler{checkRecordAccess(s,e=[]){return!0}navigateBack(s,e,n,r,o){let a=s.getReturnModule(e),l=s.getReturnAction(e),c=s.getReturnId(e);n!==c&&(a===r&&"record"===l&&c!==n||!a||!l||s.navigateBack(o,r,e))}}let hS=(()=>{class i extends mS{constructor(){super(),this.key="async-process",this.modes=S.ALL_VIEW_MODES}run(e){}shouldDisplay(e){const n=e?.action?.acl??[];return!n.length||this.checkRecordAccess(e,n)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),mp=(()=>{class i extends Ci{constructor(e){super(),this.async=e,e.modes.forEach(n=>this.actions[n][e.key]=e)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(hS))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),gS=(()=>{class i extends vr{constructor(e,n,r,o,a,l,c,u,d){super(r,o,a,l,n,c,u,d),this.threadStore=e,this.language=n,this.actionManager=r,this.asyncActionService=o,this.message=a,this.confirmation=l,this.selectModalService=c,this.metadata=u,this.appMetadataStore=d,this.defaultActions={detail:[],edit:[],create:[],list:[]},this.collapseButtons=!1}getActions(e){return(0,D.of)(this.threadStore.getListMetadata()).pipe((0,D.combineLatestWith)((0,D.of)("list")),(0,v.map)(([n,r])=>r&&n?this.parseModeActions(n.actions,r,this.threadStore.getViewContext()):[]))}getActionName(e){return`record-thread-list-${e.key}`}buildActionData(e,n){return{threadStore:this.threadStore,action:e}}buildActionInput(e,n,r,o=null){return this.message.removeMessages(),{action:n,module:this.threadStore.module,ids:this.threadStore.getRecordIds(),params:e&&e.params||[]}}getMode(){return"list"}getModuleName(e){return this.threadStore.module}reload(e,n,r){(0,S.isTrue)(n?.data?.reloadThread??!1)&&this.threadStore.reload()}shouldReload(e){return(0,S.isTrue)(e?.data?.reloadThread??!1)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Cc),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(mp),t.\u0275\u0275inject(nn),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Bn),t.\u0275\u0275inject($n),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Fn))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),vS=(()=>{class i{constructor(e,n,r,o,a,l,c,u){this.language=e,this.actionManager=n,this.asyncActionService=r,this.message=o,this.confirmation=a,this.selectModalService=l,this.metadata=c,this.appMetadataStore=u}create(e,n){const r=new gS(e,this.language,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.selectModalService,this.metadata,this.appMetadataStore),o=n?.collapseListActions??null;return null!==o&&(r.collapseButtons=o),r}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(mp),t.\u0275\u0275inject(nn),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Bn),t.\u0275\u0275inject($n),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Fn))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class Ia extends S.ActionHandler{checkRecordAccess(s,e=[]){const r=s.itemStore.recordStore.getBaseRecord().acls??[];return!(!r||!r.length)&&this.checkAccess(s.action??null,r,e)}navigateBack(s,e,n,r,o){let a=s.getReturnModule(e),l=s.getReturnAction(e),c=s.getReturnId(e);n!==c&&(a===r&&"record"===l&&c!==n||!a||!l||s.navigateBack(o,r,e))}}let _S=(()=>{class i extends Ia{constructor(){super(),this.key="async-process",this.modes=S.ALL_VIEW_MODES}run(e){}shouldDisplay(e){const n=e?.action?.acl??[];return!n.length||this.checkRecordAccess(e,n)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),yS=(()=>{class i extends Ia{constructor(e,n){super(),this.modalService=e,this.navigation=n,this.key="cancel",this.modes=["edit","detail"]}run(e){e.itemStore.recordStore.isDirty()?this.showConfirmationModal(e):this.cancel(e)}shouldDisplay(){return!0}cancel(e){e.itemStore.recordStore.resetStaging(),e.itemStore.setMode("detail")}showConfirmationModal(e){const n=this.modalService.open(Da);n.componentInstance.textKey="WARN_UNSAVED_CHANGES",n.componentInstance.buttons=[{labelKey:"LBL_CANCEL",klass:["btn-secondary"],onClick:r=>r.dismiss()},{labelKey:"LBL_PROCEED",klass:["btn-main"],onClick:r=>{this.cancel(e),r.close()}}]}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(me.NgbModal),t.\u0275\u0275inject(In))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),bS=(()=>{class i extends Ia{constructor(){super(),this.key="edit",this.modes=["detail"]}run(e){e.itemStore.setMode("edit")}shouldDisplay(e){return this.checkRecordAccess(e,["edit"])}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),CS=(()=>{class i extends Ia{constructor(e,n){super(),this.message=e,this.navigation=n,this.key="save",this.modes=["edit"]}run(e){e.itemStore.recordStore.validate().pipe((0,v.take)(1)).subscribe(n=>{n?e.itemStore.save().pipe((0,v.take)(1)).subscribe(r=>{e.itemStore.setMode("detail")}):this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}shouldDisplay(e){return!0}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(dt),t.\u0275\u0275inject(In))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),hp=(()=>{class i extends Ci{constructor(e,n,r,o){super(),this.async=e,this.cancel=n,this.edit=r,this.save=o,e.modes.forEach(a=>this.actions[a][e.key]=e),r.modes.forEach(a=>this.actions[a][r.key]=r),o.modes.forEach(a=>this.actions[a][o.key]=o),n.modes.forEach(a=>this.actions[a][n.key]=n)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(_S),t.\u0275\u0275inject(yS),t.\u0275\u0275inject(bS),t.\u0275\u0275inject(CS))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),SS=(()=>{class i extends vr{constructor(e,n,r,o,a,l,c,u,d,p){super(o,a,l,c,r,u,d,p),this.itemStore=e,this.threadStore=n,this.language=r,this.actionManager=o,this.asyncActionService=a,this.message=l,this.confirmation=c,this.selectModalService=u,this.metadata=d,this.appMetadataStore=p,this.defaultActions={detail:[],edit:[],create:[]},this.collapseButtons=!1}getActions(e){return this.itemStore.meta$.pipe((0,D.combineLatestWith)(this.itemStore.mode$),(0,v.map)(([n,r])=>r&&n?this.parseModeActions(n.actions,r,this.itemStore.getViewContext()):[]))}getActionName(e){return`record-thread-item-${e.key}`}buildActionData(e,n){return{itemStore:this.itemStore,threadStore:this.threadStore,action:e}}buildActionInput(e,n,r,o=null){const a=this.itemStore.getBaseRecord();return this.message.removeMessages(),{action:n,module:a.module,id:a.id,params:e&&e.params||[]}}getMode(){return this.itemStore.getMode()}getModuleName(e){return this.itemStore.getModuleName()}reload(e,n,r){const o=n?.data?.reload??!1,a=n?.data?.reloadThread??!1;(0,S.isTrue)(o)&&this.itemStore.load(!1).pipe((0,v.take)(1)).subscribe(),(0,S.isTrue)(a)&&this.threadStore.reload()}shouldReload(e){const n=e?.data?.reload??!1,r=e?.data?.reloadThread??!1;return(0,S.isTrue)(n)||(0,S.isTrue)(r)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(op),t.\u0275\u0275inject(Cc),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(hp),t.\u0275\u0275inject(nn),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Bn),t.\u0275\u0275inject($n),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Fn))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),MS=(()=>{class i{constructor(e,n,r,o,a,l,c,u){this.language=e,this.actionManager=n,this.asyncActionService=r,this.message=o,this.confirmation=a,this.selectModalService=l,this.metadata=c,this.appMetadataStore=u}create(e,n,r=null){const o=new SS(e,n,this.language,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.selectModalService,this.metadata,this.appMetadataStore),a=r?.metadata?.collapseActions??null;return null!==a&&(o.collapseButtons=a),o}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(hp),t.\u0275\u0275inject(nn),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Bn),t.\u0275\u0275inject($n),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Fn))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function g$(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"label",3),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(3).ngIf,n=t.\u0275\u0275nextContext(4).$implicit,r=t.\u0275\u0275nextContext(4);t.\u0275\u0275property("ngClass",r.getLabelClass(n)),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.label," ")}}function v$(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-label",9),2&i){const e=t.\u0275\u0275nextContext(3).ngIf,n=t.\u0275\u0275nextContext(4).$implicit,r=t.\u0275\u0275nextContext(4);t.\u0275\u0275property("labelKey",e.labelKey)("ngClass",r.getLabelClass(n))}}function _$(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-dynamic-label",10),2&i){const e=t.\u0275\u0275nextContext(3).ngIf,n=t.\u0275\u0275nextContext(8);t.\u0275\u0275property("labelKey",e.dynamicLabelKey)("fields",n.record.fields)}}function y$(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div"),t.\u0275\u0275template(2,g$,2,2,"label",6),t.\u0275\u0275template(3,v$,1,2,"scrm-label",7),t.\u0275\u0275template(4,_$,1,2,"scrm-dynamic-label",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2).ngIf,n=t.\u0275\u0275nextContext(4).$implicit,r=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275classProp("pr-3","inline"===r.getLabelDisplay(n,r.mode)&&"none"!==r.getDisplay(n)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.label),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.label&&e.labelKey),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.dynamicLabelKey)}}function b$(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div"),t.\u0275\u0275element(2,"scrm-field",11),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2).ngIf,n=t.\u0275\u0275nextContext(4).$implicit,r=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275classProp("flex-grow-1","inline"===r.getLabelDisplay(n,r.mode)),t.\u0275\u0275advance(1),t.\u0275\u0275property("field",e)("klass",r.getFieldClass(n))("mode",r.mode)("record",r.record)("type",e.type)}}function C$(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,y$,5,5,"ng-container",1),t.\u0275\u0275template(2,b$,3,7,"ng-container",1),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(5).$implicit,n=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","none"!==n.getLabelDisplay(e,n.mode)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","none"!==n.getDisplay(e))}}function S$(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,C$,3,2,"ng-container",1),t.\u0275\u0275elementContainerEnd()),2&i){const e=s.ngIf,n=t.\u0275\u0275nextContext(4).$implicit,r=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.shouldDisplay(n,e,r.mode))}}function M$(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,S$,2,1,"ng-container",1),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(3).$implicit,n=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.getField(n.record,e.field))}}function w$(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-action-group-menu",12),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(7);let n,r;t.\u0275\u0275advance(1),t.\u0275\u0275property("buttonClass",null!==(n=e.config.buttonClass)&&void 0!==n?n:"")("buttonGroupClass",null!==(r=e.config.buttonGroupClass)&&void 0!==r?r:"")("config",e.config.actions)}}function D$(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",5),t.\u0275\u0275template(2,M$,2,1,"ng-container",1),t.\u0275\u0275template(3,w$,2,3,"ng-container",1),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2).$implicit,n=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275classProp("align-items-center","inline"===n.getLabelDisplay(e,n.mode))("flex-column","top"===n.getLabelDisplay(e,n.mode))("flex-row","inline"===n.getLabelDisplay(e,n.mode))("justify-content-end",!e.field),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.record),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.actionSlot&&n.config.actions)}}function x$(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",3),t.\u0275\u0275template(1,D$,4,10,"ng-container",1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(4);let r;t.\u0275\u0275classMapInterpolate1("record-flexbox-col ",n.getClass(e),""),t.\u0275\u0275property("ngClass",null!==(r=n.config.colClass)&&void 0!==r?r:null),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","hidden"!==e.display&&n.shouldColDisplayInMode(e,n.mode))}}function E$(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,x$,2,5,"div",4),t.\u0275\u0275elementContainerEnd()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","hidden"!==e.display&&n.shouldColDisplayInMode(e,n.mode))}}function I$(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",3),t.\u0275\u0275template(2,E$,2,1,"ng-container",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(3);let r;t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate3("d-flex record-flexbox-row ",n.getJustify(e.justify)," ",n.getAlign(e.align)," ",n.getLayoutRowClass(e),""),t.\u0275\u0275property("ngClass",null!==(r=n.config.rowClass)&&void 0!==r?r:null),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.cols)}}function F$(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,I$,3,7,"ng-container",2),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.layout.rows)}}function A$(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,F$,2,1,"ng-container",1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275classMapInterpolate2("d-flex ",(e.config&&e.config.flexDirection?e.config.flexDirection:"flex-column")||""," ",e.config&&e.config.klass||"",""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.layout&&e.layout.rows)}}let wS=(()=>{class i{constructor(){this.mode="detail",this.maxColumns=4,this.sizeMap={handset:1,tablet:2,web:3,wide:4},this.subs=[]}ngOnInit(){if(!this.config)return;const e=this.config;e.record$&&this.subs.push(e.record$.subscribe(n=>{this.record=n??null})),e.mode$&&this.subs.push(e.mode$.subscribe(n=>{this.mode=n??"detail"})),e.layout$&&this.subs.push(e.layout$.subscribe(n=>{this.layout=n??null}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getRowClass(){return this.config.rowClass}getColClass(){return this.config.colClass}getSizeClass(e){return{regular:"text-regular",medium:"text-medium",large:"text-large","x-large":"text-x-large","xx-large":"text-xx-large",huge:"text-huge"}[e]||"text-regular"}getFontWeight(e){let n="font-weight-normal";return e&&(0,S.isTrue)(e)&&(n="font-weight-bolder"),n}getColor(e){return{yellow:"text-yellow",blue:"text-blue",green:"text-green",red:"text-red",purple:"text-purple",dark:"text-dark",grey:"text-grey"}[e]||""}getJustify(e){return{start:"justify-content-start",end:"justify-content-end",center:"justify-content-center",between:"justify-content-between",around:"justify-content-around"}[e]||""}getAlign(e){return{start:"align-items-start",end:"align-items-end",center:"align-items-center",baseline:"align-items-baseline",stretch:"align-items-stretch"}[e]||""}getLayoutRowClass(e){return e&&e.class||""}getClass(e){if(!e)return"";const n=[];return n.push(e.class||""),e.size&&n.push(this.getSizeClass(e.size)||""),e.bold&&n.push(this.getFontWeight(e.bold)||""),e.color&&n.push(this.getColor(e.color)||""),n.join(" ")}getLabelDisplay(e,n){return this.shouldLabelDisplayInMode(e,n)?e.labelDisplay||this.config&&this.config.labelDisplay||"inline":"none"}getField(e,n){return n&&n.name&&e&&e.fields?e.fields[n.name]??null:null}getFieldClass(e){let n=this.config.inputClass||{};return e.inputClass&&(n[e.inputClass]=!0),n}getLabelClass(e){let n=this.config.labelClass||{};return e.labelClass&&(n[e.labelClass]=!0),n}shouldDisplay(e,n,r){if(!this.shouldFieldDisplayInMode(e,r))return!1;if(!e.hideIfEmpty)return!0;let a=!1;return a=a||!!n.value,a=a||!(!n.valueList||!n.valueList.length),a=a||!(!n.valueObject||!Object.keys(n.valueObject).length),a}shouldColDisplayInMode(e,n){return this.shouldFieldDisplayInMode(e,n)||this.shouldLabelDisplayInMode(e,n)}shouldFieldDisplayInMode(e,n){const r=e?.modes??null;return!(r&&r.length&&!r.includes(n))}shouldLabelDisplayInMode(e,n){const r=e?.labelModes??null;return!(r&&r.length&&!r.includes(n))}getDisplay(e){return e.display||""}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-flexbox"]],inputs:{config:"config"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngClass"],[3,"ngClass","class",4,"ngIf"],[1,"d-flex"],[3,"ngClass",4,"ngIf"],[3,"labelKey","ngClass",4,"ngIf"],[3,"labelKey","fields",4,"ngIf"],[3,"labelKey","ngClass"],[3,"labelKey","fields"],[3,"field","klass","mode","record","type"],[3,"buttonClass","buttonGroupClass","config"]],template:function(n,r){1&n&&t.\u0275\u0275template(0,A$,2,5,"div",0),2&n&&t.\u0275\u0275property("ngIf",r.config)},dependencies:[I.NgClass,I.NgForOf,I.NgIf,hr,qt,Ar,So],encapsulation:2})}return i})();const T$=["body"];function O$(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-record-flexbox",6),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.buildConfig(e.config.metadata.headerLayout))}}function L$(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-record-flexbox",6),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.buildConfig(e.config.metadata.bodyLayout))}}function N$(i,s){1&i&&t.\u0275\u0275element(0,"div",7)}function R$(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",8),t.\u0275\u0275element(1,"scrm-button",6),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.getCollapseButton())}}function B$(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div")(1,"div",1),t.\u0275\u0275template(2,O$,2,1,"ng-container",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",null,3),t.\u0275\u0275template(5,L$,2,1,"ng-container",2),t.\u0275\u0275template(6,N$,1,0,"div",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(7,R$,2,1,"div",5),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275classMapInterpolate2("d-flex flex-column record-thread-item ",e.config&&e.config.klass||""," ",e.dynamicClass,""),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.config.metadata&&e.config.metadata.headerLayout),t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate1("record-thread-item-body flex-grow-1 ",e.getBodyClass(),""),t.\u0275\u0275classProp("collapsed",e.collapsible&&e.collapsed)("expanded",e.collapsible&&!e.collapsed),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.config.metadata&&e.config.metadata.bodyLayout),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.collapsible&&e.collapsed),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.collapsible)}}let DS=(()=>{class i{constructor(e){this.actionAdapterFactory=e,this.collapsed=!1,this.collapsible=!1,this.collapseLimit=300,this.dynamicClass="",this.subs=[],this.dynamicClassesMap={},this.dynamicClassFieldSubs=[]}ngOnInit(){this.actionAdapter=this.actionAdapterFactory.create(this.config.store,this.config.threadStore,this.config),this.initDynamicClass()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe()),this.dynamicClassFieldSubs.forEach(e=>e.unsubscribe())}ngAfterViewInit(){!this.config||!this.config.collapsible||setTimeout(()=>{(this.bodyEl.nativeElement.offsetHeight||this.bodyEl.nativeElement.height)>(this.config.collapseLimit||this.collapseLimit)&&(this.collapsible=!0,this.collapsed=!0)},2e3)}buildConfig(e){return{record$:this.config.store.stagingRecord$,mode$:this.config.store.mode$,layout$:(0,D.of)(e).pipe((0,v.shareReplay)(1)),inputClass:{...this.config.inputClass||{},"form-control form-control-sm":!0},buttonClass:this?.config?.buttonClass??"",buttonGroupClass:this?.config?.buttonGroupClass??"",labelClass:this?.config?.labelClass??{},rowClass:this?.config?.rowClass??{},colClass:this?.config?.colClass??{},actions:this?.actionAdapter,klass:this?.config?.containerClass,flexDirection:this?.config?.flexDirection||""}}getCollapseButton(){return{klass:"collapse-button btn btn-link btn-sm",labelKey:this.collapsed?"LBL_SHOW_MORE":"LBL_SHOW_LESS",onClick:()=>{this.collapsed=!this.collapsed,this.collapsed?this.config&&this.config.collapsed():this.config&&this.config.expanded()}}}initDynamicClass(){!this.config||!this.config.dynamicClass||!this.config.dynamicClass.length||this.subs.push(this.config.store.stagingRecord$.subscribe(e=>{const n={};this.dynamicClassFieldSubs.forEach(r=>r.unsubscribe()),e&&e.fields&&Object.keys(e.fields).length&&(this.config.dynamicClass.forEach(r=>{if(!r||!e.fields[r]&&!e.attributes[r])return;e.fields[r]&&this.dynamicClassFieldSubs.push(e.fields[r].valueChanges$.pipe((0,v.debounceTime)(100)).subscribe(()=>{const a=this.getDynamicClasses(r,e)??"";""!==a&&(this.dynamicClassesMap[r]=a,this.calculateDynamicClasses())}));const o=this.getDynamicClasses(r,e)??"";""!==o&&(n[r]=o)}),this.dynamicClassesMap=n,this.calculateDynamicClasses())}))}calculateDynamicClasses(){const e=[];Object.keys(this.dynamicClassesMap??{}).forEach(n=>{const r=this.dynamicClassesMap[n]??"";""!==r&&e.push(r)}),this.dynamicClass=e.join(" ")}getDynamicClasses(e,n){const r=e+"-";let o=[];return n.fields[e]?(n.fields[e].value&&o.push(n.fields[e].value),n.fields[e].valueList&&n.fields[e].valueList.length&&(o=o.concat(n.fields[e].valueList))):Array.isArray(n.attributes[e])?o=o.concat(n.attributes[e]):"object"!=typeof n.attributes[e]&&o.push(n.attributes[e]),o&&o.length?r+o.join(" "+r):""}getBodyClass(){return this.config?.metadata?.bodyLayout?.class??""}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(MS))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-thread-item"]],viewQuery:function(n,r){if(1&n&&t.\u0275\u0275viewQuery(T$,5),2&n){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.bodyEl=o.first)}},inputs:{config:"config"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"record-thread-item-header","flex-grow-1"],[4,"ngIf"],["body",""],["class","fadeout",4,"ngIf"],["class","record-thread-item-collapse d-flex justify-content-center flex-grow-1",4,"ngIf"],[3,"config"],[1,"fadeout"],[1,"record-thread-item-collapse","d-flex","justify-content-center","flex-grow-1"]],template:function(n,r){1&n&&t.\u0275\u0275template(0,B$,8,15,"div",0),2&n&&t.\u0275\u0275property("ngIf",r.config)},dependencies:[I.NgIf,Un,wS],encapsulation:2})}return i})();const k$=["list"];function j$(i,s){1&i&&(t.\u0275\u0275elementStart(0,"div",4),t.\u0275\u0275element(1,"scrm-label",5),t.\u0275\u0275elementEnd())}function P$(i,s){1&i&&(t.\u0275\u0275elementStart(0,"div",6),t.\u0275\u0275element(1,"scrm-loading-spinner",7),t.\u0275\u0275elementEnd()),2&i&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("overlay",!0))}function V$(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",13),t.\u0275\u0275element(1,"scrm-button",14),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.getLoadMoreButton())}}function U$(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",null,15),t.\u0275\u0275element(2,"scrm-record-thread-item",14),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=t.\u0275\u0275reference(1),r=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("config",r.buildItem(e,n))}}function $$(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",16),t.\u0275\u0275element(1,"scrm-button",14),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.getLoadMoreButton())}}function z$(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-action-group-menu",17),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);let n,r;t.\u0275\u0275advance(1),t.\u0275\u0275property("buttonClass",null!==(n=e.config.listActionsButtonClass)&&void 0!==n?n:"")("buttonGroupClass",null!==(r=e.config.listActionsButtonGroupClass)&&void 0!==r?r:"")("config",e.listActionAdapter)}}function H$(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",8,9),t.\u0275\u0275template(2,V$,2,1,"div",10),t.\u0275\u0275template(3,U$,3,1,"div",11),t.\u0275\u0275elementStart(4,"div"),t.\u0275\u0275template(5,$$,2,1,"div",12),t.\u0275\u0275template(6,z$,2,3,"ng-container",3),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext();let n;t.\u0275\u0275property("ngStyle",e.getMaxHeight()),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf","top"===e.loadMorePosition&&!e.allLoaded()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.records),t.\u0275\u0275advance(1),t.\u0275\u0275classMap(null!==(n=e.config.listActionsClass)&&void 0!==n?n:""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","bottom"===e.loadMorePosition&&!e.allLoaded()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.config.listActions)}}function W$(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div")(1,"h6",18),t.\u0275\u0275element(2,"scrm-label",19),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("labelKey",e.config.noDataLabel||"LBL_NO_DATA")}}function K$(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",21)(1,"div",22),t.\u0275\u0275element(2,"scrm-record-thread-item",14),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",23),t.\u0275\u0275element(4,"scrm-button",14),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("config",e.buildCreateItem()),t.\u0275\u0275advance(2),t.\u0275\u0275property("config",e.getCreateButton())}}function G$(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,K$,5,2,"div",20),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.loading)}}let gp=(()=>{class i{constructor(e,n,r,o,a){this.storeFactory=e,this.itemFactory=n,this.recordManager=r,this.message=o,this.actionAdapterFactory=a,this.loading=!1,this.maxHeight=400,this.direction="asc",this.loadMorePosition="top",this.shouldResetScroll=!1,this.subs=[]}ngOnInit(){if((0,S.isVoid)(this.config.maxListHeight)||(this.maxHeight=this.config.maxListHeight),!this.config.module)return;this.config.store?this.store=this.config.store:(this.store=this.storeFactory.create(),this.store.setItemMetadata(this.config.itemConfig.metadata),this.store.setListMetadata({actions:this.config.listActions}),this.store.init(this.config.module,!1,this?.config?.pageSize??null)),this.direction=this.config.direction||this.direction,this.setLoadMorePosition(),this.initCreate(),this.initDataSubscription(),this.config.filters$?this.subs.push(this.config.filters$.subscribe(n=>{this.store.setFilters(n).pipe((0,v.take)(1)).subscribe(()=>{this.config.onRefresh&&this.config.onRefresh()})})):this.store.load(!1).subscribe(()=>{this.config.onRefresh&&this.config.onRefresh()});const e=this?.config?.autoRefreshFrequency??0;e&&this.store&&this.subs.push(this.store.initAutoRefresh(e,this.config.autoRefreshDeviationMin??-15,this.config.autoRefreshDeviationMax??15,this.config.onRefresh).subscribe()),this.initLoading(),this.listActionAdapter=this.actionAdapterFactory.create(this.store,this.config)}setLoadMorePosition(){this.loadMorePosition="asc"===this.direction?"top":"bottom",this.config.loadMorePosition&&(this.loadMorePosition=this.config.loadMorePosition)}ngAfterViewInit(){this.shouldResetScroll=!0,this.resetScroll()}ngOnDestroy(){(this?.config?.store??null)||this.store.clear(),this.store=null,this.subs.forEach(e=>e.unsubscribe())}buildItem(e,n){let r="record-thread-list-item";return this.config.itemConfig.klass&&(r+=" "+this.config.itemConfig.klass),{...this.config.itemConfig,store:e,threadStore:this.store,klass:r,containerClass:this.config.itemConfig.containerClass,flexDirection:this.config?.itemConfig?.flexDirection??"",expanded:()=>{this.scrollToItem(n)},collapsed:()=>{this.scrollToItem(n)}}}getLoadMoreButton(){return{klass:"load-more-button btn btn-link btn-sm",labelKey:"LBL_LOAD_MORE",onClick:()=>{this?.config?.onLoadMore&&this.store.getRecordList().records$.pipe((0,v.take)(1),(0,v.tap)(()=>this.config.onLoadMore())).subscribe(),this.store.loadMore()}}}buildCreateItem(){return{...this.config.createConfig,store:this.createStore,rowClass:{"pt-1":!0},klass:"record-thread-create-item"}}getCreateButton(){return{klass:"create-thread-item-button btn btn-main btn-sm",labelKey:"LBL_SUBMIT_BUTTON_LABEL",onClick:()=>{this.createStore.validate().pipe((0,v.take)(1)).subscribe(e=>{e?this.createStore.save().pipe((0,v.take)(1)).subscribe(()=>{this.store.reload(),this.initRecord(),this.shouldResetScroll=!0,this.message.addSuccessMessageByKey("LBL_ACTION_SUCCESS")}):this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}}}allLoaded(){return!(!this.store||!this.store.allLoaded())}getMaxHeight(){return 0==this.maxHeight?null:{"max-height.px":this.maxHeight,"overflow-y":"auto"}}initRecord(){const e=this.recordManager.buildEmptyRecord(this.config.module);this.addPresetFields(e);let n="edit";this.config.createConfig&&this.config.createConfig.initialMode&&(n=this.config.createConfig.initialMode),this.createStore.initRecord(e,n,!1,!0)}scrollToEnd(){!this.listContainer||!this.listContainer.nativeElement||this.scrollTo(this.listContainer.nativeElement.scrollHeight)}scrollToTop(){this.scrollTo(0)}scrollTo(e){try{this.listContainer.nativeElement.scrollTop=e}catch{}}scrollToItem(e){e&&this.listContainer&&this.listContainer.nativeElement&&this.scrollTo(e.offsetTop-this.listContainer.nativeElement.offsetTop)}resetScroll(){!1!==this.shouldResetScroll&&("asc"===this.direction?this.scrollToEnd():this.scrollToTop(),this.shouldResetScroll=!1)}scheduleScrollReset(){setTimeout(()=>{this.resetScroll()},500)}initCreate(){this.config.create&&(this.createStore=this.itemFactory.create(),this.createStore.setMetadata(this.config.createConfig.metadata),this.initRecord(),this.initPresetFieldsMapping())}initPresetFieldsMapping(){this.config.presetFields$&&this.subs.push(this.config.presetFields$.subscribe(e=>{if(!e||!Object.keys(e).length)return;this.presetFieldValues=e;const n=this.createStore.recordStore.getBaseRecord();this.addPresetFields(n),this.createStore.recordStore.setRecord(n)}))}addPresetFields(e){this.presetFieldValues&&(e.attributes={...this.presetFieldValues,...e.attributes||{}})}initDataSubscription(){this.subs.push(this.store.stores$.subscribe(e=>{if((!this.records||!this.records.length)&&(this.shouldResetScroll=!0),"asc"===this.direction)return this.records=e.reverse(),void this.scheduleScrollReset();this.records=e,this.scheduleScrollReset()}))}initLoading(){let e;e=this.store.$loading.pipe(this.createStore&&this.createStore.loading$?(0,D.combineLatestWith)(this.createStore.loading$):(0,v.map)(n=>[n])),this.subs.push(e.subscribe(n=>{if(!n||!n.length)return void(this.loading=!1);let r=!1;n.forEach(o=>{r=r||o}),this.loading=r}))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Sc),t.\u0275\u0275directiveInject(bc),t.\u0275\u0275directiveInject(Si),t.\u0275\u0275directiveInject(dt),t.\u0275\u0275directiveInject(vS))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-thread"]],viewQuery:function(n,r){if(1&n&&t.\u0275\u0275viewQuery(k$,5),2&n){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.listContainer=o.first)}},inputs:{config:"config"},decls:6,vars:8,consts:[["class","d-flex record-thread-no-data justify-content-center h3",4,"ngIf"],["class","d-flex record-thread-loading justify-content-center",4,"ngIf"],["class","record-thread-list scrollbar-thick",3,"ngStyle",4,"ngIf"],[4,"ngIf"],[1,"d-flex","record-thread-no-data","justify-content-center","h3"],["labelKey","LBL_NO_DATA"],[1,"d-flex","record-thread-loading","justify-content-center"],[3,"overlay"],[1,"record-thread-list","scrollbar-thick",3,"ngStyle"],["list",""],["class","record-thread-load-more d-flex justify-content-center flex-grow-1",4,"ngIf"],[4,"ngFor","ngForOf"],["class","record-thread-load-more d-flex justify-content-center",4,"ngIf"],[1,"record-thread-load-more","d-flex","justify-content-center","flex-grow-1"],[3,"config"],["item",""],[1,"record-thread-load-more","d-flex","justify-content-center"],[3,"buttonClass","buttonGroupClass","config"],[1,"pt-3","pl-3","pr-3","pb-2"],[3,"labelKey"],["class","d-flex flex-column record-thread-create-container",4,"ngIf"],[1,"d-flex","flex-column","record-thread-create-container"],[1,"flex-grow-1"],[1,"flex-grow-1","d-flex","justify-content-start","pt-1","record-thread-create-buttons"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,j$,2,0,"div",0),t.\u0275\u0275template(2,P$,2,1,"div",1),t.\u0275\u0275template(3,H$,7,7,"div",2),t.\u0275\u0275template(4,W$,3,1,"div",3),t.\u0275\u0275template(5,G$,2,1,"ng-container",3),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275classMapInterpolate1("record-thread ",r.config&&r.config.klass||"",""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.loading&&!r.records&&!r.records.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.records&&r.records.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",(!r.records||!r.records.length)&&!r.loading&&r.config.showNoDataMessage),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.config.create&&r.createStore))},dependencies:[I.NgForOf,I.NgIf,I.NgStyle,Un,qt,DS,Nr,Ar],encapsulation:2})}return i})();function Z$(i,s){1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",2),t.\u0275\u0275element(2,"scrm-label",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd())}function q$(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-record-thread",4),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.recordThreadConfig)}}let xS=(()=>{class i{constructor(e,n,r,o,a,l){this.language=e,this.systemConfig=n,this.storeFactory=r,this.message=o,this.notificationService=a,this.notificationStore=l}ngOnInit(){this.options=this.notificationService.getOptions(),this.recordThreadConfig=this.getConfig()}getConfig(){const e={filters$:(0,D.of)({orderBy:this?.options?.filters?.orderBy??"date_entered",sortOrder:this?.options?.filters?.sortOrder??"asc",preset:{type:"alerts"}}),module:this.options.module,klass:this.options.class??"",maxListHeight:this.options.maxListHeight??350,direction:this.options.direction||"asc",autoRefreshFrequency:this.options.autoRefreshFrequency||0,autoRefreshDeviationMin:this.options.autoRefreshDeviationMin??0,autoRefreshDeviationMax:this.options.autoRefreshDeviationMax??0,onRefresh:()=>{this.notificationService.onRefresh(this.store,this.notificationStore)},onLoadMore:()=>{this.notificationService.onLoadMore(this.notificationStore)},loadMorePosition:this.options?.loadMorePosition??"",create:!1,listActionsClass:this.options?.listActionsClass??"",listActionsButtonClass:this.options?.listActionsButtonClass??"",listActionsButtonGroupClass:this.options?.listActionsButtonGroupClass??"",pageSize:this.options?.pageSize??"",showNoDataMessage:this.options?.showNoDataMessage,noDataLabel:this.options?.noDataLabel};return this.notificationService.setupListActions(e,this.options),this.notificationService.setupItemConfig(e,this.options),e.store=this.notificationStore.getNotificationStore(),this.store=this.notificationStore.getNotificationStore(),e}setupItemMetadata(e,n){n&&n.header&&(e.headerLayout=(0,S.deepClone)(n.header)),n&&n.body&&(e.bodyLayout=(0,S.deepClone)(n.body)),n&&n.actions&&(e.actions=(0,S.deepClone)(n.actions))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(ht),t.\u0275\u0275directiveInject(Sc),t.\u0275\u0275directiveInject(dt),t.\u0275\u0275directiveInject(sp),t.\u0275\u0275directiveInject(Rs))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-notifications"]],decls:3,vars:2,consts:[["widget-body","",1,"notifications"],[4,"ngIf"],[1,"p-3","widget-message"],["labelKey","LBL_BAD_CONFIG"],[3,"config"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275template(1,Z$,3,0,"ng-container",1),t.\u0275\u0275template(2,q$,2,1,"ng-container",1),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.options),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.options))},dependencies:[I.NgIf,qt,gp],encapsulation:2})}return i})();function Q$(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"li",4)(1,"a",5),t.\u0275\u0275element(2,"scrm-image",6),t.\u0275\u0275elementStart(3,"div",7)(4,"span",8),t.\u0275\u0275element(5,"scrm-label",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"span",10),t.\u0275\u0275text(7),t.\u0275\u0275elementEnd()()()()),2&i){const e=s.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("routerLink",null==e.attributes?null:e.attributes.route),t.\u0275\u0275advance(1),t.\u0275\u0275property("image",null==e||null==e.attributes?null:e.attributes.module_name),t.\u0275\u0275advance(3),t.\u0275\u0275property("labelKey",null==e||null==e.attributes?null:e.attributes.module_name),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e||null==e.attributes?null:e.attributes.item_summary)}}function J$(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"ul",2),t.\u0275\u0275template(2,Q$,8,4,"li",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.itemWithRoutes())}}function Y$(i,s){1&i&&(t.\u0275\u0275elementStart(0,"h6",11),t.\u0275\u0275element(1,"scrm-label",12),t.\u0275\u0275elementEnd())}let vp=(()=>{class i{set menuItems(e){this._menuItems.set(e)}constructor(e,n){this.nameMapper=e,this.navigation=n,this._menuItems=(0,t.signal)([]),this.itemWithRoutes=(0,t.computed)(()=>this._menuItems().map(r=>r.attributes?.route?r:{...r,attributes:{...r.attributes,route:this.buildRoute(r)}}))}buildRoute(e){const r=this.nameMapper.toFrontend(e.attributes.module_name??"")??"";return this.navigation.getRecordRouterLink(r,e.attributes.item_id??"")}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(En),t.\u0275\u0275directiveInject(In))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-recently-viewed"]],inputs:{menuItems:"menuItems"},standalone:!0,features:[t.\u0275\u0275StandaloneFeature],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noItems",""],[1,"p-0","mb-0"],["class","recently-viewed-header d-flex",4,"ngFor","ngForOf"],[1,"recently-viewed-header","d-flex"],[1,"new-list-item","d-flex",3,"routerLink"],[1,"action-btn-icon","mr-3",3,"image"],[1,"d-flex","flex-column"],[1,"text-title","text-uppercase"],["listKey","moduleList",3,"labelKey"],[1,"text-subtitle"],[1,"d-flex","justify-content-center","pt-3","pb-2"],["labelKey","LBL_LAST_VIEWED_NO_RESULT"]],template:function(n,r){if(1&n&&(t.\u0275\u0275template(0,J$,3,1,"ng-container",0),t.\u0275\u0275template(1,Y$,2,0,"ng-template",null,1,t.\u0275\u0275templateRefExtractor)),2&n){const o=t.\u0275\u0275reference(2);t.\u0275\u0275property("ngIf",r.itemWithRoutes()&&r.itemWithRoutes().length)("ngIfElse",o)}},dependencies:[I.CommonModule,I.NgForOf,I.NgIf,sn,ln,Ot.RouterLink,Vt,qt],encapsulation:2,changeDetection:0})}return i})();function X$(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-image",3),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("image",e.icon)}}function ez(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"a",1),t.\u0275\u0275listener("click",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.config.onClick(r))})("touchstart",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.config.onTouchStart(r))}),t.\u0275\u0275template(2,X$,1,1,"scrm-image",2),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",e.class),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.icon),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.link.label," ")}}function tz(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-image",3),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275propertyInterpolate("image",e.icon)}}function nz(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"a",7),t.\u0275\u0275template(1,tz,1,1,"scrm-image",2),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngClass",e.class)("queryParams",e.link.params)("routerLink",e.link.route),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.icon),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.link.label," ")}}function iz(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-image",3),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275propertyInterpolate("image",e.icon)}}function rz(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"a",8),t.\u0275\u0275template(1,iz,1,1,"scrm-image",2),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("href",e.link.url,t.\u0275\u0275sanitizeUrl)("ngClass",e.class),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.icon),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.link.label," ")}}function oz(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-image",3),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275propertyInterpolate("image",e.icon)}}function sz(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"a",9),t.\u0275\u0275template(1,oz,1,1,"scrm-image",2),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngClass",e.class),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.icon),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.link.label," ")}}function az(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,nz,3,5,"a",4),t.\u0275\u0275template(2,rz,3,4,"a",5),t.\u0275\u0275template(3,sz,3,3,"a",6),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.link.route),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.link.route&&e.link.url),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.link.route&&!e.link.url)}}function lz(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-image",3),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("image",e.icon)}}function cz(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"a",10),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.handleProcess(r.link.process))}),t.\u0275\u0275template(2,lz,1,1,"scrm-image",2),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",e.class),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.icon),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.link.label," ")}}let ES=(()=>{class i{constructor(e,n){this.asyncActionService=e,this.appState=n}handleProcess(e){if(!e)return;const n=e,r={action:n,module:this.appState.getModule()};this.asyncActionService.run(n,r).pipe((0,v.take)(1)).subscribe()}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(nn),t.\u0275\u0275directiveInject(Ht))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-menu-item-link"]],inputs:{link:"link",icon:"icon",class:"class",disableRoute:"disableRoute",config:"config"},decls:3,vars:3,consts:[[4,"ngIf"],[3,"ngClass","click","touchstart"],[3,"image",4,"ngIf"],[3,"image"],[3,"ngClass","queryParams","routerLink",4,"ngIf"],[3,"href","ngClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"ngClass","queryParams","routerLink"],[3,"href","ngClass"],[3,"ngClass"],[3,"ngClass","click"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,ez,4,3,"ng-container",0),t.\u0275\u0275template(1,az,4,3,"ng-container",0),t.\u0275\u0275template(2,cz,4,3,"ng-container",0)),2&n&&(t.\u0275\u0275property("ngIf",!r.link.process&&(null==r.config?null:r.config.onClick)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(r.link.process||null!=r.config&&r.config.onClick)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.link.process))},dependencies:[I.NgClass,I.NgIf,Ot.RouterLink,ln],encapsulation:2})}return i})(),IS=(()=>{class i extends S.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",ES)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const uz=function(i,s,e,n,r){return{link:i,icon:s,class:e,disableRoute:n,config:r}};function dz(i,s){if(1&i&&t.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",t.\u0275\u0275pureFunction5(2,uz,e.link,e.icon,e.class,e.disableRoute,e.config))}}let js=(()=>{class i{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(IS))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-menu-item-link"]],inputs:{link:"link",icon:"icon",class:"class",disableRoute:"disableRoute",config:"config"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(n,r){1&n&&t.\u0275\u0275template(0,dz,1,8,"ndc-dynamic",0),2&n&&t.\u0275\u0275property("ngIf",r.getType)},dependencies:[I.NgIf,Gt,$t],encapsulation:2})}return i})();const pz=function(i,s,e){return{label:i,url:s,route:e}};function fz(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"li",7),t.\u0275\u0275listener("click",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.onItemClick(r))})("touchstart",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.onItemTouchStart(r))}),t.\u0275\u0275element(1,"scrm-menu-item-link",8),t.\u0275\u0275elementEnd()}if(2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275classMap("submenu-nav-link nav-link action-link"),t.\u0275\u0275property("link",t.\u0275\u0275pureFunction3(3,pz,e.attributes.item_summary,n.buildRoute(e),n.buildRoute(e)))}}function mz(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"li",1)(2,"a",2),t.\u0275\u0275listener("touchstart",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.onTouchStart(r))})("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.toggleDropdown())}),t.\u0275\u0275element(3,"scrm-image",3)(4,"scrm-label",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"ul",5),t.\u0275\u0275template(6,fz,2,7,"li",6),t.\u0275\u0275pipe(7,"slice"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementContainerEnd()}if(2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(5),t.\u0275\u0275classProp("active",e.showDropdown()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind3(7,3,e.records,0,e.maxDisplayed))}}let FS=(()=>{class i{constructor(e,n,r,o){this.navigation=e,this.nameMapper=n,this.configs=r,this.metadata=o,this.maxDisplayed=5,this.subs=[],this.showDropdown=(0,t.signal)(!1),this.clickType="click"}ngOnInit(){const e=this.configs.getConfigValue("ui")??{};this.maxDisplayed=parseInt(e.navigation_max_module_recently_viewed)??5,this.initMetadata$()}ngOnDestroy(){this.clear()}ngOnChanges(e){null!==(e?.module??null)&&(e?.module?.previousValue??"")!==(e?.module?.currentValue??"")&&(this.clear(),this.initMetadata$())}buildRoute(e){const r=this.nameMapper.toFrontend(e.attributes.module_name??"")??"";return this.navigation.getRecordRouterLink(r,e.attributes.item_id??"")}initMetadata$(){const e=this.metadata.allModuleMetadata$.pipe((0,v.map)(n=>n[this.module]??null));this.subs.push(e.subscribe(n=>{this.records=n?.recentlyViewed??null})),this?.config?.showDropdown$&&this.subs.push(this.config.showDropdown$.subscribe(n=>{this.showDropdown.set(n)}))}clear(){this.records=null,this.subs.forEach(e=>e.unsubscribe())}toggleDropdown(){if("touch"===this.clickType)return this.showDropdown.set(!this.showDropdown()),this.clickType="click",void this?.config?.onToggleDropdown(this.showDropdown())}onTouchStart(e){this.clickType="touch"}onItemClick(e){this.toggleDropdown(),this?.config?.onItemClick(e)}onItemTouchStart(e){this.onTouchStart(e),this?.config?.onItemTouchStart(e)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(In),t.\u0275\u0275directiveInject(En),t.\u0275\u0275directiveInject(ht),t.\u0275\u0275directiveInject(bt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-sub-menu-recently-viewed"]],inputs:{module:"module",config:"config"},features:[t.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],[1,"nav-item","dropdown-submenu","submenu","submenu-extra"],[1,"sub-nav-link","nav-link","action-link","dropdown-item","dropdown-toggle","pr-4",3,"touchstart","click"],["image","clock"],["labelKey","LBL_LAST_VIEWED"],[1,"dropdown-menu","submenu"],["class","nav-item",3,"click","touchstart",4,"ngFor","ngForOf"],[1,"nav-item",3,"click","touchstart"],[3,"link"]],template:function(n,r){1&n&&t.\u0275\u0275template(0,mz,8,7,"ng-container",0),2&n&&t.\u0275\u0275property("ngIf",r.records&&r.records.length)},dependencies:[I.NgForOf,I.NgIf,ln,qt,js,I.SlicePipe],encapsulation:2})}return i})(),AS=(()=>{class i extends S.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",FS)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const hz=function(i,s){return{module:i,config:s}};function gz(i,s){if(1&i&&t.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",t.\u0275\u0275pureFunction2(2,hz,e.module,e.config))}}let _p=(()=>{class i{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(AS))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-sub-menu-recently-viewed"]],inputs:{module:"module",config:"config"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(n,r){1&n&&t.\u0275\u0275template(0,gz,1,5,"ndc-dynamic",0),2&n&&t.\u0275\u0275property("ngIf",r.getType)},dependencies:[I.NgIf,Gt,$t],encapsulation:2})}return i})(),yp=(()=>{class i{constructor(e,n,r,o){this.navigation=e,this.nameMapper=n,this.configs=r,this.metadata=o,this.maxDisplayed=5,this.subs=[]}ngOnInit(){const e=this.configs.getConfigValue("ui")??{};this.maxDisplayed=parseInt(e.navigation_max_module_favorites)??5,this.initMetadata$()}ngOnDestroy(){this.clear()}ngOnChanges(e){null!==(e?.module??null)&&(e?.module?.previousValue??"")!==(e?.module?.currentValue??"")&&(this.clear(),this.initMetadata$())}buildRoute(e){const r=this.nameMapper.toFrontend(e.attributes.parent_type??"")??"";return this.navigation.getRecordRouterLink(r,e.attributes.parent_id??"")}initMetadata$(){const e=this.metadata.allModuleMetadata$.pipe((0,v.map)(n=>n[this.module]??null));this.subs.push(e.subscribe(n=>{this.records=n?.favorites??null}))}clear(){this.records=null,this.subs.forEach(e=>e.unsubscribe())}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(In),t.\u0275\u0275directiveInject(En),t.\u0275\u0275directiveInject(ht),t.\u0275\u0275directiveInject(bt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],inputs:{module:"module"},features:[t.\u0275\u0275NgOnChangesFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}return i})();const vz=function(i,s,e){return{label:i,url:s,route:e}};function _z(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"li",7),t.\u0275\u0275listener("click",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.onItemClick(r))})("touchstart",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.onItemTouchStart(r))}),t.\u0275\u0275element(1,"scrm-menu-item-link",8),t.\u0275\u0275elementEnd()}if(2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275classMap("submenu-nav-link nav-link action-link"),t.\u0275\u0275property("link",t.\u0275\u0275pureFunction3(3,vz,e.attributes.parent_name,n.buildRoute(e),n.buildRoute(e)))}}function yz(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"li",1)(2,"a",2),t.\u0275\u0275listener("touchstart",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.onTouchStart(r))})("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.toggleDropdown())}),t.\u0275\u0275element(3,"scrm-image",3)(4,"scrm-label",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"ul",5),t.\u0275\u0275template(6,_z,2,7,"li",6),t.\u0275\u0275pipe(7,"slice"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementContainerEnd()}if(2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(5),t.\u0275\u0275classProp("active",e.showDropdown()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind3(7,3,e.records,0,e.maxDisplayed))}}let TS=(()=>{class i extends yp{constructor(e,n,r,o){super(e,n,r,o),this.navigation=e,this.nameMapper=n,this.configs=r,this.metadata=o,this.showDropdown=(0,t.signal)(!1),this.clickType="click"}ngOnInit(){super.ngOnInit(),this?.config?.showDropdown$&&this.subs.push(this.config.showDropdown$.subscribe(e=>{this.showDropdown.set(e)}))}toggleDropdown(){if("touch"===this.clickType)return this.showDropdown.set(!this.showDropdown()),this.clickType="click",void this?.config?.onToggleDropdown(this.showDropdown())}onTouchStart(e){this.clickType="touch"}onItemClick(e){this.toggleDropdown(),this?.config?.onItemClick(e)}onItemTouchStart(e){this.onTouchStart(e),this?.config?.onItemTouchStart(e)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(In),t.\u0275\u0275directiveInject(En),t.\u0275\u0275directiveInject(ht),t.\u0275\u0275directiveInject(bt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-sub-menu-favorites"]],inputs:{config:"config"},features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[4,"ngIf"],[1,"nav-item","dropdown-submenu","submenu","submenu-extra"],[1,"sub-nav-link","nav-link","action-link","dropdown-item","dropdown-toggle","pr-4",3,"touchstart","click"],["image","star"],["labelKey","LBL_FAVORITES"],[1,"dropdown-menu","submenu"],["class","nav-item",3,"click","touchstart",4,"ngFor","ngForOf"],[1,"nav-item",3,"click","touchstart"],[3,"link"]],template:function(n,r){1&n&&t.\u0275\u0275template(0,yz,8,7,"ng-container",0),2&n&&t.\u0275\u0275property("ngIf",r.records&&r.records.length)},dependencies:[I.NgForOf,I.NgIf,ln,qt,js,I.SlicePipe],encapsulation:2})}return i})(),OS=(()=>{class i extends S.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",TS)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const bz=function(i,s){return{module:i,config:s}};function Cz(i,s){if(1&i&&t.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",t.\u0275\u0275pureFunction2(2,bz,e.module,e.config))}}let bp=(()=>{class i{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(OS))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-sub-menu-favorites"]],inputs:{module:"module",config:"config"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(n,r){1&n&&t.\u0275\u0275template(0,Cz,1,5,"ndc-dynamic",0),2&n&&t.\u0275\u0275property("ngIf",r.getType)},dependencies:[I.NgIf,Gt,$t],encapsulation:2})}return i})();const Sz=["topLink"];function Mz(i,s){1&i&&t.\u0275\u0275elementContainer(0)}function wz(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,Mz,1,0,"ng-container",2),t.\u0275\u0275elementContainerEnd()),2&i){t.\u0275\u0275nextContext();const e=t.\u0275\u0275reference(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",e)}}function Dz(i,s){1&i&&t.\u0275\u0275elementContainer(0)}function xz(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,Dz,1,0,"ng-container",2),t.\u0275\u0275elementContainerEnd()),2&i){t.\u0275\u0275nextContext();const e=t.\u0275\u0275reference(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",e)}}function Ez(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",11),t.\u0275\u0275element(1,"scrm-menu-item-link",12),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275classMap("sub-nav-link nav-link action-link"),t.\u0275\u0275property("icon",e.icon)("link",e.link)}}function Iz(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"scrm-sub-menu-recently-viewed",13),t.\u0275\u0275listener("click",function(n){return n.stopPropagation()}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"scrm-sub-menu-favorites",13),t.\u0275\u0275listener("click",function(n){return n.stopPropagation()}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("module",e.item.module)("config",e.recentlyViewedConfig),t.\u0275\u0275advance(1),t.\u0275\u0275property("module",e.item.module)("config",e.favoritesConfig)}}function Fz(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",9),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.hideDropdown())}),t.\u0275\u0275template(1,Ez,2,4,"div",10),t.\u0275\u0275template(2,Iz,3,4,"ng-container",0),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275classProp("show",e.showDropdown())("hover-enabled",e.hoverEnabled()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.item.submenu),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.item&&e.item.module)}}const Az=function(i,s,e){return{"top-nav-link":!0,"nav-link-nongrouped":!0,"dropdown-toggle":i,"hover-enabled":s,"nav-link-activated":e}};function Tz(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",3,4)(2,"span",5,6),t.\u0275\u0275listener("touchstart",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.onTouchStart())})("touchend",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.onTouchEnd())})("click",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.onClick(r))}),t.\u0275\u0275element(4,"scrm-menu-item-link",7),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(5,Fz,3,6,"div",8),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(4),t.\u0275\u0275classMap(t.\u0275\u0275pureFunction3(5,Az,e.item.submenu.length,e.hoverEnabled(),e.showDropdown())),t.\u0275\u0275property("link",e.item.link)("config",e.topLinkConfig),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.item.submenu.length)}}let LS=(()=>{class i{constructor(e,n){this.appStateStore=e,this.moduleNavigation=n,this.index=0,this.showDropdown=(0,t.signal)(!1),this.hoverEnabled=(0,t.signal)(!0),this.clickType="click",this.subs=[]}ngOnInit(){this.showRecentlyViewed=new D.Subject,this.showFavorites=new D.Subject,this.topLinkConfig={onClick:e=>{},onTouchStart:e=>{}},this.recentlyViewedConfig={onItemClick:e=>{"touch"===this.clickType&&(this.hideDropdown(),this.clickType="click")},onItemTouchStart:e=>{this.clickType="touch"},onToggleDropdown:e=>{e&&this.showFavorites.next(!1)},showDropdown$:this.showRecentlyViewed.asObservable()},this.favoritesConfig={onItemClick:e=>{"touch"===this.clickType&&(this.hideDropdown(),this.clickType="click")},onItemTouchStart:e=>{this.clickType="touch"},onToggleDropdown:e=>{e&&this.showRecentlyViewed.next(!1)},showDropdown$:this.showFavorites.asObservable()},this.subs.push(this.appStateStore.activeNavbarDropdown$.subscribe(e=>{this.index!==e&&this.hideDropdown()}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe()),this.showRecentlyViewed.unsubscribe(),this.showFavorites.unsubscribe()}hideDropdown(){this.showDropdown.set(!1),this.hoverEnabled.set(!0)}navigate(){this.moduleNavigation.navigateUsingMenuItem(this.item)}onTopItemClick(e){if("click"===this.clickType)return this.appStateStore.resetActiveDropdown(),void this.navigate();this.toggleDropdown(),this.clickType="click"}toggleDropdown(){this.showDropdown.set(!this.showDropdown()),this.showDropdown()?(this.appStateStore.setActiveDropdown(this.index),this.hoverEnabled.set(!1)):(this.appStateStore.resetActiveDropdown(),this.hoverEnabled.set(!0))}onTouchStart(){this.clickType="touch"}onTouchEnd(){this.clickType="touch"}onClick(e){e.stopImmediatePropagation(),e.stopPropagation(),this.onTopItemClick(e)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ht),t.\u0275\u0275directiveInject(In))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-menu-item"]],viewQuery:function(n,r){if(1&n&&t.\u0275\u0275viewQuery(Sz,5),2&n){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.topLink=o.first)}},inputs:{item:"item",index:"index"},decls:4,vars:2,consts:[[4,"ngIf"],["menuItem",""],[4,"ngTemplateOutlet"],[1,"menu-item-wrapper"],["menuItemWrapper",""],["data-target",".navbar-collapse","data-toggle","collapse",3,"touchstart","touchend","click"],["topLink",""],[3,"link","config"],["aria-labelledby","navbarDropdownMenuLink","class","dropdown-menu submenu",3,"show","hover-enabled","click",4,"ngIf"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu","submenu",3,"click"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[3,"icon","link"],[3,"module","config","click"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,wz,2,1,"ng-container",0),t.\u0275\u0275template(1,xz,2,1,"ng-container",0),t.\u0275\u0275template(2,Tz,6,9,"ng-template",null,1,t.\u0275\u0275templateRefExtractor)),2&n&&(t.\u0275\u0275property("ngIf",r.hoverEnabled()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.hoverEnabled()))},dependencies:[I.NgForOf,I.NgIf,I.NgTemplateOutlet,_p,bp,js],encapsulation:2})}return i})(),NS=(()=>{class i extends S.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",LS)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Oz=function(i,s){return{item:i,index:s}};function Lz(i,s){if(1&i&&t.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",t.\u0275\u0275pureFunction2(2,Oz,e.item,e.index))}}let Cp=(()=>{class i{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(NS))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-menu-item"]],inputs:{item:"item",index:"index"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(n,r){1&n&&t.\u0275\u0275template(0,Lz,1,5,"ndc-dynamic",0),2&n&&t.\u0275\u0275property("ngIf",r.getType)},dependencies:[I.NgIf,Gt,$t],encapsulation:2})}return i})(),RS=(()=>{class i{constructor(){}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-home-menu-item"]],inputs:{route:"route",active:"active"},decls:4,vars:3,consts:[[1,"navbar-nav","home-nav"],[1,"nav-item"],[1,"home-nav-link",3,"routerLink"],["image","home",1,"home-icon"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"ul",0)(1,"li",1)(2,"a",2),t.\u0275\u0275element(3,"scrm-image",3),t.\u0275\u0275elementEnd()()()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275classProp("active",r.active),t.\u0275\u0275advance(1),t.\u0275\u0275property("routerLink",r.route))},dependencies:[Ot.RouterLink,ln],encapsulation:2})}return i})(),BS=(()=>{class i extends S.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",RS)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Nz=function(i,s){return{route:i,active:s}};function Rz(i,s){if(1&i&&t.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",t.\u0275\u0275pureFunction2(2,Nz,e.route,e.active))}}let kS=(()=>{class i{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(BS))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-home-menu-item"]],inputs:{route:"route",active:"active"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(n,r){1&n&&t.\u0275\u0275template(0,Rz,1,5,"ndc-dynamic",0),2&n&&t.\u0275\u0275property("ngIf",r.getType)},dependencies:[I.NgIf,Gt,$t],encapsulation:2})}return i})();function Bz(i,s){1&i&&t.\u0275\u0275elementContainer(0)}function kz(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,Bz,1,0,"ng-container",2),t.\u0275\u0275elementContainerEnd()),2&i){t.\u0275\u0275nextContext();const e=t.\u0275\u0275reference(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",e)}}function jz(i,s){1&i&&t.\u0275\u0275elementContainer(0)}function Pz(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,jz,1,0,"ng-container",2),t.\u0275\u0275elementContainerEnd()),2&i){t.\u0275\u0275nextContext();const e=t.\u0275\u0275reference(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",e)}}const Vz=function(i){return{"nav-link-activated":i}};function Uz(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"span",9),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.toggleDropdown())}),t.\u0275\u0275elementStart(1,"a",10),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()}if(2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275classMap(t.\u0275\u0275pureFunction1(5,Vz,e.showDropdown())),t.\u0275\u0275classProp("hover-enabled",e.hoverEnabled()),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.item.link.label," ")}}function $z(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"ul",11)(1,"li",12),t.\u0275\u0275element(2,"scrm-menu-item",13),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("item",e.item)}}function zz(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"li",19)(1,"scrm-menu-item-link",20),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(r.hideDropdown())}),t.\u0275\u0275elementEnd()()}if(2&i){const e=s.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275classMap("submenu-nav-link nav-link action-link"),t.\u0275\u0275property("icon",e.icon)("link",e.link)}}function Hz(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"scrm-sub-menu-recently-viewed",21),t.\u0275\u0275listener("click",function(n){return n.stopPropagation()}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"scrm-sub-menu-favorites",21),t.\u0275\u0275listener("click",function(n){return n.stopPropagation()}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2).$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("module",e.module)("config",n.recentlyViewedConfig),t.\u0275\u0275advance(1),t.\u0275\u0275property("module",e.module)("config",n.favoritesConfig)}}function Wz(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ul",17),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(r.hideDropdown())}),t.\u0275\u0275template(1,zz,2,4,"li",18),t.\u0275\u0275template(2,Hz,3,4,"ng-container",0),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275nextContext(),n=e.$implicit,r=e.index,o=t.\u0275\u0275nextContext(2);t.\u0275\u0275classProp("rounded-0",n.submenu&&1===n.submenu.length)("active",o.showSubDropdown[r]()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",n.submenu),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n&&n.module)}}const Kz=function(i,s){return{"sub-nav-link":!0,"nav-link":!0,"action-link":!0,"dropdown-item":i,"dropdown-toggle":s}};function Gz(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"li",14),t.\u0275\u0275element(1,"scrm-menu-item-link",15),t.\u0275\u0275template(2,Wz,3,6,"ul",16),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=s.index,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275classMap(t.\u0275\u0275pureFunction2(5,Kz,e.submenu.length,e.submenu.length)),t.\u0275\u0275property("link",e.link)("config",r.getConfig(e,n)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.submenu.length)}}function Zz(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",3,4),t.\u0275\u0275template(2,Uz,3,7,"span",5),t.\u0275\u0275template(3,$z,3,1,"ul",6),t.\u0275\u0275elementStart(4,"ul",7),t.\u0275\u0275template(5,Gz,3,8,"li",8),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!e.item.isGroupedMenu),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.item.isGroupedMenu),t.\u0275\u0275advance(1),t.\u0275\u0275classProp("show",e.showDropdown())("hover-enabled",e.hoverEnabled()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.item.submenu)}}let jS=(()=>{class i{constructor(e,n){this.appStateStore=e,this.moduleNavigation=n,this.index=0,this.showDropdown=(0,t.signal)(!1),this.showSubDropdown=[],this.hoverEnabled=(0,t.signal)(!0),this.subs=[],this.clickType="click",this.openSubDropdown=null}ngOnInit(){this.showRecentlyViewed=new D.Subject,this.showFavorites=new D.Subject,this.subs.push(this.appStateStore.activeNavbarDropdown$.subscribe(n=>{this.index!==n&&this.hideDropdown()})),(this?.item?.submenu??[]).forEach(()=>{this.showSubDropdown.push((0,t.signal)(!1))}),this.recentlyViewedConfig={onItemClick:n=>{"touch"===this.clickType&&(this.hideDropdown(),this.clickType="click")},onItemTouchStart:n=>{this.clickType="touch"},onToggleDropdown:n=>{n&&this.showFavorites.next(!1)},showDropdown$:this.showRecentlyViewed.asObservable()},this.favoritesConfig={onItemClick:n=>{"touch"===this.clickType&&(this.hideDropdown(),this.clickType="click")},onItemTouchStart:n=>{this.clickType="touch"},onToggleDropdown:n=>{n&&this.showRecentlyViewed.next(!1)},showDropdown$:this.showFavorites.asObservable()}}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe()),this.showRecentlyViewed.unsubscribe(),this.showFavorites.unsubscribe()}hideDropdown(){this.showDropdown.set(!1),this.hoverEnabled.set(!0),this.showSubDropdown.forEach(e=>{e.set(!1)})}toggleDropdown(){this.showDropdown.set(!this.showDropdown()),this.showDropdown()?(this.appStateStore.setActiveDropdown(this.index),this.hoverEnabled.set(!1)):(this.appStateStore.resetActiveDropdown(),this.hideDropdown())}navigate(){this.moduleNavigation.navigateUsingMenuItem(this.item)}onSubItemClick(e,n,r){"click"!==this.clickType?(this.toggleSubDropdown(r),this.clickType="click"):this.navigate()}toggleSubDropdown(e){const n=this.openSubDropdown??-1;e!==n&&n>=0&&this?.showSubDropdown[n]?.set(!1),this.showSubDropdown[e]?.set(!this.showSubDropdown[e]()),this.openSubDropdown=e,this.showSubDropdown[e]()||(this.openSubDropdown=null)}getConfig(e,n){return{onClick:r=>{this.onSubItemClick(r,e,n)},onTouchStart:r=>{this.clickType="touch"}}}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ht),t.\u0275\u0275directiveInject(In))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-grouped-menu-item"]],inputs:{item:"item",subNavCollapse:"subNavCollapse",index:"index"},decls:4,vars:2,consts:[[4,"ngIf"],["groupedMenuItem",""],[4,"ngTemplateOutlet"],[1,"menu-item-wrapper"],["menuItemWrapper",""],["data-target",".navbar-collapse","data-toggle","collapse",3,"click",4,"ngIf"],["class","navbar-nav grouped",4,"ngIf"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu","main"],["class","nav-item dropdown-submenu submenu",4,"ngFor","ngForOf"],["data-target",".navbar-collapse","data-toggle","collapse",3,"click"],["data-toggle","dropdown",1,"top-nav-link","nav-link-grouped","dropdown-toggle","active"],[1,"navbar-nav","grouped"],[1,"top-nav","nav-item","dropdown","main-grouped","active"],[3,"item"],[1,"nav-item","dropdown-submenu","submenu"],[3,"link","config"],["class","dropdown-menu submenu",3,"rounded-0","active","click",4,"ngIf"],[1,"dropdown-menu","submenu",3,"click"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[3,"icon","link","click"],[3,"module","config","click"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,kz,2,1,"ng-container",0),t.\u0275\u0275template(1,Pz,2,1,"ng-container",0),t.\u0275\u0275template(2,Zz,6,7,"ng-template",null,1,t.\u0275\u0275templateRefExtractor)),2&n&&(t.\u0275\u0275property("ngIf",r.hoverEnabled()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.hoverEnabled()))},dependencies:[I.NgForOf,I.NgIf,I.NgTemplateOutlet,Cp,_p,bp,js],encapsulation:2})}return i})(),PS=(()=>{class i extends S.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",jS)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const qz=function(i,s,e){return{item:i,subNavCollapse:s,index:e}};function Qz(i,s){if(1&i&&t.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",t.\u0275\u0275pureFunction3(2,qz,e.item,e.subNavCollapse,e.index))}}let VS=(()=>{class i{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(PS))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-grouped-menu-item"]],inputs:{item:"item",subNavCollapse:"subNavCollapse",index:"index"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(n,r){1&n&&t.\u0275\u0275template(0,Qz,1,6,"ndc-dynamic",0),2&n&&t.\u0275\u0275property("ngIf",r.getType)},dependencies:[I.NgIf,Gt,$t],encapsulation:2})}return i})();const Jz=function(i){return{"hover-enabled":!0,"nav-link-activated":i}};function Yz(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"a",6),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.toggleDropdown())}),t.\u0275\u0275element(1,"scrm-label",7),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275classMap(t.\u0275\u0275pureFunction1(3,Jz,e.showDropdown())),t.\u0275\u0275advance(1),t.\u0275\u0275property("labelKey",e.labelKey)}}const Xz=function(i){return{"hover-enabled":!1,"nav-link-activated":i}};function eH(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"a",6),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.toggleDropdown())}),t.\u0275\u0275element(1,"scrm-label",7),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275classMap(t.\u0275\u0275pureFunction1(3,Xz,e.showDropdown())),t.\u0275\u0275advance(1),t.\u0275\u0275property("labelKey",e.labelKey)}}function tH(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",8),t.\u0275\u0275element(1,"scrm-menu-item-link",9),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275classMap("nav-link action-link"),t.\u0275\u0275property("link",e.link)}}function nH(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ul",1)(1,"li",2),t.\u0275\u0275template(2,Yz,2,5,"a",3),t.\u0275\u0275template(3,eH,2,5,"a",3),t.\u0275\u0275elementStart(4,"div",4),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.hideDropdown())}),t.\u0275\u0275template(5,tH,2,3,"div",5),t.\u0275\u0275elementEnd()()()}if(2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.hoverEnabled()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.hoverEnabled()),t.\u0275\u0275advance(1),t.\u0275\u0275classProp("show",e.showDropdown())("hover-enabled",e.hoverEnabled()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.items)}}let US=(()=>{class i{constructor(e){this.appStateStore=e,this.showDropdown=(0,t.signal)(!0),this.hoverEnabled=(0,t.signal)(!0),this.allowHover=(0,t.signal)(!0),this.isTouchDevice=(0,t.signal)(!1),this.subs=[]}ngOnInit(){this.subs.push(this.appStateStore.activeNavbarDropdown$.subscribe(e=>{this.index!==e&&this.hideDropdown()}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}hideDropdown(){this.showDropdown.set(!1),this.hoverEnabled.set(!0)}toggleDropdown(){this.showDropdown.set(!this.showDropdown()),this.showDropdown()?(this.appStateStore.setActiveDropdown(this.index),this.hoverEnabled.set(!1)):(this.appStateStore.resetActiveDropdown(),this.hoverEnabled.set(!0))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ht))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-menu-items-list"]],inputs:{items:"items",labelKey:"labelKey",index:"index"},decls:1,vars:1,consts:[["class","navbar-list navbar-nav nav-collapsed-items",4,"ngIf"],[1,"navbar-list","navbar-nav","nav-collapsed-items"],[1,"top-nav","nav-item","dropdown","non-grouped"],["class","nav-link-nongrouped dropdown-toggle",3,"class","click",4,"ngIf"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu","more-menu","submenu",3,"click"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-link-nongrouped","dropdown-toggle",3,"click"],[3,"labelKey"],[1,"nav-item"],[3,"link"]],template:function(n,r){1&n&&t.\u0275\u0275template(0,nH,6,7,"ul",0),2&n&&t.\u0275\u0275property("ngIf",r.items&&r.items.length>0)},dependencies:[I.NgForOf,I.NgIf,qt,js],encapsulation:2})}return i})(),$S=(()=>{class i extends S.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",US)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const iH=function(i,s,e){return{items:i,labelKey:s,index:e}};function rH(i,s){if(1&i&&t.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",t.\u0275\u0275pureFunction3(2,iH,e.items,e.labelKey,e.index))}}let zS=(()=>{class i{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject($S))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-menu-items-list"]],inputs:{items:"items",labelKey:"labelKey",index:"index"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(n,r){1&n&&t.\u0275\u0275template(0,rH,1,6,"ndc-dynamic",0),2&n&&t.\u0275\u0275property("ngIf",r.getType)},dependencies:[I.NgIf,Gt,$t],encapsulation:2})}return i})();const oH=["mobileGlobalLinkTitle"],sH=["searchTerm"];function aH(i,s){1&i&&(t.\u0275\u0275elementStart(0,"nav",5)(1,"div",6)(2,"ul",7)(3,"li",8),t.\u0275\u0275text(4,"\xa0 "),t.\u0275\u0275elementEnd()()()())}function lH(i,s){1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"nav",9)(2,"div",10)(3,"ul",7)(4,"li",11),t.\u0275\u0275element(5,"scrm-logo-ui"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementContainerEnd())}function cH(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"li",28),t.\u0275\u0275element(1,"scrm-menu-item",29),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("item",e.navbar.current)}}function uH(i,s){1&i&&t.\u0275\u0275elementContainer(0)}function dH(i,s){1&i&&t.\u0275\u0275element(0,"hr")}function pH(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"a",31),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(3,dH,1,0,"hr",3),t.\u0275\u0275elementContainerEnd()),2&i){const e=s.$implicit,n=s.first,r=s.last;t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("href",e.link.url,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275propertyInterpolate("target",e.link.target),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1("",e.link.label," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!0===r||!0===n)}}function fH(i,s){if(1&i&&t.\u0275\u0275template(0,pH,4,4,"ng-container",30),2&i){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275property("ngForOf",e.navbar.globalActions)}}function mH(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"ul",12)(2,"div",13)(3,"button",14),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(r.toggleSidebar())}),t.\u0275\u0275element(4,"scrm-image",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"nav",16)(6,"ul",17),t.\u0275\u0275template(7,cH,2,1,"li",18),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(8,"div",19),t.\u0275\u0275template(9,uH,1,0,"ng-container",20),t.\u0275\u0275elementStart(10,"div",21)(11,"li",22)(12,"a",23,24),t.\u0275\u0275element(14,"scrm-image",25),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"div",26)(16,"span",27),t.\u0275\u0275text(17),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(18,fH,1,1,"ng-template",2),t.\u0275\u0275element(19,"scrm-logout-ui"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementContainerEnd()}if(2&i){const e=t.\u0275\u0275reference(13);t.\u0275\u0275nextContext(2);const n=t.\u0275\u0275reference(4),r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(5),t.\u0275\u0275property("ngClass",r.isSmallScreen()&&r.isSearchBoxVisible()?"d-none":"d-block"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",r.navbar.current&&!r.navbar.current.isGroupedMenu),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngTemplateOutlet",n),t.\u0275\u0275advance(6),t.\u0275\u0275styleProp("min-width",e.offsetWidth,"px"),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate2("",r.navbar.currentUser.firstName," ",r.navbar.currentUser.lastName,""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.navbar.globalActions)}}function hH(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"li",41),t.\u0275\u0275element(2,"scrm-grouped-menu-item",42),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(5);t.\u0275\u0275advance(2),t.\u0275\u0275property("item",e.navbar.current)("subNavCollapse",e.subNavCollapse)("index",1)}}function gH(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"li",43),t.\u0275\u0275element(1,"scrm-menu-item",44),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(5);t.\u0275\u0275advance(1),t.\u0275\u0275property("item",e.navbar.current)("index",1)}}function vH(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"li",41),t.\u0275\u0275element(1,"scrm-grouped-menu-item",42),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=s.index,r=t.\u0275\u0275nextContext(5);t.\u0275\u0275advance(1),t.\u0275\u0275property("item",e)("subNavCollapse",r.subNavCollapse)("index",n+2)}}function _H(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"ul",37),t.\u0275\u0275template(2,hH,3,3,"ng-container",3),t.\u0275\u0275template(3,gH,2,2,"li",38),t.\u0275\u0275template(4,vH,2,3,"li",39),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(5,"scrm-menu-items-list",40),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.navbar.current&&e.navbar.current.isGroupedMenu),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.navbar.current&&!e.navbar.current.isGroupedMenu),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.navbar.menu),t.\u0275\u0275advance(1),t.\u0275\u0275property("items",e.navbar.all.modules)("index",e.navbar.menu.length+2)}}function yH(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"li",43),t.\u0275\u0275element(1,"scrm-menu-item",44),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(5);t.\u0275\u0275advance(1),t.\u0275\u0275property("item",e.navbar.current)("index",1)}}function bH(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"li",41),t.\u0275\u0275element(2,"scrm-grouped-menu-item",42),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(5);t.\u0275\u0275advance(2),t.\u0275\u0275property("item",e.navbar.current)("subNavCollapse",e.subNavCollapse)("index",1)}}function CH(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"li",47),t.\u0275\u0275element(1,"scrm-menu-item",44),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=s.index;t.\u0275\u0275advance(1),t.\u0275\u0275property("item",e)("index",n+2)}}function SH(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"ul",7),t.\u0275\u0275template(2,yH,2,2,"li",38),t.\u0275\u0275template(3,bH,3,3,"ng-container",3),t.\u0275\u0275template(4,CH,2,2,"li",45),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(5,"scrm-menu-items-list",46),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.navbar.current&&!e.navbar.current.isGroupedMenu),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",(null==e.navbar.current?null:e.navbar.current.submenu)&&e.navbar.current.isGroupedMenu),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.navbar.menu),t.\u0275\u0275advance(1),t.\u0275\u0275property("items",e.navbar.all.modules)("index",e.navbar.menu.length+2)}}function MH(i,s){1&i&&t.\u0275\u0275elementContainer(0)}function wH(i,s){1&i&&t.\u0275\u0275element(0,"hr")}function DH(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"a",31),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(3,wH,1,0,"hr",3),t.\u0275\u0275elementContainerEnd()),2&i){const e=s.$implicit,n=s.first,r=s.last;t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("href",e.link.url,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275propertyInterpolate("target",e.link.target),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1("",e.link.label," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!0===r||!0===n)}}function xH(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,DH,4,4,"ng-container",30),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.navbar.globalActions)}}function EH(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"nav",32)(2,"div",33),t.\u0275\u0275element(3,"scrm-home-menu-item",34),t.\u0275\u0275template(4,_H,6,5,"ng-container",3),t.\u0275\u0275template(5,SH,6,5,"ng-container",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(6,MH,1,0,"ng-container",20),t.\u0275\u0275elementStart(7,"div",21)(8,"ul",7)(9,"li",22)(10,"a",35),t.\u0275\u0275element(11,"scrm-image",25),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"div",36)(13,"span",27),t.\u0275\u0275text(14),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(15,xH,2,1,"ng-container",3),t.\u0275\u0275element(16,"scrm-logout-ui"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2).ngIf,n=t.\u0275\u0275reference(4),r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngbCollapse",r.mainNavCollapse),t.\u0275\u0275advance(1),t.\u0275\u0275property("active",e.appState.module&&"home"===e.appState.module)("route",r.getHomePage()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","gm"==e.userPreferences.navigation_paradigm),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","gm"!=e.userPreferences.navigation_paradigm),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",n),t.\u0275\u0275advance(8),t.\u0275\u0275textInterpolate2("",r.navbar.currentUser.firstName," ",r.navbar.currentUser.lastName,""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.navbar.globalActions)}}function IH(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,lH,6,0,"ng-container",3),t.\u0275\u0275template(2,mH,20,8,"ng-container",3),t.\u0275\u0275template(3,EH,17,9,"ng-container",3),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.isUserLoggedIn),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.isUserLoggedIn&&e.mobileNavbar),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.isUserLoggedIn&&!e.mobileNavbar)}}function FH(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"a",70),t.\u0275\u0275element(2,"scrm-label",71),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(4);let r;t.\u0275\u0275advance(1),t.\u0275\u0275property("routerLink",e.url)("queryParams",null!==(r=null==e?null:e.params)&&void 0!==r?r:null),t.\u0275\u0275advance(1),t.\u0275\u0275property("labelKey",e.labelKey)("module",n.navbar.current.module)}}function AH(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"a",72),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext().$implicit,o=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(o.handleProcess(r))}),t.\u0275\u0275element(2,"scrm-label",71),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&i){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(2),t.\u0275\u0275property("labelKey",e.labelKey)("module",n.navbar.current.module)}}function TH(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"li",69),t.\u0275\u0275template(1,FH,3,4,"ng-container",3),t.\u0275\u0275template(2,AH,3,2,"ng-container",3),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.process),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.process)}}function OH(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"li",66),t.\u0275\u0275element(2,"scrm-label",67),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(3,TH,3,2,"li",68),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(2),t.\u0275\u0275property("module",e.navbar.current.module),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.currentQuickActions)}}function LH(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"a",70),t.\u0275\u0275element(2,"scrm-label",71),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit;let n;t.\u0275\u0275advance(1),t.\u0275\u0275property("routerLink",e.url)("queryParams",null!==(n=null==e?null:e.params)&&void 0!==n?n:null),t.\u0275\u0275advance(1),t.\u0275\u0275property("labelKey",e.labelKey)("module",e.module)}}function NH(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"a",72),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext().$implicit,o=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(o.handleProcess(r))}),t.\u0275\u0275element(2,"scrm-label",71),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&i){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275property("labelKey",e.labelKey)("module",e.module)}}function RH(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"li",69),t.\u0275\u0275template(1,LH,3,4,"ng-container",3),t.\u0275\u0275template(2,NH,3,2,"ng-container",3),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.process),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.process)}}const HS=function(){return[]};function BH(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"li",66),t.\u0275\u0275element(2,"scrm-label",73),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(3,RH,3,2,"li",68),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(3);let n;t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",null!==(n=null==e||null==e.navigation?null:e.navigation.quickActions)&&void 0!==n?n:t.\u0275\u0275pureFunction0(1,HS))}}function kH(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2).ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e)}}function jH(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"span",79),t.\u0275\u0275template(1,kH,2,1,"ng-container",3),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e>0)}}function PH(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,jH,2,1,"span",78),t.\u0275\u0275elementContainerEnd()),2&i){const e=s.ngIf;let n;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null!==(n=e)&&void 0!==n&&n)}}function VH(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",74)(1,"ul",50)(2,"li",22)(3,"a",75),t.\u0275\u0275listener("mouseenter",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(r.markAsRead())}),t.\u0275\u0275element(4,"scrm-image",76),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(5,PH,2,1,"ng-container",3),t.\u0275\u0275pipe(6,"async"),t.\u0275\u0275elementStart(7,"div",77),t.\u0275\u0275element(8,"scrm-notifications"),t.\u0275\u0275elementEnd()()()()}if(2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(6,1,e.notificationCount$))}}function UH(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",48)(1,"div",49)(2,"ul",50)(3,"li",22)(4,"a",51),t.\u0275\u0275element(5,"scrm-image",52),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"ul",53),t.\u0275\u0275template(7,OH,4,2,"ng-container",3),t.\u0275\u0275template(8,BH,4,2,"ng-container",3),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(9,"div",54)(10,"ul",50)(11,"li",22)(12,"a",55),t.\u0275\u0275element(13,"scrm-image",56),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"div",57),t.\u0275\u0275element(15,"scrm-recently-viewed",58),t.\u0275\u0275pipe(16,"slice"),t.\u0275\u0275pipe(17,"async"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(18,"div",59)(19,"a",60),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.openSearchBox())}),t.\u0275\u0275element(20,"scrm-image",61),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(21,"div",62)(22,"scrm-search-bar",63,64),t.\u0275\u0275listener("isSearchVisible",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.closeSearchBox(r))})("searchExpression",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.search(r))}),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275template(24,VH,9,3,"div",65),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275nextContext().ngIf,n=t.\u0275\u0275nextContext();let r,o;t.\u0275\u0275advance(6),t.\u0275\u0275classProp("dropdown-menu-right",!n.mobileNavbar)("dropdown-menu-right-center",n.mobileNavbar),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",(null!==(r=null==n.navbar||null==n.navbar.current?null:n.navbar.current.module)&&void 0!==r?r:"")&&n.currentQuickActions.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",(null!==(o=null==n||null==n.navigation?null:n.navigation.quickActions)&&void 0!==o?o:t.\u0275\u0275pureFunction0(23,HS)).length),t.\u0275\u0275advance(6),t.\u0275\u0275classProp("dropdown-menu-right",!n.mobileNavbar),t.\u0275\u0275advance(1),t.\u0275\u0275property("menuItems",t.\u0275\u0275pipeBind3(16,17,t.\u0275\u0275pipeBind1(17,21,n.recentlyViewed$),0,n.recentlyViewedCount)),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngClass",n.isSearchBoxVisible()?"d-none":"d-block"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngClass",n.isSearchBoxVisible()?"d-block":"d-none")("@mobileSearchBarAnm",void 0),t.\u0275\u0275advance(1),t.\u0275\u0275property("labelKey","LBL_SEARCH")("klass","search-bar-global")("searchTrigger","enter")("isMobile",n.isSmallScreen()),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.notificationsEnabled&&n.checkAppStrings(e.appStrings)&&n.arePreferencesInitialized(e.userPreferences))}}function $H(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275template(1,aH,5,0,"ng-template",2),t.\u0275\u0275template(2,IH,4,3,"ng-container",3),t.\u0275\u0275template(3,UH,25,24,"ng-template",null,4,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.loaded),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.loaded)}}let WS=(()=>{class i{static#e=this.instances=[];constructor(e,n,r,o,a,l,c,u,d,p,f,m,g){this.navigationStore=e,this.languageStore=n,this.userPreferenceStore=r,this.systemConfigStore=o,this.appState=a,this.authService=l,this.moduleNavigation=c,this.screenSize=u,this.asyncActionService=d,this.notificationStore=p,this.globalRecentlyViewedStore=f,this.globalSearch=m,this.breakpointObserver=g,this.loaded=!0,this.mainNavCollapse=!0,this.subNavCollapse=!0,this.mobileSubNav=!1,this.backLink=!1,this.mainNavLink=!0,this.submenu=[],this.moduleNameMapper=new En(this.systemConfigStore),this.actionNameMapper=new Eo(this.systemConfigStore),this.routeConverter=new ao(this.moduleNameMapper,this.actionNameMapper,this.systemConfigStore),this.maxTabs=8,this.screen=ii.Medium,this.notificationsEnabled=!1,this.subs=[],this.mobileNavbar=!1,this.isSmallScreen=(0,t.signal)(!1),this.isTabletScreen=(0,t.signal)(!1),this.recentlyViewedCount=10,this.isSearchBoxVisible=(0,t.signal)(!1),this.languages$=this.languageStore.vm$,this.userPreferences$=this.userPreferenceStore.userPreferences$,this.currentUser$=this.authService.currentUser$,this.appState$=this.appState.vm$,this.navigation$=this.navigationStore.vm$,this.recentlyViewed$=this.globalRecentlyViewedStore.globalRecentlyViewed$,this.vm$=this.navigation$.pipe((0,D.combineLatestWith)(this.userPreferences$,this.currentUser$,this.appState$,this.screenSize.screenSize$,this.languages$),(0,v.map)(([h,_,b,M,y,w])=>(y&&(this.screen=y,this.onResize()),h&&h.modules&&(this.navigation=h),this.calculateMaxTabs(h),this.getModuleQuickActions(M.module),this.navbar.resetMenu(),(0,S.ready)([w.appStrings,w.modStrings,w.appListStrings,_,b])&&this.navbar.build(h,b,this.maxTabs),{navigation:h,userPreferences:_,appState:M,appStrings:w.appStrings||{},appListStrings:w.appListStrings||{}})))}onResize(){const e=window.innerWidth;this.mobileNavbar=e<=768,this.isSmallScreen.set(e<=600),this.isTabletScreen.set(e<=992),this.isSmallScreen()||this.isSearchBoxVisible.set(!0)}ngOnInit(){const e=new pS(this.routeConverter,this.moduleNavigation,this.userPreferenceStore,this.languageStore,this.appState,this.moduleNameMapper);this.setNavbar(e),this.authService.isUserLoggedIn.subscribe(n=>{this.isUserLoggedIn=n}),window.dispatchEvent(new Event("resize")),this.notificationCount$=this.notificationStore.notificationsUnreadTotal$,this.recentlyViewedCount=this.systemConfigStore.getUi("global_recently_viewed"),this.subs.push(this.notificationStore.notificationsEnabled$.subscribe(n=>{this.notificationsEnabled=n})),this.subs.push(this.breakpointObserver.observe(["(max-width: 599.98px)"]).subscribe(n=>{let r;r=!!this.searchTermRef?.searchForm.get("searchTerm").value,n.matches&&!r&&this.isSearchBoxVisible.set(!1)}))}ngOnDestroy(){this.authService.isUserLoggedIn.unsubscribe(),this.subs.forEach(e=>e.unsubscribe())}checkAppStrings(e){return e&&Object.keys(e).length>0}arePreferencesInitialized(e){return e&&Object.keys(e).length}markAsRead(){this.notificationStore.markNotificationsAsRead()}ngAfterViewInit(){this.mobileGlobalLinkTitle?.nativeElement?.offsetWidth&&(this.dropdownLength=this.mobileGlobalLinkTitle.nativeElement.offsetWidth)}changeSubNav(e,n){this.mobileSubNav=!this.mobileSubNav,this.backLink=!this.backLink,this.mainNavLink=!this.mainNavLink,this.submenu=n}navBackLink(){this.mobileSubNav=!this.mobileSubNav,this.backLink=!this.backLink,this.mainNavLink=!this.mainNavLink}getHomePage(){return this.systemConfigStore.getHomePage()}setNavbar(e){this.navbar=e,this.loaded=!0}isLoaded(){return this.loaded}calculateMaxTabs(e){const n=this.systemConfigStore.getConfigValue("navigation_tab_limits");if(this.screen&&n){let r=n[this.screen];(!r||e.maxTabs&&e.maxTabs<r)&&(r=e.maxTabs),this.maxTabs=r}}getModuleQuickActions(e){const n=this?.navigation?.modules[e]??null,r=n?.menu??[];(null===n||!r.length)&&(this.currentQuickActions=[]);const o=[];r.forEach(a=>{if(!a.url||!a.quickAction)return;const l=a?.url??"";o.push({...a,url:l.replace("/#/","/")})}),this.currentQuickActions=o}handleProcess(e){if(!e.process)return;const n=e.process;this.asyncActionService.run(n,{action:n,module:e.module}).pipe((0,v.take)(1)).subscribe()}openSearchBox(){this.isSmallScreen()&&this.isSearchBoxVisible.set(!0)}closeSearchBox(e){this.isSearchBoxVisible.set(e)}search(e){const n=this.systemConfigStore.getConfigValue("search")?.controller??"";this.globalSearch.navigateToSearch(e,n).finally()}toggleSidebar(){this.appState.toggleSidebar()}static#t=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ai),t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(Xt),t.\u0275\u0275directiveInject(ht),t.\u0275\u0275directiveInject(Ht),t.\u0275\u0275directiveInject(ci),t.\u0275\u0275directiveInject(In),t.\u0275\u0275directiveInject(li),t.\u0275\u0275directiveInject(nn),t.\u0275\u0275directiveInject(Rs),t.\u0275\u0275directiveInject(_c),t.\u0275\u0275directiveInject(fS),t.\u0275\u0275directiveInject(z))};static#n=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-navbar"]],viewQuery:function(n,r){if(1&n&&(t.\u0275\u0275viewQuery(oH,5),t.\u0275\u0275viewQuery(sH,5)),2&n){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.mobileGlobalLinkTitle=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.searchTermRef=o.first)}},hostBindings:function(n,r){1&n&&t.\u0275\u0275listener("resize",function(a){return r.onResize(a)},!1,t.\u0275\u0275resolveWindow)},decls:2,vars:3,consts:[["class","top-panel fixed-top",4,"ngIf"],[1,"top-panel","fixed-top"],[3,"ngIf"],[4,"ngIf"],["actionIcons",""],[1,"navbar","navbar-expand-lg"],[1,"navbar-collapse","collapse","order-4","order-md-0","collapsenav"],[1,"navbar-nav"],[1,"top-nav","nav-item"],[1,"navbar","ml-0","pl-0"],[1,"navbar-collapse"],[1,"pl-0"],[1,"navbar","mobile-nav-block","mobilenavbar"],[1,"d-flex"],["type","button",1,"navbar-toggler",3,"click"],["image","hamburger",1,"responsive-menu-toggler"],[1,"navbar-expand",3,"ngClass"],[1,"navbar-nav","h-100"],["class","top-nav nav-item dropdown mobile-navbar-active-module h-100 non-grouped",4,"ngIf"],[1,"d-flex","align-items-center"],[4,"ngTemplateOutlet"],["ngbDropdown","",1,"global-links","action-dropdown"],[1,"global-link-item"],["ngbDropdownToggle","",1,"nav-link","primary-global-link","dropdown-toggle"],["mobileGlobalLinkTitle",""],["image","user",1,"global-action-icon","sicon-2x"],["aria-labelledby","navbarDropdownMenuLink","ngbDropdownMenu","",1,"dropdown-menu","global-links-dropdown","border","shadow-sm-2"],[1,"global-user-name"],[1,"top-nav","nav-item","dropdown","mobile-navbar-active-module","h-100","non-grouped"],[3,"item"],[4,"ngFor","ngForOf"],["ngbDropdownItem","",1,"dropdown-item","global-links-sublink",3,"href","target"],[1,"navbar","navbar-expand-md","navbar-1"],[1,"navbar-collapse","collapse","collapsenav",3,"ngbCollapse"],[3,"active","route"],["ngbDropdownToggle","",1,"nav-link","primary-global-link"],["aria-labelledby","navbarDropdownMenuLink","ngbDropdownMenu","",1,"dropdown-menu","global-links-dropdown","border","shadow-sm-2","dropdown-menu-right"],[1,"navbar-nav","grouped"],["class","top-nav nav-item dropdown non-grouped active",4,"ngIf"],["class","top-nav nav-item dropdown main-grouped",4,"ngFor","ngForOf"],["labelKey","LBL_TABGROUP_ALL",3,"items","index"],[1,"top-nav","nav-item","dropdown","main-grouped"],[3,"item","subNavCollapse","index"],[1,"top-nav","nav-item","dropdown","non-grouped","active"],[3,"item","index"],["class","top-nav nav-item dropdown non-grouped",4,"ngFor","ngForOf"],["labelKey","LBL_MORE",3,"items","index"],[1,"top-nav","nav-item","dropdown","non-grouped"],[1,"action-group","navbar-action-group"],["ngbDropdown","",1,"action-new","action-dropdown"],[1,"navbar-nav","border-0"],["type","button","aria-label","Quick Create","ngbDropdownToggle","",1,"action-link","primary-global-link"],["image","plus",1,"action-btn-icon"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-left","border","shadow-sm-2"],["ngbDropdown","",1,"action-history","action-dropdown"],["type","button","aria-label","Recently Viewed","ngbDropdownToggle","",1,"action-link","primary-global-link"],["image","recently_viewed",1,"action-btn-icon"],["ngbDropdownMenu","",1,"dropdown-menu","border","shadow-sm-2","dropdown-menu-right","scrollbar-thick","recently-viewed-nav-header"],[1,"recently-viewed",3,"menuItems"],[1,"d-flex","align-items-center","px-1","action-search"],["type","button","aria-label","Search",1,"search-mobile-view","action-link","primary-global-link",3,"ngClass","click"],["image","search",1,"action-btn-icon"],[3,"ngClass"],[3,"labelKey","klass","searchTrigger","isMobile","isSearchVisible","searchExpression"],["searchTerm",""],["class","action-alert action-dropdown","ngbDropdown","",4,"ngIf"],[1,"new-list-item-header","font-weight-bold"],["labelKey","LBL_MODULE_NAME",3,"module"],["class","new-list-item",4,"ngFor","ngForOf"],[1,"new-list-item"],[1,"d-flex","align-items-center",3,"routerLink","queryParams"],[1,"new-list-item-label",3,"labelKey","module"],[1,"d-flex","align-items-center",3,"click"],["labelKey","LBL_QUICK_ACTIONS"],["ngbDropdown","",1,"action-alert","action-dropdown"],["type","button","ngbDropdownToggle","",1,"action-link","primary-global-link",3,"mouseenter"],["image","alert",1,"action-btn-icon"],["aria-labelledby","navbarDropdownMenuLink","ngbDropdownMenu","",1,"dropdown-menu","border","shadow-sm-2","dropdown-menu-right"],["class","badge badge-position rounded-pill bg-danger text-white",4,"ngIf"],[1,"badge","badge-position","rounded-pill","bg-danger","text-white"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,$H,5,2,"div",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[I.NgClass,I.NgForOf,I.NgIf,I.NgTemplateOutlet,wc,lS,me.NgbCollapse,me.NgbDropdown,me.NgbDropdownToggle,me.NgbDropdownMenu,me.NgbDropdownItem,Ot.RouterLink,ln,qt,xS,pp,vp,Cp,kS,VS,zS,I.AsyncPipe,I.SlicePipe],encapsulation:2,data:{animation:[(0,yt.trigger)("mobileSearchBarAnm",[(0,yt.transition)(":enter",(0,yt.useAnimation)(Pl.backInDown,{params:{timing:.5,delay:0}}))])]}})}return i})(),KS=(()=>{class i extends S.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",WS)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),zH=(()=>{class i{constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(KS))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-navbar-ui"]],decls:1,vars:1,consts:[[3,"ndcDynamicComponent"]],template:function(n,r){1&n&&t.\u0275\u0275element(0,"ndc-dynamic",0),2&n&&t.\u0275\u0275property("ndcDynamicComponent",r.getType)},dependencies:[$t],encapsulation:2})}return i})();function HH(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",4),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(r.onClick&&r.onClick())}),t.\u0275\u0275elementStart(1,"a",5),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()}if(2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("routerLink",n.buildRoute(e)),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.attributes.item_summary," ")}}function WH(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,HH,3,2,"div",3),t.\u0275\u0275pipe(2,"slice"),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind3(2,1,e.records,0,e.maxDisplayed))}}function KH(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"h4",1),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.toggleCollapse())}),t.\u0275\u0275element(2,"scrm-label",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(3,WH,3,5,"ng-container",0),t.\u0275\u0275elementContainerEnd()}if(2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",!e.collapsed)}}let GS=(()=>{class i{constructor(e,n,r,o){this.navigation=e,this.nameMapper=n,this.configs=r,this.metadata=o,this.collapsible=!1,this.maxDisplayed=5,this.collapsed=!1,this.subs=[]}ngOnInit(){const e=this.configs.getConfigValue("ui")??{};this.maxDisplayed=parseInt(e.navigation_max_module_recently_viewed)??5,this.initMetadata$(),this.collapsed=!!this.collapsible}ngOnDestroy(){this.clear()}ngOnChanges(e){null!==(e?.module??null)&&(e?.module?.previousValue??"")!==(e?.module?.currentValue??"")&&(this.clear(),this.initMetadata$())}buildRoute(e){const r=this.nameMapper.toFrontend(e.attributes.module_name??"")??"";return this.navigation.getRecordRouterLink(r,e.attributes.item_id??"")}toggleCollapse(){this.collapsible&&(this.collapsed=!this.collapsed)}initMetadata$(){const e=this.metadata.allModuleMetadata$.pipe((0,v.map)(n=>n[this.module]??null));this.subs.push(e.subscribe(n=>{this.records=n?.recentlyViewed??null}))}clear(){this.records=null,this.subs.forEach(e=>e.unsubscribe())}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(In),t.\u0275\u0275directiveInject(En),t.\u0275\u0275directiveInject(ht),t.\u0275\u0275directiveInject(bt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-menu-recently-viewed"]],inputs:{module:"module",onClick:"onClick",collapsible:"collapsible"},features:[t.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],[1,"recently-viewed-header","mt-0","pb-1","pl-2","pr-2",3,"click"],["labelKey","LBL_LAST_VIEWED"],["class","nav-item",3,"click",4,"ngFor","ngForOf"],[1,"nav-item",3,"click"],[1,"nav-link","action-link","pb-2","pt-2",3,"routerLink"]],template:function(n,r){1&n&&t.\u0275\u0275template(0,KH,4,1,"ng-container",0),2&n&&t.\u0275\u0275property("ngIf",r.records&&r.records.length)},dependencies:[I.NgForOf,I.NgIf,Ot.RouterLink,qt,I.SlicePipe],encapsulation:2})}return i})(),ZS=(()=>{class i extends S.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",GS)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const GH=function(i,s,e){return{module:i,onClick:s,collapsible:e}};function ZH(i,s){if(1&i&&t.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",t.\u0275\u0275pureFunction3(2,GH,e.module,e.onClick,e.collapsible))}}let qH=(()=>{class i{constructor(e){this.registry=e,this.collapsible=!1}get getType(){return this.registry.get("default","default")}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(ZS))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-menu-recently-viewed"]],inputs:{module:"module",onClick:"onClick",collapsible:"collapsible"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(n,r){1&n&&t.\u0275\u0275template(0,ZH,1,6,"ndc-dynamic",0),2&n&&t.\u0275\u0275property("ngIf",r.getType)},dependencies:[I.NgIf,Gt,$t],encapsulation:2})}return i})();function QH(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",4),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(r.onClick&&r.onClick())}),t.\u0275\u0275elementStart(1,"a",5),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()}if(2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("routerLink",n.buildRoute(e)),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.attributes.parent_name," ")}}function JH(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,QH,3,2,"div",3),t.\u0275\u0275pipe(2,"slice"),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind3(2,1,e.records,0,e.maxDisplayed))}}function YH(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"h4",1),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.toggleCollapse())}),t.\u0275\u0275element(2,"scrm-label",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(3,JH,3,5,"ng-container",0),t.\u0275\u0275elementContainerEnd()}if(2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",!e.collapsed)}}let qS=(()=>{class i extends yp{constructor(e,n,r,o){super(e,n,r,o),this.navigation=e,this.nameMapper=n,this.configs=r,this.metadata=o,this.collapsible=!1,this.collapsed=!1}ngOnInit(){super.ngOnInit(),this.collapsed=!!this.collapsible}toggleCollapse(){this.collapsible&&(this.collapsed=!this.collapsed)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(In),t.\u0275\u0275directiveInject(En),t.\u0275\u0275directiveInject(ht),t.\u0275\u0275directiveInject(bt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-menu-favorites"]],inputs:{onClick:"onClick",collapsible:"collapsible"},features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[4,"ngIf"],[1,"favorite-header","mt-0","pb-1","pl-2","pr-2",3,"click"],["labelKey","LBL_FAVORITES"],["class","nav-item",3,"click",4,"ngFor","ngForOf"],[1,"nav-item",3,"click"],[1,"nav-link","action-link","pb-2","pt-2",3,"routerLink"]],template:function(n,r){1&n&&t.\u0275\u0275template(0,YH,4,1,"ng-container",0),2&n&&t.\u0275\u0275property("ngIf",r.records&&r.records.length)},dependencies:[I.NgForOf,I.NgIf,Ot.RouterLink,qt,I.SlicePipe],encapsulation:2})}return i})(),QS=(()=>{class i extends S.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",qS)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const XH=function(i,s,e){return{module:i,onClick:s,collapsible:e}};function eW(i,s){if(1&i&&t.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",t.\u0275\u0275pureFunction3(2,XH,e.module,e.onClick,e.collapsible))}}let tW=(()=>{class i{constructor(e){this.registry=e,this.collapsible=!1}get getType(){return this.registry.get("default","default")}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(QS))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-menu-favorites"]],inputs:{module:"module",onClick:"onClick",collapsible:"collapsible"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(n,r){1&n&&t.\u0275\u0275template(0,eW,1,6,"ndc-dynamic",0),2&n&&t.\u0275\u0275property("ngIf",r.getType)},dependencies:[I.NgIf,Gt,$t],encapsulation:2})}return i})();function nW(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"span",4),t.\u0275\u0275element(1,"scrm-action-group-menu",5),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("buttonClass",e.config.buttonClass)("config",e.config.actions)}}function iW(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div")(1,"scrm-field-grid",2),t.\u0275\u0275template(2,nW,2,2,"span",3),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275classMapInterpolate1("record-grid ",e.config&&e.config.klass||"",""),t.\u0275\u0275advance(1),t.\u0275\u0275property("actions",!!e.config.actions)("appendActions",e.config&&e.config.appendActions||!1)("colClass",e.config&&e.config.colClass)("fieldMode",e.mode)("fields",e.fields)("inputClass",e.config&&e.config.inputClass)("labelClass",e.config&&e.config.labelClass)("labelDisplay",e.config&&e.config.labelDisplay||"top")("maxColumns",e.maxColumns)("rowClass",e.config&&e.config.rowClass)("sizeMap",e.sizeMap)("colAlignItems",e.config.colAlignItems),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.config.actions)}}function rW(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,iW,3,16,"div",1),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(2,1,e.vm$))}}let Sp=(()=>{class i{constructor(){this.gridButtons=[],this.mode="detail",this.maxColumns=4,this.sizeMap={handset:1,tablet:2,web:3,wide:4},this.fields=[],this.special=[]}ngOnInit(){if(!this.config)return;const e=this.config;this.vm$=e.record$.pipe((0,D.combineLatestWith)(e.mode$,e.fields$,e.maxColumns$,e.sizeMap$),(0,v.map)(([n,r,o,a,l])=>(this.mode=r,this.maxColumns=a,this.sizeMap=l,this.fields=this.getFields(n,o),{record:n,mode:r,fields:o,maxColumns:a})))}getFields(e,n){if(!e||!n||!e.fields)return[];const r=[];return n.forEach(o=>{e.fields[o]&&r.push(e.fields[o])}),r}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-grid"]],inputs:{config:"config"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"class",4,"ngIf"],[3,"actions","appendActions","colClass","fieldMode","fields","inputClass","labelClass","labelDisplay","maxColumns","rowClass","sizeMap","colAlignItems"],["class","float-right","field-grid-actions","",4,"ngIf"],["field-grid-actions","",1,"float-right"],[3,"buttonClass","config"]],template:function(n,r){1&n&&t.\u0275\u0275template(0,rW,3,3,"ng-container",0),2&n&&t.\u0275\u0275property("ngIf",r.config)},dependencies:[I.NgIf,Qd,Ar,I.AsyncPipe],encapsulation:2})}return i})(),Fa=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Oo,Lr]})}return i})(),JS=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,an,Jn,Vt,Lr,Mo]})}return i})(),xc=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,an,so,Oo,Tr,Vt,Fa,Jd,JS]})}return i})(),Mp=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,an,so,Oo,Tr,Vt,Fa,an,xc,Rr,Lr]})}return i})(),YS=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Jn,kr,Vt,Mp,xc]})}return i})(),Ec=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,De.FormsModule,sn,Vt,De.ReactiveFormsModule]})}return i})(),oW=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Dc,cS,me.NgbModule,Ot.RouterModule,sn,vt,Vt,De.FormsModule,YS,Ec,vp,Tr]})}return i})();function sW(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",7),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.first())}),t.\u0275\u0275element(1,"scrm-image",8),t.\u0275\u0275elementEnd()}}function aW(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",9),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.previous())}),t.\u0275\u0275element(1,"scrm-image",10),t.\u0275\u0275elementEnd()}}function lW(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",11),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.next())}),t.\u0275\u0275element(1,"scrm-image",12),t.\u0275\u0275elementEnd()}}function cW(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",13),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.last())}),t.\u0275\u0275element(1,"scrm-image",14),t.\u0275\u0275elementEnd()}}const uW=function(i,s){return{"hide-pagination-count":i,"centre-pagination":s}};function dW(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275template(1,sW,2,0,"button",2),t.\u0275\u0275template(2,aW,2,0,"button",3),t.\u0275\u0275elementStart(3,"span",4),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(5,lW,2,0,"button",5),t.\u0275\u0275template(6,cW,2,0,"button",6),t.\u0275\u0275elementEnd()),2&i){const e=s.ngIf,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.allowPagination),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.allowPagination),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction2(9,uW,n.displayResponsiveTable,!n.allowPagination)),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate4(" (",e.pageCount.pageFirst," - ",e.pageCount.pageLast," ",e.appStrings.LBL_LIST_OF||""," ",e.pageCount.total,") "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.allowPagination),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.allowPagination)}}let wp=(()=>{class i{constructor(e){this.languageStore=e,this.allowPagination=!0,this.appStrings$=this.languageStore.appStrings$,this.vm$=null}ngOnInit(){const e=this.state.getPaginationCount();this.vm$=this.appStrings$.pipe((0,D.combineLatestWith)(e),(0,v.map)(([n,r])=>({appStrings:n,pageCount:r})))}first(){this.state.changePage(S.PageSelection.FIRST)}previous(){this.state.changePage(S.PageSelection.PREVIOUS)}next(){this.state.changePage(S.PageSelection.NEXT)}last(){this.state.changePage(S.PageSelection.LAST)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-pagination"]],inputs:{allowPagination:"allowPagination",state:"state"},decls:2,vars:3,consts:[["class","bulk-action float-right",4,"ngIf"],[1,"bulk-action","float-right"],["class","pagination-button pagination-first","aria-label","Navigate to first page",3,"click",4,"ngIf"],["class","pagination-button pagination-previous","aria-label","Previous page",3,"click",4,"ngIf"],[1,"pagination-count",3,"ngClass"],["class","pagination-button pagination-next","aria-label","Navigate to last page",3,"click",4,"ngIf"],["class","pagination-button pagination-last","aria-label","Next page",3,"click",4,"ngIf"],["aria-label","Navigate to first page",1,"pagination-button","pagination-first",3,"click"],["image","paginate_first",1,"sicon-2x","pagination-icons"],["aria-label","Previous page",1,"pagination-button","pagination-previous",3,"click"],["image","paginate_previous",1,"sicon-2x","pagination-icons"],["aria-label","Navigate to last page",1,"pagination-button","pagination-next",3,"click"],["image","paginate_next",1,"sicon-2x","pagination-icons"],["aria-label","Next page",1,"pagination-button","pagination-last",3,"click"],["image","paginate_last",1,"sicon-2x","pagination-icons"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,dW,7,12,"div",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[I.NgClass,I.NgIf,ln,I.AsyncPipe],encapsulation:2})}return i})(),Dp=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,sn]})}return i})();class XS extends S.ActionHandler{shouldDisplay(s){return!0}}let eM=(()=>{class i extends XS{constructor(){super(),this.key="displayType",this.modes=["edit","detail","list","create","massupdate","filter"]}run(e,n){const r=e.record;if(!r||!e.field)return!0;const a=n.params&&n.params.activeOnFields||{},l=Object.keys(a),c=n.params&&n.params.activeOnAttributes||{},u=Object.keys(c);return!l.length&&!u.length||this.isActive(l,r,a,u,c)}isActive(e,n,r,o,a){let l=!0;return(0,ie.isEmpty)(r)||(l=this.areFieldsActive(e,n,r)),(0,ie.isEmpty)(a)||(l=l&&this.areAttributesActive(o,n,a)),l}areAttributesActive(e,n,r){return e.every(o=>{const l=n.fields&&n.fields[o]||null,c=r[o]&&Object.keys(r[o]);if(l&&c&&c.length)return c.some(u=>{const d=r[o][u],p=l.attributes&&l.attributes[u];if(d&&d.length&&p)return this.isValueActive(p,d)})})}areFieldsActive(e,n,r){return e.every(o=>{const l=n.fields&&n.fields[o]||null,c=r[o];return!(l&&c&&c.length)||this.isValueActive(l,c)})}isValueActive(e,n){let r=!1;return e.valueList&&e.valueList.length?(e.valueList.some(o=>n.some(a=>{if(a===o)return r=!0,!0})),r):((0,S.isVoid)(e.value)||n.some(o=>{o===e.value&&(r=!0)}),r)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Ic=(()=>{class i extends Ci{constructor(e){super(),e.modes.forEach(n=>this.actions[n][e.key]=e)}runLogic(e,n,r,o,a){let l=!0;const c=Object.values(r.meta.displayLogic).filter(m=>{const g=m.modes??[];return!(!g.length||!g.includes(a))});if(!c||!c.length)return l;let u=r.meta.display??"show",d="hide";"hide"===u&&(d="show");const p={panel:r,record:o,field:n,module:o.module};c.some(m=>{const g=this.buildActionData(m,p);return this.actions[a][m.key].run(g,m)})&&(u=d),l="show"===u,r.displayState.next(l)}buildActionData(e,n){return{field:n.field,record:n&&n.record||null,panel:n.panel||null}}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(eM))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function pW(i,s){1&i&&t.\u0275\u0275projection(0)}function fW(i,s){1&i&&t.\u0275\u0275projection(0,1)}const mW=[[["","popup-content",""]],[["","popup-title",""]]],hW=["[popup-content]","[popup-title]"];let tM=(()=>{class i{constructor(){this.klass="line-action-item line-action float-right",this.buttonConfig=(0,t.signal)({})}ngOnInit(){this.buttonConfig.update(()=>this.getButtonConfig())}getButtonConfig(){return{icon:this.icon,klass:this.klass}}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-popup-button"]],inputs:{icon:"icon",klass:"klass"},ngContentSelectors:hW,decls:5,vars:6,consts:[["popContent",""],["popTitle",""],[3,"config","autoClose","ngbPopover","popoverTitle","popoverClass","placement"]],template:function(n,r){if(1&n&&(t.\u0275\u0275projectionDef(mW),t.\u0275\u0275template(0,pW,1,0,"ng-template",null,0,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275template(2,fW,1,0,"ng-template",null,1,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275element(4,"scrm-button",2)),2&n){const o=t.\u0275\u0275reference(1),a=t.\u0275\u0275reference(3);t.\u0275\u0275advance(4),t.\u0275\u0275property("config",r.buttonConfig())("autoClose","outside")("ngbPopover",o)("popoverTitle",a)("popoverClass","popover-wrapper")("placement","right")}},dependencies:[Un,me.NgbPopover],encapsulation:2})}return i})(),nM=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,an,me.NgbPopoverModule]})}return i})();function gW(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",4)(1,"div",5),t.\u0275\u0275element(2,"scrm-label",6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",7),t.\u0275\u0275element(4,"scrm-field",8),t.\u0275\u0275elementEnd()()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("labelKey",e.label)("module",n.record.module),t.\u0275\u0275advance(2),t.\u0275\u0275property("mode","list")("field",n.getField(e,n.record))("type",e.type)("record",n.record)}}function vW(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",2),t.\u0275\u0275template(1,gW,5,6,"div",3),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.columns)}}let iM=(()=>{class i{constructor(e){this.fieldManager=e}getField(e,n){return e&&n?this.fieldManager.addField(n,e):null}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(hi))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-details-popup-button"]],inputs:{record:"record",columns:"columns"},decls:2,vars:2,consts:[[3,"icon"],["popup-content","","class","container container-popover scrollbar-thin",4,"ngIf"],["popup-content","",1,"container","container-popover","scrollbar-thin"],["class","row py-1",4,"ngFor","ngForOf"],[1,"row","py-1"],[1,"col","font-weight-bold","text-muted"],[3,"labelKey","module"],[1,"col"],[3,"mode","field","type","record"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"scrm-popup-button",0),t.\u0275\u0275template(1,vW,2,1,"div",1),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275property("icon","dots-vertical"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.columns))},dependencies:[I.NgForOf,I.NgIf,tM,hr,qt],encapsulation:2,changeDetection:0})}return i})(),rM=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,nM,Jn,Vt]})}return i})(),oM=(()=>{class i{transform(e){return(0,D.of)(e)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275pipe=t.\u0275\u0275definePipe({name:"toObservable",type:i,pure:!0})}return i})();function _W(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",5)(1,"div",6)(2,"scrm-panel",7),t.\u0275\u0275pipe(3,"toObservable"),t.\u0275\u0275elementStart(4,"div",8),t.\u0275\u0275element(5,"scrm-field-layout",9),t.\u0275\u0275elementEnd()()()()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(2),t.\u0275\u0275property("title",e.label)("isCollapsed$",t.\u0275\u0275pipeBind1(3,6,e.isCollapsed)),t.\u0275\u0275advance(2),t.\u0275\u0275classMapInterpolate1("panel-",e.key,""),t.\u0275\u0275advance(1),t.\u0275\u0275property("dataSource",n.getLayoutDataSource(e))}}function yW(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",3),t.\u0275\u0275template(1,_W,6,8,"div",4),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.panels)}}function bW(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"scrm-field-layout",9),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(3).$implicit,n=t.\u0275\u0275nextContext(3);t.\u0275\u0275classMapInterpolate1("tab-",e.key,""),t.\u0275\u0275advance(1),t.\u0275\u0275property("dataSource",n.getLayoutDataSource(e))}}function CW(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"li",16)(1,"a",17),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(3,bW,2,4,"ng-template",18),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2),r=e.$implicit;t.\u0275\u0275property("ngbNavItem",e.index+1),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(r.label)}}function SW(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,CW,4,2,"li",15),t.\u0275\u0275elementContainerEnd()),2&i){const e=s.ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!!e)}}function MW(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,SW,2,1,"ng-container",0),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementContainerEnd()),2&i){const e=s.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(2,1,e.display$))}}function wW(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",6)(1,"scrm-panel",7),t.\u0275\u0275pipe(2,"toObservable"),t.\u0275\u0275elementStart(3,"div",8),t.\u0275\u0275element(4,"scrm-field-layout",9),t.\u0275\u0275elementEnd()()()),2&i){const e=t.\u0275\u0275nextContext(3).$implicit,n=t.\u0275\u0275nextContext(5);t.\u0275\u0275advance(1),t.\u0275\u0275property("title",e.label)("isCollapsed$",t.\u0275\u0275pipeBind1(2,6,e.isCollapsed)),t.\u0275\u0275advance(2),t.\u0275\u0275classMapInterpolate1("panel-",e.key,""),t.\u0275\u0275advance(1),t.\u0275\u0275property("dataSource",n.getLayoutDataSource(e))}}function DW(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",20),t.\u0275\u0275template(1,wW,5,8,"div",21),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(3).index,n=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e==n.active-1)}}function xW(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,DW,2,1,"div",19),t.\u0275\u0275elementContainerEnd()),2&i){const e=s.ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!!e)}}function EW(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,xW,2,1,"ng-container",0),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(2,1,e.display$))}}function IW(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,EW,3,3,"div",13),t.\u0275\u0275elementContainerEnd()),2&i){const e=s.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.subPanels)}}function FW(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,IW,2,1,"ng-container",13),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.panels)}}function AW(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",10)(1,"ul",11,12),t.\u0275\u0275listener("activeIdChange",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.active=r)}),t.\u0275\u0275template(3,MW,3,3,"ng-container",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(4,"div",14),t.\u0275\u0275template(5,FW,2,1,"ng-container",0),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275reference(2),n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("activeId",n.active),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",n.panels),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngbNavOutlet",e),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.panelsInPrevTab&&n.panelsInPrevTab.length)}}function TW(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,yW,2,1,"div",1),t.\u0275\u0275template(2,AW,6,4,"div",2),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.config&&"panels"===e.config.layout),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.config&&"tabs"===e.config.layout)}}let xp=(()=>{class i{constructor(e){this.language=e,this.config={},this.panelsInPrevTab=[],this.active=1,this.subs=[]}ngOnInit(){this.subs.push(this.dataSource.getDisplayConfig().subscribe(e=>{this.config={...e}})),this.subs.push(this.dataSource.getPanels().subscribe(e=>{this.panels=[...e],"panels"===this?.config?.layout?this.updatePanelCollapseState():this.updatePanelsInTabs()})),this.subs.push(this.dataSource.getRecord().subscribe(e=>{this.record={...e},this.fields=e.fields}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}updatePanelsInTabs(){let e=[],n="";const r=this.buildPanelMap(),o=this.mapTabDefs();Object.keys(o).forEach(a=>{if((0,S.isTrue)(o[a].newTab))e=[...e,r[a]],n=a;else{const c=o[n],u=r[n];this.panelsInPrevTab.includes(u)||this.panelsInPrevTab.push(u);const d=r[a];(0,S.isTrue)(c?.newTab)&&this.panelsInPrevTab.length>0&&this.addToPrevTab(d)}}),this.panels=e}addToPrevTab(e){const n=this.panelsInPrevTab.length-1;(this.panelsInPrevTab[n]?.subPanels??null)||(this.panelsInPrevTab[n].subPanels=[]),this.panelsInPrevTab[n].subPanels.push(e)}updatePanelCollapseState(){const e=this.buildPanelMap();this.panels.forEach(n=>{const r=n.key.toUpperCase();e[r]&&(n.isCollapsed=e[r].isCollapsed)})}buildPanelMap(){const e={};return this.panels.forEach(n=>{let r=!1;n.label=n?.label?.toUpperCase()??"";const o=n?.key?.toUpperCase()??"";"collapsed"===n.meta.panelDefault&&(r=!0),n.isCollapsed=r,e[o]=n}),e}mapTabDefs(){const e={};return Object.keys(this?.config?.tabDefs??{}).forEach(n=>{e[n.toUpperCase()]=this?.config?.tabDefs[n]}),e}getLayoutDataSource(e){return{inlineEdit:!0,getConfig:()=>this.dataSource.getDisplayConfig().pipe((0,v.map)(n=>({mode:n.mode,maxColumns:n.maxColumns}))),getLayout:()=>(0,D.of)(e).pipe((0,v.shareReplay)(1)),getFields:()=>this.dataSource.getRecord().pipe((0,v.map)(n=>n.fields)),getRecord:()=>this.dataSource.getRecord(),getEditAction:()=>this.dataSource.getEditAction()}}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-content"]],inputs:{dataSource:"dataSource"},decls:1,vars:1,consts:[[4,"ngIf"],["class","record-content panel-layout container-fluid pl-0 pr-0",4,"ngIf"],["class","record-content tabs-layout container-fluid pl-0 pr-0",4,"ngIf"],[1,"record-content","panel-layout","container-fluid","pl-0","pr-0"],["class","row no-gutters mb-3",4,"ngFor","ngForOf"],[1,"row","no-gutters","mb-3"],[1,"col"],["mode","collapsible",3,"title","isCollapsed$"],["panel-body",""],[3,"dataSource"],[1,"record-content","tabs-layout","container-fluid","pl-0","pr-0"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[4,"ngFor","ngForOf"],[1,"p-2","pt-3","rounded-right","rounded-bottom",3,"ngbNavOutlet"],["class","tab",3,"ngbNavItem",4,"ngIf"],[1,"tab",3,"ngbNavItem"],["ngbNavLink","",1,"tab-link"],["ngbNavContent",""],["class","row no-gutters mt-3",4,"ngIf"],[1,"row","no-gutters","mt-3"],["class","col",4,"ngIf"]],template:function(n,r){1&n&&t.\u0275\u0275template(0,TW,3,2,"ng-container",0),2&n&&t.\u0275\u0275property("ngIf",r.dataSource)},dependencies:[I.NgForOf,I.NgIf,Bs,me.NgbNavContent,me.NgbNav,me.NgbNavItem,me.NgbNavItemRole,me.NgbNavLink,me.NgbNavLinkBase,me.NgbNavOutlet,PC,I.AsyncPipe,oM],encapsulation:2})}return i})(),sM=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})(),Ep=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,so,me.NgbModule,Jd,sM]})}return i})(),aM=(()=>{class i{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-content-skeleton"]],decls:138,vars:0,consts:[[1,"record-content","tabs-layout","container-fluid","pl-0","pr-0","record-content-skeleton"],[1,"nav-tabs","nav"],[1,"tab","nav-item"],["href","",1,"tab-link","nav-link","active","pl-5","pr-5","h-100","box-loading"],["href","",1,"tab-link","nav-link","pl-5","pr-5","h-100","box-loading"],[1,"p-2","pt-3","rounded-right","rounded-bottom","tab-content"],[1,"tab-pane","fade","active","show"],[1,""],[1,"detail","field-layout"],[1,"form-row","align-items-center","pt-1","pb-1"],[1,"field-column-bordered","col","form-group","m-0","pl-3","pb-2","pr-3"],[1,"label-container"],[1,"col-form-label-sm","mb-0","pb-3","pl-5","pr-5","h-100","rounded","box-loading"],[1,"d-flex"],[1,"flex-grow-1","text-break","rounded","box-loading","skeleton-field-content"],["type","button",1,"record-action-button"],["image","pencil"],[1,"field-separation","mt-2"],[1,"col","form-group","m-0","pl-3","pb-2","pr-3"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",0)(1,"ul",1)(2,"li",2),t.\u0275\u0275element(3,"a",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"li",2),t.\u0275\u0275element(5,"a",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"li",2),t.\u0275\u0275element(7,"a",4),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(8,"div",5)(9,"div",6)(10,"div",7)(11,"form",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"strong"),t.\u0275\u0275element(16,"label",12),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(17,"div",13),t.\u0275\u0275element(18,"div",14),t.\u0275\u0275elementStart(19,"div")(20,"button",15),t.\u0275\u0275element(21,"scrm-image",16),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275element(22,"div",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(23,"div",18)(24,"div",11)(25,"strong"),t.\u0275\u0275element(26,"label",12),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(27,"div",13),t.\u0275\u0275element(28,"div",14),t.\u0275\u0275elementStart(29,"div")(30,"button",15),t.\u0275\u0275element(31,"scrm-image",16),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275element(32,"div",17),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(33,"div",9)(34,"div",10)(35,"div",11)(36,"strong"),t.\u0275\u0275element(37,"label",12),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(38,"div",13),t.\u0275\u0275element(39,"div",14),t.\u0275\u0275elementStart(40,"div")(41,"button",15),t.\u0275\u0275element(42,"scrm-image",16),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275element(43,"div",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(44,"div",18)(45,"div",11)(46,"strong"),t.\u0275\u0275element(47,"label",12),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(48,"div",13),t.\u0275\u0275element(49,"div",14),t.\u0275\u0275elementStart(50,"div")(51,"button",15),t.\u0275\u0275element(52,"scrm-image",16),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275element(53,"div",17),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(54,"div",9)(55,"div",10)(56,"div",11)(57,"strong"),t.\u0275\u0275element(58,"label",12),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(59,"div",13),t.\u0275\u0275element(60,"div",14),t.\u0275\u0275elementStart(61,"div")(62,"button",15),t.\u0275\u0275element(63,"scrm-image",16),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275element(64,"div",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(65,"div",18)(66,"div",11)(67,"strong"),t.\u0275\u0275element(68,"label",12),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(69,"div",13),t.\u0275\u0275element(70,"div",14),t.\u0275\u0275elementStart(71,"div")(72,"button",15),t.\u0275\u0275element(73,"scrm-image",16),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275element(74,"div",17),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(75,"div",9)(76,"div",10)(77,"div",11)(78,"strong"),t.\u0275\u0275element(79,"label",12),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(80,"div",13),t.\u0275\u0275element(81,"div",14),t.\u0275\u0275elementStart(82,"div")(83,"button",15),t.\u0275\u0275element(84,"scrm-image",16),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275element(85,"div",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(86,"div",18)(87,"div",11)(88,"strong"),t.\u0275\u0275element(89,"label",12),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(90,"div",13),t.\u0275\u0275element(91,"div",14),t.\u0275\u0275elementStart(92,"div")(93,"button",15),t.\u0275\u0275element(94,"scrm-image",16),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275element(95,"div",17),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(96,"div",9)(97,"div",10)(98,"div",11)(99,"strong"),t.\u0275\u0275element(100,"label",12),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(101,"div",13),t.\u0275\u0275element(102,"div",14),t.\u0275\u0275elementStart(103,"div")(104,"button",15),t.\u0275\u0275element(105,"scrm-image",16),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275element(106,"div",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(107,"div",18)(108,"div",11)(109,"strong"),t.\u0275\u0275element(110,"label",12),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(111,"div",13),t.\u0275\u0275element(112,"div",14),t.\u0275\u0275elementStart(113,"div")(114,"button",15),t.\u0275\u0275element(115,"scrm-image",16),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275element(116,"div",17),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(117,"div",9)(118,"div",10)(119,"div",11)(120,"strong"),t.\u0275\u0275element(121,"label",12),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(122,"div",13),t.\u0275\u0275element(123,"div",14),t.\u0275\u0275elementStart(124,"div")(125,"button",15),t.\u0275\u0275element(126,"scrm-image",16),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275element(127,"div",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(128,"div",18)(129,"div",11)(130,"strong"),t.\u0275\u0275element(131,"label",12),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(132,"div",13),t.\u0275\u0275element(133,"div",14),t.\u0275\u0275elementStart(134,"div")(135,"button",15),t.\u0275\u0275element(136,"scrm-image",16),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275element(137,"div",17),t.\u0275\u0275elementEnd()()()()()()())},dependencies:[ln],encapsulation:2})}return i})(),lM=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,sn]})}return i})();function OW(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"li",6),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e).$implicit,a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.navigateRoute(null==o||null==o.link?null:o.link.route))}),t.\u0275\u0275element(1,"scrm-image",7),t.\u0275\u0275elementStart(2,"a",8),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()()}if(2&i){const e=s.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("image",e.icon),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.link.label)}}function LW(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",4),t.\u0275\u0275template(2,OW,4,2,"li",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.menuItems())}}function NW(i,s){1&i&&(t.\u0275\u0275elementStart(0,"div",9),t.\u0275\u0275element(1,"scrm-label",10),t.\u0275\u0275elementEnd()),2&i&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("labelKey","LBL_MODULE_NOT_FOUND"))}let cM=(()=>{class i{constructor(e,n){this.router=e,this.appStateStore=n,this.menuItems=(0,t.signal)([])}ngOnInit(){}navigateRoute(e){this.router.navigate([e]).then(),this.appStateStore.toggleSidebar()}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ot.Router),t.\u0275\u0275directiveInject(Ht))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-mobile-menu"]],inputs:{menuItems:"menuItems"},standalone:!0,features:[t.\u0275\u0275StandaloneFeature],decls:4,vars:2,consts:[[1,"mobile-menu-container"],[4,"ngIf"],[1,"border-0"],["class","d-flex justify-content-center",4,"ngIf"],[1,"mobile-menu-items","scrollbar-thin"],["class","d-flex align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center",3,"click"],[1,"sicon","mobile-nav-icon","pl-3",3,"image"],[1,"flex-grow-1","mobile-nav-link","px-3","py-2","mobile-menu-item-label"],[1,"d-flex","justify-content-center"],[3,"labelKey"]],template:function(n,r){if(1&n&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275template(1,LW,3,1,"ng-container",1),t.\u0275\u0275elementStart(2,"li",2),t.\u0275\u0275template(3,NW,2,1,"div",3),t.\u0275\u0275elementEnd()()),2&n){let o;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.menuItems()&&r.menuItems().length),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!r.menuItems()||!(null!=(o=r.menuItems())&&o.length))}},dependencies:[I.CommonModule,I.NgForOf,I.NgIf,Ot.RouterModule,Ec,sn,ln,Vt,qt],encapsulation:2})}return i})();const RW=["searchBarComponent"];function BW(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",3)(1,"div",4)(2,"button",5),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.toggleSidebar())}),t.\u0275\u0275element(3,"scrm-image",6),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"div",7)(5,"scrm-search-bar",8,9),t.\u0275\u0275listener("searchExpression",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.search(r))}),t.\u0275\u0275elementEnd()()()}2&i&&(t.\u0275\u0275advance(5),t.\u0275\u0275property("labelKey","LBL_FILTER_MODULES")("klass","search-bar-mobile-menu")("searchTrigger","input"))}function kW(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-mobile-menu",12),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("menuItems",e.displayedItems)}}function jW(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",10),t.\u0275\u0275template(1,kW,2,1,"ng-container",11),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.displayedItems())}}let PW=(()=>{class i{constructor(e,n,r,o,a){this.appStateStore=e,this.navigationStore=n,this.moduleNameMapper=r,this.moduleNavigation=o,this.language=a,this.isSidebarVisible=!1,this.menuItems=[],this.displayedItems=(0,t.signal)([]),this.subs=[]}ngOnInit(){this.subs.push(this.navigationStore.vm$.pipe((0,D.combineLatestWith)(this.language.vm$),(0,v.map)(([e,n])=>{this.setMenuItems(e.modules,e.tabs,n.appListStrings)})).subscribe()),this.subs.push(this.appStateStore.isSidebarVisible$.subscribe(e=>{this.isSidebarVisible=e,this.isSidebarVisible||this.clearFilter()}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}setMenuItems(e,n,r){const o=[];n.forEach(a=>{const l=e[a],c=this.moduleNavigation.getModuleRoute(l),u={link:{label:this.moduleNavigation.getModuleLabel(l,r),url:c.url,route:c.route,params:null},icon:this.moduleNameMapper.toLegacy(l?.name)??null,submenu:[],module:l?.name??null};o.push(u)}),this.menuItems=[...o],this.displayedItems.set([...o])}toggleSidebar(){this.appStateStore.toggleSidebar()}closeSidebar(){this.clearFilter(),this.appStateStore.closeSidebar()}search(e){this.displayedItems.set([]),e.length&&""!==e.trim()?this.displayedItems.set(this.menuItems.filter(n=>n?.link?.label.toLowerCase().includes(e.toLowerCase()))??[]):this.resetMenuItems()}resetMenuItems(){this.displayedItems.set([...this.menuItems])}clearFilter(){this.resetMenuItems(),this?.searchBarComponent?.clearSearchTerm()}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ht),t.\u0275\u0275directiveInject(Ai),t.\u0275\u0275directiveInject(En),t.\u0275\u0275directiveInject(In),t.\u0275\u0275directiveInject(Ue))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-sidebar"]],viewQuery:function(n,r){if(1&n&&t.\u0275\u0275viewQuery(RW,5),2&n){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.searchBarComponent=o.first)}},standalone:!0,features:[t.\u0275\u0275StandaloneFeature],decls:3,vars:2,consts:[[3,"visible","showCloseIcon","visibleChange","onHide"],["pTemplate","header"],["pTemplate","content"],[1,"d-flex","justify-content-start"],[1,"flex-shrink-1"],["type","button",1,"navbar-toggler",3,"click"],["image","hamburger",1,"responsive-menu-toggler"],[1,"d-flex","flex-grow-1","justify-content-center"],[3,"labelKey","klass","searchTrigger","searchExpression"],["searchBarComponent",""],[1,"sidebar-container"],[4,"ngIf"],[3,"menuItems"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"p-sidebar",0),t.\u0275\u0275listener("visibleChange",function(a){return r.isSidebarVisible=a})("onHide",function(){return r.closeSidebar()}),t.\u0275\u0275template(1,BW,7,3,"ng-template",1),t.\u0275\u0275template(2,jW,2,1,"ng-template",2),t.\u0275\u0275elementEnd()),2&n&&t.\u0275\u0275property("visible",r.isSidebarVisible)("showCloseIcon",!1)},dependencies:[I.CommonModule,I.NgIf,O8,T8,ki,sn,ln,cM,Ec,pp],encapsulation:2})}return i})();function VW(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"a",1),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e).ngIf,a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.changeSorting(o))}),t.\u0275\u0275element(2,"scrm-image",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&i){const e=s.ngIf,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("image",n.getStatusIcon(e))}}let uM=(()=>{class i{constructor(){this.statusIcons={NONE:"sort",ASC:"sort_ascend",DESC:"sort_descend"},this.nextDirection={NONE:S.SortDirection.DESC,ASC:S.SortDirection.NONE,DESC:S.SortDirection.ASC}}ngOnInit(){this.direction$=this.state.getSortDirection()}getStatusIcon(e){return this.statusIcons[e]}changeSorting(e){this.state.changeSortDirection(this.nextDirection[e])}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-sort-button"]],inputs:{state:"state"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"btn","btn-sm","p-0","sort-button",3,"click"],[1,"sort-icon","sicon",3,"image"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,VW,3,1,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.direction$))},dependencies:[I.NgIf,ln,I.AsyncPipe],encapsulation:2})}return i})(),dM=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,sn]})}return i})(),Ip=(()=>{class i extends sc{constructor(e){super(e),this.apollo=e}get(e,n,r,o){return super.get(e,n,r,o)}mapRecord(e){if(!e)return e;e.key=e.id||e.attributes&&e.attributes.id||"";const n=e.attributes&&e.attributes&&e.attributes.contents||null;if(n){const r={...e};return r.criteria=n,r}return e}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(W.Apollo))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),pM=(()=>{class i extends Ld{constructor(e,n,r,o,a,l,c,u){super(e,n,r,o,a,u),this.listGQL=e,this.configs=n,this.preferences=r,this.language=o,this.message=a,this.auth=l,this.moduleNameMapper=c,this.localStorageService=u,this.moduleName="saved-search",this.filterFields={module:"search_module",user:"assigned_user_id"}}init(e){const n=super.init(this.moduleName,!1);return this.initCriteria(e),n}load(e=!0){return super.load(e)}getFilters(){return this.records}addFilter(e){let n=!0;const o=[];this.records.forEach(a=>{if(a.id===e.id)return o.push(e),void(n=!1);o.push(a)}),n&&o.push(e),this.updateState({...this.internalState,records:o})}removeFilter(e){if(!e||!e.id)return;const r=[];this.records.forEach(o=>{o.id!==e.id&&r.push(o)}),this.updateState({...this.internalState,records:r})}initCriteria(e){const n=this.criteria;n.filters[this.filterFields.module]={field:this.filterFields.module,operator:"=",values:[this.moduleNameMapper.toLegacy(e)]},n.filters[this.filterFields.user]={field:this.filterFields.user,operator:"=",values:[this.auth.getCurrentUser().id]},this.updateSearchCriteria(n,!1)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ip),t.\u0275\u0275inject(ht),t.\u0275\u0275inject(Xt),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(ci),t.\u0275\u0275inject(En),t.\u0275\u0275inject(bi))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Fc=(()=>{class i{constructor(e,n,r,o,a,l,c,u){this.listGQL=e,this.configs=n,this.preferences=r,this.language=o,this.message=a,this.auth=l,this.moduleNameMapper=c,this.localStorageService=u}create(){return new pM(this.listGQL,this.configs,this.preferences,this.language,this.message,this.auth,this.moduleNameMapper,this.localStorageService)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ip),t.\u0275\u0275inject(ht),t.\u0275\u0275inject(Xt),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(ci),t.\u0275\u0275inject(En),t.\u0275\u0275inject(bi))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Ps=(()=>{class i{constructor(e,n,r,o,a,l){this.listStoreFactory=e,this.languageStore=n,this.statisticsStoreFactory=r,this.filterListStoreFactory=o,this.meta=a,this.preferences=l,this.show=!1,this.showFilter=!1,this.filterApplied=!1,this.preferenceKey=null,this.subs=[],this.recordList=e.create(),this.filterList=this.filterListStoreFactory.create(),this.criteria$=this.recordList.criteria$,this.statistics={},this.metadataState=new D.BehaviorSubject({}),this.metadata$=this.metadataState.asObservable(),this.loading$=this.recordList.loading$}getTitle(){let e=this.languageStore.getFieldLabel(this.metadata.title_key,this.parentModule);if(!e){const n=this.languageStore.getAppListString("moduleList");e=n&&n[this.metadata.title_key]||""}return e}getIcon(){return this.metadata.icon}clear(){this.metadataState.unsubscribe(),this.metadataState=null,this.recordList.clear(),this.recordList=null,this.subs.forEach(e=>e.unsubscribe())}clearAuthBased(){this.recordList.clearAuthBased()}searchFilter(){this.filterApplied=!0,this.showFilter=!1}init(e,n,r,o=null){this.parentModule=e,this.parentId=n,this.metadata=r,this.metadataState.next(this.metadata);const a=this.meta.getMetadata(r.module).pipe((0,v.tap)(()=>{this.recordList.load().pipe((0,v.take)(1)).subscribe()}));this.searchMetadata$=a.pipe((0,v.map)(c=>c.search));const l=this.initSearchCriteria(this.parentModule,this.parentId,r);this.recordList.init(r.module,!1,"list_max_entries_per_subpanel",l),this.initStatistics(r,e,n),o&&(this.parentRecord$=o,this.parentRecord$.subscribe(c=>this.parentRecord=c))}setFilters(e,n=!0){this.recordList.setFilters(e,n,null)}isAnyFilterApplied(){return this.hasActiveFilter()||!this.areAllCurrentCriteriaFilterEmpty()}hasActiveFilter(){const e=this.recordList.criteria;if(e)return!1;const n=Object.keys(e)??[];if(!n||!n.length)return!1;if(n.length>1)return!0;const r=e[n[0]];return r.key&&""!==r.key&&"default"!==r.key}areAllCurrentCriteriaFilterEmpty(){return Object.keys(this.getFilters()??{}).every(e=>""===this.getFilters()[e].operator)}getFilters(){return this.recordList?.criteria?.filters??{}}load(e=!0){return this.recordList.load(e)}getStatistic(e){return this.statistics[e]?this.statistics[e]:null}resetFilters(e=!0){this.recordList.resetFilters(e)}clearFilter(){this.resetFilters(),this.filterApplied=!1,this.showFilter=!1}initSearchCriteria(e,n,r){const o=r?.sort_order??"desc",a=r?.sort_by??"";return{key:"default",module:"saved-search",attributes:{contents:""},criteria:{name:"default",filters:{},preset:{type:"subpanel",params:{subpanel:r?.name,parentModule:e,parentId:n}},sortOrder:o,orderBy:a}}}loadStatistics(e,n=!0){return this.statistics[e]?this.statistics[e].load(n):null}loadAllStatistics(e=!0){if(!this.statistics||!Object.keys(this.statistics).length)return null;const n=[];return Object.keys(this.statistics).forEach(r=>{this.statistics[r]&&n.push(this.loadStatistics(r,e))}),(0,D.forkJoin)(n)}shouldBatchStatistic(){const e=this.metadata||{};return!(e.insightWidget&&e.insightWidget.batch&&!1===e.insightWidget.batch)}setStatisticsLoading(e,n){this.statistics[e]&&this.statistics[e].setLoading(n)}setAllStatisticsLoading(e){!this.statistics||!Object.keys(this.statistics).length||Object.keys(this.statistics).forEach(n=>{this.statistics[n]&&this.setStatisticsLoading(n,e)})}setStatistics(e,n,r=!1){this.statistics[e]&&this.statistics[e].setStatistic(e,n,r)}getStatisticQuery(e){return this.statistics[e].getQuery()}getAllStatisticQuery(){if(!this.statistics||!Object.keys(this.statistics).length)return{};const e={};return Object.keys(this.statistics).forEach(n=>{this.statistics[n]&&(e[n]=this.getStatisticQuery(n))}),e}getWidgetLayout(){const e=this.metadata;if(!(e&&e.insightWidget&&e.insightWidget.options&&e.insightWidget.options.insightWidget))return{rows:[]};const n=(0,S.deepClone)(e.insightWidget.options.insightWidget);return(!n.rows||!n.rows.length)&&(n.rows={}),n}toggleFilter(){return this.showFilter=!this.showFilter}initStatistics(e,n,r){this.getWidgetLayout().rows.forEach(a=>{!a.cols||!a.cols.length||a.cols.forEach(l=>{!l.statistic||"string"!=typeof l.statistic||(this.initStatistic(l.statistic,e,n,r),l.store=this.statistics[l.statistic])})})}initStatistic(e,n,r,o){this.statistics[e]=this.statisticsStoreFactory.create(),this.statistics[e].init(n.module,{key:e,context:{module:r,id:o},params:{subpanel:n.name}},!1)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Qi),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(Ca),t.\u0275\u0275inject(Fc),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Xt))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Fp=(()=>{class i{constructor(e,n,r,o,a,l){this.listStoreFactory=e,this.languageStore=n,this.statisticsStoreFactory=r,this.filterListStoreFactory=o,this.meta=a,this.preferences=l}create(){return new Ps(this.listStoreFactory,this.languageStore,this.statisticsStoreFactory,this.filterListStoreFactory,this.meta,this.preferences)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Qi),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(Ca),t.\u0275\u0275inject(Fc),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Xt))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Ap=(()=>{class i{constructor(e,n,r,o,a){this.appStateStore=e,this.languageStore=n,this.navigationStore=r,this.moduleNavigation=o,this.metadataStore=a,this.appState$=this.appStateStore.vm$,this.language$=this.languageStore.vm$,this.navigation$=this.navigationStore.vm$,this.module$=this.appState$.pipe((0,D.combineLatestWith)(this.navigation$),(0,v.map)(([l,c])=>this.moduleNavigation.getModuleInfo(l.module,c))),this.appData$=this.appState$.pipe((0,D.combineLatestWith)(this.module$,this.language$,this.navigation$),(0,v.map)(([l,c,u,d])=>(this.appData={appState:l,module:c,language:u,navigation:d},this.appData))),this.metadata$=a.metadata$.pipe((0,v.tap)(l=>{this.metadata=l}))}clear(){}clearAuthBased(){this.clear()}get appState(){return this.appData.appState?this.appData.appState:{}}get module(){return this.appData.module}get language(){return this.appData.language?this.appData.language:{appStrings:{},appListStrings:{},modStrings:{},languageKey:""}}get appStrings(){return this.language.appStrings}get appListStrings(){return this.language.appListStrings}get modStrings(){return this.language.modStrings}get navigation(){return this.appData.navigation}get searchMeta(){return this.metadata.search?this.metadata.search:{layout:{basic:{},advanced:{}}}}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ht),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(Ai),t.\u0275\u0275inject(In),t.\u0275\u0275inject(bt))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Tp=(()=>{class i{constructor(e){this.fetchGQL=e}fetch(e,n){return this.fetchGQL.fetch(e,n)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(gr))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const fM={module:"",recordID:"",loading:!1,widgets:!1,showSidebarWidgets:!1,showTopWidget:!1,showSubpanels:!1,mode:"detail",params:{returnModule:"",returnId:"",returnAction:""}};let Mi=(()=>{class i extends Ap{constructor(e,n,r,o,a,l,c,u,d,p,f,m,g,h,_){super(r,o,a,l,c),this.recordFetchGQL=e,this.recordSaveGQL=n,this.appStateStore=r,this.languageStore=o,this.navigationStore=a,this.moduleNavigation=l,this.metadataStore=c,this.localStorage=u,this.message=d,this.subpanelFactory=p,this.recordManager=f,this.statisticsBatch=m,this.recordStoreFactory=g,this.preferences=h,this.panelLogicManager=_,this.panels=[],this.cache$=null,this.internalState=(0,S.deepClone)(fM),this.store=new D.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.subpanelReloadSubject=new D.BehaviorSubject({}),this.subpanelReloadSub=[],this.subs=[],this.fieldSubs=[],this.panelsSubject=new D.BehaviorSubject(this.panels),this.panels$=this.panelsSubject.asObservable(),this.recordStore=g.create(this.getViewFieldsObservable()),this.record$=this.recordStore.state$.pipe((0,v.distinctUntilChanged)()),this.stagingRecord$=this.recordStore.staging$.pipe((0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(M=>M.loading)),this.widgets$=this.state$.pipe((0,v.map)(M=>M.widgets)),this.showSidebarWidgets$=this.state$.pipe((0,v.map)(M=>M.showSidebarWidgets)),this.showTopWidget$=this.state$.pipe((0,v.map)(M=>M.showTopWidget)),this.showSubpanels$=this.state$.pipe((0,v.map)(M=>M.showSubpanels)),this.mode$=this.state$.pipe((0,v.map)(M=>M.mode)),this.subpanelReload$=this.subpanelReloadSubject.asObservable();const b=this.record$.pipe((0,D.combineLatestWith)(this.loading$),(0,v.map)(([M,y])=>(this.data={record:M,loading:y},this.data)));this.vm$=b.pipe((0,D.combineLatestWith)(this.appData$,this.metadata$),(0,v.map)(([M,y,w])=>(this.vm={data:M,appData:y,metadata:w},this.vm))),this.subpanelsState=new D.BehaviorSubject({}),this.subpanels$=this.subpanelsState.asObservable(),this.viewContext$=this.record$.pipe((0,v.map)(()=>this.getViewContext())),this.initPanels()}get widgets(){return this.internalState.widgets}set widgets(e){this.updateState({...this.internalState,widgets:e})}get showSidebarWidgets(){return this.internalState.showSidebarWidgets}set showSidebarWidgets(e){this.savePreference(this.getModuleName(),"show-sidebar-widgets",e),this.updateState({...this.internalState,showSidebarWidgets:e})}get showTopWidget(){return this.internalState.showTopWidget}set showTopWidget(e){this.updateState({...this.internalState,showTopWidget:e})}get showSubpanels(){return this.internalState.showTopWidget}set showSubpanels(e){this.updateState({...this.internalState,showSubpanels:e})}get params(){return this.internalState.params||{}}set params(e){this.updateState({...this.internalState,params:e})}getModuleName(){return this.internalState.module}getRecordId(){return this.internalState.recordID}getViewContext(){return{module:this.getModuleName(),id:this.getRecordId(),record:this.getBaseRecord()}}getSubpanels(){return this.subpanels}destroy(){this.clear()}init(e,n,r="detail",o={}){return this.internalState.module=e,this.internalState.recordID=n,this.setMode(r),this.initSubpanels(e,n),this.calculateShowWidgets(),this.load().pipe((0,v.tap)(()=>{this.showTopWidget=!0,this.loadSubpanelStatistics(e),this.parseParams(o)}))}clear(){this.cache$=null,this.clearSubpanels(),this.subpanelsState.unsubscribe(),this.updateState((0,S.deepClone)(fM)),this.subs=this.safeUnsubscription(this.subs),this.fieldSubs=this.safeUnsubscription(this.fieldSubs)}getBaseRecord(){return this.internalState?this.recordStore.getBaseRecord():null}getMode(){return this.internalState?this.internalState.mode:null}setMode(e){this.updateState({...this.internalState,mode:e})}save(){return this.appStateStore.updateLoading(`${this.internalState.module}-record-save`,!0),this.updateState({...this.internalState,loading:!0}),this.recordStore.save().pipe((0,v.catchError)(()=>(this.message.addDangerMessageByKey("LBL_ERROR_SAVING"),(0,D.of)({}))),(0,v.finalize)(()=>{this.setMode("detail"),this.appStateStore.updateLoading(`${this.internalState.module}-record-save`,!1),this.updateState({...this.internalState,loading:!1})}))}load(e=!0){return this.updateState({...this.internalState,loading:!0}),this.recordStore.retrieveRecord(this.internalState.module,this.internalState.recordID,e).pipe((0,v.tap)(n=>{this.updateState({...this.internalState,recordID:n.id,module:n.module,loading:!1})}))}getSummaryTemplate(){return(((this.metadata||{}).recordView||{}).summaryTemplates||{})[this.getMode()]||""}initValidators(e){!e||!Object.keys(e?.fields).length||Object.keys(e.fields).forEach(n=>{const r=e.fields[n];if(!r?.formControl)return;this.resetValidators(r);const a=r?.validators??[],l=r?.asyncValidators??[];r?.formControl&&a.length&&r.formControl.setValidators(a),r?.formControl&&l.length&&r.formControl.setAsyncValidators(l)})}resetValidators(e){e?.formControl&&(e.formControl.clearValidators(),e.formControl.clearAsyncValidators())}resetValidatorsForAllFields(e){!e||!e?.fields?.length||Object.keys(e.fields).forEach(n=>{const r=e.fields[n];r?.formControl&&this.resetValidators(r)})}parseParams(e={}){if(!e)return;const n={...this.internalState.params};Object.keys(e).forEach(r=>{(0,S.isVoid)(n[r])||(n[r]=e[r])}),this.params=e}loadSubpanelStatistics(e){const n=this.subpanelsState.value;if(!n)return;const r={};Object.keys(n).forEach(o=>{const a=n[o],l=a.statistics;if(!l||!Object.keys(l).length)return;if(!1===a.shouldBatchStatistic())return void a.loadAllStatistics().pipe((0,v.take)(1)).subscribe();const c=a.getAllStatisticQuery();Object.keys(c).forEach(u=>{const d=this.buildStatKey(o,u);r[d]=c[u]}),a.setAllStatisticsLoading(!0)}),this.statisticsBatch.fetch(e,r).pipe((0,v.take)(1)).subscribe(o=>{Object.keys(n).forEach(a=>{const l=n[a],c=l.getAllStatisticQuery();Object.keys(c).forEach(u=>{const d=this.buildStatKey(a,u),p=o[d];p&&l.setStatistics(u,p,!0)}),l.setAllStatisticsLoading(!1)})})}buildStatKey(e,n){return(e=e.replace(/_/g,"-"))+"-"+n.replace(/_/g,"-")}updateState(e){this.store.next(this.internalState=e)}initSubpanels(e,n){this.showSubpanels=!0,this.metadataStore.subPanelMetadata$.subscribe(r=>{this.clearSubpanels(),Object.keys(r).forEach(o=>{this.subpanels[o]=this.subpanelFactory.create(),this.subpanels[o].init(e,n,r[o],this.record$)}),this.subpanelsState.next(this.subpanels),Object.keys(this.subpanels).forEach(o=>{this.subpanelReloadSub.push(this.subpanels[o].recordList.records$.pipe((0,v.tap)(()=>{const l={};l[o]=!0,this.subpanelReloadSubject.next(l)})).subscribe())})})}initPanels(){const e=(0,D.combineLatest)([this.metadataStore.recordViewMetadata$,this.stagingRecord$,this.languageStore.vm$]).subscribe(([n,r,o])=>{const a=[],l=r&&r.module||"";return this.safeUnsubscription(this.fieldSubs),n.panels.forEach(c=>{const d={label:c.label?c.label.toUpperCase():this.languageStore.getFieldLabel(c.key.toUpperCase(),l,o),key:c.key,rows:[]},p=n.templateMeta.tabDefs[c.key.toUpperCase()]??null;p&&(d.meta=p),c.rows.forEach(f=>{const m={cols:[]};f.cols.forEach(g=>{m.cols.push({...g})}),d.rows.push(m)}),d.displayState=new D.BehaviorSubject(p?.display??!0),d.display$=d.displayState.asObservable(),a.push(d),!(0,ie.isEmpty)(r?.fields)&&!(0,ie.isEmpty)(p?.displayLogic)&&Object.values(p.displayLogic).forEach(f=>{(0,ie.isEmpty)(f?.params?.fieldDependencies)||f.params.fieldDependencies.forEach(m=>{const g=r.fields[m]||null;(0,ie.isEmpty)(g)||this.fieldSubs.push(g.valueChanges$.subscribe(()=>{this.panelLogicManager.runLogic(f.key,g,d,r,this.getMode())}))})})}),this.panelsSubject.next(this.panels=a),a});this.subs.push(e)}clearSubpanels(){this.subpanels&&Object.keys(this.subpanels).forEach(e=>{this.subpanels[e].clear()}),this.subpanelReloadSub.length&&(this.subpanelReloadSub.forEach(e=>e.unsubscribe()),this.subpanelReloadSub=[]),this.subpanels={}}calculateShowWidgets(){let e=!1;const r=this.getRecordViewMetadata().sidebarWidgets||[];r&&r.length>0&&(e=!0);const o=this.loadPreference(this.getModuleName(),"show-sidebar-widgets")??null;this.showSidebarWidgets=null!==o?o:e,this.widgets=e}getRecordViewMetadata(){return(this.metadataStore.get()||{}).recordView||{}}getVardefs(){return this.getRecordViewMetadata().vardefs||{}}getViewFieldsObservable(){return this.metadataStore.recordViewMetadata$.pipe((0,v.map)(e=>{const n={};return e.panels.forEach(r=>{r.rows.forEach(o=>{o.cols.forEach(a=>{n[a.name??a.fieldDefinition.name??""]=a})})}),Object.keys(e.vardefs).forEach(r=>{const o=e.vardefs[r]??null;!o||(0,ie.isEmpty)(o)||n[r]||"relate"!=o.type&&(n[r]={name:r,vardefBased:!0,label:o.vname??"",type:o.type??"",display:o.display??"",fieldDefinition:o,metadata:o.metadata??{},logic:o.logic??{}})}),Object.values(n)}))}getPreferenceKey(e){return"recordview-"+e}savePreference(e,n,r){this.preferences.setUi(e,this.getPreferenceKey(n),r)}loadPreference(e,n){return this.preferences.getUi(e,this.getPreferenceKey(n))}safeUnsubscription(e){return e.forEach(n=>{n.closed||n.unsubscribe()}),[]}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(io),t.\u0275\u0275inject(ro),t.\u0275\u0275inject(Ht),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(Ai),t.\u0275\u0275inject(In),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(bi),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Fp),t.\u0275\u0275inject(Si),t.\u0275\u0275inject(Tp),t.\u0275\u0275inject(oo),t.\u0275\u0275inject(Xt),t.\u0275\u0275inject(Ic))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();function UW(i,s){1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",3)(2,"div",4),t.\u0275\u0275element(3,"div",5),t.\u0275\u0275elementStart(4,"div",6)(5,"div",7)(6,"div"),t.\u0275\u0275text(7,"Record Status Bar Component"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementContainerEnd())}function $W(i,s){1&i&&(t.\u0275\u0275elementStart(0,"div",8)(1,"div",9)(2,"div"),t.\u0275\u0275text(3,"Record Status Bar Component"),t.\u0275\u0275elementEnd()()())}let Op=(()=>{class i{constructor(e,n){this.recordViewStore=e,this.moduleNavigation=n,this.displayResponsiveTable=!1}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Mi),t.\u0275\u0275directiveInject(In))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-status-bar"]],decls:4,vars:2,consts:[[1,"record-view-header"],[4,"ngIf"],[3,"ngIf"],[1,"d-flex","flex-nowrap"],[1,"row"],[1,"w-100"],[1,"col"],[1,"order-2"],[1,"row","mr-0"],[1,"col-md-4"]],template:function(n,r){1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",0),t.\u0275\u0275template(2,UW,8,0,"ng-container",1),t.\u0275\u0275template(3,$W,4,0,"ng-template",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",r.displayResponsiveTable),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.displayResponsiveTable))},dependencies:[I.NgIf],encapsulation:2})}return i})();const mM=new RegExp("^(\\d{4})-(0[1-9]|1[0-2])$"),hM=new RegExp("^(\\d{4})$");let gM=(()=>{class i{constructor(e,n,r){this.systemConfig=e,this.metadataStore=n,this.dataTypeFormatter=r,this.allowedProperties=["operator","target","values","start","end"],this.convertableProperties=["target","values","start","end"]}buildUrlQueryBasedFilter(e,n,r){const o=this.metadataStore.get().recordView.vardefs,a=Object.entries(r).reduce((c,[u,d])=>{const[p,f]=this.cleanQueryParam([u,d]);return c[p]=f,c},{}),l=this.getQueryFilterCriteria(o,e,a);return(0,ie.isEmpty)(l.filters)?null:{key:"default",searchModule:e,module:"saved-search",criteria:l}}getQueryFilterCriteria(e,n,r){const o={name:"default",filters:{}},a=Object.keys(r),l=Object.values(e).filter(({name:p})=>a.some(f=>f.includes(p))),c=this.systemConfig.getConfigValue("listview_url_query_filter_mapping"),u=Object.entries(c);let d;u.push(["",{}]),d="basic_search"===r.searchFormTab?"basic":"advanced";for(const p of l){const f=p.name,m=[f,`${f}_${d}`];for(const[g,h]of u){if(!(0,ie.isEmpty)(o.filters[f]))break;for(const _ of m){if(!(0,ie.isEmpty)(o.filters[f]))break;const b=this.buildSearchCriteriaFieldFilter(f,p.type,r,_,g,h);if(!(0,ie.isEmpty)(b)){try{this.convertableProperties.forEach(M=>{if(!b[M])return;let y;y=(0,ie.isArray)(b[M])?b[M].map(w=>this.toInternalFormat(p.type,w)):this.toInternalFormat(p.type,b[M]),b[M]=y})}catch{continue}o.filters[f]=b}}}}return o}buildSearchCriteriaFieldFilter(e,n,r,o,a,l){const c={field:e,fieldType:n,operator:"=",values:[]};if((0,ie.isEmpty)(a)||(0,ie.isEmpty)(l)){const f=this.getQueryParamValue(o,o,r);if((0,ie.isEmpty)(f)&&!(0,S.isEmptyString)(f))return null;const m=(0,ie.isArray)(f)?f:[f];return c.values=m,c.target=m[0],this.checkDateSpecialsOrReturn(c,c.target)}const u=this.getQueryParamValue(a,o,r,{forceSingleString:!0}),d=l[u]??Object.values(l).reduce((f,m)=>({...f,...m}),{})??{};if((0,ie.isEmpty)(d))return null;let p=!0;return c.operator=u,Object.entries(d).filter(([f,m])=>"string"==typeof m&&this.allowedProperties.includes(m)).forEach(([f,m])=>{const g=this.getQueryParamValue(f,o,r);if((0,ie.isEmpty)(g))return;p=!1;let h=g;"values"===m?((0,ie.isArray)(h)||(h=[h]),c.target=h[0]):"target"===m&&((0,ie.isArray)(h)&&(h=h[0]),c.values=[h]),c[m]=h,(0,ie.isArray)(h)||this.checkDateSpecialsOrReturn(c,h,{operator:u,key:m})}),p?null:this.checkForMissingOperator(c)}getQueryParamValue(e,n,r,{forceSingleString:o=!1}={}){let l=r[e.replace("{field}",n)??""];return l?(l=(0,ie.isArray)(l)?l.map(this.transform):this.transform(l),o&&(0,ie.isArray)(l)?l[0]??"":l):null}cleanQueryParam(e){let[n,r]=e;return 0===n.split("").reverse().join("").indexOf("][")&&"string"==typeof r&&(n=n.replace("[]",""),r=r.split(",")),[n,r]}checkDateSpecialsOrReturn(e,n,{operator:r="=",key:o="target"}={}){return n.match(mM)?this.overridesSearchCriteriaFieldFilter(e,n,{type:"month",operator:r,key:o}):n.match(hM)?this.overridesSearchCriteriaFieldFilter(e,n,{type:"year",operator:r,key:o}):e}overridesSearchCriteriaFieldFilter(e,n,{type:r="",operator:o="equal",key:a="target"}){let l,c;switch(r){case"year":l={year:1},c="yyyy";break;case"month":l={month:1},c="yyyy-MM";break;default:return e}const u=tt.DateTime.fromFormat(n,c),d=u.plus(l).minus({day:1});if("target"!==a){switch(a){case"start":e.start=u.toFormat("yyyy-MM-dd");break;case"end":e.end=d.toFormat("yyyy-MM-dd")}return e}switch(e.operator=o,o){case"greater_than":case"greater_than_equals":e.start=u.toFormat("yyyy-MM-dd"),e.target=e.start,e.values=[e.target];break;case"less_than":case"less_than_equals":e.end=d.toFormat("yyyy-MM-dd"),e.target=e.end,e.values=[e.target];break;case"not_equal":e.start=u.toFormat("yyyy-MM-dd"),e.end=d.toFormat("yyyy-MM-dd"),e.target=n,e.values=[n];break;default:e.operator="between",e.start=u.toFormat("yyyy-MM-dd"),e.end=d.toFormat("yyyy-MM-dd"),e.target="",e.values=[]}return e}toInternalFormat(e,n){return n.match(hM)||n.match(mM)?n:this.dataTypeFormatter.toInternalFormat(e,n)}transform(e){return""===e?"__SuiteCRMEmptyString__":e}checkForMissingOperator(e){return!(0,ie.isEmpty)(e.start)&&!(0,ie.isEmpty)(e.end)&&(e.operator="between"),e}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ht),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(mt))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Lp={key:"default",module:"saved-search",attributes:{contents:""},criteria:{name:"default",filters:{}}},vM={default:(0,S.deepClone)(Lp)},_M={module:"",widgets:!0,actionPanel:"",showSidebarWidgets:!1,recordPanelConfig:{},activeFilters:(0,S.deepClone)(vM),openFilter:(0,S.deepClone)(Lp)};let ri=(()=>{class i extends Ap{constructor(e,n,r,o,a,l,c,u,d,p,f,m,g,h,_){super(e,n,r,o,a),this.appStateStore=e,this.languageStore=n,this.navigationStore=r,this.moduleNavigation=o,this.metadataStore=a,this.localStorage=l,this.message=c,this.listStoreFactory=u,this.modalService=d,this.filterListStoreFactory=p,this.confirmation=f,this.preferences=m,this.route=g,this.listViewUrlQueryService=h,this.localStorageService=_,this.pageKey="listview",this.cache$=null,this.internalState=(0,S.deepClone)(_M),this.store=new D.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.subs=[],this.recordList=this.listStoreFactory.create(),this.columns$=a.listViewColumns$,this.lineActions$=a.listViewLineActions$,this.tableActions$=a.listViewTableActions$,this.records$=this.recordList.records$,this.criteria$=this.recordList.criteria$,this.context$=this.recordList.criteria$.pipe((0,v.map)(()=>this.getViewContext())),this.sort$=this.recordList.sort$,this.pagination$=this.recordList.pagination$,this.selection$=this.recordList.selection$,this.selectedCount$=this.recordList.selectedCount$,this.selectedStatus$=this.recordList.selectedStatus$,this.loading$=this.recordList.loading$,this.moduleName$=this.state$.pipe((0,v.map)(M=>M.module),(0,v.distinctUntilChanged)()),this.widgets$=this.state$.pipe((0,v.map)(M=>M.widgets),(0,v.distinctUntilChanged)()),this.showSidebarWidgets$=this.state$.pipe((0,v.map)(M=>M.showSidebarWidgets)),this.displayFilters$=this.state$.pipe((0,v.map)(M=>"filters"===M.actionPanel),(0,v.distinctUntilChanged)()),this.actionPanel$=this.state$.pipe((0,v.map)(M=>M.actionPanel),(0,v.distinctUntilChanged)()),this.activeFilters$=this.state$.pipe((0,v.map)(M=>M.activeFilters),(0,v.distinctUntilChanged)()),this.openFilter$=this.state$.pipe((0,v.map)(M=>M.openFilter),(0,v.distinctUntilChanged)());const b=this.records$.pipe((0,D.combineLatestWith)(this.criteria$,this.pagination$,this.selection$,this.loading$),(0,v.map)(([M,y,w,x,C])=>(this.data={records:M,criteria:y,pagination:w,selection:x,loading:C},this.data)));this.vm$=b.pipe((0,D.combineLatestWith)(this.appData$,this.metadata$),(0,v.map)(([M,y,w])=>(this.vm={data:M,appData:y,metadata:w},this.vm))),this.columns=new D.BehaviorSubject([]),this.columns$=this.columns.asObservable(),this.initDataUpdateState(),this.initDataSetUpdatedState(),this.filterList=this.filterListStoreFactory.create(),this.recordList.pageKey=this.pageKey}get actionPanel(){return this.internalState.actionPanel}get showFilters(){return"filters"===this.internalState.actionPanel}set showFilters(e){this.updateState({...this.internalState,actionPanel:e?"filters":""})}get widgets(){return this.internalState.widgets}set widgets(e){this.updateState({...this.internalState,widgets:e})}get showSidebarWidgets(){return this.internalState.showSidebarWidgets}set showSidebarWidgets(e){this.savePreference(this.getModuleName(),"show-sidebar-widgets",e),this.updateState({...this.internalState,showSidebarWidgets:e})}get recordPanelConfig(){return this.internalState.recordPanelConfig}isRecordPanelOpen(){return"recordPanel"===this.internalState.actionPanel}openRecordPanel(e){this.updateState({...this.internalState,actionPanel:"recordPanel",recordPanelConfig:e})}closeRecordPanel(){this.updateState({...this.internalState,actionPanel:"",recordPanelConfig:{}})}getModuleName(){return this.internalState.module}getViewContext(){const e={module:this.getModuleName()};return e.criteria=this.recordList.criteria,e.sort=this.recordList.sort,e}destroy(){this.clear(),this.subs.forEach(e=>e.unsubscribe())}get activeFilters(){return(0,S.deepClone)(this.internalState.activeFilters)}clear(){this.cache$=null,this.updateState((0,S.deepClone)(_M)),this.recordList.clear()}clearAuthBased(){this.clear(),this.recordList.clearAuthBased()}init(e){this.internalState.module=e,this.recordList.init(e,!1),this.filterList.init(e),this.filterList.load(!1).pipe((0,v.take)(1)).subscribe(),this.calculateShowWidgets(),this.recordList.sort={orderBy:this?.metadata?.listView?.orderBy??"",sortOrder:this?.metadata?.listView?.sortOrder??"NONE"};const n=this.route?.snapshot?.queryParams??{};let r="";return"query"===((0,S.isTrue)(n.query)&&(r="query"),r)?this.loadQueryFilter(e,n):(this.loadCurrentFilter(e),this.loadCurrentSort(e)),this.loadCurrentDisplayedColumns(),this.loadCurrentPagination(e),this.load()}setOpenFilter(e){this.updateState({...this.internalState,openFilter:(0,S.deepClone)(e)})}toggleQuickFilter(e,n=!0){let r=this.getActiveQuickFilters();if(Object.keys(r).some(a=>a===e.key)){let{[e.key]:a,...l}=r;r=l}else r={},r[e.key]=e;(0,S.emptyObject)(r)?this.resetFilters(n):1!==Object.keys(r).length?(this.updateState({...this.internalState,activeFilters:(0,S.deepClone)(r)}),this.updateSearchCriteria(n)):this.setFilters(r)}setFilters(e,n=!0,r=null){const a=e[Object.keys(e).shift()];if(this.updateState({...this.internalState,activeFilters:(0,S.deepClone)(e),openFilter:(0,S.deepClone)(a)}),a.criteria){let l=a.criteria.orderBy??"",u=this.recordList.mapSortOrder(a.criteria.sortOrder??"");null!==r&&(l=r.orderBy,u=r.sortOrder),this.recordList.updateSorting(l,u,!1),this.updateSortLocalStorage()}this.updateSearchCriteria(n)}addSavedFilter(e){const n={...this.internalState},r=this.activeFilters;e.key&&r[e.key]&&(r[e.key]=e,n.activeFilters=r),n.openFilter=e,this.filterList.addFilter(e),this.updateState(n)}removeSavedFilter(e){if(!e||!e.key)return;this.filterList.removeFilter(e);const n={...this.internalState};n.openFilter&&n.openFilter.key===e.key&&this.resetFilters(!0)}resetFilters(e=!0){this.updateState({...this.internalState,activeFilters:(0,S.deepClone)(vM),openFilter:(0,S.deepClone)(Lp)}),this.recordList.clearSort(),this.updateSortLocalStorage(),this.updateSearchCriteria(e)}updateSearchCriteria(e=!0){const n={...this.internalState.activeFilters};let r=this.mergeCriteria(n);this.recordList.updateSearchCriteria(r,e),this.updateFilterLocalStorage()}updateFilterLocalStorage(){this.savePreference(this.internalState.module,"current-filters",this.internalState.activeFilters)}updateSortLocalStorage(){this.savePreference(this.internalState.module,"current-sort",this.recordList.sort)}updatePaginationLocalStorage(){const n=this.internalState.module+"-"+this.getPreferenceKey("current-pagination");this.localStorageService.set(n,this.recordList.pagination)}updateDisplayedColumnsPreference(e){this.savePreference(this.internalState.module,"displayed-columns",e)}getDisplayedColumnsPreference(){const n=this.loadPreference(this.internalState.module,"displayed-columns");return(0,ie.isArray)(n)&&n&&n.length?n:null}triggerDataUpdate(){this.dataUpdateState.next(!0)}load(e=!0){const n=this.internalState.module;return this.savePreference(n,"current-filters",this.internalState.activeFilters),this.savePreference(n,"current-sort",this.recordList.sort),this.updatePaginationLocalStorage(),this.recordList.load(e)}updateState(e){this.store.next(this.internalState=e)}getActiveQuickFilters(){let{default:e,...n}=this.activeFilters,r={};return Object.keys(n).forEach(o=>{const a=n[o]??null;o&&a?.attributes?.quick_filter&&(r[o]=a)}),r}mergeCriteria(e){let n={};return(Object.keys(e??{})??[]).forEach(o=>{const l=(e[o]??null)?.criteria??null,c=Object.keys(l?.filters??{});if(null!==l&&(!c||c.length)){if((0,S.emptyObject)(n))return void(n=(0,S.deepClone)(l));c.forEach(u=>{const d=l?.filters[u]??null,p=n?.filters[u]??null;if(!d)return;const f=p?.operator??null;if(!p||!f)return void(n.filters[u]=(0,S.deepClone)(d));const m=d?.operator??null;m===f&&"="===m?p.values=(0,ie.union)(p.values??[],d.values??[]):delete n.filters[u]})}}),n}openColumnChooserDialog(){const e=this.modalService.open(Ab,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"lg",windowClass:"column-chooser-modal"}),n=this.columns.getValue().filter(function(o){return!o.hasOwnProperty("default")||o.hasOwnProperty("default")&&!0===o.default}),r=this.columns.getValue().filter(function(o){return o.hasOwnProperty("default")&&!1===o.default});e.componentInstance.displayed=n,e.componentInstance.hidden=r,e.result.then(o=>{if(!o.displayed||!o.hidden)return;let a=[];const l=o.displayed,c=o.hidden;l.forEach(function(d){d.default=!0}),c.forEach(function(d){d.default=!1}),a.push(...l,...c),this.columns.next(a);const u=l.map(d=>d.name);this.updateDisplayedColumnsPreference(u)})}calculateShowWidgets(){let e=!1;const o=((this.metadataStore.get()||{}).listView||{}).sidebarWidgets||[];o&&o.length>0&&(e=!0);const a=this.loadPreference(this.getModuleName(),"show-sidebar-widgets")??null;this.showSidebarWidgets=null!==a?a:e,this.widgets=e}getPreferenceKey(e){return this.pageKey+"-"+e}savePreference(e,n,r){this.preferences.setUi(e,this.getPreferenceKey(n),r)}loadPreference(e,n){return this.preferences.getUi(e,this.getPreferenceKey(n))}loadCurrentFilter(e){const n=this.loadPreference(e,"current-filters")??{};if(!n||(0,S.emptyObject)(n))return;let r=this.loadPreference(e,"current-sort");!r&&(0,S.emptyObject)(r)&&(r=null),this.setFilters(n,!1,r)}loadQueryFilter(e,n){const r=n.orderBy??"",a=this.recordList.mapSortOrder(n.sortOrder??""),l=this.listViewUrlQueryService.buildUrlQueryBasedFilter(e,this.internalState.activeFilters.default,n);(0,ie.isEmpty)(l)||(this.updateState({...this.internalState,activeFilters:(0,S.deepClone)({default:l}),openFilter:(0,S.deepClone)(l)}),this.recordList.updateSorting(r,a,!1),this.recordList.updateSearchCriteria(l.criteria,!1))}loadCurrentSort(e){const n=this.loadPreference(e,"current-sort");!n||(0,S.emptyObject)(n)||(this.recordList.sort=n)}loadCurrentPagination(e){const n=e+"-"+this.getPreferenceKey("current-pagination"),r=this.localStorageService.get(n);!r||(0,S.emptyObject)(r)||(this.recordList.pagination=r)}loadCurrentDisplayedColumns(){this.metadataStore.listViewColumns$.pipe((0,v.take)(1)).subscribe(e=>{const n=this.getDisplayedColumnsPreference();if(!n||!e)return void this.columns.next(e);const r={};n.forEach(c=>{r[c]=!0});const o={},a=[];e.forEach(c=>{c.default=r[c.name]??!1,c.default?o[c.name]=c:a.push(c)});const l=n.filter(c=>!!o[c]).map(c=>o[c]);this.columns.next([...l,...a])})}initDataUpdateState(){this.dataUpdateState=new D.BehaviorSubject(!0),this.dataUpdate$=this.dataUpdateState.asObservable()}initDataSetUpdatedState(){this.dataSetUpdate$=this.criteria$.pipe((0,D.combineLatestWith)(this.dataUpdate$),(0,v.map)(()=>!0))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ht),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(Ai),t.\u0275\u0275inject(In),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(bi),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Qi),t.\u0275\u0275inject(me.NgbModal),t.\u0275\u0275inject(Fc),t.\u0275\u0275inject(Bn),t.\u0275\u0275inject(Xt),t.\u0275\u0275inject(Ot.ActivatedRoute),t.\u0275\u0275inject(gM),t.\u0275\u0275inject(bi))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();function zW(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275element(1,"scrm-button-group",2),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("config$",e.config$)}}let HW=(()=>{class i{constructor(e,n,r,o,a){this.listStore=e,this.actionHandler=n,this.screenSize=r,this.systemConfigs=o,this.asyncActionService=a,this.configState=new D.BehaviorSubject({buttons:[]}),this.config$=this.configState.asObservable(),this.vm$=this.screenSize.screenSize$.pipe((0,v.map)(l=>(l&&(this.screen=l),this.configState.next(this.getButtonGroupConfig()),{screenSize:l}))),this.screen=ii.Medium,this.defaultBreakpoint=3}ngOnInit(){this.configState.next(this.getButtonGroupConfig())}getButtonGroupConfig(){const e=this.actions,n={buttonKlass:["action-button"],dropdownLabel:this.listStore.appStrings.LBL_MORE||"",buttons:[],dropdownOptions:{placement:["bottom-right"]},breakpoint:this.getBreakpoint()};return e.forEach(r=>{const o=this.getButtonConfig(r);o&&o.klass&&n.buttons.push(o)}),n}getBreakpoint(){const e=this.systemConfigs&&this.systemConfigs.getConfigValue("listview_actions_limits");return this.screen&&e&&e[this.screen]?(this.breakpoint=e[this.screen],this.breakpoint):this.breakpoint?this.breakpoint:this.defaultBreakpoint}get actions(){return this.listStore.vm.appData.module&&this.listStore.vm.appData.module.menu?this.listStore.vm.appData.module.menu.filter(e=>!("List"===e.name||"View"===e.name)):[]}getButtonConfig(e){if(!this.listStore.vm.appData.appState.module)return{};if(!this.listStore.vm.appData.language)return{};const n=this.listStore.vm.appData.appState.module;let o="";return e.actionLabelKey&&(o=e.actionLabelKey),{klass:"action-button",label:this.actionHandler.getActionLabel(n,e,this.listStore.vm.appData.language,o),onClick:()=>{e?.process?this.handleProcess(n,e?.process):this.actionHandler.navigate(e).then()}}}handleProcess(e,n){n&&this.asyncActionService.run(n,{action:n,module:e}).pipe((0,v.take)(1)).subscribe()}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(ri),t.\u0275\u0275directiveInject(In),t.\u0275\u0275directiveInject(li),t.\u0275\u0275directiveInject(ht),t.\u0275\u0275directiveInject(nn))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-action-menu"]],decls:2,vars:3,consts:[["class","list-view-actions float-right",4,"ngIf"],[1,"list-view-actions","float-right"],[3,"config$"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,zW,2,1,"div",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[I.NgIf,yo,I.AsyncPipe],encapsulation:2})}return i})(),Np=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Do,an,Ge.AngularSvgIconModule,Or]})}return i})(),Aa=(()=>{class i{constructor(e,n,r){this.systemConfigStore=e,this.screenSize=n,this.store=r,this.quickFiltersConfigState=new D.BehaviorSubject({buttons:[]}),this.enabledState=new D.BehaviorSubject(!1),this.screen=ii.Medium,this.defaultBreakpoint=5,this.breakdownSizes=[],this.subs=[],this.config$=this.quickFiltersConfigState.asObservable(),this.enabled$=this.enabledState.asObservable(),this.enabled=!1,this.breakdownSizes=this.systemConfigStore.getUi("quick_filters_breakdown_screen_sizes");const o=this.systemConfigStore.getUi("displayed_quick_filters"),a=this.systemConfigStore.getUi("quick_filters_breakdown_threshold");this.breakdown$=this.screenSize.screenSize$.pipe((0,v.map)(l=>(o[l]??2)>(a[l]??2)||(0,S.isTrue)(this.breakdownSizes[l]??!1))),this.subs.push(this.screenSize.screenSize$.subscribe(l=>{l&&(this.screen=l),this.init()}))}init(){let e=this.store.filterList.getFilters()??[];if(e=e.filter(a=>a?.attributes?.quick_filter??!1),this.enabled=this.areConfigEnabled(),!e||e.length<1)return this.enabled=!1,void this.enabledState.next(!1);this.enabledState.next(this.enabled);const n={buttonKlass:["settings-button btn btn-outline-main"],dropdownLabel:this.store.appStrings.LBL_QUICK_FILTERS||"",breakpoint:this.getBreakpoint(),showAfterBreakpoint:!1,dropdownOptions:{placement:["bottom-right"],wrapperKlass:["dropdown-button-secondary","filter-action-group"]},buttons:[]},r=this.store.activeFilters;let o=!1;e.forEach(a=>{if(!a?.attributes?.quick_filter)return;const c=Object.keys(r).some(d=>d===a.key);o=o||c;const u={label:a.attributes.name,title:a.attributes.name,onClick:()=>{this.store.toggleQuickFilter(a)}};c&&(u.klass=["active"]),n.buttons.push(u)}),o&&(n.dropdownOptions.klass=["active"],n.dropdownOptions.icon="filter"),this.quickFiltersConfigState.next(n)}destroy(){this.subs.forEach(e=>e.unsubscribe()),this.subs=[],this.quickFiltersConfigState.unsubscribe()}getBreakpoint(){const e=this.systemConfigStore.getUi("displayed_quick_filters");return this.screen&&e&&e[this.screen]?(this.breakpoint=e[this.screen],this.breakpoint):this.breakpoint?this.breakpoint:this.defaultBreakpoint}areConfigEnabled(){const e=this.systemConfigStore.getUi("enable_quick_filters");return!(!this.screen||!e)&&(0,S.isTrue)(e[this.screen]??!1)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ht),t.\u0275\u0275inject(li),t.\u0275\u0275inject(ri))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();function WW(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-button-group",10),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("config$",e.quickFilters.config$)("klass","quick-filter-button")}}function KW(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",5)(1,"div",6),t.\u0275\u0275element(2,"scrm-label",7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",8),t.\u0275\u0275template(4,WW,1,2,"scrm-button-group",9),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",e.quickFilters.config$)}}function GW(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,KW,5,1,"div",4),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.showQuickFilters&&e.enableQuickFilters)}}function ZW(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-button-group",11),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("config$",e.config$)}}let yM=(()=>{class i{constructor(e,n,r,o,a){this.listStore=e,this.modalService=n,this.screenSize=r,this.systemConfigStore=o,this.quickFilters=a,this.configState=new D.BehaviorSubject({buttons:[]}),this.config$=this.configState.asObservable(),this.showQuickFilters=!0,this.enableQuickFilters=!1,this.screen=ii.Medium,this.defaultBreakpoint=5,this.subs=[]}ngOnInit(){this.configState.next(this.getButtonGroupConfig());const e=this.listStore.widgets$.pipe((0,D.combineLatestWith)(this.listStore.displayFilters$,this.listStore.criteria$,this.screenSize.screenSize$,this.listStore.showSidebarWidgets$,this.listStore.filterList.records$));this.subs.push(e.subscribe(([n,r,o,a,l,c])=>{a&&(this.screen=a),this.configState.next(this.getButtonGroupConfig()),this.quickFilters.init()})),this.subs.push(this.quickFilters.breakdown$.subscribe(n=>{this.showQuickFilters=!(0,S.isTrue)(n)})),this.subs.push(this.quickFilters.enabled$.subscribe(n=>{this.enableQuickFilters=(0,S.isTrue)(n??!1)}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getButtonGroupConfig(){const e=[{show:()=>this.checkFiltersDisplay(),button:this.getMyFiltersButton()},{show:()=>!0,button:this.getFilterButton()},{show:()=>this.listStore.widgets,button:this.getInsightsButton()}],n={buttonKlass:["settings-button"],dropdownLabel:this.listStore.appStrings.LBL_OPTIONS||"",breakpoint:this.getBreakpoint(),dropdownOptions:{placement:["bottom-right"],wrapperKlass:["dropdown-button-secondary"]},buttons:[]};return e.forEach(r=>{r.show?r.show()&&n.buttons.push(r.button):n.buttons.push(r.button)}),n}checkFiltersDisplay(){const e=this.listStore.filterList.getFilters()??[],n=this.quickFilters.getBreakpoint(),r=e.length,o=e.filter(a=>a.attributes.quick_filter).length;return r>0&&(o>n||r-o>0)}getFilters(){return this?.listStore?.recordList?.criteria?.filters??{}}getCurrentCriteria(){return this?.listStore?.recordList?.criteria??{}}hasActiveFilter(){const e=this.listStore.activeFilters;if(!e)return!1;const n=Object.keys(e)??[];if(!n||!n.length)return!1;if(n.length>1)return!0;const r=e[n[0]];return r.key&&""!==r.key&&"default"!==r.key}areAllCurrentCriteriaFilterEmpty(){return Object.keys(this.getFilters()??{}).every(e=>""===this.getFilters()[e].operator)}isAnyFilterApplied(){return this.hasActiveFilter()||!this.areAllCurrentCriteriaFilterEmpty()}getBreakpoint(){const e=this.systemConfigStore.getConfigValue("listview_settings_limits");return this.screen&&e&&e[this.screen]?(this.breakpoint=e[this.screen],this.breakpoint):this.breakpoint?this.breakpoint:this.defaultBreakpoint}getFilterButton(){const e={type:"grouped",items:[]},n={label:this.listStore.appStrings.LBL_FILTER||"",klass:{"filter-settings-button":!0,"btn btn-sm settings-button":!0,active:this.isAnyFilterApplied()},onClick:()=>{this.listStore.showFilters=!this.listStore.showFilters}};return this.isAnyFilterApplied()&&(n.icon="filter"),e.items.push(n),this.isAnyFilterApplied()&&e.items.push(this.getClearButton()),e}getMyFiltersButton(){const e=this.listStore.filterList.getFilters(),n={label:this.listStore.appStrings.LBL_SAVED_FILTER_SHORTCUT||"",klass:["dropdown-toggle"],wrapperKlass:["filter-action-group"],items:[],sections:{"quick-filters":{labelKey:"LBL_QUICK_FILTERS"},default:{labelKey:"LBL_SAVED_FILTER_SHORTCUT"}}},r=this.listStore.activeFilters;let o=!1,a=0;const l=this.quickFilters.getBreakpoint(),c=this.quickFilters.areConfigEnabled();return e.forEach(u=>{const d=(0,S.isTrue)(u?.attributes?.quick_filter??!1);if(c&&d&&a<l)return void a++;const p=Object.keys(r).some(m=>m===u.key);o=o||p;const f={label:u.attributes.name,section:d?"quick-filters":"default",onClick:()=>{if(this.listStore.showFilters=!1,p)this.listStore.resetFilters();else{this.listStore.setOpenFilter(u);const m={};m[u.key]=u,this.listStore.setFilters(m)}}};p&&(f.icon="filter",f.iconKlass="small",f.klass=["active"]),n.items.push(f)}),o&&(n.klass=["dropdown-toggle","active"]),n}getClearButton(){return{label:"x",titleKey:"LBL_CLEAR_FILTER",klass:{"btn btn-sm settings-button clear-filter-button btn-main-light":!0},onClick:()=>{this.listStore.showFilters=!1,this.listStore.resetFilters()}}}getInsightsButton(){return{label:this.listStore.appStrings.LBL_INSIGHTS||"",klass:{active:this.listStore.showSidebarWidgets},icon:"pie",onClick:()=>{this.listStore.showSidebarWidgets=!this.listStore.showSidebarWidgets}}}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(ri),t.\u0275\u0275directiveInject(me.NgbModal),t.\u0275\u0275directiveInject(li),t.\u0275\u0275directiveInject(ht),t.\u0275\u0275directiveInject(Aa))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-settings-menu"]],decls:5,vars:4,consts:[[1,"list-view-settings","w-100","d-flex","justify-content-end"],[4,"ngIf"],[1,"text-nowrap"],["klass","d-flex align-items-center",3,"config$",4,"ngIf"],["class","d-flex align-items-baseline",4,"ngIf"],[1,"d-flex","align-items-baseline"],[1,"text-nowrap","text-muted","fs-70","pl-1","mr-2"],["labelKey","LBL_QUICK_FILTERS"],[1,"quick-filter-border","pr-xxl-1","mr-xxl-1"],[3,"config$","klass",4,"ngIf"],[3,"config$","klass"],["klass","d-flex align-items-center",3,"config$"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275template(1,GW,2,1,"ng-container",1),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementStart(3,"div",2),t.\u0275\u0275template(4,ZW,1,1,"scrm-button-group",3),t.\u0275\u0275elementEnd()()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(2,2,r.quickFilters.config$)),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",r.config$))},dependencies:[I.NgIf,yo,qt,I.AsyncPipe],encapsulation:2})}return i})(),Rp=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Tb,sn,an,Tr,me.NgbModule,Or,Vt]})}return i})(),Bp=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,xa,Np,Rp,Ge.AngularSvgIconModule]})}return i})();function qW(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-bulk-action-menu",7),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("selectionSource",e.selection)("actionSource",e.bulkActions)}}function QW(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-pagination",8),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("allowPagination",e.isPaginationEnabled())("state",e.pagination)}}let bM=(()=>{class i{isPaginationEnabled(){return"pagination"===this.paginationType}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-table-header"]],inputs:{selection:"selection",bulkActions:"bulkActions",pagination:"pagination",tableActions:"tableActions",paginationType:"paginationType"},decls:7,vars:3,consts:[[1,"list-view-tableactions","table-header"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex"],[3,"selectionSource","actionSource",4,"ngIf"],["buttonClass","btn table-action-button",3,"config"],[1,"mx-0","pl-0","table-pagination-wrapper"],[3,"allowPagination","state",4,"ngIf"],[3,"selectionSource","actionSource"],[3,"allowPagination","state"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2),t.\u0275\u0275template(3,qW,1,2,"scrm-bulk-action-menu",3),t.\u0275\u0275element(4,"scrm-action-group-menu",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"div",5),t.\u0275\u0275template(6,QW,1,2,"scrm-pagination",6),t.\u0275\u0275elementEnd()()()),2&n&&(t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",r.selection&&r.bulkActions),t.\u0275\u0275advance(1),t.\u0275\u0275property("config",r.tableActions),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",r.pagination))},dependencies:[I.NgIf,wp,cd,Ar],encapsulation:2})}return i})();function JW(i,s){1&i&&t.\u0275\u0275element(0,"th",13)}function YW(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"td",14)(1,"label",15)(2,"input",16),t.\u0275\u0275listener("change",function(){const o=t.\u0275\u0275restoreView(e).$implicit,a=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(a.toggleSelection(o.id))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(3,"span",17),t.\u0275\u0275elementEnd()()}if(2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(2).ngIf,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("checked",e.id&&n.selected[e.id]||r.allSelected(n.selectionStatus))("disabled",r.allSelected(n.selectionStatus))}}function XW(i,s){1&i&&(t.\u0275\u0275elementContainerStart(0,12),t.\u0275\u0275template(1,JW,1,0,"th",7),t.\u0275\u0275template(2,YW,4,2,"td",8),t.\u0275\u0275elementContainerEnd())}function eK(i,s){1&i&&t.\u0275\u0275element(0,"th",21)}function tK(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-record-details-popup-button",24),2&i){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("record",e)("columns",n.popoverColumns)}}function nK(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"td",22),t.\u0275\u0275template(1,tK,1,2,"scrm-record-details-popup-button",23),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.popoverColumns.length)}}function iK(i,s){1&i&&(t.\u0275\u0275elementContainerStart(0,18),t.\u0275\u0275template(1,eK,1,0,"th",19),t.\u0275\u0275template(2,nK,2,1,"td",20),t.\u0275\u0275elementContainerEnd())}function rK(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-sort-button",31),2&i){const e=t.\u0275\u0275nextContext(2).$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("state",n.getFieldSort(e))}}function oK(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"th",28),t.\u0275\u0275element(1,"scrm-label",29),t.\u0275\u0275template(2,rK,1,1,"scrm-sort-button",30),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(2);let r;t.\u0275\u0275classMap((null!==(r="primary-table-header column-"+(null==e?null:e.name))&&void 0!==r?r:"")+" "+(null!==(r="column-type-"+(null==e?null:e.type))&&void 0!==r?r:"")),t.\u0275\u0275advance(1),t.\u0275\u0275property("labelKey",e.label)("module",n.config.module||""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.config.sort$&&e.sortable)}}function sK(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"td",14),t.\u0275\u0275element(1,"scrm-field",32),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext().$implicit,r=t.\u0275\u0275nextContext(2);let o;t.\u0275\u0275classMap((null!==(o="column-"+(null==n?null:n.name))&&void 0!==o?o:"")+" "+(null!==(o="column-type-"+(null==n?null:n.type))&&void 0!==o?o:"")),t.\u0275\u0275advance(1),t.\u0275\u0275property("mode","list")("type",n.type)("field",r.getField(n,e))("record",e)}}function aK(i,s){1&i&&(t.\u0275\u0275elementContainerStart(0,25),t.\u0275\u0275template(1,oK,3,5,"th",26),t.\u0275\u0275template(2,sK,2,6,"td",27),t.\u0275\u0275elementContainerEnd()),2&i&&t.\u0275\u0275property("cdkColumnDef",s.$implicit.name)}function lK(i,s){1&i&&t.\u0275\u0275element(0,"th",13)}function cK(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-line-action-menu",34),2&i){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("config",n.config.lineActions)("record",e)("wrapperClass","listview-actions")("klass","icon-bar")}}function uK(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"td",14),t.\u0275\u0275template(1,cK,1,4,"scrm-line-action-menu",33),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e&&n.config.lineActions)}}function dK(i,s){1&i&&t.\u0275\u0275element(0,"tr",35)}function pK(i,s){1&i&&t.\u0275\u0275element(0,"tr",36)}function fK(i,s){1&i&&(t.\u0275\u0275elementStart(0,"div")(1,"p",37),t.\u0275\u0275element(2,"scrm-label",38),t.\u0275\u0275elementEnd()())}function mK(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"scrm-loading-spinner",39),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().ngIf;t.\u0275\u0275classProp("m-5",!e.records||0===e.records.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("overlay",!0)}}function hK(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",1)(2,"table",2),t.\u0275\u0275template(3,XW,3,0,"ng-container",3),t.\u0275\u0275template(4,iK,3,0,"ng-container",4),t.\u0275\u0275template(5,aK,3,1,"ng-container",5),t.\u0275\u0275elementContainerStart(6,6),t.\u0275\u0275template(7,lK,1,0,"th",7),t.\u0275\u0275template(8,uK,2,1,"td",8),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275template(9,dK,1,0,"tr",9),t.\u0275\u0275template(10,pK,1,0,"tr",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(11,fK,3,0,"div",0),t.\u0275\u0275template(12,mK,2,3,"div",11),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=s.ngIf,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("dataSource",n.config.dataSource)("trackBy",n.trackRecord),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.selection),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.popoverColumns&&n.popoverColumns.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.columns),t.\u0275\u0275advance(4),t.\u0275\u0275property("cdkHeaderRowDef",e.displayedColumns),t.\u0275\u0275advance(1),t.\u0275\u0275property("cdkRowDefColumns",e.displayedColumns),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.loading&&0===e.records.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.loading)}}let CM=(()=>{class i{constructor(e,n){this.fieldManager=e,this.loadingBufferFactory=n,this.maxColumns=4,this.subs=[],this.loadingBuffer=this.loadingBufferFactory.create("table_loading_display_delay")}ngOnInit(){const e=this.config.selection$||(0,D.of)(null).pipe((0,v.shareReplay)(1));let n=this.initLoading();this.vm$=this.config.columns.pipe((0,D.combineLatestWith)(e,this.config.maxColumns$,this.config.dataSource.connect(null),n),(0,v.map)(([r,o,a,l,c])=>{const u=[];this.maxColumns=a;const d=this.buildDisplayColumns(r);return this.popoverColumns=this.buildHiddenColumns(r,d),o&&u.push("checkbox"),this.popoverColumns&&this.popoverColumns.length&&u.push("show-more"),u.push(...d),u.push("line-actions"),{columns:r,selection:o,selected:o&&o.selected||{},selectionStatus:o&&o.status||S.SelectionStatus.NONE,displayedColumns:u,records:l||[],loading:c}}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}toggleSelection(e){this.config.toggleRecordSelection(e)}allSelected(e){return e===S.SelectionStatus.ALL}buildDisplayColumns(e){let n=0,r=!1;const o=[],a=e.filter(function(l){return!l.hasOwnProperty("default")||l.hasOwnProperty("default")&&!0===l.default});for(;n<this.maxColumns&&n<a.length;)o.push(a[n].name),r=r||a[n].link,n++;if(!r&&this.maxColumns<a.length)for(n=this.maxColumns;n<a.length;n++)if(a[n].link){o.splice(-1,1),o.push(a[n].name);break}return o}buildHiddenColumns(e,n){const r=e.filter(function(l){return!l.hasOwnProperty("default")||l.hasOwnProperty("default")&&!0===l.default});let o=[];for(let l=0;l<r.length;l++)-1===n.indexOf(r[l].name)&&o.push(r[l].name);return r.filter(l=>o.includes(l.name))}getFieldSort(e){return{getSortDirection:()=>this.config.sort$.pipe((0,v.map)(n=>{let r=S.SortDirection.NONE;return n.orderBy===e.name&&(r=n.sortOrder),r})),changeSortDirection:n=>{this.config.updateSorting(e.name,n)}}}getField(e,n){return e&&n?this.fieldManager.addField(n,e):null}initLoading(){let e=(0,D.of)(!1).pipe((0,v.shareReplay)(1));return this.config.loading$&&(this.subs.push(this.config.loading$.subscribe(n=>{this.loadingBuffer.updateLoading(n)})),e=this.loadingBuffer.loading$),e}trackRecord(e,n){return n?.id??""}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(hi),t.\u0275\u0275directiveInject(sd))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-table-body"]],inputs:{config:"config"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"position-relative","d-flex","flex-column"],["cdk-table","","aria-describedby","table-body",1,"list-view-table","striped-table","table",3,"dataSource","trackBy"],["cdkColumnDef","checkbox",4,"ngIf"],["cdkColumnDef","show-more",4,"ngIf"],[3,"cdkColumnDef",4,"ngFor","ngForOf"],["cdkColumnDef","line-actions"],["cdk-header-cell","","scope","col","class","primary-table-header",4,"cdkHeaderCellDef"],["cdk-cell","",4,"cdkCellDef"],["cdk-header-row","",4,"cdkHeaderRowDef"],["cdk-row","",4,"cdkRowDef","cdkRowDefColumns"],[3,"m-5",4,"ngIf"],["cdkColumnDef","checkbox"],["cdk-header-cell","","scope","col",1,"primary-table-header"],["cdk-cell",""],[1,"checkbox-container"],["type","checkbox","aria-hidden","true",3,"checked","disabled","change"],[1,"checkmark"],["cdkColumnDef","show-more"],["cdk-header-cell","","scope","col","class","primary-table-header show-more-column",4,"cdkHeaderCellDef"],["cdk-cell","","class","show-more-column",4,"cdkCellDef"],["cdk-header-cell","","scope","col",1,"primary-table-header","show-more-column"],["cdk-cell","",1,"show-more-column"],[3,"record","columns",4,"ngIf"],[3,"record","columns"],[3,"cdkColumnDef"],["cdk-header-cell","","scope","col",3,"class",4,"cdkHeaderCellDef"],["cdk-cell","",3,"class",4,"cdkCellDef"],["cdk-header-cell","","scope","col"],[3,"labelKey","module"],[3,"state",4,"ngIf"],[3,"state"],[3,"mode","type","field","record"],[3,"config","record","wrapperClass","klass",4,"ngIf"],[3,"config","record","wrapperClass","klass"],["cdk-header-row",""],["cdk-row",""],[1,"lead","text-center","pt-3"],["labelKey","MSG_LIST_VIEW_NO_RESULTS_BASIC"],[3,"overlay"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,hK,13,9,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[I.NgForOf,I.NgIf,Zi.CdkTable,Zi.CdkRowDef,Zi.CdkCellDef,Zi.CdkHeaderCellDef,Zi.CdkColumnDef,Zi.CdkCell,Zi.CdkRow,Zi.CdkHeaderCell,Zi.CdkHeaderRow,Zi.CdkHeaderRowDef,hr,uM,iS,Nr,qt,iM,I.AsyncPipe],encapsulation:2})}return i})();function gK(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-bulk-action-menu",8),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("selectionSource",e.selection)("actionSource",e.bulkActions)}}function vK(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",9),t.\u0275\u0275element(1,"scrm-load-more",10),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("loadMoreButton",e.getLoadMoreButton())}}function _K(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-pagination",11),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("allowPagination",e.isPaginationEnabled())("state",e.pagination)}}let SM=(()=>{class i{isPaginationEnabled(){return"pagination"===this.paginationType}getLoadMoreButton(){return{klass:"load-more",labelKey:"LBL_LOAD_MORE",onClick:()=>{this.config.loadMore()}}}allLoaded(){return this.config?.allLoaded()}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-table-footer"]],inputs:{selection:"selection",bulkActions:"bulkActions",pagination:"pagination",tableActions:"tableActions",paginationType:"paginationType",config:"config"},decls:8,vars:4,consts:[[1,"list-view-tableactions","table-footer"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex"],[3,"selectionSource","actionSource",4,"ngIf"],["buttonClass","btn table-action-button",3,"config"],["class","mx-0 pl-0 load-more-style",4,"ngIf"],[1,"mx-0","pl-0","table-pagination-wrapper"],[3,"allowPagination","state",4,"ngIf"],[3,"selectionSource","actionSource"],[1,"mx-0","pl-0","load-more-style"],[3,"loadMoreButton"],[3,"allowPagination","state"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2),t.\u0275\u0275template(3,gK,1,2,"scrm-bulk-action-menu",3),t.\u0275\u0275element(4,"scrm-action-group-menu",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(5,vK,2,1,"div",5),t.\u0275\u0275elementStart(6,"div",6),t.\u0275\u0275template(7,_K,1,2,"scrm-pagination",7),t.\u0275\u0275elementEnd()()()),2&n&&(t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",r.selection&&r.bulkActions),t.\u0275\u0275advance(1),t.\u0275\u0275property("config",r.tableActions),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.isPaginationEnabled()&&!r.allLoaded()),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",r.pagination))},dependencies:[I.NgIf,wp,cd,oS,Ar],encapsulation:2})}return i})();function yK(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-table-header",3),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("bulkActions",e.config.bulkActions)("paginationType",e.getPaginationType())("pagination",e.config.pagination)("selection",e.config.selection)("tableActions",null==e.config?null:e.config.tableActions)}}function bK(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-table-footer",4),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("bulkActions",e.config.bulkActions)("paginationType",e.getPaginationType())("pagination",e.config.pagination)("selection",e.config.selection)("tableActions",null==e.config?null:e.config.tableActions)("config",e.config)}}let Ac=(()=>{class i{getPaginationType(){return this.config?.loadMore&&"load-more"===this.config?.paginationType?this.config.paginationType:"pagination"}showHeader(){return this.config.showHeader}showFooter(){return this.config.showFooter}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-table"]],inputs:{config:"config"},decls:4,vars:6,consts:[[3,"bulkActions","paginationType","pagination","selection","tableActions",4,"ngIf"],[3,"config"],[3,"bulkActions","paginationType","pagination","selection","tableActions","config",4,"ngIf"],[3,"bulkActions","paginationType","pagination","selection","tableActions"],[3,"bulkActions","paginationType","pagination","selection","tableActions","config"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,yK,1,5,"scrm-table-header",0),t.\u0275\u0275element(2,"scrm-table-body",1),t.\u0275\u0275template(3,bK,1,6,"scrm-table-footer",2),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275classMap(r.config&&r.config.klass||""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.showHeader()),t.\u0275\u0275advance(1),t.\u0275\u0275property("config",r.config),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.showFooter()))},dependencies:[I.NgIf,bM,CM,SM],encapsulation:2})}return i})(),MM=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Dp,ud,Ge.AngularSvgIconModule,Lr]})}return i})(),wM=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Ge.AngularSvgIconModule,Zi.CdkTableModule,Jn,dM,rS,Rr,Vt,rM]})}return i})(),DM=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Dp,ud,Ge.AngularSvgIconModule,sS,Lr]})}return i})(),Tc=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,MM,wM,DM,Ge.AngularSvgIconModule]})}return i})();class kp extends S.ActionHandler{checkRecordAccess(s,e=[]){const r=(s.record??{}).acls??[];return!(!r||!r.length)&&this.checkAccess(s.action??null,r,e)}}let xM=(()=>{class i extends kp{constructor(e,n){super(),this.moduleNameMapper=e,this.router=n,this.key="create",this.modes=["list"]}run(e,n=null){const r=n.params.create||{},o={};o.return_module=r.legacyModuleName,o.return_action=r.returnAction,o.return_id=e.record.id,o[r.mapping.moduleName]=r.legacyModuleName,o[r.mapping.name]=e.record.attributes.name,o[r.mapping.id]=e.record.id,this.router.navigate(["/"+r.module+"/"+r.action],{queryParams:o}).then()}shouldDisplay(e){return!0}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(En),t.\u0275\u0275inject(Ot.Router))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),EM=(()=>{class i extends kp{constructor(){super(),this.key="async-process",this.modes=S.ALL_VIEW_MODES}run(e){}shouldDisplay(e){const n=e?.action?.acl??[];return!n.length||this.checkRecordAccess(e,n)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Oc=(()=>{class i extends Ci{constructor(e,n){super(),this.createRelated=e,this.async=n,e.modes.forEach(r=>this.actions[r][e.key]=e),n.modes.forEach(r=>this.actions[r][n.key]=n)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(xM),t.\u0275\u0275inject(EM))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),IM=(()=>{class i extends vr{constructor(e,n,r,o,a,l,c,u){super(e,n,r,o,a,l,c,u),this.actionManager=e,this.asyncActionService=n,this.message=r,this.confirmation=o,this.language=a,this.selectModalService=l,this.metadata=c,this.appMetadataStore=u}buildActionData(e,n){return{record:n&&n.record||null,action:e}}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Oc),t.\u0275\u0275inject(nn),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Bn),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject($n),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Fn))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),FM=(()=>{class i{constructor(e,n){this.metadata=e,this.processService=n}build(e,n){return(0,S.deepClone)({module:"Favorite",type:"Favorite",attributes:{parent_id:n,parent_type:e}})}add(e,n){this.update(e,n,"add")}remove(e,n){this.update(e,n,"remove")}update(e,n,r){const a={favorite:n,action:r};setTimeout(()=>{this.processService.submit("update-favorite",a).pipe((0,v.take)(1)).subscribe(l=>{const c=l?.data?.favorite??null;null!==c?this.addFavoriteToMetadata(c,e):this.removeFavoriteFromMetadata(e,n)})},100)}addFavoriteToMetadata(e,n){const r={id:e?.id??"",module:e?.module??"",attributes:{...e?.attributes??{}}},o=e?.attributes?.parent_id??"",a=this.metadata.getModuleMeta(n),l=a?.favorites??null;if(l){let c=l.filter(u=>(u?.attributes?.parent_id??"")!==o);c.unshift(r),a.favorites=c}this.metadata.setModuleMetadata(n,a)}removeFavoriteFromMetadata(e,n){const r=this.metadata.getModuleMeta(e),o=r?.favorites??null,a=n?.attributes?.parent_id??null;!o||!o.length||!a||(r.favorites=o.filter(l=>(l?.attributes?.parent_id??"")!==a),this.metadata.setModuleMetadata(e,r))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(bt),t.\u0275\u0275inject(qi))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),AM=(()=>{class i{constructor(){this.buffer=new D.Subject,this.buffer$=this.buffer.asObservable(),this.enabled=!0,this.subs=[],this.debounceTime=1e3}init(e=1e3){this.debounceTime=e,this.subs.push(this.buffer$.pipe((0,v.debounceTime)(this.debounceTime)).subscribe(()=>{this.enabled=!0}))}destroy(){this.subs.forEach(e=>e.unsubscribe())}debounce(e){e&&this.enabled&&(this.enabled=!1,e(),this.buffer.next(!0))}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();function CK(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-button",1),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.addButton)}}function SK(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-button",1),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.removeButton)}}let TM=(()=>{class i{constructor(e){this.handler=e,this.favorite=!1}ngOnInit(){this.record&&(this.debounceService=new AM,this.debounceService.init(),this.favorite=this?.record?.favorite??!1,this.addButton={klass:["btn btn-sm btn-outline-light favorite-star favorite-off"],onClick:()=>{this.debounceService.debounce(()=>{this.add()})},icon:"star"},this.removeButton={klass:["btn btn-sm btn-outline-light favorite-star favorite-on"],onClick:()=>{this.debounceService.debounce(()=>{this.remove()})},icon:"star"})}ngOnDestroy(){this.debounceService.destroy()}add(){this.record.favorite=!0,this.favorite=!0;const e=this.handler.build(this.record.module,this.record.id);this.handler.add(this.record.module,e)}remove(){this.record.favorite=!1,this.favorite=!1;const e=this.handler.build(this.record.module,this.record.id);this.handler.remove(this.record.module,e)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(FM))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-favorite-toggle"]],inputs:{record:"record"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"config"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,CK,2,1,"ng-container",0),t.\u0275\u0275template(1,SK,2,1,"ng-container",0)),2&n&&(t.\u0275\u0275property("ngIf",!r.favorite),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.favorite))},dependencies:[I.NgIf,Un],encapsulation:2})}return i})(),OM=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,an]})}return i})();class jp extends S.ActionHandler{}let LM=(()=>{class i extends jp{constructor(e){super(),this.message=e,this.key="save",this.modes=["edit"]}run(e){e.store.validate().pipe((0,v.take)(1)).subscribe(n=>{n?e.store.save().pipe((0,v.take)(1)).subscribe(r=>{e.listFilterStore.config.addSavedFilter(e.store.recordStore.extractBaseRecord(r)),e.listFilterStore.applyFilter(),this.message.addSuccessMessageByKey("LBL_SAVED_FILTER_SAVED")}):this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}shouldDisplay(){return!0}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(dt))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),NM=(()=>{class i extends jp{constructor(e,n){super(),this.message=e,this.asyncActionService=n,this.key="delete",this.modes=["edit","detail"]}run(e){const n=`record-${this.key}`,r=e.store.getBaseRecord()||{};r.id?(this.message.removeMessages(),this.asyncActionService.run(n,{action:n,module:r.module,id:r.id},"noop").pipe((0,v.take)(1)).subscribe(()=>{e.listFilterStore.config.removeSavedFilter(r)})):this.message.addWarningMessageByKey("LBL_FILTER_ID_NOT_DEFINED")}shouldDisplay(e){const n=e&&e.store;return!!(n&&n.recordStore.getBaseRecord()||{}).id}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(dt),t.\u0275\u0275inject(nn))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Pp=(()=>{class i extends Ci{constructor(e,n){super(),e.modes.forEach(r=>this.actions[r][e.key]=e),n.modes.forEach(r=>this.actions[r][n.key]=n)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(LM),t.\u0275\u0275inject(NM))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const RM={id:"",type:"",module:"",attributes:{}};class BM extends rp{constructor(s,e,n,r,o,a,l,c){super(s,e,n,r,o,a),this.definitions$=s,this.recordSaveGQL=e,this.recordFetchGQL=n,this.message=r,this.recordManager=o,this.recordMappers=a,this.fieldManager=l,this.language=c,this.internalState=(0,S.deepClone)(RM),this.stagingState=(0,S.deepClone)(RM),this.store=new D.BehaviorSubject(this.internalState),this.staging=new D.BehaviorSubject(this.stagingState),this.searchFields={},this.listColumns=[],this.state$=this.store.asObservable().pipe((0,v.tap)(u=>{this.updateStaging(u)})),this.staging$=this.staging.asObservable()}getSearchFields(){return this.searchFields}setSearchFields(s){this.searchFields=s}getListColumns(){return this.listColumns}setListColumns(s){this.listColumns=s}getBaseRecord(){return this.stagingState?(this.mapStagingFields(),(0,S.deepClone)({id:this.stagingState.id,type:this.stagingState.type,module:this.stagingState.module,key:this.stagingState.key,searchModule:this.stagingState.searchModule,criteria:this.stagingState.criteria,attributes:this.stagingState.attributes})):null}extractBaseRecord(s){if(!s)return null;let e=s.criteria??{};return Array.isArray(e)&&!e.length&&(e={}),(0,S.deepClone)({id:s.id,type:s.type,module:s.module,key:s.key,searchModule:s.searchModule,criteria:e,attributes:s.attributes})}initRecord(s){s.attributes=s.attributes||{},s.attributes.search_module=s.searchModule;const e=s?.attributes?.contents?.filters??{};s.attributes.contents=s.attributes.contents||{filters:{}},s.attributes.contents.filters=Array.isArray(e)&&!e.length?{}:e,s.criteria=this.getCriteria(s),this.initCriteriaFields(s,this.getSearchFields()),s.module&&this.definitions&&this.definitions.length>0&&(s.fields=this.recordManager.initFields(s,this.definitions)),this.initOrderByOptions(s)}initOrderByOptions(s){if(!s.fields||!s.fields.orderBy)return;s.fields.orderBy.metadata=s.fields.orderBy.metadata||{};const e=[];this.getListColumns().forEach(n=>{if(!n.default||!0!==n.default)return;const o=this.language.getFieldLabel(n.label||n.fieldDefinition.vname||"",s.searchModule);e.push({value:n.fieldDefinition.name||n.name,label:o})}),s.fields.orderBy.metadata.options$=(0,D.of)(e).pipe((0,v.shareReplay)())}getCriteria(s){return s&&s.criteria?s.criteria.filters?Array.isArray(s.criteria.filters)&&!s.criteria.filters.length?{...s.criteria,filters:{}}:(0,S.deepClone)(s.criteria):{...s.criteria,filters:{}}:{filters:{}}}initCriteriaFields(s,e){s.criteriaFields=s.criteriaFields||{},s.criteriaFormGroup||(s.criteriaFormGroup=new De.UntypedFormGroup({})),e&&Object.keys(e).forEach(n=>{this.buildField(s,e[n])})}buildField(s,e){const r=e.type,o={name:e.name,label:e.label,vardefBased:e?.vardefBased??!1,readonly:e?.readonly??!1,display:e?.display??"",type:r,fieldDefinition:{}};e.fieldDefinition&&(o.fieldDefinition=e.fieldDefinition),("bool"===r||"boolean"===r)&&(o.fieldDefinition.options="dom_int_bool"),this.fieldManager.addFilterField(s,o,this.language)}}let Vp=(()=>{class i{constructor(e,n,r,o,a,l,c,u){this.recordFetchGQL=e,this.recordSaveGQL=n,this.message=r,this.recordManager=o,this.recordMappers=a,this.baseMapper=l,this.fieldManager=c,this.language=u,a.register("default",l.getKey(),l)}create(e){return new BM(e,this.recordSaveGQL,this.recordFetchGQL,this.message,this.recordManager,this.recordMappers,this.fieldManager,this.language)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(io),t.\u0275\u0275inject(ro),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Si),t.\u0275\u0275inject(S.RecordMapperRegistry),t.\u0275\u0275inject(ws),t.\u0275\u0275inject(hi),t.\u0275\u0275inject(Ue))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const kM={module:"",searchModule:"",recordID:"",loading:!1,mode:"detail"};let Up=(()=>{class i{constructor(e,n,r,o,a,l){this.appStateStore=e,this.meta=n,this.message=r,this.fieldManager=o,this.language=a,this.savedFilterStoreFactory=l,this.cache$=null,this.internalState=(0,S.deepClone)(kM),this.store=new D.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.subs=[],this.metadataLoadingState=new D.BehaviorSubject(!1),this.metadataLoading$=this.metadataLoadingState.asObservable(),this.meta$=this.meta.getMetadata("saved-search",["recordView"]).pipe((0,v.tap)(()=>this.metadataLoadingState.next(!1)),(0,v.map)(c=>{const u={...c.recordView};return u.actions=(u?.actions??[]).filter(d=>"cancel"!==d.key),u})),this.recordStore=l.create(this.getViewFields$()),this.record$=this.recordStore.state$.pipe((0,v.distinctUntilChanged)(),(0,v.map)(c=>c)),this.stagingRecord$=this.recordStore.staging$.pipe((0,v.distinctUntilChanged)(),(0,v.map)(c=>c)),this.loading$=this.state$.pipe((0,v.map)(c=>c.loading)),this.mode$=this.state$.pipe((0,v.map)(c=>c.mode)),this.vm$=this.stagingRecord$.pipe((0,D.combineLatestWith)(this.mode$),(0,v.map)(([c,u])=>(this.vm={record:c,mode:u},this.vm)))}getModuleName(){return this.internalState.module}getRecordId(){return this.internalState.recordID}getViewContext(){return{module:this.getModuleName(),id:this.getRecordId()}}destroy(){this.clear()}init(e,n="detail"){return this.internalState.module="saved-search",this.internalState.recordID=e,this.setMode(n),this.metadataLoadingState.next(!0),(0,D.forkJoin)([this.meta$,this.load()]).pipe((0,v.map)(([o,a])=>a))}initRecord(e,n,r,o,a="detail"){this.updateState({...this.internalState,recordID:n.id,module:"saved-search",searchModule:e,mode:a}),this.metadataLoadingState.next(!0),this.meta$.pipe((0,v.take)(1),(0,v.tap)(()=>{this.metadataLoadingState.next(!1),this.initStaging(e,n,r,o)})).subscribe()}initValidators(e){!e||!e?.fields||!Object.keys(e?.fields).length||Object.keys(e.fields).forEach(n=>{const r=e.fields[n];if(!r?.formControl)return;this.resetValidators(r);const a=r?.validators??[],l=r?.asyncValidators??[];a.length&&r?.formControl?.setValidators(a),l.length&&r?.formControl?.setAsyncValidators(l)})}resetValidators(e){e?.formControl?.clearValidators(),e?.formControl?.clearAsyncValidators()}initStaging(e,n,r,o){const a=(0,S.deepClone)(this.recordStore.extractBaseRecord(n));a.searchModule=e,this.recordStore.setSearchFields(r),this.recordStore.setListColumns(o),this.recordStore.setStaging(a),this.initValidators(this.recordStore.getStaging())}clear(){this.cache$=null,this.updateState((0,S.deepClone)(kM)),this.metadataLoadingState.unsubscribe(),this.metadataLoadingState=null,this.recordStore.destroy(),this.recordStore=null}clearAuthBased(){this.clear()}getBaseRecord(){return this.recordStore.getBaseRecord()}getMode(){return this.internalState?this.internalState.mode:null}setMode(e){this.updateState({...this.internalState,mode:e})}save(){return this.appStateStore.updateLoading(`${this.internalState.module}-record-save`,!0),this.recordStore.save().pipe((0,v.catchError)(()=>(this.message.addDangerMessageByKey("LBL_ERROR_SAVING"),(0,D.of)({}))),(0,v.finalize)(()=>{this.appStateStore.updateLoading(`${this.internalState.module}-record-save`,!1)}))}validate(){return(0,D.forkJoin)([this.recordStore.validate(),this.validateCriteria()]).pipe((0,v.map)(([e,n])=>e&&n))}validateCriteria(){const n=this.recordStore.getStaging().criteriaFormGroup;return n.markAllAsTouched(),n.statusChanges.pipe((0,v.startWith)(n.status),(0,v.filter)(r=>"PENDING"!==r),(0,v.take)(1),(0,v.map)(r=>"VALID"===r))}load(e=!0){return this.appStateStore.updateLoading(`${this.internalState.module}-record-fetch`,!0),this.recordStore.retrieveRecord(this.internalState.module,this.internalState.recordID,e).pipe((0,v.tap)(n=>{this.appStateStore.updateLoading(`${this.internalState.module}-record-fetch`,!1),this.updateState({...this.internalState,recordID:n.id,module:n.module})}))}getViewFieldsKeys$(){return this.meta$.pipe((0,v.map)(e=>{const n=[];return e.panels.forEach(r=>{r.rows.forEach(o=>{o.cols.forEach(a=>{n.push(a.name)})})}),n}))}getViewFields$(){return this.meta$.pipe((0,v.map)(e=>{const n=[];return e.panels.forEach(r=>{r.rows.forEach(o=>{o.cols.forEach(a=>{n.push(a)})})}),n}))}updateState(e){this.store.next(this.internalState=e)}getMetadata(){return(this.meta.get()||{}).recordView||{}}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ht),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(hi),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(Vp))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),jM=(()=>{class i extends ro{constructor(e){super(e),this.apollo=e}save(e){return super.save(e)}mapToRecord(e){if(!e.data||!e.data.saveRecord||!e.data.saveRecord.record)return null;const n={id:e.data.saveRecord.record._id,type:e.data.saveRecord.record.type||"",module:e.data.saveRecord.record.module||"",attributes:e.data.saveRecord.record.attributes||null};n.key=n.id||n.attributes&&n.attributes.id||"";const r=n.attributes&&n.attributes.contents||null;return r&&(n.criteria=r),n}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(W.Apollo))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),PM=(()=>{class i{getKey(){return"criteria"}map(e){const n=e;if(n.criteria){const o=n?.attributes?.contents??{};o.filters=(0,S.deepClone)(n?.criteria?.filters??{}),e.fields.name&&(o.name=e.fields.name.value,n.criteria.name=o.name),e.fields.orderBy&&(o.orderBy=e.fields.orderBy.value,n.criteria.orderBy=o.orderBy),e.fields.sortOrder&&(o.sortOrder=e.fields.sortOrder.value,n.criteria.sortOrder=o.sortOrder),e.attributes.search_module&&(o.searchModule=e.attributes.search_module,n.criteria.searchModule=o.searchModule),n.attributes.contents=o}let r=n.key||"";"default"===r&&(r=""),n.id=r,n.attributes.id=r}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),$p=(()=>{class i{constructor(e,n,r,o,a,l,c,u,d,p,f){this.recordFetchGQL=e,this.recordSaveGQL=n,this.appStateStore=r,this.languageStore=o,this.metadataStore=a,this.message=l,this.recordManager=c,this.fieldManager=u,this.recordMappers=d,this.baseMapper=p,this.savedSearchMapper=f,this.savedFilterStoreFactory=new Vp(e,n,l,c,d,p,u,o),this.recordMappers.register("saved-search",this.savedSearchMapper.getKey(),this.savedSearchMapper)}create(){return new Up(this.appStateStore,this.metadataStore,this.message,this.fieldManager,this.languageStore,this.savedFilterStoreFactory)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(io),t.\u0275\u0275inject(jM),t.\u0275\u0275inject(Ht),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Si),t.\u0275\u0275inject(hi),t.\u0275\u0275inject(S.RecordMapperRegistry),t.\u0275\u0275inject(ws),t.\u0275\u0275inject(PM))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),zp=(()=>{class i{constructor(e,n){this.message=e,this.savedFilterStoreFactory=n,this.panelMode="closable",this.mode="filter",this.gridButtons=null,this.fields=[],this.special=[],this.savedFilters=[],this.subs=[],this.filterStore=n.create()}init(e){this.config=e,this.initSearchFields(),this.initConfigUpdatesSubscription(),this.vm$=this.filterStore.stagingRecord$.pipe((0,v.map)(n=>[n]),(0,v.tap)(([n])=>{this.reset(),this.splitCriteriaFields(n),this.initDisplayFields(),"detail"!==this.filterStore.getMode()&&this.initGridButtons(),this.initHeaderButtons(),this.initMyFiltersButton(this.savedFilters)})),this.config.panelMode&&(this.panelMode=this.config.panelMode),this.collapse=new D.BehaviorSubject(!1),this.isCollapsed$=this.collapse.asObservable(),(0,S.isVoid)(this.config.isCollapsed)||this.collapse.next(this.config.isCollapsed),this.reset(),this.initGridButtons(),this.initHeaderButtons()}clear(){this.subs.forEach(e=>e.unsubscribe()),this.reset(),this.filterStore.clear(),this.filterStore=null,this.collapse.unsubscribe()}clearAuthBased(){this.clear()}reset(){this.fields=[],this.special=[]}applyFilter(){this.filterStore.validateCriteria().pipe((0,v.take)(1)).subscribe(e=>{if(e)return"collapsible"===this.config.panelMode&&this.config.collapseOnSearch&&this.collapse.next(!0),this.config.onSearch(),void this.config.updateFilter(this.filterStore.getBaseRecord());this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}clearFilter(){this.config.resetFilter(!1)}initConfigUpdatesSubscription(){this.subs.push(this.config.filter$.pipe((0,D.combineLatestWith)(this.config.searchFields$),(0,v.tap)(([e,n])=>{this.reset();let r="edit";(e.readonly??!1)&&(r="detail",this.mode=r),this.filterStore.initRecord(this.config.module,e,n,this.config.listFields,r)})).subscribe()),this.subs.push(this.config.savedFilters$.pipe((0,v.map)(e=>[e]),(0,v.tap)(([e])=>{this.savedFilters=e,this.initMyFiltersButton(e)})).subscribe())}splitCriteriaFields(e){!e||!e.criteriaFields||Object.entries(e.criteriaFields).forEach(([n,r])=>{if((r.name||n).includes("_only"))return void this.special.push(r);if(!r.vardefBased)return void this.fields.push(r);if(!0===r.readonly)return;const l=(e?.criteria?.filters??{})[n]??{};!(0,ie.isEmpty)(l?.operator)&&"none"===r.display&&(r.display="default"),this.fields.push(r)})}initSearchFields(){this.subs.push(this.config.searchFields$.subscribe(e=>{this.searchFields=e}))}initDisplayFields(){(!this.searchFields||(0,S.emptyObject)(this.searchFields)||!this.fields)&&(this.displayFields=[]);const e=[];this.fields.forEach(n=>{"none"===n.display||"groupField"===n.source||(this.searchFields[n.name]||(n.readonly=!0),e.push(n))}),this.displayFields=e}initGridButtons(){this.gridButtons=[{id:"clear",labelKey:"LBL_CLEAR_BUTTON_LABEL",klass:["clear-filters-button","btn","btn-outline-danger","btn-sm"],onClick:this.clearFilter.bind(this)},{id:"search",labelKey:"LBL_SEARCH_BUTTON_LABEL",klass:["filter-button","btn","btn-danger","btn-sm"],onClick:this.applyFilter.bind(this)}]}initHeaderButtons(){this.closeButton={onClick:()=>{this.config.onClose()}}}initMyFiltersButton(e){if(!e||e.length<1)return void(this.myFilterButton=null);const n={wrapperKlass:["filter-select"],labelKey:"LBL_SAVED_FILTER_SHORTCUT",klass:["btn","btn-outline-light","btn-sm"],items:[]},r=this.filterStore.getRecordId();e.forEach(o=>{const a={label:o.attributes.name,onClick:()=>{this.config.setOpenFilter(o)}};o.key===r&&(n.label=o.attributes.name,n.labelKey="",a.icon="filter",a.iconKlass="small",a.klass="active"),n.items.push(a)}),this.myFilterButton=n}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(dt),t.\u0275\u0275inject($p))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),VM=(()=>{class i extends vr{constructor(e,n,r,o,a,l,c,u,d,p){super(o,a,l,c,r,u,d,p),this.store=e,this.listFilterStore=n,this.language=r,this.actionManager=o,this.asyncActionService=a,this.message=l,this.confirmation=c,this.selectModalService=u,this.metadata=d,this.appMetadataStore=p,this.actions={}}getActions(e){return this.store.meta$.pipe((0,D.combineLatestWith)(this.store.mode$,this.store.stagingRecord$,this.language.vm$),(0,v.map)(([n,r])=>{if(!r||!n)return[];const o=this.parseModeActions(n.actions,r);return o.forEach(a=>{this.actions[a.key]=a}),o}))}run(e){const n=this.actions[e];n&&this.runAction(n)}buildActionData(e,n){return{store:this.store,listFilterStore:this.listFilterStore,action:e}}getMode(){return this.store.getMode()}getModuleName(e){return this.store.getModuleName()}reload(e,n,r){this.store.load(!1).pipe((0,v.take)(1)).subscribe()}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Up),t.\u0275\u0275inject(zp),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(Pp),t.\u0275\u0275inject(nn),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Bn),t.\u0275\u0275inject($n),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Fn))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),UM=(()=>{class i{constructor(e,n,r,o,a,l,c,u){this.language=e,this.actionManager=n,this.asyncActionService=r,this.message=o,this.confimation=a,this.selectModalService=l,this.metadata=c,this.appMetadataStore=u}create(e,n){return new VM(e,n,this.language,this.actionManager,this.asyncActionService,this.message,this.confimation,this.selectModalService,this.metadata,this.appMetadataStore)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(Pp),t.\u0275\u0275inject(nn),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Bn),t.\u0275\u0275inject($n),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Fn))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),$M=(()=>{class i{constructor(e,n){this.message=e,this.savedFilterStoreFactory=n}create(){return new zp(this.message,this.savedFilterStoreFactory)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(dt),t.\u0275\u0275inject($p))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function MK(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",6),t.\u0275\u0275element(1,"scrm-dropdown-button",7),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.store.myFilterButton)}}function wK(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",13),t.\u0275\u0275element(1,"input",14),t.\u0275\u0275elementStart(2,"label",15),t.\u0275\u0275element(3,"scrm-label",16),t.\u0275\u0275elementEnd()()),2&i){const e=s.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("value",e.value),t.\u0275\u0275advance(2),t.\u0275\u0275property("labelKey",e.labelKey)}}function DK(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",11),t.\u0275\u0275template(1,wK,4,2,"div",12),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.store.special)}}function xK(i,s){1&i&&t.\u0275\u0275element(0,"scrm-button",7),2&i&&t.\u0275\u0275property("config",s.$implicit)}function EK(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",17),t.\u0275\u0275template(1,xK,1,1,"scrm-button",18),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.store.gridButtons)}}function IK(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"scrm-field-grid",8),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.onFocusSearch())}),t.\u0275\u0275template(1,DK,2,1,"div",9),t.\u0275\u0275template(2,EK,2,1,"div",10),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275nextContext().ngIf,n=t.\u0275\u0275nextContext();t.\u0275\u0275property("actions",!0)("appendActions",!1)("fieldMode",n.store.mode)("fields",n.store.displayFields)("record",e)("special",n.store.special.length>0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.store.special.length>0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.store.gridButtons)}}function FK(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"scrm-record-grid",19),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.onFocusSave())}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.gridConfig)}}function AK(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"scrm-panel",1),t.\u0275\u0275template(1,MK,2,1,"div",2),t.\u0275\u0275elementStart(2,"div",3),t.\u0275\u0275template(3,IK,3,8,"scrm-field-grid",4),t.\u0275\u0275template(4,FK,2,1,"ng-container",5),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275propertyInterpolate1("klass","filter-panel m-0 ",e.config&&e.config.klass||"",""),t.\u0275\u0275property("showHeader",e.config.displayHeader)("close",e.store.closeButton)("isCollapsed$",e.store.isCollapsed$)("mode",e.store.panelMode)("titleKey","LBL_BASIC_FILTER"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.store.myFilterButton),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.store.displayFields&&e.store.displayFields.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.config&&e.config.savedFilterEdit&&"detail"!==e.store.filterStore.getMode())}}let Lc=(()=>{class i{onEnterKey(){this.selectedActionButton&&this.selectedActionButton.onClick()}constructor(e,n){this.storeFactory=e,this.actionAdapterFactory=n,this.subs=[],this.store=e.create(),this.filterActionsAdapter=n.create(this.store.filterStore,this.store)}ngOnInit(){this.store.init(this.config),this.vm$=this.store.vm$.pipe((0,v.map)(([e])=>{const n={...e};return n.fields=e.criteriaFields,n})),this.searchActionButton=this.store.gridButtons.find(e=>"search"===e.id),this.saveActionButton={id:"save",onClick:()=>{this.filterActionsAdapter.run("save")}},this.gridConfig={record$:this.store.filterStore.stagingRecord$,mode$:this.store.filterStore.mode$,fields$:this.store.filterStore.getViewFieldsKeys$(),actions:this.filterActionsAdapter,appendActions:!0,klass:"mt-2 p-2 saved-search-container rounded",buttonClass:"btn btn-outline-danger btn-sm",labelDisplay:"inline",rowClass:{"align-items-start":!0,"align-items-center":!1},colAlignItems:"align-items-start",maxColumns$:(0,D.of)(4).pipe((0,v.shareReplay)(1)),sizeMap$:(0,D.of)({handset:1,tablet:2,web:4,wide:4}).pipe((0,v.shareReplay)(1))}}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe()),this.store.clear(),this.store=null}onFocusSearch(){this.selectedActionButton=this.searchActionButton}onFocusSave(){this.selectedActionButton=this.saveActionButton}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject($M),t.\u0275\u0275directiveInject(UM))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-list-filter"]],hostBindings:function(n,r){1&n&&t.\u0275\u0275listener("keydown.enter",function(){return r.onEnterKey()})},inputs:{config:"config"},decls:2,vars:3,consts:[[3,"showHeader","close","isCollapsed$","mode","klass","titleKey",4,"ngIf"],[3,"showHeader","close","isCollapsed$","mode","klass","titleKey"],["panel-header-button","",4,"ngIf"],["panel-body","",1,"p-2","filter-body"],[3,"actions","appendActions","fieldMode","fields","record","special","click",4,"ngIf"],[4,"ngIf"],["panel-header-button",""],[3,"config"],[3,"actions","appendActions","fieldMode","fields","record","special","click"],["class","float-right mt-4","field-grid-special","",4,"ngIf"],["class","mt-4 align-self-end","field-grid-actions","",4,"ngIf"],["field-grid-special","",1,"float-right","mt-4"],["class","d-inline-block form-check mb-2 mr-sm-2",4,"ngFor","ngForOf"],[1,"d-inline-block","form-check","mb-2","mr-sm-2"],["type","checkbox",1,"form-check-input",3,"value"],[1,"form-check-label"],[3,"labelKey"],["field-grid-actions","",1,"mt-4","align-self-end"],[3,"config",4,"ngFor","ngForOf"],[3,"config","click"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,AK,5,9,"scrm-panel",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[I.NgForOf,I.NgIf,Un,Bs,Qd,Ul,qt,Sp,I.AsyncPipe],encapsulation:2})}return i})(),Nc=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,an,so,Oo,Tr,Vt,Fa,an]})}return i})(),TK=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Do,Tc,Vt,Rr,Nc,an]})}return i})();function OK(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-record-grid",4),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.getGridConfig())}}function LK(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"scrm-panel",1)(1,"div",2),t.\u0275\u0275template(2,OK,2,1,"ng-container",3),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275propertyInterpolate1("klass","record-panel ",e.config&&e.config.klass||"",""),t.\u0275\u0275property("close",e.closeButton)("isCollapsed$",e.isCollapsed$)("mode",e.panelMode)("titleKey",e.config.title||""),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.config)}}t.\u0275\u0275setComponentScope(As,[I.NgIf,Ss,Ac,qt,Nr,Lc,Un],[I.AsyncPipe]);let zM=(()=>{class i{constructor(){this.panelMode="closable"}ngOnInit(){this.vm$=this.config.store.vm$,this.initCloseButton(),this.config.panelMode&&(this.panelMode=this.config.panelMode),this.collapse=new D.BehaviorSubject(!1),this.isCollapsed$=this.collapse.asObservable(),(0,S.isVoid)(this.config.isCollapsed)||this.collapse.next(this.config.isCollapsed)}ngOnDestroy(){}getGridConfig(){return{record$:this.config.store.stagingRecord$,mode$:this.config.store.mode$,fields$:this.config.store.getViewFieldsKeys$(),actions:this.config.actions,klass:"mt-2 rounded",buttonClass:"btn btn-outline-danger btn-sm",maxColumns$:(0,D.of)(4).pipe((0,v.shareReplay)(1)),sizeMap$:(0,D.of)({handset:1,tablet:2,web:3,wide:4}).pipe((0,v.shareReplay)(1))}}initCloseButton(){this.closeButton={onClick:()=>{this.config.onClose()}}}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-panel"]],inputs:{config:"config"},decls:2,vars:3,consts:[[3,"close","isCollapsed$","mode","titleKey","klass",4,"ngIf"],[3,"close","isCollapsed$","mode","titleKey","klass"],["panel-body","",1,"pl-2","pr-2"],[4,"ngIf"],[3,"config"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,LK,3,6,"scrm-panel",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[I.NgIf,Bs,Sp,I.AsyncPipe],encapsulation:2})}return i})();class HM extends S.ActionHandler{}let WM=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,an,so,Oo,Tr,Vt,an,Fa]})}return i})(),Hp=(()=>{class i extends ip{constructor(e,n,r,o,a,l){super(e,n,r,o,a,l),this.appStateStore=e,this.meta=n,this.message=r,this.fieldManager=o,this.language=a,this.storeFactory=l}getViewFields$(){return this.meta$.pipe((0,v.map)(e=>e.fields))}getViewFieldsKeys$(){return this.meta$.pipe((0,v.map)(e=>{if(!e.fields||!e.fields.length)return[];const n=[];return e.fields.forEach(r=>{n.push(r.name)}),n}))}initRecord(e,n="detail",r=!0){super.initRecord(e,n,r),this.setRecord(e)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ht),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(hi),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(oo))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),KM=(()=>{class i{constructor(e,n,r,o,a,l,c,u,d){this.recordFetchGQL=e,this.recordSaveGQL=n,this.appStateStore=r,this.languageStore=o,this.metadataStore=a,this.message=l,this.recordManager=c,this.fieldManager=u,this.recordStoreFactory=d}create(){return new Hp(this.appStateStore,this.metadataStore,this.message,this.fieldManager,this.languageStore,this.recordStoreFactory)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(io),t.\u0275\u0275inject(ro),t.\u0275\u0275inject(Ht),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Si),t.\u0275\u0275inject(hi),t.\u0275\u0275inject(oo))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const NK={module:"",query:{},statistic:{id:"",data:{}},loading:!1};let Wp=(()=>{class i extends Mc{constructor(e){super(e),this.fetchGQL=e,this.cache$=null,this.internalState=(0,S.deepClone)(NK),this.store=new D.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.statistic$=this.state$.pipe((0,v.map)(n=>n.statistic),(0,v.distinctUntilChanged)())}updateState(e){super.updateState(e)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(gr))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),GM=(()=>{class i{traverse(e,n,r){e.singleSeries&&e.singleSeries.forEach(o=>{n.visit(o,r)}),e.multiSeries&&e.multiSeries.forEach(o=>{o.series.forEach(a=>{n.visit(a,r)})})}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ZM=(()=>{class i{constructor(e,n){this.currencyService=e,this.preferences=n}toUserFormat(e,n=null){const r=parseFloat(e);if(!isFinite(r))return e;const o=this.currencyService.getUserCurrency();return this.currencyService.baseToCurrency(o.id,r).toString()}toInternalFormat(e){const n=parseFloat(e);if(!isFinite(n))return e;const r=this.currencyService.getUserCurrency();return this.currencyService.currencyToBase(r.id,n).toString()}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(pa),t.\u0275\u0275inject(Xt))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),qM=(()=>{class i{constructor(e){this.currencyUnitConverter=e,this.map={},this.addUnitConverter("currency",e)}addUnitConverter(e,n){this.map[e]=n}toUserFormat(e,n,r){if(!e)return n;const o=this.map[e];return o?o.toUserFormat(n,r):n}toInternalFormat(e,n){if(!e)return n;const r=this.map[e];return r?r.toInternalFormat(n):n}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ZM))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),QM=(()=>{class i{constructor(e){this.converter=e}visit(e,n){const r=n?.dataType??null,o=n?.direction??"user-unit";if(!r)return;const a=parseFloat(e.value.toString());if(isFinite(a)){if("user-unit"===o)return void(e.value=this.converter.toUserFormat(r,a.toString()));e.value=this.converter.toInternalFormat(r,a.toString())}}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(qM))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Kp=(()=>{class i{constructor(e,n){this.traverser=e,this.dataTypeMapper=n,this.registry={},this.addMapper("data-type-unit-converter",n)}addMapper(e,n){this.registry[e]=n}map(e,n,r){const o=this?.registry[n]??null;o&&this.traverser.traverse(e,o,r)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(GM),t.\u0275\u0275inject(QM))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const RK={module:"",query:{},statistic:{id:"",data:{}},loading:!1};let JM=(()=>{class i extends Wp{constructor(e,n,r){super(e),this.fetchGQL=e,this.formatter=n,this.seriesMapper=r,this.internalState=(0,S.deepClone)(RK),this.store=new D.BehaviorSubject(this.internalState),this.defaultOptions={},this.state$=this.store.asObservable(),this.statistic$=this.state$.pipe((0,v.map)(o=>o.statistic),(0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(o=>o.loading),(0,v.distinctUntilChanged)())}setDefaultOptions(e){this.defaultOptions=e}getDataSource(){return this.internalState.dataSource}addNewState(e){if(!e.metadata||!e.metadata.dataType)return;this.injectDefaultValues(e);const n=this.buildCharDataSource(e);this.updateState({...this.internalState,statistic:e,dataSource:n,loading:!1})}injectDefaultValues(e){e.metadata.chartOptions?Object.keys(this.defaultOptions).forEach(n=>{n in e.metadata.chartOptions||(e.metadata.chartOptions[n]=this.defaultOptions[n])}):e.metadata.chartOptions=(0,S.deepClone)(this.defaultOptions)}buildCharDataSource(e){const n=e.metadata.dataType||"";let r=null;const o=e.metadata&&e.metadata.digits||null;return null!==o&&(r={digits:o}),{options:e.metadata.chartOptions||{},getResults:()=>(0,D.of)(this.buildSeriesResult(e)).pipe((0,v.shareReplay)(1)),tickFormatting:a=>this.formatter.toUserFormat(n,a,r),tooltipFormatting:a=>this.formatter.toUserFormat(n,a,r)}}buildSeriesResult(e){const n=e.metadata.dataType||"",r={},o=e.data.singleSeries||null;o&&(r.singleSeries=o);const a=e.data.multiSeries||null;return a&&(r.multiSeries=a),this.seriesMapper.map(r,"data-type-unit-converter",{dataType:n}),r}updateState(e){super.updateState(e)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(gr),t.\u0275\u0275inject(mt),t.\u0275\u0275inject(Kp))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),YM=(()=>{class i{constructor(e,n,r){this.fetchGQL=e,this.formatter=n,this.seriesMapper=r}create(){return new JM(this.fetchGQL,this.formatter,this.seriesMapper)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(gr),t.\u0275\u0275inject(mt),t.\u0275\u0275inject(Kp))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),lo=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],inputs:{config:"config",context:"context",context$:"context$"},decls:0,vars:0,template:function(n,r){},encapsulation:2})}return i})();function BK(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"option",18),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("value",n.getKey(e)),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.language.getFieldLabel(e.labelKey)," ")}}function kK(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",13)(1,"div",14)(2,"form",15)(3,"select",16),t.\u0275\u0275listener("ngModelChange",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.onChartSelect())})("ngModelChange",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.selectedChart=r)}),t.\u0275\u0275template(4,BK,2,2,"option",17),t.\u0275\u0275elementEnd()()()()}if(2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(3),t.\u0275\u0275property("ngModel",e.selectedChart),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.configuredCharts)}}function jK(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-chart",20),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("dataSource",e.dataSource)("type",e.chartType)}}function PK(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,jK,1,2,"scrm-chart",19),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.dataSource&&e.chartType)}}function VK(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",21),t.\u0275\u0275element(1,"scrm-loading-spinner",22),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275classProp("m-5",!e.dataSource),t.\u0275\u0275advance(1),t.\u0275\u0275property("overlay",!0)}}function UK(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"p",23),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.language.getFieldLabel(e.messageLabelKey)," ")}}function $K(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"scrm-widget-panel",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),t.\u0275\u0275template(5,kK,5,2,"div",6),t.\u0275\u0275elementStart(6,"div",7)(7,"div",8)(8,"div",9),t.\u0275\u0275template(9,PK,2,1,"ng-container",10),t.\u0275\u0275template(10,VK,2,3,"div",11),t.\u0275\u0275template(11,UK,2,1,"p",12),t.\u0275\u0275elementEnd()()()()()()()()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("title",e.title),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",e.isConfigured&&e.chartOptions.toggle),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",e.selectedChart&&!e.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(e.loading||e.isConfigured()&&e.dataSource))}}let XM=(()=>{class i extends lo{constructor(e,n){super(),this.language=e,this.factory=n,this.charts={},this.titleLabelKey="LBL_INSIGHTS",this.title="",this.messageLabelKey="LBL_CHART_NOT_FOUND",this.selectedChart="",this.chartType="",this.loading=!0,this.subs=[]}ngOnInit(){if(this.appStrings$=this.language.appStrings$,!1===this.validateConfig())return;this.context$&&this.subs.push(this.context$.subscribe(r=>{this.context=r,Object.keys(this.charts).forEach(o=>{this.charts[o].store.context=r})}));const e=this.config.options,n=e.charts;e.defaultChart&&(this.selectedChart=e.defaultChart||""),this.setupCharts(n),this.setHeaderTitle(e),this.reloadSelectedChart(),this.setupLoading(),this.setupVM(),this.setupReload()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}get configuredCharts(){return this.chartOptions.charts||[]}get chartOptions(){return this.config.options||{}}isConfigured(){return!(!this.config.options.charts||!this.config.options.charts.length)}getLabelKey(e){return e.statistic.metadata&&e.statistic.metadata.labelKey||this.charts[e.query.key].labelKey}getKey(e){return e.chartKey||e.statisticsType||""}validateConfig(){if(!this.context||!this.context.module)return this.messageLabelKey="LBL_BAD_CONFIG_BAD_CONTEXT",!1;if(!this.config)return this.messageLabelKey="LBL_BAD_CONFIG_NO_CONFIG",!1;const e=this.config.options;return!!(e&&e.charts&&e.charts.length)||(this.messageLabelKey="LBL_BAD_CONFIG_NO_STATISTICS_KEY",!1)}setupCharts(e){this.selectedChart="",e.forEach(n=>{const r=this.getKey(n);r&&(this.selectedChart||(this.selectedChart=r||"",this.chartType=n.chartType),this.buildChartInfo(r,n),this.initChartStore(r,n))})}buildChartInfo(e,n){this.charts[e]={key:e,labelKey:n.labelKey||"",chartType:n.chartType,statisticsType:n.statisticsType,store:this.factory.create(),reload:!0}}initChartStore(e,n){this.charts[e].store.init(this.context.module,{key:n.statisticsType,context:{...this.context}},!1),this.charts[e].store.setDefaultOptions(n.chartOptions)}setHeaderTitle(e){if(this.config.labelKey&&(this.titleLabelKey=this.config.labelKey),e.headerTitle){if(!this.charts||!this.charts[this.selectedChart]||!this.charts[this.selectedChart].labelKey)return;this.titleLabelKey=this.charts[this.selectedChart].labelKey}this.title=this.language.getFieldLabel(this.titleLabelKey)}onChartSelect(){this.dataSource=null,this.chartType=this.charts[this.selectedChart].chartType,this.reloadSelectedChart(!1)}setupVM(){const e=[];Object.keys(this.charts).forEach(r=>e.push(this.charts[r].store.state$));let n=(0,D.of)([]);if(e.length<1)n=(0,D.of)([]);else if(1===e.length)n=e[0].pipe((0,v.map)(r=>[r]));else{let o,r=null;[r,...o]=e,n=r.pipe((0,D.combineLatestWith)(o))}this.vm$=n.pipe((0,D.combineLatestWith)(this.language.appStrings$),(0,v.map)(([r,o])=>({statistics:this.mapChartData(r),appStrings:o})))}mapChartData(e){const n={};return e.forEach(r=>{r.query.key&&(n[r.query.key]=r,this.charts[r.query.key].labelKey=this.getLabelKey(r))}),n}setupReload(){this.config.reload$&&this.subs.push(this.config.reload$.subscribe(()=>{!0!==this.loading&&(this.loading=!0,Object.keys(this.charts).forEach(e=>{this.charts[e].reload=!0}),this.reloadSelectedChart())}))}setupLoading(){const e=[];Object.keys(this.charts).forEach(r=>e.push(this.charts[r].store.loading$));let n=(0,D.of)([]);if(e.length<1)n=(0,D.of)([]);else if(1===e.length)n=e[0].pipe((0,v.map)(r=>[r]));else{let o,r=null;[r,...o]=e,n=r.pipe((0,D.combineLatestWith)(o))}this.loading$=n.pipe((0,v.map)(r=>{if(!r||r.length<1)return this.loading=!1,!1;let o=!1;return r.forEach(a=>{o=o||a}),this.loading=o,o})),this.subs.push(this.loading$.subscribe())}reloadSelectedChart(e=!1){!this.charts||!this.charts[this.selectedChart]||!this.charts[this.selectedChart].store||this.charts[this.selectedChart].store.load(e=e&&!this.charts[this.selectedChart].reload).pipe((0,v.take)(1),(0,v.tap)(()=>{this.dataSource=this.charts[this.selectedChart]?.store?.getDataSource()??null,this.charts[this.selectedChart].reload=!1})).subscribe()}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(YM))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["chart-sidebar-widget"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[3,"title",4,"ngIf"],[3,"title"],["widget-body",""],[1,"widget-background","chart-sidebar-widget"],[1,"mb-2","ml-1","mr-1"],[1,"container-fluid"],["class","row",4,"ngIf"],[1,"row","mt-3","chart-widget"],[1,"col","pl-0","pr-0","pb-1","pt-1","d-flex","justify-content-center"],[1,"flex-grow-1"],[4,"ngIf"],["class","chart-loading",3,"m-5",4,"ngIf"],["class","lead text-center pt-3",4,"ngIf"],[1,"row"],[1,"col","pr-2","pl-2"],[1,"login-form","mb-0","mt-2","w-100"],["name","chart",1,"m-0","w-100",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"dataSource","type",4,"ngIf"],[3,"dataSource","type"],[1,"chart-loading"],[3,"overlay"],[1,"lead","text-center","pt-3"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,$K,12,5,"scrm-widget-panel",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[I.NgForOf,I.NgIf,Sa,De.\u0275NgNoValidate,De.NgSelectOption,De.\u0275NgSelectMultipleOption,De.SelectControlValueAccessor,De.NgControlStatus,De.NgControlStatusGroup,De.NgModel,De.NgForm,Eb,Nr,I.AsyncPipe],encapsulation:2})}return i})(),ew=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,kr,De.FormsModule,Ib,Rr]})}return i})(),tw=(()=>{class i{constructor(e){this.listStoreFactory=e,this.recordList=e.create()}clear(){this.recordList.clear(),this.recordList=null}clearAuthBased(){this.recordList.clearAuthBased()}init(e){this.recordList.init("history",!1,"list_max_entries_per_subpanel"),this.initViewContext(e)}load(e=!0){return this.recordList.load(e)}initSearchCriteria(e,n){this.recordList.criteria={preset:{type:"history-timeline",params:{parentModule:this.viewContext.module,parentId:this.viewContext.id,offset:e,limit:n}}}}initViewContext(e){this.viewContext=e}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Qi))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Gp=(()=>{class i{constructor(e){this.listStoreFactory=e}create(){return new tw(this.listStoreFactory)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Qi))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Zp=(()=>{class i{constructor(e){this.historyTimelineStoreFactory=e,this.loading=!1,this.cache=[],this.dataStream=new D.BehaviorSubject(this.cache),this.dataStream$=this.dataStream.asObservable(),this.defaultPageSize=10}init(e){this.store=this.historyTimelineStoreFactory.create(),this.store.init(e)}fetchTimelineEntries(e){if(!0!==this.loading)return!0===e&&(this.cache.length=0),this.store.initSearchCriteria(this.cache.length,this.defaultPageSize),this.loading=!0,this.store.load(!1).pipe((0,v.take)(1)).subscribe(n=>{this.loading=!1;const r=n.records;(0,S.emptyObject)(r)||Object.keys(r).forEach(o=>{this.cache.push(this.buildTimelineEntry(r[o]))}),this.dataStream.next([...this.cache])}),this.dataStream$}getActivityGridColor(e){return{calls:"yellow",tasks:"green",meetings:"blue",notes:"orange",audit:"purple",history:"purple"}[e]||"yellow"}buildTimelineEntry(e){const n=e.module;let r=e.attributes.module_name;"audit"===n&&(r="History");const a={module:n,icon:r,color:this.getActivityGridColor(e.module),title:{type:"varchar",value:e.attributes.name},user:{type:"varchar",value:e.attributes.assigned_user_name.user_name},date:{type:"datetime",value:e.attributes.date_end},record:e};return"audit"===n&&(a.description={type:"html",value:e.attributes.description}),a}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Gp))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),nw=(()=>{class i{constructor(e){this.historyTimelineStoreFactory=e}create(){return new Zp(this.historyTimelineStoreFactory)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Gp))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function zK(i,s){1&i&&(t.\u0275\u0275elementStart(0,"div",8),t.\u0275\u0275element(1,"scrm-loading-spinner",9),t.\u0275\u0275elementEnd()),2&i&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("overlay",!0))}function HK(i,s){1&i&&t.\u0275\u0275element(0,"scrm-chart-message-area",10)}function WK(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"a",30),t.\u0275\u0275element(1,"scrm-field",27),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2).$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("routerLink",n.redirectLink(e.record.module,e.record.id)),t.\u0275\u0275advance(1),t.\u0275\u0275property("type",e.title.type)("field",e.title)("record",e.record)}}function KK(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"a"),t.\u0275\u0275element(1,"scrm-field",27),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("type",e.title.type)("field",e.title)("record",e.record)}}function GK(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",31)(1,"small",26),t.\u0275\u0275element(2,"scrm-field",32),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275property("type",e.description.type)("field",e.description)("record",e.record)}}function ZK(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div")(1,"div",12)(2,"div",13)(3,"div",14),t.\u0275\u0275element(4,"scrm-image",15),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(5,"div",12)(6,"div",16),t.\u0275\u0275element(7,"div",17),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(8,"div",18)(9,"div",19)(10,"div",20)(11,"p",21),t.\u0275\u0275template(12,WK,2,4,"a",22),t.\u0275\u0275template(13,KK,2,3,"a",23),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(14,GK,3,3,"div",24),t.\u0275\u0275elementStart(15,"div",25)(16,"small",26),t.\u0275\u0275element(17,"scrm-field",27),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(18,"div",28)(19,"small",29),t.\u0275\u0275element(20,"scrm-field",27),t.\u0275\u0275elementEnd()()()()()()),2&i){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275classMapInterpolate1("d-flex flex-row m-2 history-timeline-entry entry-",e.color,""),t.\u0275\u0275advance(4),t.\u0275\u0275property("image",e.icon),t.\u0275\u0275advance(8),t.\u0275\u0275property("ngIf","audit"!==e.record.module),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","audit"===e.record.module),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.description),t.\u0275\u0275advance(3),t.\u0275\u0275property("type",e.user.type)("field",e.user)("record",e.record),t.\u0275\u0275advance(3),t.\u0275\u0275property("type",e.date.type)("field",e.date)("record",e.record)}}function qK(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,ZK,21,13,"div",11),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.length>0)}}const QK=function(i){return[i]};function JK(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",2)(1,"div",3),t.\u0275\u0275template(2,zK,2,1,"div",4),t.\u0275\u0275elementStart(3,"cdk-virtual-scroll-viewport",5),t.\u0275\u0275listener("scroll",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.onScroll())}),t.\u0275\u0275template(4,HK,1,0,"scrm-chart-message-area",6),t.\u0275\u0275template(5,qK,2,1,"div",7),t.\u0275\u0275elementEnd()()()}if(2&i){const e=s.ngIf,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",null==n.adapter?null:n.adapter.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(4,QK,e.length<=0?"history-timeline-viewport-no-data":"history-timeline-viewport")),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(null!=n.adapter&&n.adapter.loading)&&e.length<=0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e)}}let iw=(()=>{class i extends lo{constructor(e,n,r){super(),this.historyTimelineAdapterFactory=e,this.languageStore=n,this.navigation=r,this.subscription=new D.Subscription}ngOnInit(){this.adapter=this.historyTimelineAdapterFactory.create(),this.adapter.init(this.context)}ngAfterViewInit(){const e=[];e.push(this.config.reload$),e.push(this.config.subpanelReload$);const n=["history","activities"],o=e[0].pipe((0,D.combineLatestWith)(...e),(0,v.map)(([a,l={}])=>a||!!l&&n.some(c=>!!l[c]))).pipe((0,v.debounce)(()=>(0,D.timer)(1e3)));this.subscription.add(o.subscribe(a=>{a&&this.adapter.fetchTimelineEntries(!0)}))}ngOnDestroy(){this.subscription.unsubscribe()}getHeaderLabel(){return this.languageStore.getFieldLabel("LBL_QUICK_HISTORY")}onScroll(){if(!this.adapter)return;const e=this.virtualScroll.measureScrollOffset("bottom");0===(0,ie.floor)(e)&&this.adapter.fetchTimelineEntries(!1)}redirectLink(e,n){if("audit"!==e)return this.navigation.getRecordRouterLink(e,n)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(nw),t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(In))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-history-timeline-widget"]],viewQuery:function(n,r){if(1&n&&t.\u0275\u0275viewQuery(Pt.N7,5),2&n){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.virtualScroll=o.first)}},features:[t.\u0275\u0275ProvidersFeature([Zp]),t.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[3,"title"],["widget-body","",4,"ngIf"],["widget-body",""],[1,"widget-background","history-timeline","p-2","pt-2"],["class","d-flex record-thread-loading justify-content-center",4,"ngIf"],["itemSize","100",1,"history-timeline-viewport",3,"ngClass","scroll"],["labelKey","LBL_NO_DATA",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"d-flex","record-thread-loading","justify-content-center"],[3,"overlay"],["labelKey","LBL_NO_DATA"],[3,"class",4,"ngIf"],[1,""],[1,"circle"],[1,"d-flex","justify-content-center","align-items-center","h-100","history-timeline-image"],[3,"image"],[1,"d-flex","justify-content-center","h-100"],[1,"connector","mt-3"],[1,"flex-grow-1"],[1,"card"],[1,"card-body","p-1","pr-2","pl-2"],[1,"card-title","text-break","history-timeline-entry-title"],[3,"routerLink",4,"ngIf"],[4,"ngIf"],["class","card-text history-timeline-entry-description",4,"ngIf"],[1,"card-text","history-timeline-entry-user","text-uppercase"],[1,"text-break"],["mode","list",3,"type","field","record"],[1,"card-text","text-break","history-timeline-entry-date"],[1,"font-italic"],[3,"routerLink"],[1,"card-text","history-timeline-entry-description"],["mode","detail",3,"type","field","record"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"scrm-widget-panel",0),t.\u0275\u0275template(1,JK,6,6,"div",1),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275property("title",r.getHeaderLabel()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(2,2,null==r.adapter?null:r.adapter.dataStream$)))},dependencies:[I.NgClass,I.NgForOf,I.NgIf,Pt.xd,Pt.N7,ln,hr,Sa,Nr,bs,Ot.RouterLink,I.AsyncPipe],encapsulation:2})}return i})(),rw=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Pt.Cl,sn,Jn,kr,Rr,Vt,Cs,Ot.RouterModule]})}return i})();function YK(i,s){1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",3),t.\u0275\u0275element(2,"scrm-label",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd())}function XK(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-record-thread",5),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.recordThreadConfig)}}let ow=(()=>{class i extends lo{constructor(e,n){super(),this.language=e,this.sytemConfig=n,this.panelMode="none",this.subs=[]}ngOnInit(){this.options=(this.config.options||{}).recordThread||null,this.options&&(this.initPanelMode(),this.initFilters$(),this.initPresetFields$(),this.context$&&this.context$.subscribe()&&this.subs.push(this.context$.subscribe(n=>{this.context=n})),this.recordThreadConfig=this.getConfig())}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getHeaderLabel(){return this.getLabel(this.config.labelKey)||""}getLabel(e){return this.language.getFieldLabel(e,(this.context||{}).module||"")}getConfig(){const e={filters$:this.filters$,presetFields$:this.presetFields$,module:this.options.module,klass:this.options.class||"",maxListHeight:this.options.maxListHeight??350,direction:this.options.direction||"asc",create:!!this.options.create,itemConfig:{collapsible:this.options.item.collapsible||!1,collapseLimit:this.options.item.collapseLimit||null,klass:this.options.item.itemClass||"",dynamicClass:this.options.item.dynamicClass||[],metadata:{}},createConfig:{collapsible:!1,metadata:{}}};return this.setupItemMetadata(e.itemConfig.metadata,this.options.item.layout),this.setupItemMetadata(e.createConfig.metadata,this.options.create.layout),e}setupItemMetadata(e,n){n&&n.header&&(e.headerLayout=(0,S.deepClone)(n.header)),n&&n.body&&(e.bodyLayout=(0,S.deepClone)(n.body)),n&&n.actions&&(e.actions=(0,S.deepClone)(n.actions)),n&&n.fields&&(e.fields=(0,S.deepClone)(n.fields)),null!==(n?.collapseActions??null)&&(e.collapseActions=n?.collapseActions)}initPanelMode(){const n=this.sytemConfig.getConfigValue("ui")?.widget?.allowCollapse??null,r=this?.config?.allowCollapse??null;let o="none";null!==n&&((0,S.isTrue)(n)?o="collapsible":(0,S.isFalse)(n)&&(o="none")),null!==r&&((0,S.isTrue)(r)?o="collapsible":(0,S.isFalse)(r)&&(o="none")),this.panelMode=o}initFilters$(){if(!this.options||!this.options.filters||!this.context$)return;const e=this.options.filters.parentFilters||{};let n=(0,D.of)({}).pipe((0,v.shareReplay)());Object.keys(e).length>0&&(n=this.context$.pipe((0,v.filter)(r=>{const o=r&&r.record||{};return!(!o.attributes||!Object.keys(o.attributes).length)}))),this.filters$=n.pipe((0,v.map)(r=>{const o={filters:{}};return this.initParentFilters(r,o),o.filters={...o.filters,...this.options.filters.static||{}},this.options.filters.orderBy&&(o.orderBy=this.options.filters.orderBy),this.options.filters.sortOrder&&(o.sortOrder=this.options.filters.sortOrder),o}),(0,v.distinctUntilChanged)())}initPresetFields$(){!this.options||!this.options.create||!this.options.create.presetFields||!this.context$||(this.presetFields$=this.context$.pipe((0,v.map)(e=>({...this.initParentValues(e),...this.options.create.presetFields.static||{}})),(0,v.distinctUntilChanged)()))}initParentFilters(e,n){const r=this.options.filters.parentFilters||{};!e||!e.record||!r||Object.keys(r).forEach(o=>{const l=e.record.attributes[o]||"";l&&(n.filters[r[o]]={field:r,operator:"=",values:[l]})})}initParentValues(e){const n=this.options.create.presetFields.parentValues||{};if(!e||!e.record||!n)return;const r={};return Object.keys(n).forEach(o=>{const l=e.record.attributes[o]||"";l&&(r[n[o]]=l)}),r}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(ht))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-thread-sidebar-widget"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:4,vars:4,consts:[[3,"mode","title"],["widget-body","",1,"record-thread-sidebar-widget"],[4,"ngIf"],[1,"p-3","widget-message"],["labelKey","LBL_BAD_CONFIG"],[3,"config"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"scrm-widget-panel",0)(1,"div",1),t.\u0275\u0275template(2,YK,3,0,"ng-container",2),t.\u0275\u0275template(3,XK,2,1,"ng-container",2),t.\u0275\u0275elementEnd()()),2&n&&(t.\u0275\u0275property("mode",r.panelMode)("title",r.getHeaderLabel()),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!r.options),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.options))},dependencies:[I.NgIf,Sa,qt,gp],encapsulation:2})}return i})(),eG=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Jn,kr,Vt,Mp,xc]})}return i})(),sw=(()=>{class i extends lo{constructor(e){super(),this.language=e,this.subs=[]}ngOnInit(){this.options=(this.config.options||{}).sidebarStatistic||null,this.context$&&this.subs.push(this.context$.subscribe(n=>{this.context=n}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getHeaderLabel(){return this.getLabel(this.config.labelKey)||""}getLabel(e){return this.language.getFieldLabel(e,(this.context||{}).module||"")}getGridConfig(){return{rowClass:"statistics-sidebar-widget-row",columnClass:"statistics-sidebar-widget-col",layout:this.options,widgetConfig:{reload$:this.config.reload$},queryArgs:{module:this.context.module,context:this.context,params:{}}}}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-statistics-sidebar-widget"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[3,"title"],["widget-body","",1,"p-3"],[3,"config"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"scrm-widget-panel",0)(1,"div",1),t.\u0275\u0275element(2,"scrm-grid-widget",2),t.\u0275\u0275elementEnd()()),2&n&&(t.\u0275\u0275property("title",r.getHeaderLabel()),t.\u0275\u0275advance(2),t.\u0275\u0275property("config",r.getGridConfig()))},dependencies:[Sa,lp],encapsulation:2})}return i})(),aw=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Jn,wo,kr,cp,Vt]})}return i})();const lw=[rw,ew,aw],qp={"history-timeline":iw,chart:XM,statistics:sw,"record-thread":ow};let cw=(()=>{class i extends S.BaseComponentRegistry{constructor(){super()}initDefault(){Object.keys(qp).forEach(e=>{this.register("default",e,qp[e])})}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function tG(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",2)(1,"div",3),t.\u0275\u0275element(2,"scrm-label",4),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("labelKey",e.getErrorMessage())}}const nG=function(i,s,e){return{config:i,context:s,context$:e}};function iG(i,s){if(1&i&&t.\u0275\u0275element(0,"ndc-dynamic",5),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ndcDynamicComponent",e.componentType)("ndcDynamicInputs",t.\u0275\u0275pureFunction3(2,nG,e.config,e.context,e.context$))}}let Qp=(()=>{class i extends lo{constructor(e){super(),this.registry=e}get componentType(){return this.registry.get(this.context.module??"default",this.type)}getErrorMessage(){return this.type&&this.config?this.componentType?"LBL_BAD_CONFIG":"LBL_WIDGET_NOT_FOUND":"LBL_CONFIG_NO_CONFIG"}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(cw))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-sidebar-widget"]],inputs:{type:"type"},features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[["class","d-flex mb-4 mt-4 justify-content-center",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[1,"d-flex","mb-4","mt-4","justify-content-center"],[1,"lead"],[3,"labelKey"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,tG,3,1,"div",0),t.\u0275\u0275template(1,iG,1,6,"ndc-dynamic",1)),2&n&&(t.\u0275\u0275property("ngIf",!(r.type&&r.config&&r.componentType)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.type&&r.config&&r.componentType))},dependencies:[I.NgIf,Gt,$t,qt],encapsulation:2})}return i})(),Jp=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,lw,vt,Vt]})}return i})(),uw=(()=>{class i extends vr{constructor(e,n,r,o,a,l,c,u,d){super(r,o,a,l,n,c,u,d),this.store=e,this.language=n,this.actionManager=r,this.asyncActionService=o,this.message=a,this.confirmation=l,this.selectModalService=c,this.metadata=u,this.appMetadataStore=d}getActions(e){return this.store.metadata$.pipe((0,D.combineLatestWith)(this.language.vm$,this.store.criteria$),(0,v.map)(([n,r,o])=>n?this.parseModeActions(n.top_buttons,"list"):[]))}buildActionData(e,n){return{subpanelMeta:this.store?.metadata,module:e.module||this.store.metadata?.module,parentModule:this.store.parentModule,parentId:this.store.parentId,store:this.store,action:e}}getMode(){return"list"}getModuleName(e){return this.store?.metadata?.module}reload(e,n,r){this.store.load(!1).pipe((0,v.take)(1)).subscribe()}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ps),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(wa),t.\u0275\u0275inject(nn),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Bn),t.\u0275\u0275inject($n),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Fn))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),dw=(()=>{class i{constructor(e,n,r,o,a,l,c,u){this.language=e,this.actionManager=n,this.asyncActionService=r,this.message=o,this.confimation=a,this.selectModalService=l,this.metadata=c,this.appMetadataStore=u}create(e){return new uw(e,this.language,this.actionManager,this.asyncActionService,this.message,this.confimation,this.selectModalService,this.metadata,this.appMetadataStore)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(wa),t.\u0275\u0275inject(nn),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Bn),t.\u0275\u0275inject($n),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Fn))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),pw=(()=>{class i{constructor(e){this.store=e}getConfig(){return{panelMode:"collapsible",collapseOnSearch:!0,savedFilterEdit:!1,module:this.store.recordList.getModule(),displayHeader:!1,filter$:this.store.recordList.openFilter$,savedFilters$:this.store.filterList.records$,searchFields$:this.store.searchMetadata$.pipe((0,v.map)(e=>{if(this.store.metadata.searchdefs)return this.store.metadata.searchdefs;if(!e)return{};let n="advanced";return e?.layout?.advanced||(n="basic"),e?.layout[n]})),listFields:[],onClose:()=>{},onSearch:()=>{this.store.searchFilter()},updateFilter:(e,n=!0)=>{const r={};r[e.key]=e,this.store.setFilters(r,n)},resetFilter:e=>{this.store.resetFilters(e)},addSavedFilter:e=>{},removeSavedFilter:e=>{},setOpenFilter:e=>{}}}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ps))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),fw=(()=>{class i{create(e){return new pw(e)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class mw extends S.ActionHandler{checkRecordAccess(s,e=[]){const r=(s.record??{}).acls??[];return!(!r||!r.length)&&this.checkAccess(s.action??null,r,e)}}let hw=(()=>{class i extends mw{constructor(){super(),this.key="async-process",this.modes=S.ALL_VIEW_MODES}run(e){}shouldDisplay(e){const n=e?.action?.acl??[];return!n.length||this.checkRecordAccess(e,n)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Yp=(()=>{class i extends Ci{constructor(e){super(),this.async=e,e.modes.forEach(n=>this.actions[n][e.key]=e)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(hw))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),gw=(()=>{class i extends vr{constructor(e,n,r,o,a,l,c,u,d){super(n,r,o,a,l,c,u,d),this.store=e,this.actionManager=n,this.asyncActionService=r,this.message=o,this.confirmation=a,this.language=l,this.selectModalService=c,this.metadata=u,this.appMetadataStore=d}getActions(e=null){return this.store.metadata$.pipe((0,v.map)(n=>n.lineActions)).pipe((0,D.combineLatestWith)((0,D.of)("list").pipe((0,v.shareReplay)())),(0,v.map)(([n,r])=>this.parseModeActions(n,r,e)))}buildActionData(e,n){return{record:n&&n.record||null,store:this.store,action:e}}getMode(){return"list"}getModuleName(e){return this.store.metadata.module}reload(e,n,r){this.store.load(!1).pipe((0,v.take)(1)).subscribe(),this.store.loadAllStatistics(!1).pipe((0,v.take)(1)).subscribe()}buildActionInput(e,n,r,o=null){const a=this.store.metadata,l=a.collection_list||null,c=o&&o.module||r;let u=a.get_subpanel_data;return l&&l[c]&&l[c].get_subpanel_data&&(u=l[c].get_subpanel_data),u&&e&&e.params&&e.params.linkFieldMapping&&Object.keys(e.params.linkFieldMapping).some(d=>{if(u.includes(d))return u=e.params.linkFieldMapping[d],!0}),{action:n,module:r,id:o&&o.record&&o.record.id||"",payload:{baseModule:this.store.parentModule,baseRecordId:this.store.parentId,linkField:u,recordModule:c,relateModule:this.store.metadata.module,relateRecordId:o&&o.record&&o.record.id||""}}}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ps),t.\u0275\u0275inject(Yp),t.\u0275\u0275inject(nn),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Bn),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject($n),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Fn))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Xp=(()=>{class i{constructor(e,n,r,o,a,l,c,u){this.actionManager=e,this.asyncActionService=n,this.message=r,this.confirmation=o,this.language=a,this.selectModalService=l,this.metadata=c,this.appMetadataStore=u}create(e){return new gw(e,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.language,this.selectModalService,this.metadata,this.appMetadataStore)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Yp),t.\u0275\u0275inject(nn),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Bn),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject($n),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Fn))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ef=(()=>{class i{constructor(e,n,r,o){this.store=e,this.lineActionsAdapterFactory=n,this.preferences=r,this.systemConfigs=o}getTable(){return{showHeader:!1,showFooter:!0,module:this.store.metadata.headerModule,columns:this.getColumns(),lineActions:this.getLineActions(),sort$:this.store.recordList.sort$,maxColumns$:(0,D.of)(5),loading$:this.store.recordList.loading$,dataSource:this.store.recordList,pagination:this.store.recordList,toggleRecordSelection:e=>{this.store.recordList.toggleSelection(e)},updateSorting:(e,n)=>{this.store.recordList.updateSorting(e,n);const r=this.store.parentModule,o=this.store.recordList.getModule();this.preferences.setUi(r,o+"-subpanel-sort",{orderBy:e,sortOrder:n})},maxListHeight:this.preferences.getUserPreference("subpanel_max_height")??this.systemConfigs.getConfigValue("subpanel_max_height"),paginationType:this.preferences.getUserPreference("subpanel_pagination_type")??this.systemConfigs.getConfigValue("subpanel_pagination_type"),loadMore:()=>{const e=this.preferences.getUserPreference("list_max_entries_per_subpanel")??this.systemConfigs.getConfigValue("list_max_entries_per_subpanel"),n=this.store.recordList.getPagination(),o=Number(n.pageSize||0)+Number(e);this.store.recordList.setPageSize(o),this.store.recordList.updatePagination(n.current)},allLoaded:()=>{const e=this.store.recordList.getPagination();return!!e&&(Number(e.pageLast)>=Number(e.total)||Number(e.pageSize)>=Number(e.total))}}}getColumns(){return this.store.metadata$.pipe((0,v.map)(e=>e.columns))}getLineActions(){return this.lineActionsAdapterFactory.create(this.store)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ps),t.\u0275\u0275inject(Xp),t.\u0275\u0275inject(Xt),t.\u0275\u0275inject(ht))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),vw=(()=>{class i{constructor(e,n,r){this.lineActionsAdapterFactory=e,this.preferences=n,this.systemConfigs=r}create(e){return new ef(e,this.lineActionsAdapterFactory,this.preferences,this.systemConfigs)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Xp),t.\u0275\u0275inject(Xt),t.\u0275\u0275inject(ht))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function rG(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-list-filter",7),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("config",e.filterConfig)}}let _w=(()=>{class i{constructor(e,n,r,o,a,l,c){this.actionManager=e,this.languages=n,this.tableAdapterFactory=r,this.preferences=o,this.systemConfigs=a,this.filterAdapterFactory=l,this.actionAdapterFactory=c}ngOnInit(){if(this.buildAdapters(),this.maxColumns$&&(this.tableConfig.maxColumns$=this.maxColumns$),this.store?.metadata?.max_height&&(this.tableConfig.maxListHeight=this.store.metadata.max_height),!this.tableConfig?.maxListHeight){const o=this.systemConfigs.getConfigValue("ui")??{};this.tableConfig.maxListHeight=o.subpanel_max_height}this.tableConfig.paginationType=this?.store?.metadata?.pagination_type??this.tableConfig.paginationType;const e=this.store.parentModule,n=this.store.recordList.getModule(),r=this.preferences.getUi(e,n+"-subpanel-sort");r&&this.store.recordList.updateSorting(r.orderBy,r.sortOrder),this.closeButton={onClick:()=>{this.onClose&&this.onClose()}}}getActionContext(){return{module:this.store?.metadata?.module??""}}buildAdapters(){this.adapter=this.tableAdapterFactory.create(this.store),this.tableConfig=this.adapter.getTable(),this.filterAdapter=this.filterAdapterFactory.create(this.store),this.filterConfig=this.filterAdapter.getConfig(),this.actionsAdapter=this.actionAdapterFactory.create(this.store)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(wa),t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(vw),t.\u0275\u0275directiveInject(Xt),t.\u0275\u0275directiveInject(ht),t.\u0275\u0275directiveInject(fw),t.\u0275\u0275directiveInject(dw))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-subpanel"]],inputs:{store:"store",maxColumns$:"maxColumns$",onClose:"onClose",filterConfig:"filterConfig"},features:[t.\u0275\u0275ProvidersFeature([ef])],decls:9,vars:9,consts:[["mode","closable","bodyPadding","0",3,"title","close","klass"],["panel-icon-area","",1,"subpanel-icon","pl-1"],[3,"image"],["panel-header-button",""],["buttonClass","btn btn-sm btn-outline-light",3,"config","actionContext","actionLimitConfig"],["panel-body",""],[3,"config",4,"ngIf"],[3,"config"]],template:function(n,r){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"scrm-panel",0)(2,"span",1),t.\u0275\u0275element(3,"scrm-image",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"span",3),t.\u0275\u0275element(5,"scrm-action-group-menu",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",5),t.\u0275\u0275template(7,rG,1,1,"scrm-list-filter",6),t.\u0275\u0275element(8,"scrm-table",7),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementContainerEnd()),2&n){let o;t.\u0275\u0275advance(1),t.\u0275\u0275property("title",r.store.getTitle())("close",r.closeButton)("klass",null!==(o="subpanel-"+(null==r.store||null==r.store.metadata?null:r.store.metadata.name))&&void 0!==o?o:""),t.\u0275\u0275advance(2),t.\u0275\u0275property("image",r.store.getIcon()),t.\u0275\u0275advance(2),t.\u0275\u0275property("config",r.actionsAdapter)("actionContext",r.getActionContext())("actionLimitConfig","subpanelview_actions_limits"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",r.store.showFilter),t.\u0275\u0275advance(1),t.\u0275\u0275property("config",r.tableConfig)}},dependencies:[I.NgIf,ln,Bs,Ac,Lc,Ar],encapsulation:2})}return i})(),Rc=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,me.NgbModule,sn,so,Ot.RouterModule,Or,Tc,Nc,Lr]})}return i})();function oG(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-image",12),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("image",e.toggleIcon()),t.\u0275\u0275attribute("aria-expanded",!1)}}function sG(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-image",12),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("image",e.toggleIcon()),t.\u0275\u0275attribute("aria-expanded",!0)}}const aG=function(i){return{"sub-panel-banner-button-active":i}};function lG(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",16),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e).$implicit,a=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(a.showSubpanel(o.key,o.value))}),t.\u0275\u0275element(1,"scrm-grid-widget",17),t.\u0275\u0275elementEnd()}if(2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(2,aG,!0===e.value.show)),t.\u0275\u0275advance(1),t.\u0275\u0275property("config",n.getGridConfig(e.value))}}function cG(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",13)(1,"div",14),t.\u0275\u0275template(2,lG,2,4,"div",15),t.\u0275\u0275pipe(3,"keyvalue"),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext().ngIf;t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(3,1,e.subpanels))}}function uG(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-subpanel",19),2&i){const e=t.\u0275\u0275nextContext().ngIf,n=t.\u0275\u0275nextContext().$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("maxColumns$",r.maxColumns$)("store",e)("filterConfig",r.filterConfig)("onClose",r.getCloseCallBack(n,e))}}function dG(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,uG,1,4,"scrm-subpanel",18),t.\u0275\u0275elementContainerEnd()),2&i){const e=s.ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.show)}}function pG(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,dG,2,1,"ng-container",0),t.\u0275\u0275elementContainerEnd()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext().ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.subpanels[e])}}function fG(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",1,2)(3,"div",3)(4,"div",4)(5,"a",5),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.toggleSubPanels())}),t.\u0275\u0275elementStart(6,"div",6),t.\u0275\u0275element(7,"scrm-label",7),t.\u0275\u0275template(8,oG,2,2,"ng-container",0),t.\u0275\u0275template(9,sG,2,2,"ng-container",0),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(10,"div",8)(11,"div",9),t.\u0275\u0275template(12,cG,4,3,"ng-template"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(13,"div",10),t.\u0275\u0275template(14,pG,2,1,"ng-container",11),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275property("collapsed",e.isCollapsed()),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",e.isCollapsed()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.isCollapsed()),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngForOf",e.openSubpanels)}}let yw=(()=>{class i{constructor(e,n,r,o){this.languageStore=e,this.maxColumnCalculator=n,this.localStorage=r,this.preferences=o,this.isCollapsed=(0,t.signal)(!1),this.toggleIcon=(0,t.signal)("arrow_down_filled"),this.languages$=this.languageStore.vm$,this.openSubpanels=[]}ngOnInit(){const e=this?.config?.parentModule??"default";this.setCollapsed((0,S.isTrue)(this.preferences.getUi(e,"subpanel-container-collapse")??!1)),this.openSubpanels=this.preferences.getUi(e,"subpanel-container-open-subpanels")??[],this.vm$=this.config.subpanels$.pipe((0,v.map)(n=>({subpanels:n})),(0,v.tap)(n=>{!n||!Object.keys(n).length||!this.openSubpanels||this.openSubpanels.length<1||this.openSubpanels.forEach(r=>{const o=n.subpanels[r];!o||o.show||(o.show=!0,o.load().pipe((0,v.take)(1)).subscribe())})})),this.maxColumns$=this.getMaxColumns()}getMaxColumns(){return this.maxColumnCalculator.getMaxColumns(this.config.sidebarActive$)}toggleSubPanels(){this.setCollapsed(!this.isCollapsed()),this.preferences.setUi(this?.config?.parentModule??"default","subpanel-container-collapse",this.isCollapsed())}showSubpanel(e,n){n.show=!n.show,n.show?(this.openSubpanels.includes(e)||this.openSubpanels.push(e),n.load().pipe((0,v.take)(1)).subscribe()):this.openSubpanels=this.openSubpanels.filter(o=>o!=e),this.preferences.setUi(this?.config?.parentModule??"default","subpanel-container-open-subpanels",this.openSubpanels)}getCloseCallBack(e,n){return()=>this.showSubpanel(e,n)}getGridConfig(e){if(!e.metadata||!e.metadata.insightWidget)return{layout:null};const n=e.getWidgetLayout();return n.rows.forEach(r=>{!r.cols||!r.cols.length||r.cols.forEach(o=>{if(!o.statistic)return;const a=e.getStatistic(o.statistic);a&&(o.store=a)})}),{rowClass:"statistics-sidebar-widget-row",columnClass:"statistics-sidebar-widget-col",layout:n,widgetConfig:{},queryArgs:{module:e.metadata.name,context:{module:e.parentModule,id:e.parentId},params:{subpanel:e.metadata.name}}}}setCollapsed(e){this.isCollapsed.set(e),this.setToggleIcon()}setToggleIcon(){this.toggleIcon.set(this.isCollapsed()?"arrow_up_filled":"arrow_down_filled")}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(Fo),t.\u0275\u0275directiveInject(bi),t.\u0275\u0275directiveInject(Xt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-subpanel-container"]],inputs:{config:"config"},features:[t.\u0275\u0275ProvidersFeature([Fo])],decls:2,vars:3,consts:[[4,"ngIf"],["ngbAccordion","","activeIds","sub-panel-buttons",1,"sub-panel-banner"],["accordion","ngbAccordion"],["ngbAccordionItem","","id","sub-panel-buttons",1,"card",3,"collapsed"],["ngbAccordionHeader","",1,"card-header"],[1,"clickable",3,"click"],[1,"d-flex","align-items-center","justify-content-between"],["labelKey","LBL_SELECT_SUBPANEL_BANNER"],["ngbAccordionCollapse",""],["ngbAccordionBody",""],["id","sub-panels"],[4,"ngFor","ngForOf"],["aria-controls","collapseShowSubPanels",1,"float-right",3,"image"],["id","collapseShowSubPanels"],[1,"row","insight-panel"],["class","col-xs-6 col-sm-3 col-md-2 insight-panel-card border-insight",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col-xs-6","col-sm-3","col-md-2","insight-panel-card","border-insight",3,"ngClass","click"],[3,"config"],["class","sub-panel",3,"maxColumns$","store","filterConfig","onClose",4,"ngIf"],[1,"sub-panel",3,"maxColumns$","store","filterConfig","onClose"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,fG,15,4,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[I.NgClass,I.NgForOf,I.NgIf,me.NgbAccordionDirective,me.NgbAccordionItem,me.NgbAccordionHeader,me.NgbAccordionBody,me.NgbAccordionCollapse,ln,_w,lp,qt,I.AsyncPipe,I.KeyValuePipe],encapsulation:2})}return i})(),bw=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,me.NgbModule,sn,Ot.RouterModule,Rc,wo,Jn,cp,Vt]})}return i})();function mG(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",4),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"uppercase"),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().ngIf,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,e.appStrings[n.messageLabelKey]||"")," ")}}function hG(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"uppercase"),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(3).$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,n.getLabel(e.value.labelKey)),": ")}}function gG(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"uppercase"),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(3).$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,n.getLabel(e.value.labelKey))," ")}}function vG(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",9),t.\u0275\u0275template(1,hG,3,3,"ng-container",6),t.\u0275\u0275template(2,gG,3,3,"ng-container",6),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2).$implicit,n=t.\u0275\u0275nextContext().ngIf,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.isValueEmpty(n.statistics[e.key])),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.isValueEmpty(n.statistics[e.key]))}}function _G(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,vG,3,2,"div",8),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.value.labelKey&&n.getLabel(e.value.labelKey))}}function yG(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-field",12),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(3).$implicit,n=t.\u0275\u0275nextContext().ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("type",n.statistics[e.key].field.type)("field",n.statistics[e.key].field)}}function bG(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",11),t.\u0275\u0275template(1,yG,2,2,"ng-container",6),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2).$implicit,n=t.\u0275\u0275nextContext().ngIf,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.isValueEmpty(n.statistics[e.key])||!0!==e.value.hideValueIfEmpty)}}function CG(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,bG,2,1,"div",10),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext().ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.statistics[e.key].loading&&n.statistics[e.key].field)}}function SG(i,s){1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1," - "),t.\u0275\u0275elementContainerEnd())}function MG(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",13),t.\u0275\u0275element(1,"scrm-inline-loading-spinner"),t.\u0275\u0275template(2,SG,2,0,"ng-container",6),t.\u0275\u0275elementEnd()),2&i){const e=s.ngIf,n=t.\u0275\u0275nextContext().$implicit,r=t.\u0275\u0275nextContext().ngIf;t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!(e||n.key&&r.statistics[n.key]))}}function wG(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",15),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"uppercase"),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2).$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,n.getLabel(e.value.endLabelKey))," ")}}function DG(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,wG,3,3,"div",14),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.value.endLabelKey&&n.getLabel(e.value.endLabelKey))}}function xG(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",5),t.\u0275\u0275template(2,_G,2,1,"ng-container",6),t.\u0275\u0275template(3,CG,2,1,"ng-container",6),t.\u0275\u0275template(4,MG,3,1,"div",7),t.\u0275\u0275pipe(5,"async"),t.\u0275\u0275template(6,DG,2,1,"ng-container",6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext().ngIf,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!r.shouldHide(n.statistics[e.key],e.value)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.key&&n.statistics[e.key]&&!r.shouldHide(n.statistics[e.key],e.value)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(5,4,e.value.store.loading$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!r.shouldHide(n.statistics[e.key],e.value))}}function EG(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275template(1,mG,3,3,"div",2),t.\u0275\u0275template(2,xG,7,6,"ng-container",3),t.\u0275\u0275pipe(3,"keyvalue"),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.messageLabelKey),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(3,2,e.statistics))}}let Cw=(()=>{class i extends lo{constructor(e,n){super(),this.language=e,this.factory=n,this.statistics={},this.loading=!0,this.subs=[]}ngOnInit(){if(!this.context||!this.context.module)return void(this.messageLabelKey="LBL_CONFIG_BAD_CONTEXT");if(!this.config)return void(this.messageLabelKey="LBL_CONFIG_NO_CONFIG");if(!this.config.options||!this.config.options.statistics||!this.config.options.statistics.length)return void(this.messageLabelKey="LBL_CONFIG_NO_STATISTICS_KEY");this.context$&&this.subs.push(this.context$.subscribe(o=>{this.context=o}));const e=[],n=[];this.config.options.statistics.forEach(o=>{o.type&&(this.statistics[o.type]={labelKey:o.labelKey||"",endLabelKey:o.endLabelKey||"",hideValueIfEmpty:o.hideValueIfEmpty||!1,type:o.type,store:this.factory.create()},this.statistics[o.type].store.init(this.context.module,{key:o.type,context:{...this.context}}).pipe((0,v.take)(1)).subscribe(),e.push(this.statistics[o.type].store.state$),n.push(this.statistics[o.type].store.loading$))});let r=null;if(e.length<1)r=(0,D.of)([]);else if(1===e.length)r=e[0].pipe((0,v.map)(o=>[o]));else{let a,o=null;[o,...a]=e,r=o.pipe((0,D.combineLatestWith)(a))}this.loading$=n[0].pipe((0,D.combineLatestWith)(...n),(0,v.map)(o=>{if(!o||o.length<1)return this.loading=!1,!1;let a=!0;return o.forEach(l=>{a=a&&l}),this.loading=a,a})),this.subs.push(this.loading$.subscribe()),this.vm$=r.pipe((0,D.combineLatestWith)(this.language.appStrings$),(0,v.map)(([o,a])=>{const l={};return o.forEach(c=>{l[c.query.key]=c,this.statistics[c.query.key].labelKey=this.getMetadataEntry(c,"labelKey"),this.statistics[c.query.key].endLabelKey=this.getMetadataEntry(c,"endLabelKey")}),{statistics:l,appStrings:a}})),this.config.reload$&&this.subs.push(this.config.reload$.subscribe(()=>{!1===this.loading&&(this.loading=!0,this.config.options.statistics.forEach(o=>{o.type&&(!this.statistics[o.type]||!this.statistics[o.type].store||this.statistics[o.type].store.load(!1).pipe((0,v.take)(1)).subscribe())}))}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}shouldHide(e,n){return this.hasLoaded(e)&&this.isValueEmpty(e)&&!0===n.hideIfEmpty}hasLoaded(e){return!e.loading}isValueEmpty(e){const n=e?.statistic?.metadata?.emptyValueString??null;if(null!==n)return!0;const r=e?.field?.value??null;return!r&&n===r}getMetadataEntry(e,n){const r=e.statistic.metadata&&e.statistic.metadata[n];return null!==r&&typeof r<"u"?r:this.statistics[e.query.key][n]}getLabel(e){return this.language.getFieldLabel(e,(this.context||{}).module||"")}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(Ca))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-statistics-top-widget"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[["class","d-flex justify-content-center widget-bar rounded",4,"ngIf"],[1,"d-flex","justify-content-center","widget-bar","rounded"],["class","p-2 widget-bar-entry-message",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"p-2","widget-bar-entry-message"],[1,"d-flex","justify-content-center","align-items-baseline","widget-bar-entry","p-2"],[4,"ngIf"],["class","pl-1 pr-1 widget-bar-entry-loading",4,"ngIf"],["class","pr-1 widget-bar-entry-label",4,"ngIf"],[1,"pr-1","widget-bar-entry-label"],["class","pl-1 pr-1 widget-bar-entry-value",4,"ngIf"],[1,"pl-1","pr-1","widget-bar-entry-value"],["mode","list",3,"type","field"],[1,"pl-1","pr-1","widget-bar-entry-loading"],["class","pl-1 widget-bar-entry-end-label",4,"ngIf"],[1,"pl-1","widget-bar-entry-end-label"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,EG,4,4,"div",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[I.NgForOf,I.NgIf,hr,zl,I.AsyncPipe,I.UpperCasePipe,I.KeyValuePipe],encapsulation:2})}return i})(),Sw=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Jn,wo]})}return i})();const Mw=[Sw],ww={statistics:Cw},IG=function(i,s){return{config:i,context:s}};function FG(i,s){if(1&i&&t.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ndcDynamicComponent",e.componentType)("ndcDynamicInputs",t.\u0275\u0275pureFunction2(2,IG,e.config,e.context))}}let Dw=(()=>{class i extends lo{constructor(){super(...arguments),this.map=ww}get componentType(){return this.map[this.type]}ngOnInit(){this.component=this.componentType,this.inputs={config:this.config,context:this.context}}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=t.\u0275\u0275getInheritedFactory(i)))(r||i)}}();static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-top-widget"]],inputs:{type:"type"},features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(n,r){1&n&&t.\u0275\u0275template(0,FG,1,5,"ndc-dynamic",0),2&n&&t.\u0275\u0275property("ngIf",r.type&&r.config)},dependencies:[I.NgIf,Gt,$t],encapsulation:2})}return i})(),xw=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Mw,vt]})}return i})(),AG=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,vt]})}return i})(),Ew=(()=>{class i{constructor(e,n){this.el=e,this.appStateStore=n,this.appLoading=!1}ngOnInit(){this.subscription=this.appStateStore.loading$.pipe((0,v.tap)(e=>{this.appLoading=e,this.updateComponent()})).subscribe(),this.updateComponent()}ngOnChanges(e){e.state&&this.updateComponent()}ngOnDestroy(){this.subscription.unsubscribe()}clickEvent(){this.updateComponent()}updateComponent(){const e=this.isLoading();this.setDisabledState(e)}isLoading(){let e=!1;return(!0===this.state||!0===this.appLoading)&&(e=!0),e}setDisabledState(e){this.el.nativeElement.disabled=e}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(Ht))};static#t=this.\u0275dir=t.\u0275\u0275defineDirective({type:i,selectors:[["","scrm-button-loading",""]],hostBindings:function(n,r){1&n&&t.\u0275\u0275listener("click",function(){return r.clickEvent()})},inputs:{state:["scrm-button-loading","state"]},features:[t.\u0275\u0275NgOnChangesFeature]})}return i})(),Iw=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})(),TG=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})(),OG=(()=>{class i extends Mn{constructor(e,n,r){super(e,n,r),this.typeFormatter=e,this.logic=n,this.logicDisplay=r}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mt),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Dt))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-email-detail"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(n,r){1&n&&t.\u0275\u0275text(0),2&n&&t.\u0275\u0275textInterpolate1("\n",r.field.value,"\n")},encapsulation:2})}return i})(),LG=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})(),NG=(()=>{class i{constructor(e){this.sanitizer=e}transform(e){return this.sanitizer.sanitize(t.SecurityContext.HTML,e)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Y0.H7,16))};static#t=this.\u0275pipe=t.\u0275\u0275definePipe({name:"htmlSanitize",type:i,pure:!0})}return i})(),RG=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})();class Fw{}let BG=(()=>{class i{constructor(e,n,r,o,a,l,c){this.router=e,this.authService=n,this.asyncActionService=r,this.appState=o,this.routeConverter=a,this.language=l,this.notificationStore=c}canActivate(e,n){return this.authorizeUser(e,n)}authorizeUser(e,n){return(0,D.forkJoin)([this.authorizeUserSession(e,n),this.authorizeUserACL(e)]).pipe((0,v.map)(([r,o])=>r instanceof Ot.UrlTree?r:(o instanceof Ot.UrlTree||r)&&o))}authorizeUserACL(e){const n=this.routeConverter.parseRouteURL(e.url),r=this.appState.getRouteUrl()??"";if(!n.module||"home"===n.module)return(0,D.of)(!0);const a=this.router.parseUrl(""),l="user-acl";return this.asyncActionService.run(l,{action:l,module:n.module,payload:{routeAction:n.action,record:n.record,routeURL:r,queryParams:e?.queryParams??[]}}).pipe((0,v.take)(1),(0,v.map)(u=>{if(u.data&&!0===u.data.result)return!0;if((0,S.isEmptyString)(r))return a;const d=this.router.parseUrl(this.router.url);return!!this.routeConverter.isClassicViewRoute(d)&&d}),(0,v.catchError)(()=>(0,D.of)(a)))}authorizeUserSession(e,n){if(this.authService.isUserLoggedIn.value&&!0!==e.data.checkSession)return(0,D.of)(!0);let r=this.authService.getSessionExpiredRoute();const o=this.authService.sessionExpiredRedirect(),a=this.router.parseUrl(r);return this.authService.fetchSessionStatus().pipe((0,v.take)(1),(0,v.map)(l=>{if(l&&!1===l.appStatus.installed)return this.router.parseUrl("install");if(l&&!0===l.active){const c=!!this.appState.getCurrentUser();return this.authService.setCurrentUser(l),c||this.language.appStrings$.pipe((0,v.filter)(u=>u&&!(0,S.emptyObject)(u)),(0,v.tap)(()=>{this.notificationStore.enableNotifications(),this.notificationStore.refreshNotifications()}),(0,v.take)(1)).subscribe(),!0}return this.appState.setPreLoginUrl(n.url),this.authService.resetState(),o?(this.authService.handleSessionExpiredRedirect(),!1):a}),(0,v.catchError)(()=>o?(this.authService.handleSessionExpiredRedirect(),(0,D.of)(!1)):(this.authService.logout("LBL_SESSION_EXPIRED",!1),(0,D.of)(a))),(0,v.tap)(l=>{!0===l&&this.authService.isUserLoggedIn.next(!0)}))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ot.Router),t.\u0275\u0275inject(ci),t.\u0275\u0275inject(nn),t.\u0275\u0275inject(Ht),t.\u0275\u0275inject(ao),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(Rs))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),kG=(()=>{class i{intercept(e,n){return n.handle(e).pipe((0,v.catchError)(r=>(0,D.throwError)(r)))}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),jG=(()=>{class i{constructor(e,n,r,o,a,l){this.systemConfigStore=e,this.authService=n,this.router=r,this.routeConverter=o,this.asyncActionService=a,this.message=l}canActivate(e){return this.canActivateWebInstallation(e)}canActivateWebInstallation(e){const n=this.systemConfigStore.getHomePage(),r=this.router.parseUrl(n);return this.authService.fetchSessionStatus().pipe((0,v.take)(1),(0,v.map)(o=>o&&!0===o.appStatus.locked&&!0===o.appStatus.installed?(this.message.addDangerMessageByKey("LBL_DISABLED_TITLE_2"),!(!o||!1!==o.active)&&r):(o&&!0===o.active&&(this.authService.logout("",!1),this.authService.isUserLoggedIn.next(!1)),!0)),(0,v.catchError)(()=>(0,D.of)(!0)))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ht),t.\u0275\u0275inject(ci),t.\u0275\u0275inject(Ot.Router),t.\u0275\u0275inject(ao),t.\u0275\u0275inject(nn),t.\u0275\u0275inject(dt))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),PG=(()=>{class i{constructor(e,n,r,o){this.router=e,this.authService=n,this.systemConfigStore=r,this.appStateStore=o}canActivate(){const e=this.systemConfigStore.getHomePage(),n=this.router.parseUrl(e);return this.authService.isUserLoggedIn.value?n:this.authService.fetchSessionStatus().pipe((0,v.take)(1),(0,v.map)(r=>r&&!1===r.appStatus.installed?this.router.parseUrl("install"):!r||!0!==r.active||(this.authService.setCurrentUser(r),n)),(0,v.catchError)(()=>(0,D.of)(!0)))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ot.Router),t.\u0275\u0275inject(ci),t.\u0275\u0275inject(ht),t.\u0275\u0275inject(Ht))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),VG=(()=>{class i{constructor(e){this.systemConfigStore=e}load(e){const n=this.systemConfigStore.getConfigValue("extensions"),r={};return Object.keys(n).forEach(o=>{if(!n[o])return;const a=n[o];!a.remoteEntry||!a.remoteName||!a.enabled||(0,S.isFalse)(a.enabled)||(r[o]=this.loadExtension(a,e))}),Object.keys(r).length<1?(0,D.of)({}):(0,D.forkJoin)(r)}loadExtension(e,n){return this.loadModule(()=>function R8(i,s){return ed.apply(this,arguments)}({type:"module",remoteEntry:e.remoteEntry,exposedModule:"./Module"}).then(o=>o.ExtensionModule),n)}isPromise(e){return!!e&&"function"==typeof e.then}wrapIntoObservable(e){return(0,D.isObservable)(e)?e:this.isPromise(e)?(0,D.from)(Promise.resolve(e)):(0,D.of)(e)}loadModule(e,n){return this.wrapIntoObservable(e()).pipe((0,v.map)(r=>(0,t.createNgModule)(r,n)))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ht))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),tf=(()=>{class i{constructor(e,n,r,o,a,l,c,u,d,p){this.systemConfigStore=e,this.languageStore=n,this.navigationStore=r,this.userPreferenceStore=o,this.themeImagesStore=a,this.appState=l,this.moduleNameMapper=c,this.messageService=u,this.appMetadata=d,this.auth=p}resolve(e){const n=this.calculateActiveModule(e);return this.appMetadata.load(n).pipe((0,v.tap)(()=>{this.auth.isLoggedIn()&&setTimeout(()=>{this.appMetadata.loadModuleMetadata(n).pipe((0,v.take)(1)).subscribe()},0)}))}sequentialLoad(e){const n={};if(this.isToLoadNavigation(e)&&(n.navigation=this.navigationStore.load()),this.isToLoadConfigs(e)){let o=this.systemConfigStore.load();if(this.isToLoadLanguageStrings(e)){const a=this.getLanguagesToLoad(e);o=o.pipe((0,v.map)(l=>{let c=l.default_language.value;const u=this.languageStore.getCurrentLanguage();return u&&(c=u),this.languageStore.load(c,a)}),(0,v.concatAll)(),(0,v.toArray)())}n.configs=o}return this.isToLoadUserPreferences(e)&&(n.preferences=this.userPreferenceStore.load()),(0,D.forkJoin)(n).pipe((0,v.map)(o=>{let a=null;return this.systemConfigStore.getConfigValue("default_theme")&&(a=this.systemConfigStore.getConfigValue("default_theme")),this.userPreferenceStore.getUserPreference("user_theme")&&(a=this.userPreferenceStore.getUserPreference("user_theme")),this.themeImagesStore.getTheme()&&(a=this.themeImagesStore.getTheme()),null!==a?this.themeImagesStore.load(a):o}),(0,v.concatAll)(),(0,v.toArray)(),(0,v.tap)(()=>this.appState.setLoaded(!0)))}getLanguagesToLoad(e){let n=this.languageStore.getAvailableStringsTypes();return this.isToLoadNavigation(e)?n:e.data&&e.data.load?(Array.isArray(e.data.load.languageStrings)&&(n=e.data.load.languageStrings),n):[]}isToLoadLanguageStrings(e){return!!this.isToLoadNavigation(e)||!(!e.data||!e.data.load)&&(Array.isArray(e.data.load.languageStrings)||!0===e.data.load.languageStrings)}isToLoadConfigs(e){return!e.data||!e.data.load||!1!==e.data.load.configs}isToLoadNavigation(e){return!e.data||!e.data.load||!1!==e.data.load.navigation}isToLoadUserPreferences(e){return!e.data||!e.data.load||!1!==e.data.load.preferences}addMetadataLoadErrorMessage(){let e=this.languageStore.getAppString("LBL_ERROR_FETCHING_METADATA");e||(e="Error occurred while fetching metadata"),this.messageService.addDangerMessage(e)}calculateActiveModule(e){let n=e.params.module;n||(n=e.data.module);const r=e?.url[0]?.path??"";!n&&""!==r&&(n=r);const o=this.getParentModuleMap()[n]||"",a=e.queryParams[o]||"";return a&&(n=this.moduleNameMapper.toFrontend(a)),n}getParentModuleMap(){return{"merge-records":"return_module",import:"import_module"}}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ht),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(Ai),t.\u0275\u0275inject(Xt),t.\u0275\u0275inject(Xr),t.\u0275\u0275inject(Ht),t.\u0275\u0275inject(En),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Fn),t.\u0275\u0275inject(ci))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Aw=(()=>{class i extends tf{constructor(e,n,r,o,a,l,c,u,d,p,f,m){super(e,n,r,o,a,c,l,d,f,m),this.systemConfigStore=e,this.languageStore=n,this.navigationStore=r,this.userPreferenceStore=o,this.themeImagesStore=a,this.moduleNameMapper=l,this.appStateStore=c,this.metadataStore=u,this.messageService=d,this.routeConverter=p,this.appMetadata=f,this.auth=m}resolve(e){let n=e.params.module;return n||(n=e.data.module),super.resolve(e).pipe((0,v.concatMap)(()=>(0,D.forkJoin)([this.metadataStore.load(n,this.metadataStore.getMetadataTypes()),this.metadataStore.getMetadata("saved-search",["recordView"])])),(0,v.map)(r=>({metadata:r[0]??{},savedSearchMeta:r[1]??{}})),(0,v.tap)(()=>{if(n){const a=this.calculateActiveModule(e);this.appStateStore.setModule(a)}const o=this.routeConverter.parseRouteURL(e.url).action??"index";this.appStateStore.setView(o)},()=>{this.addMetadataLoadErrorMessage()}))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ht),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(Ai),t.\u0275\u0275inject(Xt),t.\u0275\u0275inject(Xr),t.\u0275\u0275inject(En),t.\u0275\u0275inject(Ht),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(ao),t.\u0275\u0275inject(Fn),t.\u0275\u0275inject(ci))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Bc=(()=>{class i{constructor(e,n,r,o){this.metadata=e,this.globalRecentlyViewedStore=n,this.processService=r,this.moduleNameMapper=o}onNavigationAdd(e,n){let r="detail";const o=n&&n.data||{};o.mode&&(r=o.mode);const a=n?.params?.record??null;if(a&&"create"!==r){const l=this.buildRecentlyViewed(e,a);this.addRecentlyViewed(e,l)}}buildRecentlyViewed(e,n,r="detailview"){return e=this.moduleNameMapper.toLegacy(e),(0,S.deepClone)({module:"Tracker",type:"Tracker",attributes:{module_name:e??"",item_id:n??"",action:r??""}})}addRecentlyViewed(e,n){this.saveRecentlyViewed(e,n)}saveRecentlyViewed(e,n){const o={recentlyViewed:n};setTimeout(()=>{this.processService.submit("add-recently-viewed",o).pipe((0,v.take)(1)).subscribe(a=>{const l={id:n.id??"",module:n.module??"",attributes:{...n.attributes??{}}},c=a?.data?.tracker??null;if(null===c)return;l.attributes.item_summary=c.item_summary;const u=l?.attributes?.item_id??"",d=this.metadata.getModuleMeta(e),p=d?.recentlyViewed??null;if(p){let f=p.filter(m=>(m?.attributes?.item_id??"")!==u);f.unshift(l),d.recentlyViewed=f}this.globalRecentlyViewedStore.addToState(l),this.metadata.setModuleMetadata(e,d)})},500)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(bt),t.\u0275\u0275inject(_c),t.\u0275\u0275inject(qi),t.\u0275\u0275inject(En))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),UG=(()=>{class i extends Aw{constructor(e,n,r,o,a,l,c,u,d,p,f,m,g,h,_){super(e,n,r,a,l,c,d,o,p,f,g,h),this.systemConfigStore=e,this.languageStore=n,this.navigationStore=r,this.metadataStore=o,this.userPreferenceStore=a,this.themeImagesStore=l,this.moduleNameMapper=c,this.actionNameMapper=u,this.appStateStore=d,this.messageService=p,this.routeConverter=f,this.router=m,this.appMetadata=g,this.auth=h,this.recentlyViewed=_}resolve(e){let n=e.params.module;return n||(n=e.data.module),super.resolve(e).pipe((0,v.concatMap)(()=>(0,D.forkJoin)([this.metadataStore.load(n,this.metadataStore.getMetadataTypes())])),(0,v.tap)(()=>{this.auth.isLoggedIn()&&this.recentlyViewed.onNavigationAdd(this.appStateStore.getModule(),e)}))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ht),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(Ai),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Xt),t.\u0275\u0275inject(Xr),t.\u0275\u0275inject(En),t.\u0275\u0275inject(Eo),t.\u0275\u0275inject(Ht),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(ao),t.\u0275\u0275inject(Ot.Router),t.\u0275\u0275inject(Fn),t.\u0275\u0275inject(ci),t.\u0275\u0275inject(Bc))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Tw=(()=>{class i{constructor(e,n){this.processService=e,this.appStateStore=n,this.processType="recover-password"}run(e,n){const r={username:e,useremail:n};return this.appStateStore.updateLoading("recover-password",!0,!1),this.processService.submit(this.processType,r).pipe((0,v.tap)(()=>this.appStateStore.updateLoading("recover-password",!1,!1)),(0,v.catchError)(o=>{throw this.appStateStore.updateLoading("recover-password",!1,!1),o}))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(qi),t.\u0275\u0275inject(Ht))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),$G=(()=>{class i{constructor(e,n){this.systemConfig=e,this.docElement=n}setSystemName(e){(!e||e.length<1)&&(e="SuiteCRM"),this.docElement.documentElement.childNodes.item(0).childNodes.forEach(r=>{"TITLE"===r.nodeName&&(r.textContent=e)})}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ht),t.\u0275\u0275inject(I.DOCUMENT))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),zG=(()=>{class i{constructor(e){this.http=e}getAll(){return this.http.get("users")}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Yr.HttpClient))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),HG=(()=>{class i{constructor(e){this.fetchGQL=e}create(){return new Wp(this.fetchGQL)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(gr))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),WG=(()=>{class i{constructor(e){this.fetchGQL=e}create(){return new Mc(this.fetchGQL)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(gr))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function KG(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",9)(1,"a",10)(2,"div",11),t.\u0275\u0275element(3,"scrm-image",12)(4,"scrm-label",13),t.\u0275\u0275elementEnd()()()),2&i){const e=s.$implicit,n=s.first,r=t.\u0275\u0275nextContext(3);t.\u0275\u0275classProp("border-top",n),t.\u0275\u0275advance(1),t.\u0275\u0275property("queryParams",null==e?null:e.params)("routerLink",e.link)("title",r.language.getFieldLabel(e.descriptionKey,"administration")),t.\u0275\u0275advance(2),t.\u0275\u0275property("image",e.icon),t.\u0275\u0275advance(1),t.\u0275\u0275property("labelKey",e.titleKey)}}function GG(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,KG,5,7,"div",8),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.content.linkGroup)}}function ZG(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",2)(1,"div",3)(2,"h5",4),t.\u0275\u0275element(3,"scrm-label",5),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"div",6),t.\u0275\u0275template(5,GG,2,1,"ng-container",7),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("title",e.language.getFieldLabel(e.content.descriptionLabelKey,"administration")),t.\u0275\u0275advance(1),t.\u0275\u0275property("labelKey",e.content.titleLabelKey),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.content.linkGroup)}}let Ow=(()=>{class i{constructor(e){this.language=e}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ue))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-admin-card"]],inputs:{content:"content"},decls:2,vars:1,consts:[[1,"widget-panel","h-100","shadow-sm"],["class","card h-100 panel-card border-0",4,"ngIf"],[1,"card","h-100","panel-card","border-0"],[1,"card-header"],[1,"card-title","admin-card-title","m-0",3,"title"],["module","administration",3,"labelKey"],[1,"card-body","d-flex","flex-column","align-items-start"],[4,"ngIf"],["class","admin-card-link-box border-bottom w-100",3,"border-top",4,"ngFor","ngForOf"],[1,"admin-card-link-box","border-bottom","w-100"],["queryParamsHandling","merge",1,"card-link","admin-card-link",3,"queryParams","routerLink","title"],[1,"d-flex","admin-card-link-wrapper","align-items-center","w-100","p-1"],[1,"admin-card-icon","sicon-2x",3,"image"],["module","administration",1,"admin-card-label","pl-1","flex-grow-1",3,"labelKey"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275template(1,ZG,6,3,"div",1),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.content))},dependencies:[I.NgForOf,I.NgIf,Ot.RouterLink,qt,ln],encapsulation:2})}return i})(),Lw=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Ot.RouterModule,Vt,sn]})}return i})();function qG(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",3),t.\u0275\u0275element(1,"scrm-admin-card",4),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("content",e)}}let QG=(()=>{class i{constructor(e){this.adminMetaData=e,this.adminPanelData=[]}ngOnInit(){const e=this.adminMetaData.getAdminPanel();this.setData(e)}setData(e){e.forEach(({icon:n,titleLabelKey:r,descriptionLabelKey:o,linkGroup:a})=>{this.adminPanelData.push({icon:n,titleLabelKey:r,descriptionLabelKey:o,linkGroup:this.setLinkGroups(a)})})}setLinkGroups(e){let n=[],r=Object.keys(e);for(let o=0;o<r.length;o++){let l=Object.values(e[r[o]]);for(let c=0;c<l.length;c++)n.push(l[c])}return n}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(ep))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-admin-panel"]],decls:3,vars:1,consts:[[1,"admin-view","full-height-view","d-flex","align-items-center"],[1,"row","flex-grow-1"],["class","col-12 col-sm-6 col-lg-4 col-xl-3 mt-3 mb-3",4,"ngFor","ngForOf"],[1,"col-12","col-sm-6","col-lg-4","col-xl-3","mt-3","mb-3"],[3,"content"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1),t.\u0275\u0275template(2,qG,2,1,"div",2),t.\u0275\u0275elementEnd()()),2&n&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",r.adminPanelData))},dependencies:[I.NgForOf,Ow],encapsulation:2})}return i})(),JG=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Lw]})}return i})();const YG=["dataContainer"];let XG=(()=>{class i{constructor(e,n,r,o,a,l,c){this.route=e,this.router=n,this.sanitizer=r,this.routeConverter=o,this.auth=a,this.ngZone=l,this.systemConfigs=c,this.iframe=null}ngOnInit(){this.url=this.route.snapshot.data.legacyUrl}ngAfterViewInit(){this.initIframe()}ngOnDestroy(){this.cleanObservers(),this.iframe=null;const e=this.wrapper;this.wrapper.firstChild&&e.removeChild(e.firstChild),e.innerHTML="<iframe></iframe>",this.wrapper=null}cleanObservers(){this.iframeResizeHandler&&(this.iframeResizeHandler.destroy(),this.iframeResizeHandler=null),this.iframePageChangeHandler&&(this.iframePageChangeHandler.destroy(),this.iframePageChangeHandler=null)}initIframe(){this.wrapper=this.dataContainer.nativeElement,this.wrapper.firstChild&&this.wrapper.removeChild(this.wrapper.firstChild);const e=document.createElement("iframe");e.src=this.url,this.wrapper.appendChild(e),this.iframe=e,this.iframe.style.display="block",this.initObservers()}initObservers(){this.iframePageChangeHandler=this.buildIframePageChangeObserver(),this.iframeResizeHandler=this.buildIframeResizeHandlerHandler(),this.iframePageChangeHandler&&this.iframePageChangeHandler.init()}onPageChange(e){if(!1===this.shouldRedirect(e))return this.iframe.style.display="block",this.cleanObservers(),void this.initObservers();const n=this.routeConverter.toFrontEndRoute(e);"/users/login"!==n?this.ngZone.run(()=>this.router.navigateByUrl(n).then()).then():this.auth.logout("LBL_SESSION_EXPIRED")}onIFrameLoad(){this.iframe.contentWindow.document.body.style.overflow="hidden",this.iframeResizeHandler.init(this.iframe)}onIFrameUnload(){this.iframe.style.display="none",this.iframeResizeHandler.destroy()}buildIframePageChangeObserver(){return new vd(this.iframe,this.onPageChange.bind(this),this.onIFrameLoad.bind(this),this.onIFrameUnload.bind(this))}buildIframeResizeHandlerHandler(){return new gd}shouldRedirect(e){if(e&&e.includes("/#/"))return!0;const n=this.routeConverter.parse(e);return!(!n||!n.module||!0===this.routeConverter.matchesActiveRoute(this.route,n))&&(!n.action||this.toExclude(n))}toExclude(e){const n=this.systemConfigs.getConfigValue("classicview_routing_exclusions");if(!n||0===Object.keys(n).length)return!0;if(n.any&&n.any.includes(e.action))return!1;if(!n[e.module])return!0;const r=n[e.module];return!(r&&r.includes(e.action))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ot.ActivatedRoute),t.\u0275\u0275directiveInject(Ot.Router),t.\u0275\u0275directiveInject(Y0.H7),t.\u0275\u0275directiveInject(ao),t.\u0275\u0275directiveInject(ci),t.\u0275\u0275directiveInject(t.NgZone),t.\u0275\u0275directiveInject(ht))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-classic-view-ui"]],viewQuery:function(n,r){if(1&n&&t.\u0275\u0275viewQuery(YG,7),2&n){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(r.dataContainer=o.first)}},decls:3,vars:0,consts:[[1,"classic-view-container"],["dataContainer",""]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",0,1),t.\u0275\u0275element(2,"iframe"),t.\u0275\u0275elementEnd())},encapsulation:2})}return i})(),eZ=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]})}return i})(),tZ=(()=>{class i extends tf{constructor(e,n,r,o,a,l,c,u,d,p,f,m,g){super(e,n,r,o,a,d,l,u,p,f),this.systemConfigStore=e,this.languageStore=n,this.navigationStore=r,this.userPreferenceStore=o,this.themeImagesStore=a,this.moduleNameMapper=l,this.routeConverter=c,this.messageService=u,this.appStateStore=d,this.appMetadata=p,this.auth=f,this.recentlyViewed=m,this.metadataStore=g}resolve(e){const n=this.calculateActiveModule(e);return super.resolve(e).pipe((0,v.concatMap)(()=>(0,D.forkJoin)([this.metadataStore.load(n,this.metadataStore.getMetadataTypes())])),(0,v.map)(()=>this.routeConverter.toLegacy(e.params,e.queryParams)),(0,v.tap)(()=>{if(e.params.module){const a=this.calculateActiveModule(e);this.appStateStore.setModule(a)}const o=this.routeConverter.parseRouteURL(e.url).action??"index";this.appStateStore.setView(o),this.recentlyViewed.onNavigationAdd(this.appStateStore.getModule(),e)},()=>{this.addMetadataLoadErrorMessage()}))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ht),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(Ai),t.\u0275\u0275inject(Xt),t.\u0275\u0275inject(Xr),t.\u0275\u0275inject(En),t.\u0275\u0275inject(ao),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Ht),t.\u0275\u0275inject(Fn),t.\u0275\u0275inject(ci),t.\u0275\u0275inject(Bc),t.\u0275\u0275inject(bt))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),kc=(()=>{class i extends Mi{constructor(e,n,r,o,a,l,c,u,d,p,f,m,g,h,_,b){super(e,n,r,o,a,l,c,u,d,p,f,m,h,_,b),this.recordFetchGQL=e,this.recordSaveGQL=n,this.appStateStore=r,this.languageStore=o,this.navigationStore=a,this.moduleNavigation=l,this.metadataStore=c,this.localStorage=u,this.message=d,this.subpanelFactory=p,this.recordManager=f,this.statisticsBatch=m,this.auth=g,this.recordStoreFactory=h,this.preferences=_,this.panelLogicManager=b}init(e,n,r="detail",o={}){return this.internalState.module=e,this.internalState.recordID=n,this.setMode(r),this.parseParams(o),this.calculateShowWidgets(),this.showTopWidget=!1,this.showSubpanels=!1,!this.params.isDuplicate&&!this.params.originalDuplicateId&&this.initRecord(o),this.load()}save(){return this.appStateStore.updateLoading(`${this.internalState.module}-record-save-new`,!0),this.recordStore.save().pipe((0,v.tap)(e=>{e&&e.id&&this.setMode("detail")}),(0,v.catchError)(()=>(this.message.addDangerMessageByKey("LBL_ERROR_SAVING"),(0,D.of)({}))),(0,v.finalize)(()=>{this.appStateStore.updateLoading(`${this.internalState.module}-record-save-new`,!1)}))}initRecord(e={}){const n=this.auth.getCurrentUser(),r={id:"",type:"",module:this.internalState.module,attributes:{assigned_user_id:n.id,assigned_user_name:{id:n.id,user_name:n.userName},relate_to:e?.return_relationship,relate_id:e?.parent_id}};this.recordManager.injectParamFields(e,r,this.getVardefs()),this.recordStore.init(r,!0)}load(){return this.params.isDuplicate&&this.params.originalDuplicateId?(this.updateState({...this.internalState,loading:!0}),this.recordStore.retrieveRecord(this.internalState.module,this.params.originalDuplicateId,!1).pipe((0,v.tap)(e=>{e.id="",e.attributes.id="",e.attributes.date_entered="",this.recordManager.injectParamFields(this.params,e,this.getVardefs()),this.recordStore.setRecord(e),this.updateState({...this.internalState,module:e.module,loading:!1})}))):(0,D.of)(this.recordStore.getBaseRecord()).pipe((0,v.shareReplay)())}calculateShowWidgets(){this.showSidebarWidgets=!1,this.widgets=!1}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(io),t.\u0275\u0275inject(ro),t.\u0275\u0275inject(Ht),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(Ai),t.\u0275\u0275inject(In),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(bi),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Fp),t.\u0275\u0275inject(Si),t.\u0275\u0275inject(Tp),t.\u0275\u0275inject(ci),t.\u0275\u0275inject(oo),t.\u0275\u0275inject(Xt),t.\u0275\u0275inject(Ic))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();class jr extends S.ActionHandler{checkRecordAccess(s,e=[]){const r=s.store.recordStore.getBaseRecord().acls??[];return!(!r||!r.length)&&this.checkAccess(s.action??null,r,e)}navigateBack(s,e,n,r,o){let a=s.getReturnModule(e),l=s.getReturnAction(e),c=s.getReturnId(e);n!==c&&(a===r&&"record"===l&&c!==n||!a||!l||s.navigateBack(o,r,e))}}let Nw=(()=>{class i extends jr{constructor(e,n){super(),this.modalService=e,this.navigation=n,this.key="cancel",this.modes=["edit","detail"]}run(e){e.store.recordStore.isDirty()?this.showConfirmationModal(e):this.cancel(e)}shouldDisplay(){return!0}cancel(e){const n=e.store.params,r=e.store.getModuleName(),o=e.store.getRecordId(),a=e.store.getBaseRecord();this.navigateBack(this.navigation,n,o,r,a),e.store.recordStore.resetStaging(),e.store.setMode("detail")}showConfirmationModal(e){const n=this.modalService.open(Da);n.componentInstance.textKey="WARN_UNSAVED_CHANGES",n.componentInstance.buttons=[{labelKey:"LBL_CANCEL",klass:["btn-secondary"],onClick:r=>r.dismiss()},{labelKey:"LBL_PROCEED",klass:["btn-main"],onClick:r=>{this.cancel(e),r.close()}}]}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(me.NgbModal),t.\u0275\u0275inject(In))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Rw=(()=>{class i extends jr{constructor(e,n,r,o,a){super(),this.message=e,this.navigation=n,this.notificationStore=r,this.recentlyViewedService=o,this.stateManager=a,this.key="save",this.modes=["edit"]}run(e){Object.keys(e.store.recordStore.getStaging().fields).some(r=>e.store.recordStore.getStaging().fields[r].loading??!1)?this.message.addWarningMessageByKey("LBL_LOADING_IN_PROGRESS"):e.store.recordStore.validate().pipe((0,v.take)(1)).subscribe(r=>{r?e.store.save().pipe((0,v.take)(1)).subscribe({next:o=>{if(!("opportunities"!==e.store.getModuleName()||o&&o.id))return this.stateManager.showErrorMessage(!0),void this.refreshRecord(e);const a=e.store.params,l=e.store.getModuleName(),c=o.id;this.notificationStore.conditionalNotificationRefresh("edit");const u=this.recentlyViewedService.buildRecentlyViewed(l,c);this.recentlyViewedService.addRecentlyViewed(l,u),this.navigateBack(this.navigation,a,c,l,o)},error:o=>{this.refreshRecord(e)}}):this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}shouldDisplay(e){return!0}refreshRecord(e){const n=e.store.getModuleName(),r=e.store.recordStore.getBaseRecord()?.id;r&&e.store.recordStore.retrieveRecord(n,r,!1).pipe((0,v.take)(1)).subscribe({next:o=>{},error:o=>{}})}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(dt),t.\u0275\u0275inject(In),t.\u0275\u0275inject(Rs),t.\u0275\u0275inject(Bc),t.\u0275\u0275inject(ba))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Bw=(()=>{class i extends jr{constructor(){super(),this.key="toggle-widgets",this.modes=["detail","edit"]}run(e){e.store.showSidebarWidgets=!e.store.showSidebarWidgets}shouldDisplay(e){return e.store.widgets}getStatus(e){return e.store.showSidebarWidgets?"active":""}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),kw=(()=>{class i extends jr{constructor(){super(),this.key="edit",this.modes=["detail"]}run(e){e.store.setMode("edit")}shouldDisplay(e){return this.checkRecordAccess(e,["edit"])}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),jw=(()=>{class i extends jr{constructor(e,n){super(),this.moduleNameMapper=e,this.router=n,this.key="create",this.modes=["detail"]}run(e){const n=e.store,r=n.getBaseRecord(),o="/"+n.vm.appData.module.name+"/edit",a=this.moduleNameMapper.toLegacy(n.vm.appData.module.name);this.router.navigate([o],{queryParams:{return_module:a,return_action:"DetailView",return_record:r&&r.id||""}}).then()}shouldDisplay(e){return this.checkRecordAccess(e,["edit"])}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(En),t.\u0275\u0275inject(Ot.Router))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Pw=(()=>{class i extends jr{constructor(e,n,r){super(),this.message=e,this.navigation=n,this.stateManager=r,this.key="saveNew",this.modes=["create"]}run(e){e.store.recordStore.validate().pipe((0,v.take)(1)).subscribe(n=>{n?e.store.save().pipe((0,v.take)(1)).subscribe({next:r=>{if(!r||!r.id)return void this.stateManager.showErrorMessage(!0);const o=e.store,a=o.params,l=o.getModuleName();this.navigation.navigateBack(r,l,a)},error:r=>{"opportunities"===e.store.getModuleName()&&this.stateManager.showErrorMessage(!0)}}):this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}shouldDisplay(e){return!0}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(dt),t.\u0275\u0275inject(In),t.\u0275\u0275inject(ba))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Vw=(()=>{class i extends jr{constructor(e,n,r,o){super(),this.modalService=e,this.router=n,this.moduleNameMapper=r,this.actionNameMapper=o,this.key="cancelCreate",this.modes=["create"]}run(e){e.store.recordStore.isDirty()?this.showConfirmationModal(e):this.cancel(e)}shouldDisplay(){return!0}cancel(e){const n=e.store;let r=n.getModuleName();n.params.return_module&&(r=this.moduleNameMapper.toFrontend(n.params.return_module));let o=n.params.return_action||"";const a=n.params.return_id||"";let l="/"+r;o&&(o=this.actionNameMapper.toFrontend(o),("record"!==o||a)&&(l+="/"+o)),a&&(l+="/"+a),this.router.navigate([l]).then()}showConfirmationModal(e){const n=this.modalService.open(Da);n.componentInstance.textKey="WARN_UNSAVED_CHANGES",n.componentInstance.buttons=[{labelKey:"LBL_CANCEL",klass:["btn-secondary"],onClick:r=>r.dismiss()},{labelKey:"LBL_OK",klass:["btn-main"],onClick:r=>{this.cancel(e),r.close()}}]}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(me.NgbModal),t.\u0275\u0275inject(Ot.Router),t.\u0275\u0275inject(En),t.\u0275\u0275inject(Eo))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Uw=(()=>{class i extends jr{constructor(){super(),this.key="async-process",this.modes=S.ALL_VIEW_MODES}run(e){}shouldDisplay(e){const n=e?.action?.acl??[];return!n.length||this.checkRecordAccess(e,n)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),nf=(()=>{class i extends Ci{constructor(e,n,r,o,a,l,c,u){super(),this.edit=e,this.create=n,this.toggleWidgets=r,this.cancel=o,this.cancelCreate=a,this.save=l,this.saveNew=c,this.async=u,e.modes.forEach(d=>this.actions[d][e.key]=e),n.modes.forEach(d=>this.actions[d][n.key]=n),r.modes.forEach(d=>this.actions[d][r.key]=r),o.modes.forEach(d=>this.actions[d][o.key]=o),l.modes.forEach(d=>this.actions[d][l.key]=l),c.modes.forEach(d=>this.actions[d][c.key]=c),a.modes.forEach(d=>this.actions[d][a.key]=a),u.modes.forEach(d=>this.actions[d][u.key]=u)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(kw),t.\u0275\u0275inject(jw),t.\u0275\u0275inject(Bw),t.\u0275\u0275inject(Nw),t.\u0275\u0275inject(Vw),t.\u0275\u0275inject(Rw),t.\u0275\u0275inject(Pw),t.\u0275\u0275inject(Uw))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),$w=(()=>{class i extends Fw{constructor(){super(),this.key="displayType",this.modes=["edit","detail","list","create","massupdate","filter"]}runAll(e,n){let r=!0;const o=Object.values(e).filter(u=>{const d=u.modes??[];return!(!d.length||!d.includes(n.store.getMode()))});if(!o||!o.length)return r;let a=n?.action?.display??"show",l="hide";return"hide"===a&&(l="show"),o.some(u=>this.run(n,u))&&(a=l),r="show"===a,r}run(e,n){const r=e.store.recordStore.getStaging();if(!r||!n)return!0;const o=n.params&&n.params.activeOnFields||{},a=Object.keys(o),l=n.params&&n.params.activeOnAttributes||{},c=Object.keys(l);return!a.length&&!c.length||this.isActive(a,r,o,c,l)}isActive(e,n,r,o,a){let l=!0;return(0,ie.isEmpty)(r)||(l=this.areFieldsActive(e,n,r)),(0,ie.isEmpty)(a)||(l=l&&this.areAttributesActive(o,n,a)),l}areAttributesActive(e,n,r){return e.every(o=>{const l=n.fields&&n.fields[o]||null,c=r[o]&&Object.keys(r[o]);if(l&&c&&c.length)return c.some(u=>{const d=r[o][u],p=l.attributes&&l.attributes[u];if(d&&d.length&&p)return this.isValueActive(p,d)})})}areFieldsActive(e,n,r){return e.every(o=>{const l=n.fields&&n.fields[o]||null,c=r[o];return!(l&&c&&c.length)||this.isValueActive(l,c)})}isValueActive(e,n){let r=!1;return e.valueList&&e.valueList.length?(e.valueList.some(o=>n.some(a=>{if(a===o)return r=!0,!0})),r):((0,S.isVoid)(e.value)||n.some(o=>{o===e.value&&(r=!0)}),r)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Vs=(()=>{class i extends vr{constructor(e,n,r,o,a,l,c,u,d,p){super(o,a,l,c,r,u,n,p),this.store=e,this.metadata=n,this.language=r,this.actionManager=o,this.asyncActionService=a,this.message=l,this.confirmation=c,this.selectModalService=u,this.displayTypeLogic=d,this.appMetadataStore=p,this.defaultActions={detail:[{key:"toggle-widgets",labelKey:"LBL_INSIGHTS",params:{expanded:!0},acl:[]}],edit:[{key:"toggle-widgets",labelKey:"LBL_INSIGHTS",params:{expanded:!0},acl:[]}]}}getActions(e){return this.metadata.recordViewMetadata$.pipe((0,D.combineLatestWith)(this.store.mode$,this.store.record$,this.store.language$,this.store.widgets$,this.store.panels$),(0,v.map)(([n,r])=>r&&n?this.parseModeActions(n.actions,r,this.store.getViewContext()):[]))}buildActionData(e,n){return{store:this.store,action:e}}buildActionInput(e,n,r,o=null){const a=this.store.getBaseRecord();return this.message.removeMessages(),{action:n,module:a.module,id:a.id,params:e&&e.params||[]}}getMode(){return this.store.getMode()}getModuleName(e){return this.store.getModuleName()}reload(e,n,r){this.store.load(!1).pipe((0,v.take)(1)).subscribe()}shouldDisplay(e,n){const r=n?.action?.displayLogic??null;let o=!0;return r&&Object.keys(r).length&&(o=this.displayTypeLogic.runAll(r,n)),!!o&&e&&e.shouldDisplay(n)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Mi),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(nf),t.\u0275\u0275inject(nn),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Bn),t.\u0275\u0275inject($n),t.\u0275\u0275inject($w),t.\u0275\u0275inject(Fn))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Ta=(()=>{class i{constructor(e,n,r){this.systemConfigStore=e,this.screenSize=n,this.store=r,this.swapSizes=[],this.subs=[],this.swapSizes=this.systemConfigStore.getUi("widget_swap_screen_sizes"),this.widgetSwap$=this.screenSize.screenSize$.pipe((0,v.map)(o=>{const a=(0,S.isTrue)(this.swapSizes[o]??!1);return(null===this.widgetSwap&&!0===a||this.widgetSwap!==a&&!0===a)&&(this.store.showSidebarWidgets=!1),this.widgetSwap=a,a}))}destroy(){this.subs.forEach(e=>e.unsubscribe()),this.subs=[]}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ht),t.\u0275\u0275inject(li),t.\u0275\u0275inject(Mi))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),rf=(()=>{class i{constructor(e,n){this.store=e,this.metadata=n,this.config$=this.metadata.recordViewMetadata$.pipe((0,D.combineLatestWith)(this.store.showSidebarWidgets$),(0,v.map)(([r,o])=>(r.sidebarWidgets&&r.sidebarWidgets.length&&r.sidebarWidgets.forEach(a=>{a&&"data-update"===a.refreshOn&&(a.reload$=this.store.record$.pipe((0,v.map)(()=>!0))),a&&(a.subpanelReload$=this.store.subpanelReload$)}),{widgets:r.sidebarWidgets||[],show:o})))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Mi),t.\u0275\u0275inject(bt))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),sf=(()=>{class i{constructor(e,n,r,o,a){this.store=e,this.metadata=n,this.language=r,this.actions=o,this.logicManager=a,this.fieldSubs=[]}getEditAction(){const e={store:this.store};this.actions.run({key:"edit"},this.store.getMode(),e)}getDisplayConfig(){return this.metadata.recordViewMetadata$.pipe((0,D.combineLatestWith)(this.store.mode$),(0,v.map)(([e,n])=>({layout:this.getLayout(e),mode:n,maxColumns:e.templateMeta.maxColumns||2,tabDefs:e.templateMeta.tabDefs})))}getPanels(){return this.store.panels$}getRecord(){return this.store.stagingRecord$.pipe((0,D.combineLatestWith)(this.store.mode$),(0,v.map)(([e,n])=>("edit"===n||"create"===n?this.store.initValidators(e):this.store.resetValidatorsForAllFields(e),e.formGroup&&e.formGroup.enable(),e)))}getLayout(e){let n="panels";return e.templateMeta.useTabs&&(n="tabs"),n}clean(){this.fieldSubs.forEach(e=>e.unsubscribe())}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Mi),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(nf),t.\u0275\u0275inject(Ic))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),af=(()=>{class i{constructor(e,n){this.store=e,this.metadata=n,this.config$=this.metadata.recordViewMetadata$.pipe((0,D.combineLatestWith)(this.store.showTopWidget$),(0,v.map)(([r,o])=>(r.topWidget&&"data-update"===r.topWidget.refreshOn&&(r.topWidget.reload$=this.store.record$.pipe((0,v.map)(()=>!0))),{widget:r.topWidget,show:o})))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Mi),t.\u0275\u0275inject(bt))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),lf=(()=>{class i{constructor(e,n){this.store=e,this.metadata=n,this.config$=this.metadata.recordViewMetadata$.pipe((0,D.combineLatestWith)(this.store.widgets$),(0,v.map)(([r,o])=>(r.bottomWidgets&&r.bottomWidgets.length&&r.bottomWidgets.forEach(a=>{a&&"data-update"===a.refreshOn&&(a.reload$=this.store.record$.pipe((0,v.map)(()=>!0))),a&&(a.subpanelReload$=this.store.subpanelReload$)}),{widgets:r.bottomWidgets||[],show:o})))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Mi),t.\u0275\u0275inject(bt))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();function nZ(i,s){1&i&&(t.\u0275\u0275elementStart(0,"div",7)(1,"div",11)(2,"div",12),t.\u0275\u0275element(3,"div",13),t.\u0275\u0275elementEnd()()())}function iZ(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",7)(1,"div",11),t.\u0275\u0275element(2,"scrm-top-widget",14),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext(3).ngIf,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("config",e.topWidgetConfig.widget)("context",n.getViewContext())("type",e.topWidgetConfig.widget.type)}}function rZ(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,iZ,3,3,"div",6),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2).ngIf,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.topWidgetConfig.show&&n.hasTopWidgetMetadata(e.topWidgetConfig.widget))}}function oZ(i,s){1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-record-content-skeleton"),t.\u0275\u0275elementContainerEnd())}function sZ(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"scrm-record-content",15),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("dataSource",e.getContentAdapter())}}function aZ(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",18),t.\u0275\u0275element(1,"scrm-sidebar-widget",19),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e)("context$",n.getViewContext$())("context",n.getViewContext())("type",e.type)}}function lZ(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",16)(1,"div",8),t.\u0275\u0275template(2,aZ,2,4,"div",17),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext(2).ngIf;t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.bottomWidgetConfig.widgets)}}function cZ(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",20)(1,"div",8),t.\u0275\u0275element(2,"scrm-subpanel-container",21),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(2),t.\u0275\u0275property("config",e.getSubpanelsConfig())}}const uZ=function(i){return{"col-lg-12":i}};function dZ(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",4)(2,"div",5),t.\u0275\u0275template(3,nZ,4,0,"div",6),t.\u0275\u0275template(4,rZ,2,1,"ng-container",3),t.\u0275\u0275elementStart(5,"div",7)(6,"div",8),t.\u0275\u0275template(7,oZ,2,0,"ng-container",3),t.\u0275\u0275template(8,sZ,2,1,"ng-container",3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(9,lZ,3,1,"div",9),t.\u0275\u0275template(10,cZ,3,1,"div",10),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext().ngIf,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(7,uZ,!n.sidebarWidgetConfig.show)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.loading),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",n.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.bottomWidgetConfig.show&&e.bottomWidgetConfig.widgets),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.showSubpanels)}}function pZ(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",18),t.\u0275\u0275element(1,"scrm-sidebar-widget",24),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("type",e.type)("context",n.getViewContext())("context$",n.getViewContext$())("config",e)}}function fZ(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",23),t.\u0275\u0275template(1,pZ,2,4,"div",17),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275classProp("mt-0",e.swapWidgets),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.sidebarWidgetConfig.widgets)}}function mZ(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,fZ,2,3,"div",22),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.displayWidgets)}}function hZ(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",1)(1,"div",2),t.\u0275\u0275template(2,dZ,11,9,"ng-container",3),t.\u0275\u0275template(3,mZ,2,1,"ng-container",3),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!e.swapWidgets||e.swapWidgets&&!e.displayWidgets),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.swapWidgets||e.swapWidgets&&e.displayWidgets)}}let cf=(()=>{class i{onEnterKey(){!this.saveAction||!this.context||this.actionsAdapter.runAction(this.saveAction,this.context)}constructor(e,n,r,o,a,l,c,u,d){this.recordViewStore=e,this.language=n,this.metadata=r,this.contentAdapter=o,this.topWidgetAdapter=a,this.sidebarWidgetAdapter=l,this.bottomWidgetAdapter=c,this.actionsAdapter=u,this.sidebarWidgetHandler=d,this.subs=[],this.loading=!0,this.language$=this.language.vm$,this.displayWidgets=!0,this.swapWidgets=!1,this.vm$=this.language$.pipe((0,D.combineLatestWith)(this.bottomWidgetAdapter.config$,this.topWidgetAdapter.config$,this.recordViewStore.showSubpanels$),(0,v.map)(([p,f,m,g])=>({language:p,bottomWidgetConfig:f,topWidgetConfig:m,showSubpanels:g}))),this.actionConfig$=this.recordViewStore.mode$.pipe((0,D.combineLatestWith)(this.actionsAdapter.getActions(),this.getViewContext$()),(0,v.filter)(([p,f,m])=>"edit"===p),(0,v.map)(([p,f,m])=>({mode:p,actions:f,context:m})))}ngOnInit(){this.subs.push(this.recordViewStore.loading$.subscribe(e=>{this.loading=e})),this.subs.push(this.actionConfig$.subscribe(e=>{this.context=e.context,e.actions.forEach(n=>{"save"===n.key&&(this.saveAction=n)})})),this.subs.push(this.sidebarWidgetAdapter.config$.subscribe(e=>{this.sidebarWidgetConfig=e,this.displayWidgets=this.sidebarWidgetConfig.show&&this.sidebarWidgetConfig.widgets})),this.subs.push(this.sidebarWidgetHandler.widgetSwap$.subscribe(e=>{this.swapWidgets=e}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe()),this.contentAdapter.clean()}getContentAdapter(){return this.contentAdapter}getSubpanelsConfig(){return{parentModule:this.recordViewStore.getModuleName(),subpanels$:this.recordViewStore.subpanels$,sidebarActive$:this.recordViewStore.widgets$}}getViewContext(){return this.recordViewStore.getViewContext()}getViewContext$(){return this.recordViewStore.viewContext$}hasTopWidgetMetadata(e){return!(!e||!e.type)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Mi),t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(bt),t.\u0275\u0275directiveInject(sf),t.\u0275\u0275directiveInject(af),t.\u0275\u0275directiveInject(rf),t.\u0275\u0275directiveInject(lf),t.\u0275\u0275directiveInject(Vs),t.\u0275\u0275directiveInject(Ta))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-container"]],hostBindings:function(n,r){1&n&&t.\u0275\u0275listener("keyup.control.enter",function(){return r.onEnterKey()})},features:[t.\u0275\u0275ProvidersFeature([sf,af,rf,lf])],decls:2,vars:3,consts:[["class","record-view-container view-container container-fluid pt-3 pb-3 small-font",4,"ngIf"],[1,"record-view-container","view-container","container-fluid","pt-3","pb-3","small-font"],[1,"row"],[4,"ngIf"],[1,"col-lg-9",3,"ngClass"],[1,"container-fluid","pl-0","pr-0"],["class","row no-gutters",4,"ngIf"],[1,"row","no-gutters"],[1,"col"],["class","row no-gutters mt-4",4,"ngIf"],["class","row no-gutters pt-1 pb-4",4,"ngIf"],[1,"col","pb-3"],[1,"d-flex","justify-content-center","widget-bar","rounded","pb-1","pt-3","box-loading"],[1,"d-flex","justify-content-center","align-items-baseline","widget-bar-entry","p-2"],[3,"config","context","type"],[3,"dataSource"],[1,"row","no-gutters","mt-4"],["class","mb-3",4,"ngFor","ngForOf"],[1,"mb-3"],[3,"config","context$","context","type"],[1,"row","no-gutters","pt-1","pb-4"],[3,"config"],["class","col-lg-3 record-widget-container pl-0",3,"mt-0",4,"ngIf"],[1,"col-lg-3","record-widget-container","pl-0"],[3,"type","context","context$","config"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,hZ,4,2,"div",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[I.NgClass,I.NgForOf,I.NgIf,yw,xp,Dw,Qp,aM,I.AsyncPipe],encapsulation:2})}return i})();function gZ(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",3)(1,"div",4),t.\u0275\u0275element(2,"scrm-module-title",5)(3,"div",6),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("title",e.moduleTitle)}}function vZ(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-button",20),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("config",e.backButtonConfig)}}function _Z(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",18),t.\u0275\u0275template(1,vZ,1,1,"scrm-button",19),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.backButtonConfig)}}function yZ(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",21),t.\u0275\u0275element(1,"scrm-favorite-toggle",22),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("record",e.record)}}function bZ(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-dynamic-label",23),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("fields",e.record.fields)("labelKey",e.getSummaryTemplate())}}function CZ(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",24),t.\u0275\u0275element(1,"scrm-action-group-menu",25),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.actionsAdapter)("actionContext",e.getActionContext(e.record))("klass",e.isScrolled?"record-view-actions-scrolled float-right":"record-view-actions float-right")}}function SZ(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",7)(1,"div",8)(2,"div",9),t.\u0275\u0275template(3,_Z,2,1,"div",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",11)(5,"div",12),t.\u0275\u0275template(6,yZ,2,1,"div",13),t.\u0275\u0275template(7,bZ,1,2,"scrm-dynamic-label",14),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(8,"div",15)(9,"div",16),t.\u0275\u0275template(10,CZ,2,3,"div",17),t.\u0275\u0275elementEnd()()()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf","detail"===e.mode||"edit"===e.mode),t.\u0275\u0275advance(1),t.\u0275\u0275classProp("justify-content-center","detail"===e.mode||"edit"===e.mode)("justify-content-start",!("detail"===e.mode||"edit"===e.mode))("record-view-name-wrapper-margin-left","detail"===e.mode||"edit"===e.mode),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",e.isScrolled?"record-view-name-scrolled":"record-view-name"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.record&&e.record.fields&&"create"!==e.mode),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.record&&e.record.fields),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",e.record)}}let uf=(()=>{class i{onScroll(){const e=window.pageYOffset,n=5*parseFloat(getComputedStyle(document.documentElement).fontSize);if(e>n){if(e-n<10)return;this.isScrolled=!0}else{if(n-e<10)return;this.isScrolled=!1}}constructor(e,n,r,o,a){this.actionsAdapter=e,this.recordViewStore=n,this.moduleNavigation=r,this.appState=o,this.router=a,this.mode="detail",this.loading=!0,this.isScrolled=!1,this.subs=[]}ngOnInit(){this.mode=this.recordViewStore.getMode(),this.setBackButtonConfig(),this.subs.push(this.recordViewStore.mode$.subscribe(e=>{this.mode=e})),this.subs.push(this.recordViewStore.record$.subscribe(e=>{this.record=e})),this.subs.push(this.recordViewStore.loading$.subscribe(e=>{this.loading=e}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}get moduleTitle(){return this.moduleNavigation.getModuleLabel(this.recordViewStore.vm.appData.module,this.recordViewStore.vm.appData.language.appListStrings)}getSummaryTemplate(){return this.recordViewStore.getSummaryTemplate()}getActionContext(e){return e?{module:e.module||"",record:e}:{}}setBackButtonConfig(){const e=this.moduleNavigation.getModuleRoute(this.recordViewStore.vm.appData.module);this.backButtonConfig={icon:"paginate_previous",klass:"back-button",onClick:()=>{this.router.navigateByUrl(e.route).then()}}}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Vs),t.\u0275\u0275directiveInject(Mi),t.\u0275\u0275directiveInject(In),t.\u0275\u0275directiveInject(Ht),t.\u0275\u0275directiveInject(Ot.Router))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-header"]],hostBindings:function(n,r){1&n&&t.\u0275\u0275listener("scroll",function(){return r.onScroll()},!1,t.\u0275\u0275resolveWindow)},decls:4,vars:3,consts:[[1,"record-view-header",3,"ngClass"],["class","row mr-0",4,"ngIf"],["class","row m-0 d-flex justify-content-between ml-1 mr-1",4,"ngIf"],[1,"row","mr-0"],[1,"col-md-4","d-flex","align-items-center"],[1,"record-view-title","title-font",3,"title"],[1,"record-view-name","pt-3","pb-3"],[1,"row","m-0","d-flex","justify-content-between","ml-1","mr-1"],[1,"col-xs-12","col-sm-12","col-md-6","col-lg-7","col-xl-8","record-name-container"],[1,"float-left","p-0"],["class","d-flex record-view-back-button justify-content-start",4,"ngIf"],[1,"record-view-name-wrapper","d-flex","justify-content-md-start","align-items-center"],[1,"p-0","d-inline-block",3,"ngClass"],["class","float-right align-items-top d-flex",4,"ngIf"],["class","record-view-name-label d-block p-0 lh-100",3,"fields","labelKey",4,"ngIf"],[1,"col-xs-12","col-sm-12","col-md-6","col-lg-5","col-xl-4","align-items-center","record-view-action-header"],[1,"row","mr-1","ml-1","justify-content-center","justify-content-md-end"],["class","",4,"ngIf"],[1,"d-flex","record-view-back-button","justify-content-start"],[3,"config",4,"ngIf"],[3,"config"],[1,"float-right","align-items-top","d-flex"],[1,"h-100","lh-100",3,"record"],[1,"record-view-name-label","d-block","p-0","lh-100",3,"fields","labelKey"],[1,""],["buttonClass","settings-button",3,"config","actionContext","klass"]],template:function(n,r){1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",0),t.\u0275\u0275template(2,gZ,4,1,"div",1),t.\u0275\u0275template(3,SZ,11,11,"div",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",r.isScrolled?"record-view-header-scrolled shadow-md":""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r.loading))},dependencies:[I.NgClass,I.NgIf,dp,So,Ar,TM,Un],encapsulation:2})}return i})();function MZ(i,s){1&i&&t.\u0275\u0275element(0,"scrm-status-bar")}function wZ(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",1)(1,"div",2),t.\u0275\u0275element(2,"scrm-record-header"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",3),t.\u0275\u0275element(4,"hr",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(5,MZ,1,0,"scrm-status-bar",5),t.\u0275\u0275element(6,"scrm-record-container"),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",e.showStatusBar)}}let DZ=(()=>{class i{onEnterKey(){!this.saveAction||!this.context||this.actionsAdapter.runAction(this.saveAction,this.context)}constructor(e,n,r,o){this.appState=e,this.recordStore=n,this.actionsAdapter=r,this.route=o,this.subs=[],this.vm$=null,this.showStatusBar=!1,this.actionConfig$=this.recordStore.mode$.pipe((0,D.combineLatestWith)(this.actionsAdapter.getActions(),this.getViewContext$()),(0,v.filter)(([a,l,c])=>"create"===a),(0,v.map)(([a,l,c])=>({mode:a,actions:l,context:c})))}ngOnInit(){let e="detail";const n=this.route.snapshot&&this.route.snapshot.data||{};n.mode&&(e=n.mode);let r=this.route.snapshot&&this.route.snapshot.queryParams||{};r={...r};let o=this.route.snapshot.params.record;!0===n.duplicate&&(r.originalDuplicateId=o,r.isDuplicate=!0,o=""),this.subs.push(this.recordStore.init(this.appState.getModule(),o,e,r).subscribe()),this.vm$=this.recordStore.vm$,this.appState.removeAllPrevRoutes(),this.subs.push(this.actionConfig$.subscribe(a=>{this.context=a.context,a.actions.forEach(l=>{"saveNew"===l.key&&(this.saveAction=l)})}))}getViewContext$(){return this.recordStore.viewContext$}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe()),this.recordStore.destroy()}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ht),t.\u0275\u0275directiveInject(kc),t.\u0275\u0275directiveInject(Vs),t.\u0275\u0275directiveInject(Ot.ActivatedRoute))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-create-record"]],hostBindings:function(n,r){1&n&&t.\u0275\u0275listener("keyup.control.enter",function(){return r.onEnterKey()})},features:[t.\u0275\u0275ProvidersFeature([kc,Vs,{provide:Mi,useExisting:kc},Ta])],decls:2,vars:3,consts:[["class","record-view",4,"ngIf"],[1,"record-view"],[1,"record-view-position-sticky"],[1,"record-view-hr-container"],[1,"record-view-hr"],[4,"ngIf"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,wZ,7,1,"div",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[I.NgIf,cf,uf,Op,I.AsyncPipe],encapsulation:2})}return i})(),df=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,kr,Ge.AngularSvgIconModule,bw,Ep,xw,Jp,lM]})}return i})(),pf=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,xa,Mo,Lr,OM,an]})}return i})();function xZ(i,s){1&i&&t.\u0275\u0275element(0,"scrm-status-bar")}function EZ(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",1)(1,"div",2),t.\u0275\u0275element(2,"scrm-record-header"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",3),t.\u0275\u0275element(4,"hr",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(5,xZ,1,0,"scrm-status-bar",5),t.\u0275\u0275element(6,"scrm-record-container"),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",e.showStatusBar)}}let IZ=(()=>{class i{constructor(e,n,r,o){this.appState=e,this.recordStore=n,this.route=r,this.sidebarWidgetHandler=o,this.vm$=null,this.showStatusBar=!1}ngOnInit(){let e="detail";this.appState.addToPrevRoute(this.appState.getRouteUrl());const n=this.route.snapshot&&this.route.snapshot.data||{};n.mode&&(e=n.mode);const r=this.route.snapshot&&this.route.snapshot.queryParams||{};this.recordSub=this.recordStore.init(this.appState.getModule(),this.route.snapshot.params.record,e,r).subscribe(),this.vm$=this.recordStore.vm$}ngOnDestroy(){this.recordSub&&this.recordSub.unsubscribe(),this.sidebarWidgetHandler.destroy(),this.recordStore.destroy()}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ht),t.\u0275\u0275directiveInject(Mi),t.\u0275\u0275directiveInject(Ot.ActivatedRoute),t.\u0275\u0275directiveInject(Ta))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record"]],features:[t.\u0275\u0275ProvidersFeature([Mi,Vs,Ta])],decls:2,vars:3,consts:[["class","record-view",4,"ngIf"],[1,"record-view"],[1,"record-view-position-sticky"],[1,"record-view-hr-container"],[1,"record-view-hr"],[4,"ngIf"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,EZ,7,1,"div",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[I.NgIf,cf,uf,Op,I.AsyncPipe],encapsulation:2})}return i})(),zw=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Jn,df,pf,Bp,Rc]})}return i})(),FZ=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Jn,zw,df,pf,Bp,Rc]})}return i})();class Hw extends S.ActionHandler{}let Ww=(()=>{class i extends Hw{constructor(e,n,r,o,a,l){super(),this.message=e,this.asyncActionService=n,this.router=r,this.modalService=o,this.state=a,this.localStorage=l,this.key="install",this.modes=["edit"]}run(e){e.store.recordStore.validate().pipe((0,v.take)(1)).subscribe(n=>{if(n){const r=e.store.recordStore.getStaging();this.runInstall(r)}else this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}shouldDisplay(){return!0}runInstall(e){const n=`suitecrm-app-${this.key}`;this.message.removeMessages(),this.asyncActionService.run(n,{action:n,module:e.module,id:e.id,payload:e.formGroup.value}).pipe((0,v.take)(1)).subscribe(o=>{3===o.data.statusCode&&this.openErrorModalDialog(o.data.errors),0===o.data.statusCode&&(this.state.clear(),this.localStorage.clear(),this.router.navigate(["/"],{}).then())})}openErrorModalDialog(e){this.modalService.open(up,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"lg",windowClass:"custom-modal",modalDialogClass:"custom-modal"}).componentInstance.errors=e}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(dt),t.\u0275\u0275inject(nn),t.\u0275\u0275inject(Ot.Router),t.\u0275\u0275inject(me.NgbModal),t.\u0275\u0275inject(ba),t.\u0275\u0275inject(bi))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ff=(()=>{class i extends Ci{constructor(e){super(),this.save=e,e.modes.forEach(n=>this.actions[n][e.key]=e)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ww))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Kw={loading:!1,mode:"detail",params:{returnModule:"",returnId:"",returnAction:""}};let Us=(()=>{class i{constructor(e,n,r,o,a,l){this.recordFetchGQL=e,this.recordSaveGQL=n,this.message=r,this.recordManager=o,this.recordStoreFactory=a,this.language=l,this.cache$=null,this.internalState=(0,S.deepClone)(Kw),this.store=new D.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.subs=[],this.recordStore=a.create(this.getViewFieldsObservable()),this.record$=this.recordStore.state$.pipe((0,v.distinctUntilChanged)()),this.stagingRecord$=this.recordStore.staging$.pipe((0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(c=>c.loading)),this.mode$=this.state$.pipe((0,v.map)(c=>c.mode)),this.vm$=this.record$.pipe((0,D.combineLatestWith)(this.loading$),(0,v.map)(([c,u])=>(this.vm={record:c,loading:u},this.vm))),this.viewContext$=this.record$.pipe((0,v.map)(()=>this.getViewContext()))}get params(){return this.internalState.params||{}}set params(e){this.updateState({...this.internalState,params:e})}getViewContext(){return{record:this.getBaseRecord()}}getActions(){return(0,D.of)([])}init(e="edit",n={}){this.setMode(e),this.recordStore.init({id:"",module:"install",attributes:{}},!0)}clear(){this.cache$=null,this.updateState((0,S.deepClone)(Kw))}clearAuthBased(){this.clear()}getBaseRecord(){return this.internalState?this.recordStore.getBaseRecord():null}getMode(){return this.internalState?this.internalState.mode:null}setMode(e){this.updateState({...this.internalState,mode:e})}getLicenseText(){return this.language.getFieldLabel("SUITE8_LICENSE_CONTENT")}getMetadata(){return this.url=window.location.origin+window.location.pathname,this.url=(0,ie.trimEnd)(this.url,"/"),{actions:[],templateMeta:{maxColumns:2,useTabs:!0,tabDefs:{LBL_CONFIG:{newTab:!0,panelDefault:"expanded"}}},panels:[{key:"LBL_CONFIG",display$:(0,D.of)(!0).pipe((0,v.shareReplay)(1)),rows:[{cols:[{name:"site_host",label:"LBL_SITECFG_URL",type:"varchar",fieldDefinition:{name:"site_host",vname:"LBL_SITECFG_URL",type:"varchar",required:!0,default:this.url?.toString(),defaultValueModes:["create","edit"]}},{name:"demoData",label:"LBL_DBCONF_DEMO_DATA",type:"enum",fieldDefinition:{name:"demoData",vname:"LBL_DBCONF_DEMO_DATA",type:"enum",options:"__no_options__",required:!0,default:"no",defaultValueModes:["create","edit"],metadata:{extraOptions:[{value:"yes",labelKey:"LBL_YES"},{value:"no",labelKey:"LBL_NO"}]}}}]},{cols:[{name:"db_config",label:"LBL_DBCONF_TITLE",type:"grouped-field",fieldDefinition:{name:"db_config",vname:"LBL_DBCONF_TITLE",type:"grouped-field",layout:["db_username","db_password","db_host","db_name","db_port"],display:"vertical",groupFields:{db_username:{name:"db_username",type:"varchar",vname:"LBL_DBCONF_SUITE_DB_USER",labelKey:"LBL_DBCONF_SUITE_DB_USER",label:"LBL_DBCONF_SUITE_DB_USER",showLabel:["*"],required:!0},db_password:{name:"db_password",type:"password",vname:"LBL_DBCONF_DB_PASSWORD",labelKey:"LBL_DBCONF_DB_PASSWORD",showLabel:["*"],required:!0},db_host:{name:"db_host",type:"varchar",vname:"LBL_DBCONF_HOST_NAME",labelKey:"LBL_DBCONF_HOST_NAME",showLabel:["*"],required:!0},db_name:{name:"db_name",type:"varchar",vname:"LBL_DBCONF_DB_NAME",labelKey:"LBL_DBCONF_DB_NAME",showLabel:["*"],required:!0},db_port:{name:"db_port",type:"varchar",vname:"LBL_DBCONF_DB_PORT",labelKey:"LBL_DBCONF_DB_PORT",showLabel:["*"],required:!1,default:"3306",defaultValueModes:["create","edit"]}},showLabel:{edit:["*"]}}},{name:"admin_config",label:"LBL_SITECFG_TITLE",type:"grouped-field",fieldDefinition:{name:"admin_config",vname:"LBL_SITECFG_TITLE",type:"grouped-field",layout:["site_username","site_password"],display:"vertical",groupFields:{site_username:{name:"site_username",type:"varchar",vname:"LBL_SITECFG_ADMIN_Name",labelKey:"LBL_SITECFG_ADMIN_Name",showLabel:["edit"],required:!0,default:"admin",defaultValueModes:["create","edit"]},site_password:{name:"site_password",type:"password",vname:"LBL_SITECFG_ADMIN_PASS",labelKey:"LBL_SITECFG_ADMIN_PASS",showLabel:["edit"],required:!0}},showLabel:{edit:["*"]}}}]}]}]}}getMetadata$(){return(0,D.of)(this.getMetadata())}getModuleName(){return"install"}parseParams(e={}){if(!e)return;const n={...this.internalState.params};Object.keys(e).forEach(r=>{(0,S.isVoid)(n[r])||(n[r]=e[r])}),this.params=e}updateState(e){this.store.next(this.internalState=e)}getIgnoreSystemChecksField(){return this.recordStore.getStaging().fields.sys_check_option}getViewFieldsObservable(){return this.getMetadata$().pipe((0,v.map)(e=>{const n=[];return e.panels.forEach(r=>{r.rows.forEach(o=>{o.cols.forEach(a=>{n.push(a)})})}),n.push({name:"sys_check_option",type:"boolean",fieldDefinition:{name:"sys_check_option",type:"boolean",vname:"LBL_SYS_CHECK_WARNING",labelKey:"LBL_SYS_CHECK_WARNING",showLabel:["edit"],required:!1,value:"false",default:"false",defaultValueModes:["create","edit"]}}),n}))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(io),t.\u0275\u0275inject(ro),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Si),t.\u0275\u0275inject(oo),t.\u0275\u0275inject(Ue))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),mf=(()=>{class i extends vr{constructor(e,n,r,o,a,l,c,u,d){super(o,a,l,c,r,u,n,d),this.store=e,this.metadata=n,this.language=r,this.actionManager=o,this.asyncActionService=a,this.message=l,this.confirmation=c,this.selectModalService=u,this.appMetadataStore=d,this.defaultActions={detail:[],edit:[{key:"install",labelKey:"LBL_PROCEED",params:{expanded:!0},acl:[]}],create:[]},this.collapseButtons=!1}getActions(e){return this.store.getActions().pipe((0,D.combineLatestWith)(this.store.mode$,this.store.stagingRecord$),(0,v.map)(([n,r])=>r?this.parseModeActions(n,r,this.store.getViewContext()):[]))}buildActionData(e,n){return{store:this.store}}buildActionInput(e,n,r,o=null){const a=this.store.getBaseRecord();return this.message.removeMessages(),{action:n,module:a.module,id:a.id,record:a}}getMode(){return this.store.getMode()}getModuleName(e){return this.store.getModuleName()}reload(e,n,r){}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Us),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(ff),t.\u0275\u0275inject(nn),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Bn),t.\u0275\u0275inject($n),t.\u0275\u0275inject(Fn))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),hf=(()=>{class i{constructor(e,n,r,o){this.store=e,this.metadata=n,this.language=r,this.actions=o}getEditAction(){}getDisplayConfig(){return this.store.getMetadata$().pipe((0,D.combineLatestWith)(this.store.mode$),(0,v.map)(([e,n])=>({layout:this.getLayout(e),mode:n,maxColumns:e.templateMeta.maxColumns||2,tabDefs:e.templateMeta.tabDefs})))}getPanels(){return this.store.getMetadata$().pipe((0,D.combineLatestWith)(this.store.stagingRecord$,this.language.vm$),(0,v.map)(([e,n,r])=>{const o=[],a=n&&n.module||"";return e.panels.forEach(l=>{const u={label:this.language.getFieldLabel(l.key.toUpperCase(),a,r),key:l.key,display$:l?.display$??(0,D.of)(!0).pipe((0,v.shareReplay)(1)),rows:[]};l.rows.forEach(d=>{const p={cols:[]};d.cols.forEach(f=>{p.cols.push({...f})}),u.rows.push(p)}),o.push(u)}),o}))}getRecord(){return this.store.stagingRecord$}getLayout(e){let n="panels";return e.templateMeta.useTabs&&(n="tabs"),n}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Us),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(ff))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Gw=(()=>{class i{constructor(e,n){this.metadata=e,this.contentAdapter=n}getContentAdapter(){return this.contentAdapter}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(bt),t.\u0275\u0275directiveInject(hf))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-install-container"]],features:[t.\u0275\u0275ProvidersFeature([hf])],decls:4,vars:1,consts:[[1,"install-view-container","record-view-container","view-container","container-fluid","pt-3","pb-3","small-font"],[1,"row","no-gutters"],[1,"col"],[3,"dataSource"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2),t.\u0275\u0275element(3,"scrm-record-content",3),t.\u0275\u0275elementEnd()()()),2&n&&(t.\u0275\u0275advance(3),t.\u0275\u0275property("dataSource",r.getContentAdapter()))},dependencies:[xp],encapsulation:2})}return i})(),Zw=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Ge.AngularSvgIconModule,Ep]})}return i})();function AZ(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t.\u0275\u0275element(5,"scrm-label",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",6),t.\u0275\u0275element(7,"scrm-label",7),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12)(13,"label",13),t.\u0275\u0275element(14,"scrm-label",14),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(15,": "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"div",15)(17,"div",16),t.\u0275\u0275element(18,"scrm-field",17),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(19,"div"),t.\u0275\u0275element(20,"scrm-action-group-menu",18),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementContainerEnd()),2&i){const e=s.ngIf,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(14),t.\u0275\u0275property("labelKey",n.store.getIgnoreSystemChecksField().definition.vname),t.\u0275\u0275advance(4),t.\u0275\u0275property("field",n.store.getIgnoreSystemChecksField())("mode","edit")("record",e.record)("type",n.store.getIgnoreSystemChecksField().type),t.\u0275\u0275advance(2),t.\u0275\u0275property("actionContext",n.getActionContext(e.record))("config",n.actionsAdapter)}}let qw=(()=>{class i{constructor(e,n){this.actionsAdapter=e,this.store=n,this.vm$=this.store.record$.pipe((0,v.map)(r=>({record:r})))}getActionContext(e){return e?{module:e.module||"",record:e}:{}}getTitle(){}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(mf),t.\u0275\u0275directiveInject(Us))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-install-header"]],features:[t.\u0275\u0275ProvidersFeature([mf])],decls:2,vars:3,consts:[[4,"ngIf"],[1,"install-view-header"],[1,"row","mr-0"],[1,"col-md-4","install-header-title-col"],[1,"install-view-title","record-view-name"],["labelKey","LBL_WELCOME","module","install"],[1,"install-view-subtitle","record-view-title"],["labelKey","LBL_INSTALL","module","install"],[1,"col-md-8","install-header-buttons-col"],[1,"row","mr-1","ml-1"],[1,"w-100","d-flex","justify-content-end","align-items-center"],[1,"w-100","install-header-options","d-flex","justify-content-end","align-items-center","pr-5"],[1,"label-container","pr-2"],[1,"m-0","small"],[3,"labelKey"],[1,"d-flex"],[1,"flex-grow-1","text-break"],[3,"field","mode","record","type"],["buttonClass","settings-button","klass","install-view-actions float-right",3,"actionContext","config"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,AZ,21,7,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[I.NgIf,Ar,qt,hr,I.AsyncPipe],encapsulation:2})}return i})(),Qw=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,xa,Lr,Vt,Jn]})}return i})();function TZ(i,s){1&i&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275element(1,"scrm-install-header"),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275element(3,"hr",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(4,"scrm-install-container"),t.\u0275\u0275elementEnd())}let OZ=(()=>{class i{constructor(e,n){this.store=e,this.route=n,this.vm$=null,this.showStatusBar=!1}ngOnInit(){let e="edit";const n=this.route.snapshot&&this.route.snapshot.data||{};n.mode&&(e=n.mode),this.store.init(e),this.vm$=this.store.vm$}ngOnDestroy(){this.store.clear()}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Us),t.\u0275\u0275directiveInject(Ot.ActivatedRoute))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-install-view"]],features:[t.\u0275\u0275ProvidersFeature([Us])],decls:2,vars:3,consts:[["class","install-view",4,"ngIf"],[1,"install-view"],[1,"record-view-hr-container"],[1,"record-view-hr"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,TZ,5,0,"div",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[I.NgIf,qw,Gw,I.AsyncPipe],encapsulation:2})}return i})(),LZ=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Jn,Qw,Zw]})}return i})();class gf extends HM{}let Jw=(()=>{class i extends gf{constructor(){super(),this.key="cancel",this.modes=["detail","edit","list","create","massupdate"]}run(e){e.listStore.closeRecordPanel()}shouldDisplay(){return!0}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Yw=(()=>{class i extends gf{constructor(e,n,r,o){super(),this.message=e,this.asyncActionService=n,this.confirmation=r,this.asyncAction=o,this.key="bulk-action",this.modes=["detail","edit","list","create","massupdate"]}run(e){const n=e.action,r=e.listStore.recordList.selection,o=n&&n.params||{};if((0,S.isFalse)(o.allowAll)&&r.all)this.message.addDangerMessage(e.listStore.appStrings.LBL_SELECT_ALL_NOT_ALLOWED);else{if(o.min&&r.count<o.min){let a=e.listStore.appStrings.LBL_TOO_FEW_SELECTED;return a=a.replace("{min}",o.min),void this.message.addDangerMessage(a)}if(o.max&&r.count>o.max){let a=e.listStore.appStrings.LBL_TOO_MANY_SELECTED;return a=a.replace("{max}",o.max),void this.message.addDangerMessage(a)}this.runBulkAction(e)}}shouldDisplay(){return!0}runBulkAction(e){const n=`bulk-${e.action.params.bulkAction}`,r=this.buildActionInput(n,e);this.asyncAction.run(n,r).subscribe(o=>{this.handleProcessResult(o,e)})}buildActionInput(e,n){const r=[];n.listStore.metadata.listView.fields.forEach(l=>{r.push(l.name)});const o={action:e,module:n.listStore.getModuleName(),criteria:null,sort:null,ids:null,fields:r,payload:{panelRecord:n.store.recordStore.getBaseStaging()}},a=n.listStore.recordList.selection;return a.all&&a.count>n.listStore.recordList.records.length&&(o.criteria=n.listStore.recordList.criteria,o.sort=n.listStore.recordList.sort),a.all&&a.count<=n.listStore.recordList.records.length&&(o.ids=[],n.listStore.recordList.records.forEach(l=>{n.ids.push(l.id)})),a.all||(o.ids=Object.keys(a.selected)),o}handleProcessResult(e,n){e.data&&e.data.reload&&(n.listStore.recordList.clearSelection(),n.listStore.load(!1).pipe((0,v.take)(1)).subscribe()),e.data&&e.data.dataUpdated&&n.listStore.triggerDataUpdate(),n.listStore.closeRecordPanel()}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(dt),t.\u0275\u0275inject(nn),t.\u0275\u0275inject(Bn),t.\u0275\u0275inject(nn))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),vf=(()=>{class i extends Ci{constructor(e,n){super(),e.modes.forEach(r=>this.actions[r][e.key]=e),n.modes.forEach(r=>this.actions[r][n.key]=n)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Yw),t.\u0275\u0275inject(Jw))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Xw=(()=>{class i{constructor(e,n,r,o,a,l,c){this.store=e,this.message=n,this.confirmation=r,this.selectModalService=o,this.asyncAction=a,this.metadata=l,this.appMetadataStore=c}getBulkActions(){return this.store.metadata$.pipe((0,v.map)(e=>e.listView.bulkActions))}executeBulkAction(e){const n=this.store.recordList.selection,r=this.store.metadata.listView.bulkActions[e],o=`bulk-${e}`;if(this.message.removeMessages(),(0,S.isFalse)(r.params.allowAll)&&n.all)return void this.message.addDangerMessage(this.store.appStrings.LBL_SELECT_ALL_NOT_ALLOWED);if(r.params.min&&n.count<r.params.min){let g=this.store.appStrings.LBL_TOO_FEW_SELECTED;return g=g.replace("{min}",r.params.min),void this.message.addDangerMessage(g)}if(r.params.max&&n.count>r.params.max){let g=this.store.appStrings.LBL_TOO_MANY_SELECTED;return g=g.replace("{max}",r.params.max),void this.message.addDangerMessage(g)}const a=[];this.store.metadata.listView.fields.forEach(g=>{a.push(g.name)});const l={action:o,module:this.store.getModuleName(),criteria:null,sort:null,ids:null,fields:a};n.all&&n.count>this.store.recordList.records.length&&(l.criteria=this.store.recordList.criteria,l.sort=this.store.recordList.sort),n.all&&n.count<=this.store.recordList.records.length&&(l.ids=[],this.store.recordList.records.forEach(g=>{l.ids.push(g.id)})),n.all||(l.ids=Object.keys(n.selected));const c=r&&r.params||{},u=c.displayConfirmation||!1,d=c.confirmationLabel||"",p=r.params&&r.params.selectModal,f=p&&p.module,m=r.params&&r.params.recordPanel;m?this.store.openRecordPanel(m):u?this.confirmation.showModal(d,()=>{f?this.showSelectModal(p.module,o,l):this.runBulkAction(o,l)}):f?this.showSelectModal(p.module,o,l):this.runBulkAction(o,l)}showSelectModal(e,n,r){this.selectModalService.showSelectModal(e,o=>{if(o){const{fields:a,formGroup:l,...c}=o;r.modalRecord=c}this.runBulkAction(n,r)})}runBulkAction(e,n){this.asyncAction.run(e,n).subscribe(r=>{this.handleProcessResult(r)})}handleProcessResult(e){e?.data&&e?.data?.reload&&(this.store.recordList.clearSelection(),this.store.load(!1).pipe((0,v.take)(1)).subscribe()),e?.data&&e?.data?.dataUpdated&&this.store.triggerDataUpdate(),this.reloadMetadata(this.store.getModuleName(),e)}reloadMetadata(e,n){const r=[];this.shouldReloadRecentlyViewed(n)&&r.push(this.metadata.typeKeys.recentlyViewed),this.shouldReloadFavorites(n)&&r.push(this.metadata.typeKeys.favorites),r&&r.length&&this.metadata.reloadModuleMetadata(e,r,!1).pipe((0,v.take)(1)).subscribe(),this.shouldReloadGlobalRecentlyViewed(n)&&this.appMetadataStore.load(e,["globalRecentlyViewed"],!1).pipe((0,v.take)(1)).subscribe()}shouldReloadGlobalRecentlyViewed(e){return!(!e?.data||!e?.data?.reloadGlobalRecentlyViewed)}shouldReloadRecentlyViewed(e){return!(!e?.data||!e?.data?.reloadRecentlyViewed)}shouldReloadFavorites(e){return!(!e?.data||!e.data?.reloadFavorites)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ri),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Bn),t.\u0275\u0275inject($n),t.\u0275\u0275inject(nn),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Fn))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),eD=(()=>{class i{constructor(e,n,r,o,a,l){this.message=e,this.confirmation=n,this.selectModalService=r,this.asyncAction=o,this.metadata=a,this.appMetadataStore=l}create(e){return new Xw(e,this.message,this.confirmation,this.selectModalService,this.asyncAction,this.metadata,this.appMetadataStore)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Bn),t.\u0275\u0275inject($n),t.\u0275\u0275inject(nn),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Fn))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),_f=(()=>{class i{constructor(e){this.store=e}getConfig(){return{savedFilterEdit:!0,displayHeader:!0,module:this.store.getModuleName(),filter$:this.store.openFilter$,savedFilters$:this.store.filterList.records$,searchFields$:this.store.metadata$.pipe((0,v.map)(e=>{if(!e||!e.search)return{};const n=e.search;let r="advanced";return n.layout.advanced||(r="basic"),n.layout[r]})),listFields:this.store.metadata.listView.fields,onClose:()=>{this.store.showFilters=!1},onSearch:()=>{this.store.showFilters=!1},updateFilter:(e,n=!0)=>{const r={};r[e.key]=e,this.store.setFilters(r,n)},resetFilter:e=>{this.store.resetFilters(e)},addSavedFilter:e=>{this.store.addSavedFilter(e)},removeSavedFilter:e=>{this.store.removeSavedFilter(e)},setOpenFilter:e=>{this.store.setOpenFilter(e)}}}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ri))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),tD=(()=>{class i extends IM{constructor(e,n,r,o,a,l,c,u,d){super(n,r,o,a,l,c,u,d),this.store=e,this.actionManager=n,this.asyncActionService=r,this.message=o,this.confirmation=a,this.language=l,this.selectModalService=c,this.metadata=u,this.appMetadataStore=d}getActions(e=null){return this.store.lineActions$.pipe((0,D.combineLatestWith)((0,D.of)("list").pipe((0,v.shareReplay)())),(0,v.map)(([n,r])=>this.parseModeActions(n,r,e)))}getModuleName(e){return this.store.getModuleName()}reload(e,n,r){this.store.recordList.clearSelection(),this.store.recordList.resetPagination()}getMode(){return"list"}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ri),t.\u0275\u0275inject(Oc),t.\u0275\u0275inject(nn),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Bn),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject($n),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Fn))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();class yf extends S.ActionHandler{navigateBack(s,e,n,r,o){let a=s.getReturnModule(e),l=s.getReturnAction(e),c=s.getReturnId(e);n!==c&&(a===r&&"record"===l&&c!==n||!a||!l||s.navigateBack(o,r,e))}}let nD=(()=>{class i extends yf{constructor(){super(),this.key="async-process",this.modes=S.ALL_VIEW_MODES}run(e){}shouldDisplay(e){return!0}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),iD=(()=>{class i extends yf{constructor(){super(),this.key="select-columns",this.modes=["list"]}run(e){e.store.openColumnChooserDialog()}shouldDisplay(e){return!0}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),bf=(()=>{class i extends Ci{constructor(e,n){super(),this.async=e,this.selectColumns=n,n.modes.forEach(r=>this.actions[r][n.key]=n),e.modes.forEach(r=>this.actions[r][e.key]=e)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(nD),t.\u0275\u0275inject(iD))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),rD=(()=>{class i extends fp{constructor(e,n,r,o,a,l,c,u,d){super(n,r,o,a,l,c,u,d),this.store=e,this.actionManager=n,this.asyncActionService=r,this.message=o,this.confirmation=a,this.language=l,this.selectModalService=c,this.metadata=u,this.appMetadataStore=d}buildActionData(e,n){return{store:this.store,action:e}}getActionName(e){return`table-action-${e.key}`}buildActionInput(e,n,r,o=null){const a=this.store.recordList.selection,l=[];this.store.metadata.listView.fields.forEach(u=>{l.push(u.name)});const c={action:n,module:r,criteria:null,sort:null,ids:null,fields:l,params:e&&e.params||[]};return a.all&&a.count>this.store.recordList.records.length&&(c.criteria=this.store.recordList.criteria,c.sort=this.store.recordList.sort),a.all&&a.count<=this.store.recordList.records.length&&(c.ids=[],this.store.recordList.records.forEach(u=>{c.ids.push(u.id)})),a.all||(c.ids=Object.keys(a.selected)),c}getActions(e=null){return this.store.tableActions$.pipe((0,D.combineLatestWith)((0,D.of)("list").pipe((0,v.shareReplay)())),(0,v.map)(([n,r])=>this.parseModeActions(n,r,e)))}getModuleName(e){return this.store.getModuleName()}reload(e,n,r){this.store.recordList.clearSelection(),this.store.recordList.resetPagination()}getMode(){return"list"}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ri),t.\u0275\u0275inject(bf),t.\u0275\u0275inject(nn),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Bn),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject($n),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Fn))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),oD=(()=>{class i{constructor(e,n,r,o,a,l,c,u){this.actionManager=e,this.asyncActionService=n,this.message=r,this.confirmation=o,this.language=a,this.selectModalService=l,this.metadata=c,this.appMetadataStore=u}create(e){return new rD(e,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.language,this.selectModalService,this.metadata,this.appMetadataStore)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(bf),t.\u0275\u0275inject(nn),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Bn),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject($n),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Fn))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),sD=(()=>{class i extends vr{constructor(e,n,r,o,a,l,c,u,d,p){super(o,a,l,c,r,u,d,p),this.store=e,this.listStore=n,this.language=r,this.actionManager=o,this.asyncActionService=a,this.message=l,this.confirmation=c,this.selectModalService=u,this.metadata=d,this.appMetadataStore=p,this.collapseButtons=!1}getActions(e){return this.store.meta$.pipe((0,D.combineLatestWith)(this.store.mode$,this.store.stagingRecord$,this.language.vm$),(0,v.map)(([n,r,o,a])=>r&&n?this.parseModeActions(n.actions,r):[]))}buildActionData(e,n){return{store:this.store,listStore:this.listStore,action:e}}getMode(){return this.store.getMode()}getModuleName(e){return this.store.getModuleName()}reload(e,n,r){this.listStore.load(!1).pipe((0,v.take)(1)).subscribe()}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Hp),t.\u0275\u0275inject(ri),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(vf),t.\u0275\u0275inject(nn),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Bn),t.\u0275\u0275inject($n),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Fn))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),aD=(()=>{class i{constructor(e,n,r,o,a,l,c,u){this.language=e,this.actionManager=n,this.asyncActionService=r,this.message=o,this.confirmation=a,this.selectModalService=l,this.metadata=c,this.appMetadataStore=u}create(e,n){const r=new sD(e,n,this.language,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.selectModalService,this.metadata,this.appMetadataStore),o=n?.recordPanelConfig?.collapseActions??null;return null!==o&&(r.collapseButtons=o),r}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(vf),t.\u0275\u0275inject(nn),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Bn),t.\u0275\u0275inject($n),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Fn))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Cf=(()=>{class i{constructor(e,n,r,o){this.store=e,this.recordPanelStoreFactory=n,this.actionAdapterFactory=r,this.recordManager=o}getConfig(){const e=this.createStore();return{module:this.getModule(),title:this.store.recordPanelConfig&&this.store.recordPanelConfig.title||"",store:e,meta:this.store.recordPanelConfig,actions:this.createActionAdapter(e),onClose:()=>{this.store.closeRecordPanel()}}}getModule(){return this.store.recordPanelConfig.module||this.store.getModuleName()}getViewMode(){return this.store.recordPanelConfig.mode||"edit"}createStore(){const e=this.recordPanelStoreFactory.create(),n=this.recordManager.buildEmptyRecord(this.getModule());return e.setMetadata(this.store.recordPanelConfig),e.initRecord(n,this.getViewMode(),!1),e}createActionAdapter(e){return this.actionAdapterFactory.create(e,this.store)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ri),t.\u0275\u0275inject(KM),t.\u0275\u0275inject(aD),t.\u0275\u0275inject(Si))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Sf=(()=>{class i{constructor(e,n){this.store=e,this.metadata=n,this.config$=this.metadata.listMetadata$.pipe((0,D.combineLatestWith)(this.store.showSidebarWidgets$,this.store.widgets$),(0,v.map)(([r,o,a])=>(r.sidebarWidgets&&r.sidebarWidgets.length&&r.sidebarWidgets.forEach(l=>{l&&"data-update"===l.refreshOn?l.reload$=this.store.dataSetUpdate$.pipe((0,v.map)(()=>!0)):l&&"data-reload"===l.refreshOn&&(l.reload$=this.store.records$.pipe((0,v.map)(()=>!0)))}),{widgets:r.sidebarWidgets||[],show:o,widgetsEnabled:a})))}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ri),t.\u0275\u0275inject(bt))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Mf=(()=>{class i{constructor(e,n,r,o,a,l,c,u,d,p,f,m,g){this.store=e,this.metadata=n,this.actionManager=r,this.asyncActionService=o,this.message=a,this.confirmation=l,this.language=c,this.bulkActionsAdapterFactory=u,this.listviewTableActionsAdapterFactory=d,this.selectModalService=p,this.preferences=f,this.systemConfigs=m,this.appMetadataStore=g}getTable(){return{showHeader:!0,showFooter:!0,module:this.store.getModuleName(),columns:this.store.columns$,lineActions:this.getLineActionsDataSource(),selection$:this.store.selection$,sort$:this.store.sort$,maxColumns$:(0,D.of)(4),loading$:this.store.recordList.loading$,dataSource:this.store.recordList,selection:this.store.recordList,bulkActions:this.getBulkActionsDataSource(this.store),tableActions:this.getTableActions(this.store),pagination:this.store.recordList,paginationType:this.preferences.getUserPreference("listview_pagination_type")??this.systemConfigs.getConfigValue("listview_pagination_type"),toggleRecordSelection:e=>{this.store.recordList.toggleSelection(e)},updateSorting:(e,n)=>{this.store.recordList.updateSorting(e,n),this.store.updateSortLocalStorage()},maxListHeight:this.preferences.getUserPreference("listview_max_height")??this.systemConfigs.getConfigValue("listview_max_height"),loadMore:()=>{const e=this.preferences.getUserPreference("list_max_entries_per_page")??this.systemConfigs.getConfigValue("list_max_entries_per_page"),n=this.store.recordList.getPagination(),o=Number(n.pageSize||0)+Number(e);this.store.recordList.setPageSize(o),this.store.recordList.updatePagination(n.current)},allLoaded:()=>{const e=this.store.recordList.getPagination();return!!e&&(Number(e.pageLast)>=Number(e.total)||Number(e.pageSize)>=Number(e.total))}}}getLineActionsDataSource(){return new tD(this.store,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.language,this.selectModalService,this.metadata,this.appMetadataStore)}getBulkActionsDataSource(e){return this.bulkActionsAdapterFactory.create(e)}getTableActions(e){return this.listviewTableActionsAdapterFactory.create(e)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ri),t.\u0275\u0275inject(bt),t.\u0275\u0275inject(Oc),t.\u0275\u0275inject(nn),t.\u0275\u0275inject(dt),t.\u0275\u0275inject(Bn),t.\u0275\u0275inject(Ue),t.\u0275\u0275inject(eD),t.\u0275\u0275inject(oD),t.\u0275\u0275inject($n),t.\u0275\u0275inject(Xt),t.\u0275\u0275inject(ht),t.\u0275\u0275inject(Fn))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),jc=(()=>{class i{constructor(e,n,r){this.systemConfigStore=e,this.screenSize=n,this.store=r,this.swapSizes=[],this.subs=[],this.swapSizes=this.systemConfigStore.getUi("widget_swap_screen_sizes"),this.widgetSwap$=this.screenSize.screenSize$.pipe((0,v.map)(o=>{const a=(0,S.isTrue)(this.swapSizes[o]??!1);return(null===this.widgetSwap&&!0===a||this.widgetSwap!==a&&!0===a)&&(this.store.showSidebarWidgets=!1),this.widgetSwap=a,a}))}destroy(){this.subs.forEach(e=>e.unsubscribe()),this.subs=[]}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275inject(ht),t.\u0275\u0275inject(li),t.\u0275\u0275inject(ri))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();const NZ=function(i){return{"col-lg-12":i}};function RZ(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",3),t.\u0275\u0275element(2,"scrm-table",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(2,NZ,!e.displayWidgets)),t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e.tableConfig)}}function BZ(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",7),t.\u0275\u0275element(1,"scrm-sidebar-widget",8),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("config",e)("context",n.getViewContext())("context$",n.store.context$)("type",e.type)}}function kZ(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",5),t.\u0275\u0275template(2,BZ,2,4,"div",6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275styleProp("display",e.widgetDisplayType),t.\u0275\u0275classProp("mt-0",e.swapWidgets),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.sidebarWidgetConfig.widgets)}}function jZ(i,s){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,kZ,3,5,"ng-container",2),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.swapWidgets||e.swapWidgets&&e.displayWidgets)}}let lD=(()=>{class i{constructor(e,n,r,o,a,l,c){this.store=e,this.adapter=n,this.maxColumnCalculator=r,this.languageStore=o,this.sidebarWidgetAdapter=a,this.systemConfigs=l,this.sidebarWidgetHandler=c,this.screen=ii.Medium,this.maxColumns=5,this.displayWidgets=!0,this.swapWidgets=!1,this.widgetDisplayType="none",this.subs=[]}ngOnInit(){if(this.tableConfig=this.adapter.getTable(),this.tableConfig.maxColumns$=this.getMaxColumns(),this.store?.metadata?.listView?.maxHeight&&(this.tableConfig.maxListHeight=this.store.metadata.listView.maxHeight),!this.tableConfig?.maxListHeight){const e=this.systemConfigs.getConfigValue("ui");this.tableConfig.maxListHeight=e.listview_max_height}this.tableConfig.paginationType=this?.store?.metadata?.listView?.paginationType??this.tableConfig.paginationType,this.subs.push(this.sidebarWidgetAdapter.config$.subscribe(e=>{this.sidebarWidgetConfig=e,this.displayWidgets=this.store.widgets&&this.store.showSidebarWidgets,this.widgetDisplayType=this.getDisplay(!(!this.sidebarWidgetConfig.show||!this.sidebarWidgetConfig.widgets))})),this.subs.push(this.sidebarWidgetHandler.widgetSwap$.subscribe(e=>{this.swapWidgets=e}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe()),this.subs=[]}getMaxColumns(){return this.maxColumnCalculator.getMaxColumns(this.store.widgets$)}getDisplayWidgets(){return this.store.widgets&&this.store.showSidebarWidgets}getDisplay(e){let n="none";return e&&(n="block"),n}getViewContext(){return this.store.getViewContext()}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(ri),t.\u0275\u0275directiveInject(Mf),t.\u0275\u0275directiveInject(Fo),t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(Sf),t.\u0275\u0275directiveInject(ht),t.\u0275\u0275directiveInject(jc))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-list-container"]],features:[t.\u0275\u0275ProvidersFeature([Mf,Fo,Sf])],decls:4,vars:2,consts:[[1,"list-view-container","container-fluid","pt-2"],[1,"row"],[4,"ngIf"],[1,"col-lg-9",3,"ngClass"],[3,"config"],[1,"col-lg-3","list-widget-container","pl-0"],["class","mb-3",4,"ngFor","ngForOf"],[1,"mb-3"],[3,"config","context","context$","type"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1),t.\u0275\u0275template(2,RZ,3,4,"ng-container",2),t.\u0275\u0275template(3,jZ,2,1,"ng-container",2),t.\u0275\u0275elementEnd()()),2&n&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!r.swapWidgets||r.swapWidgets&&!r.displayWidgets),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.sidebarWidgetConfig.widgetsEnabled))},dependencies:[I.NgClass,I.NgForOf,I.NgIf,Ac,Qp],encapsulation:2})}return i})(),cD=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Tc,kr,Ge.AngularSvgIconModule,Jp]})}return i})();function PZ(i,s){if(1&i&&t.\u0275\u0275element(0,"scrm-button-group",14),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("config$",e.quickFilters.config$)("klass","quick-filter-button")}}function VZ(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",9)(1,"div",10),t.\u0275\u0275element(2,"scrm-label",11),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",12),t.\u0275\u0275template(4,PZ,1,2,"scrm-button-group",13),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",e.quickFilters.config$)}}function UZ(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",15)(1,"div",16)(2,"div",17),t.\u0275\u0275element(3,"scrm-list-filter",18),t.\u0275\u0275elementEnd()()()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275property("config",e.filterAdapter.getConfig())}}function $Z(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",15)(1,"div",16)(2,"div",17),t.\u0275\u0275element(3,"scrm-record-panel",18),t.\u0275\u0275elementEnd()()()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275property("config",e.recordPanelConfig)}}let uD=(()=>{class i{constructor(e,n,r,o,a){this.filterAdapter=e,this.listStore=n,this.moduleNavigation=r,this.recordPanelAdapter=o,this.quickFilters=a,this.actionPanel="",this.showQuickFilters=!1,this.enableQuickFilters=!1,this.subs=[]}get moduleTitle(){return this.moduleNavigation.getModuleLabel(this.listStore.vm.appData.module,this.listStore.vm.appData.language.appListStrings)}ngOnInit(){this.listStore.actionPanel$.subscribe(e=>{this.actionPanel=e,this.recordPanelConfig="recordPanel"===this.actionPanel?this.recordPanelAdapter.getConfig():null}),this.subs.push(this.quickFilters.breakdown$.subscribe(e=>{this.showQuickFilters=(0,S.isTrue)(e)})),this.subs.push(this.quickFilters.enabled$.subscribe(e=>{this.enableQuickFilters=(0,S.isTrue)(e??!1)}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe()),this.recordPanelConfig=null}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(_f),t.\u0275\u0275directiveInject(ri),t.\u0275\u0275directiveInject(In),t.\u0275\u0275directiveInject(Cf),t.\u0275\u0275directiveInject(Aa))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-list-header"]],features:[t.\u0275\u0275ProvidersFeature([_f,Cf])],decls:12,vars:10,consts:[[1,"list-view-header"],[1,"row","mr-0","justify-content-md-between"],[1,"custom-col-4","d-none","d-md-flex","align-items-center"],[1,"list-view-title",3,"title"],[1,"custom-col-8","d-flex","align-items-center"],["class","d-flex align-items-baseline w-100 justify-content-end pr-3",4,"ngIf"],[1,"list-view-hr-container"],[1,"list-view-hr"],["class","container-fluid pt-2 small-font",4,"ngIf"],[1,"d-flex","align-items-baseline","w-100","justify-content-end","pr-3"],[1,"text-nowrap","text-muted","fs-70","pl-1","mr-1"],["labelKey","LBL_QUICK_FILTERS"],[1,"pr-xxl-1","mr-xxl-1"],[3,"config$","klass",4,"ngIf"],[3,"config$","klass"],[1,"container-fluid","pt-2","small-font"],[1,"row"],[1,"col"],[3,"config"]],template:function(n,r){1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"div",2),t.\u0275\u0275element(4,"scrm-module-title",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"div",4),t.\u0275\u0275element(6,"scrm-settings-menu"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(7,VZ,5,1,"div",5),t.\u0275\u0275elementStart(8,"div",6),t.\u0275\u0275element(9,"hr",7),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(10,UZ,4,1,"div",8),t.\u0275\u0275template(11,$Z,4,1,"div",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n&&(t.\u0275\u0275advance(2),t.\u0275\u0275classProp("justify-content-center",!(r.showQuickFilters&&r.enableQuickFilters))("justify-content-end",r.showQuickFilters&&r.enableQuickFilters),t.\u0275\u0275advance(2),t.\u0275\u0275property("title",r.moduleTitle),t.\u0275\u0275advance(1),t.\u0275\u0275classProp("pr-3",r.showQuickFilters&&r.enableQuickFilters),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",r.showQuickFilters&&r.enableQuickFilters),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf","filters"===r.actionPanel),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","recordPanel"===r.actionPanel&&r.recordPanelConfig))},dependencies:[I.NgIf,dp,yM,Lc,zM,yo,qt],encapsulation:2})}return i})(),dD=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,xa,Np,Rp,Ge.AngularSvgIconModule,Nc,WM,Or,Vt]})}return i})();function zZ(i,s){1&i&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275element(1,"scrm-list-header")(2,"scrm-list-container"),t.\u0275\u0275elementEnd())}let HZ=(()=>{class i{constructor(e,n,r,o){this.appState=e,this.listStore=n,this.quickFilters=r,this.sidebarWidgetHandler=o,this.vm$=null}ngOnInit(){this.appState.removeAllPrevRoutes(),this.listSub=this.listStore.init(this.appState.getModule()).subscribe(),this.vm$=this.listStore.vm$}ngOnDestroy(){this.listSub&&this.listSub.unsubscribe(),this.quickFilters.destroy(),this.sidebarWidgetHandler.destroy(),this.listStore.destroy()}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ht),t.\u0275\u0275directiveInject(ri),t.\u0275\u0275directiveInject(Aa),t.\u0275\u0275directiveInject(jc))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-list"]],features:[t.\u0275\u0275ProvidersFeature([ri,Aa,jc])],decls:2,vars:3,consts:[["class","list-view",4,"ngIf"],[1,"list-view"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,zZ,3,0,"div",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[I.NgIf,uD,lD,I.AsyncPipe],encapsulation:2})}return i})(),WZ=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,dD,cD,Jn]})}return i})();function KZ(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"option",17),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=s.$implicit,n=t.\u0275\u0275nextContext(3);let r;t.\u0275\u0275property("selected",(null!==(r=n.language)&&void 0!==r?r:"en_us")===e)("value",e),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.getEnabledLanguages()[e]," ")}}function GZ(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",10)(1,"div",5)(2,"label",11),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275element(4,"div",12),t.\u0275\u0275elementStart(5,"div",5)(6,"div",13)(7,"select",14,15),t.\u0275\u0275listener("change",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275reference(8),o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.onLanguageSelect(r.value))}),t.\u0275\u0275template(9,KZ,2,3,"option",16),t.\u0275\u0275elementEnd()()()()}if(2&i){const e=t.\u0275\u0275nextContext().ngIf,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(e.appStrings.LBL_LANGUAGE),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngForOf",n.getEnabledLanguagesKeys())}}function ZZ(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",28),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2).ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.appStrings.ERR_MISSING_REQUIRED_FIELDS," ")}}function qZ(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",28),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2).ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.appStrings.ERR_MISSING_REQUIRED_FIELDS," ")}}function QZ(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",29)(1,"a",30),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(r.flipCard())}),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()}if(2&i){const e=t.\u0275\u0275nextContext(2).ngIf;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e.appStrings.LBL_LOGIN_FORGOT_PASSWORD," ")}}function JZ(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",18)(1,"div",13),t.\u0275\u0275element(2,"scrm-image",19),t.\u0275\u0275elementStart(3,"input",20,21),t.\u0275\u0275listener("ngModelChange",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.uname=r)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(5,ZZ,2,1,"div",22),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",13),t.\u0275\u0275element(7,"scrm-image",23),t.\u0275\u0275elementStart(8,"input",24,25),t.\u0275\u0275listener("ngModelChange",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.passw=r)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(10,qZ,2,1,"div",22),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"button",26),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext();const r=t.\u0275\u0275reference(2),o=t.\u0275\u0275nextContext();return r.control.markAllAsTouched(),t.\u0275\u0275resetView(r.valid&&o.doLogin())}),t.\u0275\u0275text(12),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(13,QZ,3,1,"div",27),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275reference(4),n=t.\u0275\u0275reference(9),r=t.\u0275\u0275nextContext().ngIf,o=t.\u0275\u0275nextContext();t.\u0275\u0275property("@fade",void 0),t.\u0275\u0275advance(3),t.\u0275\u0275classProp("is-invalid",e.invalid&&e.touched),t.\u0275\u0275propertyInterpolate("placeholder",r.appStrings.LBL_USER_NAME),t.\u0275\u0275property("ngModel",o.uname),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.invalid&&e.touched),t.\u0275\u0275advance(3),t.\u0275\u0275classProp("is-invalid",n.invalid&&n.touched),t.\u0275\u0275propertyInterpolate("placeholder",r.appStrings.LBL_PASSWORD),t.\u0275\u0275property("ngModel",o.passw),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.invalid&&n.touched),t.\u0275\u0275advance(1),t.\u0275\u0275property("scrm-button-loading",o.loading),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",r.appStrings.LBL_LOGIN_BUTTON_LABEL," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.showForgotPassword)}}function YZ(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",28),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2).ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.appStrings.ERR_MISSING_REQUIRED_FIELDS," ")}}function XZ(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",28),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2).ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.appStrings.ERR_MISSING_REQUIRED_FIELDS," ")}}function eq(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",31)(1,"div",13),t.\u0275\u0275element(2,"scrm-image",19),t.\u0275\u0275elementStart(3,"input",20,21),t.\u0275\u0275listener("ngModelChange",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.uname=r)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(5,YZ,2,1,"div",22),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",13),t.\u0275\u0275element(7,"scrm-image",32),t.\u0275\u0275elementStart(8,"input",33,34),t.\u0275\u0275listener("ngModelChange",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.email=r)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(10,XZ,2,1,"div",22),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"button",35),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext();const r=t.\u0275\u0275reference(2),o=t.\u0275\u0275nextContext();return r.control.markAllAsTouched(),t.\u0275\u0275resetView(r.valid&&o.recoverPassword())}),t.\u0275\u0275text(12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"div")(14,"a",36),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.flipCard())}),t.\u0275\u0275text(15),t.\u0275\u0275elementEnd()()()}if(2&i){const e=t.\u0275\u0275reference(4),n=t.\u0275\u0275reference(9),r=t.\u0275\u0275nextContext().ngIf,o=t.\u0275\u0275nextContext();t.\u0275\u0275property("@fade",void 0),t.\u0275\u0275advance(3),t.\u0275\u0275classProp("is-invalid",e.invalid&&e.touched),t.\u0275\u0275propertyInterpolate("placeholder",r.appStrings.LBL_USER_NAME),t.\u0275\u0275property("ngModel",o.uname),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.invalid&&e.touched),t.\u0275\u0275advance(3),t.\u0275\u0275classProp("is-invalid",n.invalid&&n.touched),t.\u0275\u0275propertyInterpolate("placeholder",r.appStrings.LBL_EMAIL),t.\u0275\u0275property("ngModel",o.email),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.invalid&&n.touched),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",r.appStrings.LBL_GENERATE_PASSWORD_BUTTON_TITLE," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",r.appStrings.LBL_BACK," ")}}function tq(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"div",1)(1,"form",2,3)(3,"div",4)(4,"div",5),t.\u0275\u0275element(5,"scrm-logo-ui"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(6,GZ,10,2,"div",6),t.\u0275\u0275elementStart(7,"div",7),t.\u0275\u0275template(8,JZ,14,14,"div",8),t.\u0275\u0275template(9,eq,16,13,"div",9),t.\u0275\u0275elementEnd()()()),2&i){const e=s.ngIf,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(6),t.\u0275\u0275property("ngIf",e.showLanguages),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf","front"===n.cardState),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","back"===n.cardState)}}let pD=(()=>{class i{constructor(e,n,r,o,a,l,c){this.router=e,this.auth=n,this.message=r,this.configs=o,this.languageStore=a,this.recoverPasswordService=l,this.appState=c,this.hidden=!0,this.loading=!1,this.error="",this.uname="",this.passw="",this.email="",this.cardState="front",this.systemConfigs$=this.configs.configs$,this.appStrings$=this.languageStore.appStrings$,this.language=null,this.vm$=this.systemConfigs$.pipe((0,D.combineLatestWith)(this.appStrings$),(0,v.map)(([u,d])=>{let p=!1,f=!1;return u.languages&&u.languages.items&&(p=Object.keys(u.languages.items).length>1),u.passwordsetting&&u.passwordsetting.items&&(f=[!0,"1","true"].includes(u.passwordsetting.items.forgotpasswordON)),{systemConfigs:u,appStrings:d,showLanguages:p,showForgotPassword:f}})),this.loading=!1,this.hidden=!1,this.language=null}ngOnInit(){this.setCurrentLanguage(),this.appState.removeAllPrevRoutes()}onLanguageSelect(e){e&&e!==this.language&&this.changeLanguage(e)}changeLanguage(e){this.language=e;let n=!1;this?.appState?.updateLoading&&(this.appState.updateLoading("change-language",!0),n=!0),this.languageStore.changeLanguage(e,!0).pipe((0,v.tap)(()=>{n&&this.appState.updateLoading("change-language",!1)})).subscribe()}getEnabledLanguages(){return this.languageStore.getEnabledLanguages()}getEnabledLanguagesKeys(){return Object.keys(this.languageStore.getEnabledLanguages()??{})??[]}flipCard(){this.cardState="front"===this.cardState?"back":"front"}doLogin(){this.loading=!0,this.auth.doLogin(this.uname,this.passw,this.onLoginSuccess.bind(this),this.onLoginError.bind(this))}recoverPassword(){this.recoverPasswordService.run(this.uname,this.email).subscribe(e=>{this.message.log("Recover Password Status: "+e.status);let n="addSuccessMessageByKey";"error"===e.status&&(n="addDangerMessageByKey"),e.messages&&e.messages.forEach(r=>{this.message[n](r)})},()=>{this.message.log("Recover Password failed"),this.message.addDangerMessageByKey("ERR_AJAX_LOAD_FAILURE")})}onLoginSuccess(e){this.loading=!1,this.message.log("Login success"),this.message.removeMessages(),this.languageStore.setSessionLanguage().pipe((0,v.catchError)(()=>(0,D.of)({}))).subscribe(()=>{if(e&&e.redirect&&e.redirect.route)return void this.router.navigate([e.redirect.route],{queryParams:e.redirect.queryParams??{}}).then();if(this.appState.getPreLoginUrl())return void this.router.navigateByUrl(this.appState.getPreLoginUrl()).then(()=>{this.appState.setPreLoginUrl("")});const n=this.configs.getHomePage();this.router.navigate(["/"+n]).then()})}onLoginError(e){this.loading=!1,this.message.log("Login failed");let o=this.languageStore.getFieldLabel("LOGIN_INCORRECT");const a=e?.error?.error??"";"string"==typeof a&&a.includes("Too many failed login attempts, please try again in")&&(o=this.getTooManyFailedMessage("Too many failed login attempts, please try again later.")),o||(o="Login credentials incorrect, please try again."),this.message.addDangerMessage(o)}getTooManyFailedMessage(e){let n=this.languageStore.getFieldLabel("LOGIN_TOO_MANY_FAILED");return n||(n=e),n}setCurrentLanguage(){let e=this.languageStore.getSelectedLanguage()??"";const n=this.languageStore.getActiveLanguage();if(e||(e=n),this.languageStore.isLanguageEnabled(e)||(e=""),this.language&&e===this.language)return;const r=this.configs.getConfigValue("default_language")??"en_us";e||(e=r),this.languageStore.isLanguageEnabled(e)||(e=this.languageStore.getFirstLanguage()),this.language=e,this.changeLanguage(e)}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(Ot.Router),t.\u0275\u0275directiveInject(ci),t.\u0275\u0275directiveInject(dt),t.\u0275\u0275directiveInject(ht),t.\u0275\u0275directiveInject(Ue),t.\u0275\u0275directiveInject(Tw),t.\u0275\u0275directiveInject(Ht))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-login-ui"]],decls:2,vars:3,consts:[["class","login-view full-height-view d-flex align-items-center",4,"ngIf"],[1,"login-view","full-height-view","d-flex","align-items-center"],["name","login",1,"login-form"],["loginForm","ngForm"],[1,"form-row","form-group"],[1,"col"],["class","form-row",4,"ngIf"],[1,"form-row","fade-card"],["class","fade-card-front col",4,"ngIf"],["class","fade-card-back col",4,"ngIf"],[1,"form-row"],["for","languages",1,""],[1,"w-100"],[1,"inner-addon","left-addon"],["id","languages",3,"change"],["languageSelect",""],[3,"selected","value",4,"ngFor","ngForOf"],[3,"selected","value"],[1,"fade-card-front","col"],["image","login_user"],["type","text","name","username","aria-label","Username","required","",3,"ngModel","placeholder","ngModelChange"],["username","ngModel"],["class","invalid-feedback",4,"ngIf"],["image","login_password"],["type","password","name","password","aria-label","Password","required","",3,"ngModel","placeholder","ngModelChange"],["password","ngModel"],["id","login-button",1,"login-button",3,"scrm-button-loading","click"],["class","forgotten-password",4,"ngIf"],[1,"invalid-feedback"],[1,"forgotten-password"],[1,"forgotten-password-link",3,"click"],[1,"fade-card-back","col"],["image","email"],["type","email","name","email","aria-label","Email","required","",3,"ngModel","placeholder","ngModelChange"],["mail","ngModel"],["scrm-button-loading","",1,"submit-button","login-button",3,"click"],[1,"back-link","forgotten-password-link",3,"click"]],template:function(n,r){1&n&&(t.\u0275\u0275template(0,tq,10,3,"div",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[De.\u0275NgNoValidate,De.NgSelectOption,De.\u0275NgSelectMultipleOption,De.DefaultValueAccessor,De.NgControlStatus,De.NgControlStatusGroup,De.RequiredValidator,De.NgModel,De.NgForm,wc,I.NgForOf,I.NgIf,ln,Ew,I.AsyncPipe],encapsulation:2,data:{animation:[(0,yt.trigger)("fade",[(0,yt.transition)(":enter",(0,yt.useAnimation)(Pl.fadeIn,{params:{timing:.5,delay:0}}))])]}})}return i})();const fD=[{path:"",component:pD}];let nq=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[De.FormsModule,Dc,Ot.RouterModule.forChild(fD),I.CommonModule,Ge.AngularSvgIconModule,sn,Iw]})}return i})(),iq=(()=>{class i{constructor(e){this.configs=e}getLoginURL(){return"./"}static#e=this.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(ht))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["scrm-logout"]],decls:11,vars:1,consts:[[1,"logged-out-view","full-height-view","d-flex","flex-column","align-items-center","justify-content-center"],[1,"logo-row","full-height-view-row"],[1,"mt-3","mb-1","page-title","full-height-view-row"],["labelKey","LBL_LOGGED_OUT_MESSAGE"],[1,"page-subtitle","full-height-view-row"],["labelKey","LBL_LOGIN_AGAIN"],[1,"text-lowercase",3,"href"],["labelKey","LBL_CLICK_HERE"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1),t.\u0275\u0275element(2,"scrm-logo-ui"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",2)(4,"h2"),t.\u0275\u0275element(5,"scrm-label",3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div",4)(7,"h5"),t.\u0275\u0275element(8,"scrm-label",5),t.\u0275\u0275elementStart(9,"a",6),t.\u0275\u0275element(10,"scrm-label",7),t.\u0275\u0275elementEnd()()()()),2&n&&(t.\u0275\u0275advance(9),t.\u0275\u0275property("href",r.getLoginURL(),t.\u0275\u0275sanitizeUrl))},dependencies:[qt,wc],encapsulation:2})}return i})(),rq=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule,Vt,Dc]})}return i})()},9388:(we,oe,L)=>{L.d(oe,{Is:()=>ce,vT:()=>$});var t=L(2611),S=L(4187);const D=new t.InjectionToken("cdk-dir-doc",{providedIn:"root",factory:function v(){return(0,t.inject)(S.DOCUMENT)}}),W=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let ce=(()=>{class V{constructor(j){this.value="ltr",this.change=new t.EventEmitter,j&&(this.value=function H(V){const F=V?.toLowerCase()||"";return"auto"===F&&typeof navigator<"u"&&navigator?.language?W.test(navigator.language)?"rtl":"ltr":"rtl"===F?"rtl":"ltr"}((j.body?j.body.dir:null)||(j.documentElement?j.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(U){return new(U||V)(t.\u0275\u0275inject(D,8))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac,providedIn:"root"})}return V})(),$=(()=>{class V{static#e=this.\u0275fac=function(U){return new(U||V)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:V});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({})}return V})()},2495:(we,oe,L)=>{L.d(oe,{Eq:()=>W,Ig:()=>S,fI:()=>ce,su:()=>D});var t=L(2611);function S($){return null!=$&&"false"!=`${$}`}function D($,V=0){return function v($){return!isNaN(parseFloat($))&&!isNaN(Number($))}($)?Number($):V}function W($){return Array.isArray($)?$:[$]}function ce($){return $ instanceof t.ElementRef?$.nativeElement:$}},2831:(we,oe,L)=>{L.d(oe,{Mq:()=>z,_i:()=>ee,i$:()=>F,kV:()=>I,sA:()=>me,t4:()=>v});var t=L(2611),S=L(4187);let D;try{D=typeof Intl<"u"&&Intl.v8BreakIterator}catch{D=!1}let $,j,U,de,v=(()=>{class je{constructor(Pe){this._platformId=Pe,this.isBrowser=this._platformId?(0,S.isPlatformBrowser)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!D)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(Re){return new(Re||je)(t.\u0275\u0275inject(t.PLATFORM_ID))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:je,factory:je.\u0275fac,providedIn:"root"})}return je})();function F(je){return function V(){if(null==$&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>$=!0}))}finally{$=$||!1}return $}()?je:!!je.capture}function z(){if(null==U){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return U=!1,U;if("scrollBehavior"in document.documentElement.style)U=!0;else{const je=Element.prototype.scrollTo;U=!!je&&!/\{\s*\[native code\]\s*\}/.test(je.toString())}}return U}function ee(){if("object"!=typeof document||!document)return 0;if(null==j){const je=document.createElement("div"),ut=je.style;je.dir="rtl",ut.width="1px",ut.overflow="auto",ut.visibility="hidden",ut.pointerEvents="none",ut.position="absolute";const Pe=document.createElement("div"),Re=Pe.style;Re.width="2px",Re.height="1px",je.appendChild(Pe),document.body.appendChild(je),j=0,0===je.scrollLeft&&(je.scrollLeft=1,j=0===je.scrollLeft?1:2),je.remove()}return j}function I(je){if(function ie(){if(null==de){const je=typeof document<"u"?document.head:null;de=!(!je||!je.createShadowRoot&&!je.attachShadow)}return de}()){const ut=je.getRootNode?je.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&ut instanceof ShadowRoot)return ut}return null}function me(je){return je.composedPath?je.composedPath()[0]:je.target}},6672:(we,oe,L)=>{L.d(oe,{Cl:()=>rn,N7:()=>ut,ZD:()=>et,mF:()=>ee,rL:()=>I,xd:()=>U});var t=L(2495),S=L(2611),D=L(8303),v=L(8103),W=L(2831),H=L(4187),ce=L(9388);const ae=["contentWrapper"],$=["*"],V=new S.InjectionToken("VIRTUAL_SCROLL_STRATEGY");class F{constructor(Lt,re,Se){this._scrolledIndexChange=new D.Subject,this.scrolledIndexChange=this._scrolledIndexChange.pipe((0,v.distinctUntilChanged)()),this._viewport=null,this._itemSize=Lt,this._minBufferPx=re,this._maxBufferPx=Se}attach(Lt){this._viewport=Lt,this._updateTotalContentSize(),this._updateRenderedRange()}detach(){this._scrolledIndexChange.complete(),this._viewport=null}updateItemAndBufferSize(Lt,re,Se){this._itemSize=Lt,this._minBufferPx=re,this._maxBufferPx=Se,this._updateTotalContentSize(),this._updateRenderedRange()}onContentScrolled(){this._updateRenderedRange()}onDataLengthChanged(){this._updateTotalContentSize(),this._updateRenderedRange()}onContentRendered(){}onRenderedOffsetChanged(){}scrollToIndex(Lt,re){this._viewport&&this._viewport.scrollToOffset(Lt*this._itemSize,re)}_updateTotalContentSize(){this._viewport&&this._viewport.setTotalContentSize(this._viewport.getDataLength()*this._itemSize)}_updateRenderedRange(){if(!this._viewport)return;const Lt=this._viewport.getRenderedRange(),re={start:Lt.start,end:Lt.end},Se=this._viewport.getViewportSize(),Ze=this._viewport.getDataLength();let nt=this._viewport.measureScrollOffset(),It=this._itemSize>0?nt/this._itemSize:0;if(re.end>Ze){const Kt=Math.ceil(Se/this._itemSize),$t=Math.max(0,Math.min(It,Ze-Kt));It!=$t&&(It=$t,nt=$t*this._itemSize,re.start=Math.floor(It)),re.end=Math.max(0,Math.min(Ze,re.start+Kt))}const Gt=nt-re.start*this._itemSize;if(Gt<this._minBufferPx&&0!=re.start){const Kt=Math.ceil((this._maxBufferPx-Gt)/this._itemSize);re.start=Math.max(0,re.start-Kt),re.end=Math.min(Ze,Math.ceil(It+(Se+this._minBufferPx)/this._itemSize))}else{const Kt=re.end*this._itemSize-(nt+Se);if(Kt<this._minBufferPx&&re.end!=Ze){const $t=Math.ceil((this._maxBufferPx-Kt)/this._itemSize);$t>0&&(re.end=Math.min(Ze,re.end+$t),re.start=Math.max(0,Math.floor(It-this._minBufferPx/this._itemSize)))}}this._viewport.setRenderedRange(re),this._viewport.setRenderedContentOffset(this._itemSize*re.start),this._scrolledIndexChange.next(Math.floor(It))}}function j(Ye){return Ye._scrollStrategy}let U=(()=>{class Ye{constructor(){this._itemSize=20,this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new F(this.itemSize,this.minBufferPx,this.maxBufferPx)}get itemSize(){return this._itemSize}set itemSize(re){this._itemSize=(0,t.su)(re)}get minBufferPx(){return this._minBufferPx}set minBufferPx(re){this._minBufferPx=(0,t.su)(re)}get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(re){this._maxBufferPx=(0,t.su)(re)}ngOnChanges(){this._scrollStrategy.updateItemAndBufferSize(this.itemSize,this.minBufferPx,this.maxBufferPx)}static#e=this.\u0275fac=function(Se){return new(Se||Ye)};static#t=this.\u0275dir=S.\u0275\u0275defineDirective({type:Ye,selectors:[["cdk-virtual-scroll-viewport","itemSize",""]],inputs:{itemSize:"itemSize",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},standalone:!0,features:[S.\u0275\u0275ProvidersFeature([{provide:V,useFactory:j,deps:[(0,S.forwardRef)(()=>Ye)]}]),S.\u0275\u0275NgOnChangesFeature]})}return Ye})(),ee=(()=>{class Ye{constructor(re,Se,Ze){this._ngZone=re,this._platform=Se,this._scrolled=new D.Subject,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=Ze}register(re){this.scrollContainers.has(re)||this.scrollContainers.set(re,re.elementScrolled().subscribe(()=>this._scrolled.next(re)))}deregister(re){const Se=this.scrollContainers.get(re);Se&&(Se.unsubscribe(),this.scrollContainers.delete(re))}scrolled(re=20){return this._platform.isBrowser?new D.Observable(Se=>{this._globalSubscription||this._addGlobalListener();const Ze=re>0?this._scrolled.pipe((0,v.auditTime)(re)).subscribe(Se):this._scrolled.subscribe(Se);return this._scrolledCount++,()=>{Ze.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,D.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((re,Se)=>this.deregister(Se)),this._scrolled.complete()}ancestorScrolled(re,Se){const Ze=this.getAncestorScrollContainers(re);return this.scrolled(Se).pipe((0,v.filter)(nt=>!nt||Ze.indexOf(nt)>-1))}getAncestorScrollContainers(re){const Se=[];return this.scrollContainers.forEach((Ze,nt)=>{this._scrollableContainsElement(nt,re)&&Se.push(nt)}),Se}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(re,Se){let Ze=(0,t.fI)(Se),nt=re.getElementRef().nativeElement;do{if(Ze==nt)return!0}while(Ze=Ze.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const re=this._getWindow();return(0,D.fromEvent)(re.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(Se){return new(Se||Ye)(S.\u0275\u0275inject(S.NgZone),S.\u0275\u0275inject(W.t4),S.\u0275\u0275inject(H.DOCUMENT,8))};static#t=this.\u0275prov=S.\u0275\u0275defineInjectable({token:Ye,factory:Ye.\u0275fac,providedIn:"root"})}return Ye})(),de=(()=>{class Ye{constructor(re,Se,Ze,nt){this.elementRef=re,this.scrollDispatcher=Se,this.ngZone=Ze,this.dir=nt,this._destroyed=new D.Subject,this._elementScrolled=new D.Observable(It=>this.ngZone.runOutsideAngular(()=>(0,D.fromEvent)(this.elementRef.nativeElement,"scroll").pipe((0,v.takeUntil)(this._destroyed)).subscribe(It)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(re){const Se=this.elementRef.nativeElement,Ze=this.dir&&"rtl"==this.dir.value;null==re.left&&(re.left=Ze?re.end:re.start),null==re.right&&(re.right=Ze?re.start:re.end),null!=re.bottom&&(re.top=Se.scrollHeight-Se.clientHeight-re.bottom),Ze&&0!=(0,W._i)()?(null!=re.left&&(re.right=Se.scrollWidth-Se.clientWidth-re.left),2==(0,W._i)()?re.left=re.right:1==(0,W._i)()&&(re.left=re.right?-re.right:re.right)):null!=re.right&&(re.left=Se.scrollWidth-Se.clientWidth-re.right),this._applyScrollToOptions(re)}_applyScrollToOptions(re){const Se=this.elementRef.nativeElement;(0,W.Mq)()?Se.scrollTo(re):(null!=re.top&&(Se.scrollTop=re.top),null!=re.left&&(Se.scrollLeft=re.left))}measureScrollOffset(re){const Se="left",nt=this.elementRef.nativeElement;if("top"==re)return nt.scrollTop;if("bottom"==re)return nt.scrollHeight-nt.clientHeight-nt.scrollTop;const It=this.dir&&"rtl"==this.dir.value;return"start"==re?re=It?"right":Se:"end"==re&&(re=It?Se:"right"),It&&2==(0,W._i)()?re==Se?nt.scrollWidth-nt.clientWidth-nt.scrollLeft:nt.scrollLeft:It&&1==(0,W._i)()?re==Se?nt.scrollLeft+nt.scrollWidth-nt.clientWidth:-nt.scrollLeft:re==Se?nt.scrollLeft:nt.scrollWidth-nt.clientWidth-nt.scrollLeft}static#e=this.\u0275fac=function(Se){return new(Se||Ye)(S.\u0275\u0275directiveInject(S.ElementRef),S.\u0275\u0275directiveInject(ee),S.\u0275\u0275directiveInject(S.NgZone),S.\u0275\u0275directiveInject(ce.Is,8))};static#t=this.\u0275dir=S.\u0275\u0275defineDirective({type:Ye,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}return Ye})(),I=(()=>{class Ye{constructor(re,Se,Ze){this._platform=re,this._change=new D.Subject,this._changeListener=nt=>{this._change.next(nt)},this._document=Ze,Se.runOutsideAngular(()=>{if(re.isBrowser){const nt=this._getWindow();nt.addEventListener("resize",this._changeListener),nt.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const re=this._getWindow();re.removeEventListener("resize",this._changeListener),re.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const re={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),re}getViewportRect(){const re=this.getViewportScrollPosition(),{width:Se,height:Ze}=this.getViewportSize();return{top:re.top,left:re.left,bottom:re.top+Ze,right:re.left+Se,height:Ze,width:Se}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const re=this._document,Se=this._getWindow(),Ze=re.documentElement,nt=Ze.getBoundingClientRect();return{top:-nt.top||re.body.scrollTop||Se.scrollY||Ze.scrollTop||0,left:-nt.left||re.body.scrollLeft||Se.scrollX||Ze.scrollLeft||0}}change(re=20){return re>0?this._change.pipe((0,v.auditTime)(re)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const re=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:re.innerWidth,height:re.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(Se){return new(Se||Ye)(S.\u0275\u0275inject(W.t4),S.\u0275\u0275inject(S.NgZone),S.\u0275\u0275inject(H.DOCUMENT,8))};static#t=this.\u0275prov=S.\u0275\u0275defineInjectable({token:Ye,factory:Ye.\u0275fac,providedIn:"root"})}return Ye})();const Ge=new S.InjectionToken("VIRTUAL_SCROLLABLE");let me=(()=>{class Ye extends de{constructor(re,Se,Ze,nt){super(re,Se,Ze,nt)}measureViewportSize(re){const Se=this.elementRef.nativeElement;return"horizontal"===re?Se.clientWidth:Se.clientHeight}static#e=this.\u0275fac=function(Se){return new(Se||Ye)(S.\u0275\u0275directiveInject(S.ElementRef),S.\u0275\u0275directiveInject(ee),S.\u0275\u0275directiveInject(S.NgZone),S.\u0275\u0275directiveInject(ce.Is,8))};static#t=this.\u0275dir=S.\u0275\u0275defineDirective({type:Ye,features:[S.\u0275\u0275InheritDefinitionFeature]})}return Ye})();const je=typeof requestAnimationFrame<"u"?D.animationFrameScheduler:D.asapScheduler;let ut=(()=>{class Ye extends me{get orientation(){return this._orientation}set orientation(re){this._orientation!==re&&(this._orientation=re,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(re){this._appendOnly=(0,t.Ig)(re)}constructor(re,Se,Ze,nt,It,Gt,Kt,$t){super(re,Gt,Ze,It),this.elementRef=re,this._changeDetectorRef=Se,this._scrollStrategy=nt,this.scrollable=$t,this._platform=(0,S.inject)(W.t4),this._detachedSubject=new D.Subject,this._renderedRangeSubject=new D.Subject,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new D.Observable(vt=>this._scrollStrategy.scrolledIndexChange.subscribe(xt=>Promise.resolve().then(()=>this.ngZone.run(()=>vt.next(xt))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=D.Subscription.EMPTY,this._viewportChanges=Kt.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe((0,v.startWith)(null),(0,v.auditTime)(0,je),(0,v.takeUntil)(this._destroyed)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(re){this.ngZone.runOutsideAngular(()=>{this._forOf=re,this._forOf.dataStream.pipe((0,v.takeUntil)(this._detachedSubject)).subscribe(Se=>{const Ze=Se.length;Ze!==this._dataLength&&(this._dataLength=Ze,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(re){return this.getElementRef().nativeElement.getBoundingClientRect()[re]}setTotalContentSize(re){this._totalContentSize!==re&&(this._totalContentSize=re,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(re){(function tt(Ye,Lt){return Ye.start==Lt.start&&Ye.end==Lt.end})(this._renderedRange,re)||(this.appendOnly&&(re={start:0,end:Math.max(this._renderedRange.end,re.end)}),this._renderedRangeSubject.next(this._renderedRange=re),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(re,Se="to-start"){re=this.appendOnly&&"to-start"===Se?0:re;const nt="horizontal"==this.orientation,It=nt?"X":"Y";let Kt=`translate${It}(${Number((nt&&this.dir&&"rtl"==this.dir.value?-1:1)*re)}px)`;this._renderedContentOffset=re,"to-end"===Se&&(Kt+=` translate${It}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=Kt&&(this._renderedContentTransform=Kt,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(re,Se="auto"){const Ze={behavior:Se};"horizontal"===this.orientation?Ze.start=re:Ze.top=re,this.scrollable.scrollTo(Ze)}scrollToIndex(re,Se="auto"){this._scrollStrategy.scrollToIndex(re,Se)}measureScrollOffset(re){let Se;return Se=this.scrollable==this?Ze=>super.measureScrollOffset(Ze):Ze=>this.scrollable.measureScrollOffset(Ze),Math.max(0,Se(re??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(re){let Se;const It="rtl"==this.dir?.value;Se="start"==re?It?"right":"left":"end"==re?It?"left":"right":re||("horizontal"===this.orientation?"left":"top");const Gt=this.scrollable.measureBoundingClientRectWithScrollOffset(Se);return this.elementRef.nativeElement.getBoundingClientRect()[Se]-Gt}measureRenderedContentSize(){const re=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?re.offsetWidth:re.offsetHeight}measureRangeSize(re){return this._forOf?this._forOf.measureRangeSize(re,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(re){re&&this._runAfterChangeDetection.push(re),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const re=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const Se of re)Se()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}static#e=this.\u0275fac=function(Se){return new(Se||Ye)(S.\u0275\u0275directiveInject(S.ElementRef),S.\u0275\u0275directiveInject(S.ChangeDetectorRef),S.\u0275\u0275directiveInject(S.NgZone),S.\u0275\u0275directiveInject(V,8),S.\u0275\u0275directiveInject(ce.Is,8),S.\u0275\u0275directiveInject(ee),S.\u0275\u0275directiveInject(I),S.\u0275\u0275directiveInject(Ge,8))};static#t=this.\u0275cmp=S.\u0275\u0275defineComponent({type:Ye,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(Se,Ze){if(1&Se&&S.\u0275\u0275viewQuery(ae,7),2&Se){let nt;S.\u0275\u0275queryRefresh(nt=S.\u0275\u0275loadQuery())&&(Ze._contentWrapper=nt.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(Se,Ze){2&Se&&S.\u0275\u0275classProp("cdk-virtual-scroll-orientation-horizontal","horizontal"===Ze.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==Ze.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[S.\u0275\u0275ProvidersFeature([{provide:de,useFactory:(re,Se)=>re||Se,deps:[[new S.Optional,new S.Inject(Ge)],Ye]}]),S.\u0275\u0275InheritDefinitionFeature,S.\u0275\u0275StandaloneFeature],ngContentSelectors:$,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(Se,Ze){1&Se&&(S.\u0275\u0275projectionDef(),S.\u0275\u0275elementStart(0,"div",0,1),S.\u0275\u0275projection(2),S.\u0275\u0275elementEnd(),S.\u0275\u0275element(3,"div",2)),2&Se&&(S.\u0275\u0275advance(3),S.\u0275\u0275styleProp("width",Ze._totalContentWidth)("height",Ze._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0})}return Ye})(),et=(()=>{class Ye{static#e=this.\u0275fac=function(Se){return new(Se||Ye)};static#t=this.\u0275mod=S.\u0275\u0275defineNgModule({type:Ye});static#n=this.\u0275inj=S.\u0275\u0275defineInjector({})}return Ye})(),rn=(()=>{class Ye{static#e=this.\u0275fac=function(Se){return new(Se||Ye)};static#t=this.\u0275mod=S.\u0275\u0275defineNgModule({type:Ye});static#n=this.\u0275inj=S.\u0275\u0275defineInjector({imports:[ce.vT,et,ce.vT,et]})}return Ye})()},6593:(we,oe,L)=>{L.d(oe,{Dx:()=>Oi,H7:()=>cn,b2:()=>oi,q6:()=>Vn,se:()=>st});var t=L(2611),S=L(4187);L(3984);class v extends S.\u0275DomAdapter{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class W extends v{static makeCurrent(){(0,S.\u0275setRootDomAdapter)(new W)}onAndCancel(_e,te,pe){return _e.addEventListener(te,pe),()=>{_e.removeEventListener(te,pe)}}dispatchEvent(_e,te){_e.dispatchEvent(te)}remove(_e){_e.parentNode&&_e.parentNode.removeChild(_e)}createElement(_e,te){return(te=te||this.getDefaultDocument()).createElement(_e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(_e){return _e.nodeType===Node.ELEMENT_NODE}isShadowRoot(_e){return _e instanceof DocumentFragment}getGlobalEventTarget(_e,te){return"window"===te?window:"document"===te?_e:"body"===te?_e.body:null}getBaseHref(_e){const te=function ce(){return H=H||document.querySelector("base"),H?H.getAttribute("href"):null}();return null==te?null:function $(xe){ae=ae||document.createElement("a"),ae.setAttribute("href",xe);const _e=ae.pathname;return"/"===_e.charAt(0)?_e:`/${_e}`}(te)}resetBaseElement(){H=null}getUserAgent(){return window.navigator.userAgent}getCookie(_e){return(0,S.\u0275parseCookieValue)(document.cookie,_e)}}let ae,H=null,F=(()=>{class xe{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(pe){return new(pe||xe)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:xe,factory:xe.\u0275fac})}return xe})();const j=new t.InjectionToken("EventManagerPlugins");let U=(()=>{class xe{constructor(te,pe){this._zone=pe,this._eventNameToPlugin=new Map,te.forEach(Ae=>{Ae.manager=this}),this._plugins=te.slice().reverse()}addEventListener(te,pe,Ae){return this._findPluginFor(pe).addEventListener(te,pe,Ae)}getZone(){return this._zone}_findPluginFor(te){let pe=this._eventNameToPlugin.get(te);if(pe)return pe;if(pe=this._plugins.find(gt=>gt.supports(te)),!pe)throw new t.\u0275RuntimeError(5101,!1);return this._eventNameToPlugin.set(te,pe),pe}static#e=this.\u0275fac=function(pe){return new(pe||xe)(t.\u0275\u0275inject(j),t.\u0275\u0275inject(t.NgZone))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:xe,factory:xe.\u0275fac})}return xe})();class z{constructor(_e){this._doc=_e}}const ee="ng-app-id";let de=(()=>{class xe{constructor(te,pe,Ae,gt={}){this.doc=te,this.appId=pe,this.nonce=Ae,this.platformId=gt,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,S.isPlatformServer)(gt),this.resetHostNodes()}addStyles(te){for(const pe of te)1===this.changeUsageCount(pe,1)&&this.onStyleAdded(pe)}removeStyles(te){for(const pe of te)this.changeUsageCount(pe,-1)<=0&&this.onStyleRemoved(pe)}ngOnDestroy(){const te=this.styleNodesInDOM;te&&(te.forEach(pe=>pe.remove()),te.clear());for(const pe of this.getAllStyles())this.onStyleRemoved(pe);this.resetHostNodes()}addHost(te){this.hostNodes.add(te);for(const pe of this.getAllStyles())this.addStyleToHost(te,pe)}removeHost(te){this.hostNodes.delete(te)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(te){for(const pe of this.hostNodes)this.addStyleToHost(pe,te)}onStyleRemoved(te){const pe=this.styleRef;pe.get(te)?.elements?.forEach(Ae=>Ae.remove()),pe.delete(te)}collectServerRenderedStyles(){const te=this.doc.head?.querySelectorAll(`style[${ee}="${this.appId}"]`);if(te?.length){const pe=new Map;return te.forEach(Ae=>{null!=Ae.textContent&&pe.set(Ae.textContent,Ae)}),pe}return null}changeUsageCount(te,pe){const Ae=this.styleRef;if(Ae.has(te)){const gt=Ae.get(te);return gt.usage+=pe,gt.usage}return Ae.set(te,{usage:pe,elements:[]}),pe}getStyleElement(te,pe){const Ae=this.styleNodesInDOM,gt=Ae?.get(pe);if(gt?.parentNode===te)return Ae.delete(pe),gt.removeAttribute(ee),gt;{const Rt=this.doc.createElement("style");return this.nonce&&Rt.setAttribute("nonce",this.nonce),Rt.textContent=pe,this.platformIsServer&&Rt.setAttribute(ee,this.appId),Rt}}addStyleToHost(te,pe){const Ae=this.getStyleElement(te,pe);te.appendChild(Ae);const gt=this.styleRef,Rt=gt.get(pe)?.elements;Rt?Rt.push(Ae):gt.set(pe,{elements:[Ae],usage:1})}resetHostNodes(){const te=this.hostNodes;te.clear(),te.add(this.doc.head)}static#e=this.\u0275fac=function(pe){return new(pe||xe)(t.\u0275\u0275inject(S.DOCUMENT),t.\u0275\u0275inject(t.APP_ID),t.\u0275\u0275inject(t.CSP_NONCE,8),t.\u0275\u0275inject(t.PLATFORM_ID))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:xe,factory:xe.\u0275fac})}return xe})();const ie={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},I=/%COMP%/g,ut=new t.InjectionToken("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function it(xe,_e){return _e.map(te=>te.replace(I,xe))}let st=(()=>{class xe{constructor(te,pe,Ae,gt,Rt,bn,_n,Xn=null){this.eventManager=te,this.sharedStylesHost=pe,this.appId=Ae,this.removeStylesOnCompDestory=gt,this.doc=Rt,this.platformId=bn,this.ngZone=_n,this.nonce=Xn,this.rendererByCompId=new Map,this.platformIsServer=(0,S.isPlatformServer)(bn),this.defaultRenderer=new et(te,Rt,_n,this.platformIsServer)}createRenderer(te,pe){if(!te||!pe)return this.defaultRenderer;this.platformIsServer&&pe.encapsulation===t.ViewEncapsulation.ShadowDom&&(pe={...pe,encapsulation:t.ViewEncapsulation.Emulated});const Ae=this.getOrCreateRenderer(te,pe);return Ae instanceof Ze?Ae.applyToHost(te):Ae instanceof Se&&Ae.applyStyles(),Ae}getOrCreateRenderer(te,pe){const Ae=this.rendererByCompId;let gt=Ae.get(pe.id);if(!gt){const Rt=this.doc,bn=this.ngZone,_n=this.eventManager,Xn=this.sharedStylesHost,tr=this.removeStylesOnCompDestory,nr=this.platformIsServer;switch(pe.encapsulation){case t.ViewEncapsulation.Emulated:gt=new Ze(_n,Xn,pe,this.appId,tr,Rt,bn,nr);break;case t.ViewEncapsulation.ShadowDom:return new re(_n,Xn,te,pe,Rt,bn,this.nonce,nr);default:gt=new Se(_n,Xn,pe,tr,Rt,bn,nr)}gt.onDestroy=()=>Ae.delete(pe.id),Ae.set(pe.id,gt)}return gt}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(pe){return new(pe||xe)(t.\u0275\u0275inject(U),t.\u0275\u0275inject(de),t.\u0275\u0275inject(t.APP_ID),t.\u0275\u0275inject(ut),t.\u0275\u0275inject(S.DOCUMENT),t.\u0275\u0275inject(t.PLATFORM_ID),t.\u0275\u0275inject(t.NgZone),t.\u0275\u0275inject(t.CSP_NONCE))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:xe,factory:xe.\u0275fac})}return xe})();class et{constructor(_e,te,pe,Ae){this.eventManager=_e,this.doc=te,this.ngZone=pe,this.platformIsServer=Ae,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(_e,te){return te?this.doc.createElementNS(ie[te]||te,_e):this.doc.createElement(_e)}createComment(_e){return this.doc.createComment(_e)}createText(_e){return this.doc.createTextNode(_e)}appendChild(_e,te){(Lt(_e)?_e.content:_e).appendChild(te)}insertBefore(_e,te,pe){_e&&(Lt(_e)?_e.content:_e).insertBefore(te,pe)}removeChild(_e,te){_e&&_e.removeChild(te)}selectRootElement(_e,te){let pe="string"==typeof _e?this.doc.querySelector(_e):_e;if(!pe)throw new t.\u0275RuntimeError(5104,!1);return te||(pe.textContent=""),pe}parentNode(_e){return _e.parentNode}nextSibling(_e){return _e.nextSibling}setAttribute(_e,te,pe,Ae){if(Ae){te=Ae+":"+te;const gt=ie[Ae];gt?_e.setAttributeNS(gt,te,pe):_e.setAttribute(te,pe)}else _e.setAttribute(te,pe)}removeAttribute(_e,te,pe){if(pe){const Ae=ie[pe];Ae?_e.removeAttributeNS(Ae,te):_e.removeAttribute(`${pe}:${te}`)}else _e.removeAttribute(te)}addClass(_e,te){_e.classList.add(te)}removeClass(_e,te){_e.classList.remove(te)}setStyle(_e,te,pe,Ae){Ae&(t.RendererStyleFlags2.DashCase|t.RendererStyleFlags2.Important)?_e.style.setProperty(te,pe,Ae&t.RendererStyleFlags2.Important?"important":""):_e.style[te]=pe}removeStyle(_e,te,pe){pe&t.RendererStyleFlags2.DashCase?_e.style.removeProperty(te):_e.style[te]=""}setProperty(_e,te,pe){_e[te]=pe}setValue(_e,te){_e.nodeValue=te}listen(_e,te,pe){if("string"==typeof _e&&!(_e=(0,S.\u0275getDOM)().getGlobalEventTarget(this.doc,_e)))throw new Error(`Unsupported event target ${_e} for event ${te}`);return this.eventManager.addEventListener(_e,te,this.decoratePreventDefault(pe))}decoratePreventDefault(_e){return te=>{if("__ngUnwrap__"===te)return _e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>_e(te)):_e(te))&&te.preventDefault()}}}function Lt(xe){return"TEMPLATE"===xe.tagName&&void 0!==xe.content}class re extends et{constructor(_e,te,pe,Ae,gt,Rt,bn,_n){super(_e,gt,Rt,_n),this.sharedStylesHost=te,this.hostEl=pe,this.shadowRoot=pe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Xn=it(Ae.id,Ae.styles);for(const tr of Xn){const nr=document.createElement("style");bn&&nr.setAttribute("nonce",bn),nr.textContent=tr,this.shadowRoot.appendChild(nr)}}nodeOrShadowRoot(_e){return _e===this.hostEl?this.shadowRoot:_e}appendChild(_e,te){return super.appendChild(this.nodeOrShadowRoot(_e),te)}insertBefore(_e,te,pe){return super.insertBefore(this.nodeOrShadowRoot(_e),te,pe)}removeChild(_e,te){return super.removeChild(this.nodeOrShadowRoot(_e),te)}parentNode(_e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(_e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Se extends et{constructor(_e,te,pe,Ae,gt,Rt,bn,_n){super(_e,gt,Rt,bn),this.sharedStylesHost=te,this.removeStylesOnCompDestory=Ae,this.rendererUsageCount=0,this.styles=_n?it(_n,pe.styles):pe.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Ze extends Se{constructor(_e,te,pe,Ae,gt,Rt,bn,_n){const Xn=Ae+"-"+pe.id;super(_e,te,pe,gt,Rt,bn,_n,Xn),this.contentAttr=function Pe(xe){return"_ngcontent-%COMP%".replace(I,xe)}(Xn),this.hostAttr=function Re(xe){return"_nghost-%COMP%".replace(I,xe)}(Xn)}applyToHost(_e){this.applyStyles(),this.setAttribute(_e,this.hostAttr,"")}createElement(_e,te){const pe=super.createElement(_e,te);return super.setAttribute(pe,this.contentAttr,""),pe}}let nt=(()=>{class xe extends z{constructor(te){super(te)}supports(te){return!0}addEventListener(te,pe,Ae){return te.addEventListener(pe,Ae,!1),()=>this.removeEventListener(te,pe,Ae)}removeEventListener(te,pe,Ae){return te.removeEventListener(pe,Ae)}static#e=this.\u0275fac=function(pe){return new(pe||xe)(t.\u0275\u0275inject(S.DOCUMENT))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:xe,factory:xe.\u0275fac})}return xe})();const It=["alt","control","meta","shift"],Gt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Kt={alt:xe=>xe.altKey,control:xe=>xe.ctrlKey,meta:xe=>xe.metaKey,shift:xe=>xe.shiftKey};let $t=(()=>{class xe extends z{constructor(te){super(te)}supports(te){return null!=xe.parseEventName(te)}addEventListener(te,pe,Ae){const gt=xe.parseEventName(pe),Rt=xe.eventCallback(gt.fullKey,Ae,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,S.\u0275getDOM)().onAndCancel(te,gt.domEventName,Rt))}static parseEventName(te){const pe=te.toLowerCase().split("."),Ae=pe.shift();if(0===pe.length||"keydown"!==Ae&&"keyup"!==Ae)return null;const gt=xe._normalizeKey(pe.pop());let Rt="",bn=pe.indexOf("code");if(bn>-1&&(pe.splice(bn,1),Rt="code."),It.forEach(Xn=>{const tr=pe.indexOf(Xn);tr>-1&&(pe.splice(tr,1),Rt+=Xn+".")}),Rt+=gt,0!=pe.length||0===gt.length)return null;const _n={};return _n.domEventName=Ae,_n.fullKey=Rt,_n}static matchEventFullKeyCode(te,pe){let Ae=Gt[te.key]||te.key,gt="";return pe.indexOf("code.")>-1&&(Ae=te.code,gt="code."),!(null==Ae||!Ae)&&(Ae=Ae.toLowerCase()," "===Ae?Ae="space":"."===Ae&&(Ae="dot"),It.forEach(Rt=>{Rt!==Ae&&(0,Kt[Rt])(te)&&(gt+=Rt+".")}),gt+=Ae,gt===pe)}static eventCallback(te,pe,Ae){return gt=>{xe.matchEventFullKeyCode(gt,te)&&Ae.runGuarded(()=>pe(gt))}}static _normalizeKey(te){return"esc"===te?"escape":te}static#e=this.\u0275fac=function(pe){return new(pe||xe)(t.\u0275\u0275inject(S.DOCUMENT))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:xe,factory:xe.\u0275fac})}return xe})();const Vn="main"==L.j?(0,t.createPlatformFactory)(t.platformCore,"browser",[{provide:t.PLATFORM_ID,useValue:S.\u0275PLATFORM_BROWSER_ID},{provide:t.PLATFORM_INITIALIZER,useValue:function Nt(){W.makeCurrent()},multi:!0},{provide:S.DOCUMENT,useFactory:function mn(){return(0,t.\u0275setDocument)(document),document},deps:[]}]):null,Tn=new t.InjectionToken(""),Pt=[{provide:t.\u0275TESTABILITY_GETTER,useClass:class V{addToWindow(_e){t.\u0275global.getAngularTestability=(pe,Ae=!0)=>{const gt=_e.findTestabilityInTree(pe,Ae);if(null==gt)throw new t.\u0275RuntimeError(5103,!1);return gt},t.\u0275global.getAllAngularTestabilities=()=>_e.getAllTestabilities(),t.\u0275global.getAllAngularRootElements=()=>_e.getAllRootElements(),t.\u0275global.frameworkStabilizers||(t.\u0275global.frameworkStabilizers=[]),t.\u0275global.frameworkStabilizers.push(pe=>{const Ae=t.\u0275global.getAllAngularTestabilities();let gt=Ae.length,Rt=!1;const bn=function(_n){Rt=Rt||_n,gt--,0==gt&&pe(Rt)};Ae.forEach(function(_n){_n.whenStable(bn)})})}findTestabilityInTree(_e,te,pe){return null==te?null:_e.getTestability(te)??(pe?(0,S.\u0275getDOM)().isShadowRoot(te)?this.findTestabilityInTree(_e,te.host,!0):this.findTestabilityInTree(_e,te.parentElement,!0):null)}},deps:[]},{provide:t.\u0275TESTABILITY,useClass:t.Testability,deps:[t.NgZone,t.TestabilityRegistry,t.\u0275TESTABILITY_GETTER]},{provide:t.Testability,useClass:t.Testability,deps:[t.NgZone,t.TestabilityRegistry,t.\u0275TESTABILITY_GETTER]}],An=[{provide:t.\u0275INJECTOR_SCOPE,useValue:"root"},{provide:t.ErrorHandler,useFactory:function Ln(){return new t.ErrorHandler},deps:[]},{provide:j,useClass:nt,multi:!0,deps:[S.DOCUMENT,t.NgZone,t.PLATFORM_ID]},{provide:j,useClass:$t,multi:!0,deps:[S.DOCUMENT]},st,de,U,{provide:t.RendererFactory2,useExisting:st},{provide:S.XhrFactory,useClass:F,deps:[]},[]];let oi="main"==L.j?(()=>{class xe{constructor(te){}static withServerTransition(te){return{ngModule:xe,providers:[{provide:t.APP_ID,useValue:te.appId}]}}static#e=this.\u0275fac=function(pe){return new(pe||xe)(t.\u0275\u0275inject(Tn,12))};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:xe});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({providers:[...An,...Pt],imports:[S.CommonModule,t.ApplicationModule]})}return xe})():null,Oi=(()=>{class xe{constructor(te){this._doc=te}getTitle(){return this._doc.title}setTitle(te){this._doc.title=te||""}static#e=this.\u0275fac=function(pe){return new(pe||xe)(t.\u0275\u0275inject(S.DOCUMENT))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:xe,factory:function(pe){let Ae=null;return Ae=pe?new pe:function Zn(){return new Oi((0,t.\u0275\u0275inject)(S.DOCUMENT))}(),Ae},providedIn:"root"})}return xe})();typeof window<"u"&&window;let cn=(()=>{class xe{static#e=this.\u0275fac=function(pe){return new(pe||xe)};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:xe,factory:function(pe){let Ae=null;return Ae=pe?new(pe||xe):t.\u0275\u0275inject(Nn),Ae},providedIn:"root"})}return xe})(),Nn=(()=>{class xe extends cn{constructor(te){super(),this._doc=te}sanitize(te,pe){if(null==pe)return null;switch(te){case t.SecurityContext.NONE:return pe;case t.SecurityContext.HTML:return(0,t.\u0275allowSanitizationBypassAndThrow)(pe,"HTML")?(0,t.\u0275unwrapSafeValue)(pe):(0,t.\u0275_sanitizeHtml)(this._doc,String(pe)).toString();case t.SecurityContext.STYLE:return(0,t.\u0275allowSanitizationBypassAndThrow)(pe,"Style")?(0,t.\u0275unwrapSafeValue)(pe):pe;case t.SecurityContext.SCRIPT:if((0,t.\u0275allowSanitizationBypassAndThrow)(pe,"Script"))return(0,t.\u0275unwrapSafeValue)(pe);throw new t.\u0275RuntimeError(5200,!1);case t.SecurityContext.URL:return(0,t.\u0275allowSanitizationBypassAndThrow)(pe,"URL")?(0,t.\u0275unwrapSafeValue)(pe):(0,t.\u0275_sanitizeUrl)(String(pe));case t.SecurityContext.RESOURCE_URL:if((0,t.\u0275allowSanitizationBypassAndThrow)(pe,"ResourceURL"))return(0,t.\u0275unwrapSafeValue)(pe);throw new t.\u0275RuntimeError(5201,!1);default:throw new t.\u0275RuntimeError(5202,!1)}}bypassSecurityTrustHtml(te){return(0,t.\u0275bypassSanitizationTrustHtml)(te)}bypassSecurityTrustStyle(te){return(0,t.\u0275bypassSanitizationTrustStyle)(te)}bypassSecurityTrustScript(te){return(0,t.\u0275bypassSanitizationTrustScript)(te)}bypassSecurityTrustUrl(te){return(0,t.\u0275bypassSanitizationTrustUrl)(te)}bypassSecurityTrustResourceUrl(te){return(0,t.\u0275bypassSanitizationTrustResourceUrl)(te)}static#e=this.\u0275fac=function(pe){return new(pe||xe)(t.\u0275\u0275inject(S.DOCUMENT))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:xe,factory:function(pe){let Ae=null;return Ae=pe?new pe:function vn(xe){return new Nn(xe.get(S.DOCUMENT))}(t.\u0275\u0275inject(t.Injector)),Ae},providedIn:"root"})}return xe})()},293:(we,oe,L)=>{L.d(oe,{Z:()=>W});var t=L(2675),S=L(7856);function v(H){this.__wrapped__=H,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}(v.prototype=(0,t.Z)(S.Z.prototype)).constructor=v;const W=v},7066:(we,oe,L)=>{L.d(oe,{Z:()=>ie});var D=L(8418);const W=function v(I,Ge){for(var me=I.length;me--;)if((0,D.Z)(I[me][0],Ge))return me;return-1};var ce=Array.prototype.splice;function de(I){var Ge=-1,me=null==I?0:I.length;for(this.clear();++Ge<me;){var tt=I[Ge];this.set(tt[0],tt[1])}}de.prototype.clear=function t(){this.__data__=[],this.size=0},de.prototype.delete=function ae(I){var Ge=this.__data__,me=W(Ge,I);return!(me<0||(me==Ge.length-1?Ge.pop():ce.call(Ge,me,1),--this.size,0))},de.prototype.get=function V(I){var Ge=this.__data__,me=W(Ge,I);return me<0?void 0:Ge[me][1]},de.prototype.has=function j(I){return W(this.__data__,I)>-1},de.prototype.set=function z(I,Ge){var me=this.__data__,tt=W(me,I);return tt<0?(++this.size,me.push([I,Ge])):me[tt][1]=Ge,this};const ie=de},3934:(we,oe,L)=>{L.d(oe,{Z:()=>v});var t=L(2675),S=L(7856);function D(W,H){this.__wrapped__=W,this.__actions__=[],this.__chain__=!!H,this.__index__=0,this.__values__=void 0}(D.prototype=(0,t.Z)(S.Z.prototype)).constructor=D;const v=D},2847:(we,oe,L)=>{L.d(oe,{Z:()=>v});var t=L(9218),S=L(4131);const v=(0,t.Z)(S.Z,"Map")},8410:(we,oe,L)=>{L.d(oe,{Z:()=>$t});const D=(0,L(9218).Z)(Object,"create");var V=Object.prototype.hasOwnProperty;var z=Object.prototype.hasOwnProperty;function me(vt){var xt=-1,wn=null==vt?0:vt.length;for(this.clear();++xt<wn;){var Ct=vt[xt];this.set(Ct[0],Ct[1])}}me.prototype.clear=function v(){this.__data__=D?D(null):{},this.size=0},me.prototype.delete=function H(vt){var xt=this.has(vt)&&delete this.__data__[vt];return this.size-=xt?1:0,xt},me.prototype.get=function F(vt){var xt=this.__data__;if(D){var wn=xt[vt];return"__lodash_hash_undefined__"===wn?void 0:wn}return V.call(xt,vt)?xt[vt]:void 0},me.prototype.has=function ee(vt){var xt=this.__data__;return D?void 0!==xt[vt]:z.call(xt,vt)},me.prototype.set=function I(vt,xt){var wn=this.__data__;return this.size+=this.has(vt)?0:1,wn[vt]=D&&void 0===xt?"__lodash_hash_undefined__":xt,this};const tt=me;var je=L(7066),ut=L(2847);const rn=function et(vt,xt){var wn=vt.__data__;return function it(vt){var xt=typeof vt;return"string"==xt||"number"==xt||"symbol"==xt||"boolean"==xt?"__proto__"!==vt:null===vt}(xt)?wn["string"==typeof xt?"string":"hash"]:wn.map};function Kt(vt){var xt=-1,wn=null==vt?0:vt.length;for(this.clear();++xt<wn;){var Ct=vt[xt];this.set(Ct[0],Ct[1])}}Kt.prototype.clear=function Pe(){this.size=0,this.__data__={hash:new tt,map:new(ut.Z||je.Z),string:new tt}},Kt.prototype.delete=function Ye(vt){var xt=rn(this,vt).delete(vt);return this.size-=xt?1:0,xt},Kt.prototype.get=function re(vt){return rn(this,vt).get(vt)},Kt.prototype.has=function Ze(vt){return rn(this,vt).has(vt)},Kt.prototype.set=function It(vt,xt){var wn=rn(this,vt),Ct=wn.size;return wn.set(vt,xt),this.size+=wn.size==Ct?0:1,this};const $t=Kt},6875:(we,oe,L)=>{L.d(oe,{Z:()=>D});const D=L(4131).Z.Symbol},7385:(we,oe,L)=>{L.d(oe,{Z:()=>v});var t=L(9218),S=L(4131);const v=(0,t.Z)(S.Z,"WeakMap")},3888:(we,oe,L)=>{L.d(oe,{Z:()=>S});const S=function t(D,v,W){switch(W.length){case 0:return D.call(v);case 1:return D.call(v,W[0]);case 2:return D.call(v,W[0],W[1]);case 3:return D.call(v,W[0],W[1],W[2])}return D.apply(v,W)}},4899:(we,oe,L)=>{L.d(oe,{Z:()=>S});const S=function t(D,v){for(var W=-1,H=null==D?0:D.length;++W<H&&!1!==v(D[W],W,D););return D}},3041:(we,oe,L)=>{L.d(oe,{Z:()=>D});var t=L(5496);const D=function S(v,W){return!(null==v||!v.length)&&(0,t.Z)(v,W,0)>-1}},1668:(we,oe,L)=>{L.d(oe,{Z:()=>V});var t=L(1292),S=L(5727),D=L(9977),v=L(9509),W=L(9229),H=L(7227),ae=Object.prototype.hasOwnProperty;const V=function $(F,j){var U=(0,D.Z)(F),z=!U&&(0,S.Z)(F),ee=!U&&!z&&(0,v.Z)(F),de=!U&&!z&&!ee&&(0,H.Z)(F),ie=U||z||ee||de,I=ie?(0,t.Z)(F.length,String):[],Ge=I.length;for(var me in F)(j||ae.call(F,me))&&(!ie||!("length"==me||ee&&("offset"==me||"parent"==me)||de&&("buffer"==me||"byteLength"==me||"byteOffset"==me)||(0,W.Z)(me,Ge)))&&I.push(me);return I}},2720:(we,oe,L)=>{L.d(oe,{Z:()=>S});const S=function t(D,v){for(var W=-1,H=null==D?0:D.length,ce=Array(H);++W<H;)ce[W]=v(D[W],W,D);return ce}},4416:(we,oe,L)=>{L.d(oe,{Z:()=>H});var t=L(6041),S=L(8418),v=Object.prototype.hasOwnProperty;const H=function W(ce,ae,$){var V=ce[ae];(!v.call(ce,ae)||!(0,S.Z)(V,$)||void 0===$&&!(ae in ce))&&(0,t.Z)(ce,ae,$)}},6041:(we,oe,L)=>{L.d(oe,{Z:()=>D});var t=L(5753);const D=function S(v,W,H){"__proto__"==W&&t.Z?(0,t.Z)(v,W,{configurable:!0,enumerable:!0,value:H,writable:!0}):v[W]=H}},2675:(we,oe,L)=>{L.d(oe,{Z:()=>v});var t=L(5829),S=Object.create;const v=function(){function W(){}return function(H){if(!(0,t.Z)(H))return{};if(S)return S(H);W.prototype=H;var ce=new W;return W.prototype=void 0,ce}}()},8568:(we,oe,L)=>{L.d(oe,{Z:()=>S});const S=function t(D,v,W,H){for(var ce=D.length,ae=W+(H?1:-1);H?ae--:++ae<ce;)if(v(D[ae],ae,D))return ae;return-1}},4818:(we,oe,L)=>{L.d(oe,{Z:()=>v});var t=L(1892),S=L(7801);const v=function D(W,H){for(var ce=0,ae=(H=(0,t.Z)(H,W)).length;null!=W&&ce<ae;)W=W[(0,S.Z)(H[ce++])];return ce&&ce==ae?W:void 0}},3844:(we,oe,L)=>{L.d(oe,{Z:()=>de});var t=L(6875),S=Object.prototype,D=S.hasOwnProperty,v=S.toString,W=t.Z?t.Z.toStringTag:void 0;var $=Object.prototype.toString;var z=t.Z?t.Z.toStringTag:void 0;const de=function ee(ie){return null==ie?void 0===ie?"[object Undefined]":"[object Null]":z&&z in Object(ie)?function H(ie){var I=D.call(ie,W),Ge=ie[W];try{ie[W]=void 0;var me=!0}catch{}var tt=v.call(ie);return me&&(I?ie[W]=Ge:delete ie[W]),tt}(ie):function V(ie){return $.call(ie)}(ie)}},5496:(we,oe,L)=>{L.d(oe,{Z:()=>H});var t=L(8568),S=L(7090);const H=function W(ce,ae,$){return ae==ae?function D(ce,ae,$){for(var V=$-1,F=ce.length;++V<F;)if(ce[V]===ae)return V;return-1}(ce,ae,$):(0,t.Z)(ce,S.Z,$)}},7090:(we,oe,L)=>{L.d(oe,{Z:()=>S});const S=function t(D){return D!=D}},1915:(we,oe,L)=>{L.d(oe,{Z:()=>de});var ie,t=L(4842),S=L(6006),D=(ie=/[^.]+$/.exec(S.Z&&S.Z.keys&&S.Z.keys.IE_PROTO||""))?"Symbol(src)_1."+ie:"";var H=L(5829),ce=L(8594),$=/^\[object .+?Constructor\]$/,z=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const de=function ee(ie){return!(!(0,H.Z)(ie)||function v(ie){return!!D&&D in ie}(ie))&&((0,t.Z)(ie)?z:$).test((0,ce.Z)(ie))}},7856:(we,oe,L)=>{L.d(oe,{Z:()=>S});const S=function t(){}},2447:(we,oe,L)=>{L.d(oe,{Z:()=>W});var t=L(1974),S=L(7657),D=L(7956);const W=function v(H,ce){return(0,D.Z)((0,S.Z)(H,ce,t.Z),H+"")}},5985:(we,oe,L)=>{L.d(oe,{Z:()=>ce});var t=L(4416),S=L(1892),D=L(9229),v=L(5829),W=L(7801);const ce=function H(ae,$,V,F){if(!(0,v.Z)(ae))return ae;for(var j=-1,U=($=(0,S.Z)($,ae)).length,z=U-1,ee=ae;null!=ee&&++j<U;){var de=(0,W.Z)($[j]),ie=V;if("__proto__"===de||"constructor"===de||"prototype"===de)return ae;if(j!=z){var I=ee[de];void 0===(ie=F?F(I,de,ee):void 0)&&(ie=(0,v.Z)(I)?I:(0,D.Z)($[j+1])?[]:{})}(0,t.Z)(ee,de,ie),ee=ee[de]}return ae}},9553:(we,oe,L)=>{L.d(oe,{Z:()=>v});var t=L(1974),S=L(801);const v=S.Z?function(W,H){return S.Z.set(W,H),W}:t.Z},1292:(we,oe,L)=>{L.d(oe,{Z:()=>S});const S=function t(D,v){for(var W=-1,H=Array(D);++W<D;)H[W]=v(W);return H}},6066:(we,oe,L)=>{L.d(oe,{Z:()=>$});var t=L(6875),S=L(2720),D=L(9977),v=L(7106),H=t.Z?t.Z.prototype:void 0,ce=H?H.toString:void 0;const $=function ae(V){if("string"==typeof V)return V;if((0,D.Z)(V))return(0,S.Z)(V,ae)+"";if((0,v.Z)(V))return ce?ce.call(V):"";var F=V+"";return"0"==F&&1/V==-1/0?"-0":F}},4689:(we,oe,L)=>{L.d(oe,{Z:()=>v});var t=L(3121),S=/^\s+/;const v=function D(W){return W&&W.slice(0,(0,t.Z)(W)+1).replace(S,"")}},8733:(we,oe,L)=>{L.d(oe,{Z:()=>S});const S=function t(D){return function(v){return D(v)}}},1892:(we,oe,L)=>{L.d(oe,{Z:()=>H});var t=L(9977),S=L(6331),D=L(7546),v=L(5902);const H=function W(ce,ae){return(0,t.Z)(ce)?ce:(0,S.Z)(ce,ae)?[ce]:(0,D.Z)((0,v.Z)(ce))}},8195:(we,oe,L)=>{L.d(oe,{Z:()=>D});var t=Math.max;const D=function S(v,W,H,ce){for(var ae=-1,$=v.length,V=H.length,F=-1,j=W.length,U=t($-V,0),z=Array(j+U),ee=!ce;++F<j;)z[F]=W[F];for(;++ae<V;)(ee||ae<$)&&(z[H[ae]]=v[ae]);for(;U--;)z[F++]=v[ae++];return z}},5815:(we,oe,L)=>{L.d(oe,{Z:()=>D});var t=Math.max;const D=function S(v,W,H,ce){for(var ae=-1,$=v.length,V=-1,F=H.length,j=-1,U=W.length,z=t($-F,0),ee=Array(z+U),de=!ce;++ae<z;)ee[ae]=v[ae];for(var ie=ae;++j<U;)ee[ie+j]=W[j];for(;++V<F;)(de||ae<$)&&(ee[ie+H[V]]=v[ae++]);return ee}},2307:(we,oe,L)=>{L.d(oe,{Z:()=>S});const S=function t(D,v){var W=-1,H=D.length;for(v||(v=Array(H));++W<H;)v[W]=D[W];return v}},6006:(we,oe,L)=>{L.d(oe,{Z:()=>D});const D=L(4131).Z["__core-js_shared__"]},6187:(we,oe,L)=>{L.d(oe,{Z:()=>v});var t=L(2675),S=L(5829);const v=function D(W){return function(){var H=arguments;switch(H.length){case 0:return new W;case 1:return new W(H[0]);case 2:return new W(H[0],H[1]);case 3:return new W(H[0],H[1],H[2]);case 4:return new W(H[0],H[1],H[2],H[3]);case 5:return new W(H[0],H[1],H[2],H[3],H[4]);case 6:return new W(H[0],H[1],H[2],H[3],H[4],H[5]);case 7:return new W(H[0],H[1],H[2],H[3],H[4],H[5],H[6])}var ce=(0,t.Z)(W.prototype),ae=W.apply(ce,H);return(0,S.Z)(ae)?ae:ce}}},5662:(we,oe,L)=>{L.d(oe,{Z:()=>je});var t=L(8195),S=L(5815);var W=L(6187),H=L(1167),ce=L(7500),ae=L(2307),$=L(9229),V=Math.min;var U=L(1966),z=L(4131);const je=function tt(ut,Pe,Re,it,st,et,rn,Ye,Lt,re){var Se=128&Pe,Ze=1&Pe,nt=2&Pe,It=24&Pe,Gt=512&Pe,Kt=nt?void 0:(0,W.Z)(ut);return function $t(){for(var vt=arguments.length,xt=Array(vt),wn=vt;wn--;)xt[wn]=arguments[wn];if(It)var Ct=(0,ce.Z)($t),Nt=function D(ut,Pe){for(var Re=ut.length,it=0;Re--;)ut[Re]===Pe&&++it;return it}(xt,Ct);if(it&&(xt=(0,t.Z)(xt,it,st,It)),et&&(xt=(0,S.Z)(xt,et,rn,It)),vt-=Nt,It&&vt<re){var Ln=(0,U.Z)(xt,Ct);return(0,H.Z)(ut,Pe,tt,$t.placeholder,Re,xt,Ln,Ye,Lt,re-vt)}var mn=Ze?Re:this,dn=nt?mn[ut]:ut;return vt=xt.length,Ye?xt=function F(ut,Pe){for(var Re=ut.length,it=V(Pe.length,Re),st=(0,ae.Z)(ut);it--;){var et=Pe[it];ut[it]=(0,$.Z)(et,Re)?st[et]:void 0}return ut}(xt,Ye):Gt&&vt>1&&xt.reverse(),Se&&Lt<vt&&(xt.length=Lt),this&&this!==z.Z&&this instanceof $t&&(dn=Kt||(0,W.Z)(dn)),dn.apply(mn,xt)}}},1167:(we,oe,L)=>{L.d(oe,{Z:()=>F});var t=L(4118),S=L(7778),D=L(8473);const F=function V(j,U,z,ee,de,ie,I,Ge,me,tt){var je=8&U;U|=je?32:64,4&(U&=~(je?64:32))||(U&=-4);var st=[j,U,de,je?ie:void 0,je?I:void 0,je?void 0:ie,je?void 0:I,Ge,me,tt],et=z.apply(void 0,st);return(0,t.Z)(j)&&(0,S.Z)(et,st),et.placeholder=ee,(0,D.Z)(et,j,U)}},9774:(we,oe,L)=>{L.d(oe,{Z:()=>wn});var t=L(9553),S=L(6187),D=L(4131);var ce=L(3888),ae=L(5662),$=L(1167),V=L(7500),F=L(1966);var ie=L(3557),I=L(8195),Ge=L(5815),me="__lodash_placeholder__",st=Math.min;var Ye=L(7778),Lt=L(8473),re=L(827),vt=Math.max;const wn=function xt(Ct,Nt,Ln,mn,dn,Vn,Tn,Pt){var An=2&Nt;if(!An&&"function"!=typeof Ct)throw new TypeError("Expected a function");var oi=mn?mn.length:0;if(oi||(Nt&=-97,mn=dn=void 0),Tn=void 0===Tn?Tn:vt((0,re.Z)(Tn),0),Pt=void 0===Pt?Pt:(0,re.Z)(Pt),oi-=dn?dn.length:0,64&Nt){var Yi=mn,Xi=dn;mn=dn=void 0}var er=An?void 0:(0,ie.Z)(Ct),Zn=[Ct,Nt,Ln,mn,dn,Yi,Xi,Vn,Tn,Pt];if(er&&function et(Ct,Nt){var Ln=Ct[1],mn=Nt[1],dn=Ln|mn;if(!(dn<131||128==mn&&8==Ln||128==mn&&256==Ln&&Ct[7].length<=Nt[8]||384==mn&&Nt[7].length<=Nt[8]&&8==Ln))return Ct;1&mn&&(Ct[2]=Nt[2],dn|=1&Ln?0:4);var Pt=Nt[3];if(Pt){var An=Ct[3];Ct[3]=An?(0,I.Z)(An,Pt,Nt[4]):Pt,Ct[4]=An?(0,F.Z)(Ct[3],me):Nt[4]}(Pt=Nt[5])&&(Ct[5]=(An=Ct[5])?(0,Ge.Z)(An,Pt,Nt[6]):Pt,Ct[6]=An?(0,F.Z)(Ct[5],me):Nt[6]),(Pt=Nt[7])&&(Ct[7]=Pt),128&mn&&(Ct[8]=null==Ct[8]?Nt[8]:st(Ct[8],Nt[8])),null==Ct[9]&&(Ct[9]=Nt[9]),Ct[0]=Nt[0],Ct[1]=dn}(Zn,er),Ct=Zn[0],Nt=Zn[1],Ln=Zn[2],mn=Zn[3],dn=Zn[4],!(Pt=Zn[9]=void 0===Zn[9]?An?0:Ct.length:vt(Zn[9]-oi,0))&&24&Nt&&(Nt&=-25),Nt&&1!=Nt)Oi=8==Nt||16==Nt?function j(Ct,Nt,Ln){var mn=(0,S.Z)(Ct);return function dn(){for(var Vn=arguments.length,Tn=Array(Vn),Pt=Vn,An=(0,V.Z)(dn);Pt--;)Tn[Pt]=arguments[Pt];var oi=Vn<3&&Tn[0]!==An&&Tn[Vn-1]!==An?[]:(0,F.Z)(Tn,An);return(Vn-=oi.length)<Ln?(0,$.Z)(Ct,Nt,ae.Z,dn.placeholder,void 0,Tn,oi,void 0,void 0,Ln-Vn):(0,ce.Z)(this&&this!==D.Z&&this instanceof dn?mn:Ct,this,Tn)}}(Ct,Nt,Pt):32!=Nt&&33!=Nt||dn.length?ae.Z.apply(void 0,Zn):function ee(Ct,Nt,Ln,mn){var dn=1&Nt,Vn=(0,S.Z)(Ct);return function Tn(){for(var Pt=-1,An=arguments.length,oi=-1,Yi=mn.length,Xi=Array(Yi+An),er=this&&this!==D.Z&&this instanceof Tn?Vn:Ct;++oi<Yi;)Xi[oi]=mn[oi];for(;An--;)Xi[oi++]=arguments[++Pt];return(0,ce.Z)(er,dn?Ln:this,Xi)}}(Ct,Nt,Ln,mn);else var Oi=function W(Ct,Nt,Ln){var mn=1&Nt,dn=(0,S.Z)(Ct);return function Vn(){return(this&&this!==D.Z&&this instanceof Vn?dn:Ct).apply(mn?Ln:this,arguments)}}(Ct,Nt,Ln);return(0,Lt.Z)((er?t.Z:Ye.Z)(Oi,Zn),Ct,Nt)}},5753:(we,oe,L)=>{L.d(oe,{Z:()=>D});var t=L(9218);const D=function(){try{var v=(0,t.Z)(Object,"defineProperty");return v({},"",{}),v}catch{}}()},7806:(we,oe,L)=>{L.d(oe,{Z:()=>S});const S="object"==typeof global&&global&&global.Object===Object&&global},3557:(we,oe,L)=>{L.d(oe,{Z:()=>v});var t=L(801),S=L(320);const v=t.Z?function(W){return t.Z.get(W)}:S.Z},6034:(we,oe,L)=>{L.d(oe,{Z:()=>W});var t=L(1767),D=Object.prototype.hasOwnProperty;const W=function v(H){for(var ce=H.name+"",ae=t.Z[ce],$=D.call(t.Z,ce)?ae.length:0;$--;){var V=ae[$],F=V.func;if(null==F||F==H)return V.name}return ce}},7500:(we,oe,L)=>{L.d(oe,{Z:()=>S});const S=function t(D){return D.placeholder}},9218:(we,oe,L)=>{L.d(oe,{Z:()=>W});var t=L(1915);const W=function v(H,ce){var ae=function S(H,ce){return H?.[ce]}(H,ce);return(0,t.Z)(ae)?ae:void 0}},9229:(we,oe,L)=>{L.d(oe,{Z:()=>v});var S=/^(?:0|[1-9]\d*)$/;const v=function D(W,H){var ce=typeof W;return!!(H=H??9007199254740991)&&("number"==ce||"symbol"!=ce&&S.test(W))&&W>-1&&W%1==0&&W<H}},1799:(we,oe,L)=>{L.d(oe,{Z:()=>H});var t=L(8418),S=L(6247),D=L(9229),v=L(5829);const H=function W(ce,ae,$){if(!(0,v.Z)($))return!1;var V=typeof ae;return!!("number"==V?(0,S.Z)($)&&(0,D.Z)(ae,$.length):"string"==V&&ae in $)&&(0,t.Z)($[ae],ce)}},6331:(we,oe,L)=>{L.d(oe,{Z:()=>H});var t=L(9977),S=L(7106),D=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,v=/^\w*$/;const H=function W(ce,ae){if((0,t.Z)(ce))return!1;var $=typeof ce;return!("number"!=$&&"symbol"!=$&&"boolean"!=$&&null!=ce&&!(0,S.Z)(ce))||v.test(ce)||!D.test(ce)||null!=ae&&ce in Object(ae)}},4118:(we,oe,L)=>{L.d(oe,{Z:()=>H});var t=L(293),S=L(3557),D=L(6034),v=L(4142);const H=function W(ce){var ae=(0,D.Z)(ce),$=v.Z[ae];if("function"!=typeof $||!(ae in t.Z.prototype))return!1;if(ce===$)return!0;var V=(0,S.Z)($);return!!V&&ce===V[0]}},3834:(we,oe,L)=>{L.d(oe,{Z:()=>D});var t=Object.prototype;const D=function S(v){var W=v&&v.constructor;return v===("function"==typeof W&&W.prototype||t)}},801:(we,oe,L)=>{L.d(oe,{Z:()=>D});var t=L(7385);const D=t.Z&&new t.Z},5527:(we,oe,L)=>{L.d(oe,{Z:()=>ce});var t=L(7806),S="object"==typeof exports&&exports&&!exports.nodeType&&exports,D=S&&"object"==typeof module&&module&&!module.nodeType&&module,W=D&&D.exports===S&&t.Z.process;const ce=function(){try{return D&&D.require&&D.require("util").types||W&&W.binding&&W.binding("util")}catch{}}()},7657:(we,oe,L)=>{L.d(oe,{Z:()=>v});var t=L(3888),S=Math.max;const v=function D(W,H,ce){return H=S(void 0===H?W.length-1:H,0),function(){for(var ae=arguments,$=-1,V=S(ae.length-H,0),F=Array(V);++$<V;)F[$]=ae[H+$];$=-1;for(var j=Array(H+1);++$<H;)j[$]=ae[$];return j[H]=ce(F),(0,t.Z)(W,this,j)}}},1767:(we,oe,L)=>{L.d(oe,{Z:()=>S});const S={}},1966:(we,oe,L)=>{L.d(oe,{Z:()=>D});var t="__lodash_placeholder__";const D=function S(v,W){for(var H=-1,ce=v.length,ae=0,$=[];++H<ce;){var V=v[H];(V===W||V===t)&&(v[H]=t,$[ae++]=H)}return $}},4131:(we,oe,L)=>{L.d(oe,{Z:()=>v});var t=L(7806),S="object"==typeof self&&self&&self.Object===Object&&self;const v=t.Z||S||Function("return this")()},7778:(we,oe,L)=>{L.d(oe,{Z:()=>v});var t=L(9553);const v=(0,L(4408).Z)(t.Z)},7956:(we,oe,L)=>{L.d(oe,{Z:()=>ae});var t=L(410),S=L(5753),D=L(1974);const W=S.Z?function($,V){return(0,S.Z)($,"toString",{configurable:!0,enumerable:!1,value:(0,t.Z)(V),writable:!0})}:D.Z,ae=(0,L(4408).Z)(W)},8473:(we,oe,L)=>{L.d(oe,{Z:()=>Pe});var t=/\{\n\/\* \[wrapped with (.+)\] \*/,S=/,? & /;var W=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;var ae=L(7956),$=L(4899),V=L(3041),me=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];const Pe=function ut(Re,it,st){var et=it+"";return(0,ae.Z)(Re,function H(Re,it){var st=it.length;if(!st)return Re;var et=st-1;return it[et]=(st>1?"& ":"")+it[et],it=it.join(st>2?", ":" "),Re.replace(W,"{\n/* [wrapped with "+it+"] */\n")}(et,function tt(Re,it){return(0,$.Z)(me,function(st){var et="_."+st[0];it&st[1]&&!(0,V.Z)(Re,et)&&Re.push(et)}),Re.sort()}(function D(Re){var it=Re.match(t);return it?it[1].split(S):[]}(et),st)))}},4408:(we,oe,L)=>{L.d(oe,{Z:()=>W});var D=Date.now;const W=function v(H){var ce=0,ae=0;return function(){var $=D(),V=16-($-ae);if(ae=$,V>0){if(++ce>=800)return arguments[0]}else ce=0;return H.apply(void 0,arguments)}}},7546:(we,oe,L)=>{L.d(oe,{Z:()=>ae});var t=L(4961),W=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,H=/\\(\\)?/g;const ae=function D($){var V=(0,t.Z)($,function(j){return 500===F.size&&F.clear(),j}),F=V.cache;return V}(function($){var V=[];return 46===$.charCodeAt(0)&&V.push(""),$.replace(W,function(F,j,U,z){V.push(U?z.replace(H,"$1"):j||F)}),V})},7801:(we,oe,L)=>{L.d(oe,{Z:()=>v});var t=L(7106);const v=function D(W){if("string"==typeof W||(0,t.Z)(W))return W;var H=W+"";return"0"==H&&1/W==-1/0?"-0":H}},8594:(we,oe,L)=>{L.d(oe,{Z:()=>v});var S=Function.prototype.toString;const v=function D(W){if(null!=W){try{return S.call(W)}catch{}try{return W+""}catch{}}return""}},3121:(we,oe,L)=>{L.d(oe,{Z:()=>D});var t=/\s/;const D=function S(v){for(var W=v.length;W--&&t.test(v.charAt(W)););return W}},92:(we,oe,L)=>{L.d(oe,{Z:()=>W});var t=L(293),S=L(3934),D=L(2307);const W=function v(H){if(H instanceof t.Z)return H.clone();var ce=new S.Z(H.__wrapped__,H.__chain__);return ce.__actions__=(0,D.Z)(H.__actions__),ce.__index__=H.__index__,ce.__values__=H.__values__,ce}},410:(we,oe,L)=>{L.d(oe,{Z:()=>S});const S=function t(D){return function(){return D}}},8123:(we,oe,L)=>{L.d(oe,{Z:()=>ae});var t=L(2447),S=L(8418),D=L(1799),v=L(2851),W=Object.prototype,H=W.hasOwnProperty;const ae=(0,t.Z)(function($,V){$=Object($);var F=-1,j=V.length,U=j>2?V[2]:void 0;for(U&&(0,D.Z)(V[0],V[1],U)&&(j=1);++F<j;)for(var z=V[F],ee=(0,v.Z)(z),de=-1,ie=ee.length;++de<ie;){var I=ee[de],Ge=$[I];(void 0===Ge||(0,S.Z)(Ge,W[I])&&!H.call($,I))&&($[I]=z[I])}return $})},8418:(we,oe,L)=>{L.d(oe,{Z:()=>S});const S=function t(D,v){return D===v||D!=D&&v!=v}},3068:(we,oe,L)=>{L.d(oe,{Z:()=>D});var t=L(4818);const D=function S(v,W,H){var ce=null==v?void 0:(0,t.Z)(v,W);return void 0===ce?H:ce}},1974:(we,oe,L)=>{L.d(oe,{Z:()=>S});const S=function t(D){return D}},5727:(we,oe,L)=>{L.d(oe,{Z:()=>V});var t=L(3844),S=L(1196);const W=function v(F){return(0,S.Z)(F)&&"[object Arguments]"==(0,t.Z)(F)};var H=Object.prototype,ce=H.hasOwnProperty,ae=H.propertyIsEnumerable;const V=W(function(){return arguments}())?W:function(F){return(0,S.Z)(F)&&ce.call(F,"callee")&&!ae.call(F,"callee")}},9977:(we,oe,L)=>{L.d(oe,{Z:()=>S});const S=Array.isArray},6247:(we,oe,L)=>{L.d(oe,{Z:()=>v});var t=L(4842),S=L(4018);const v=function D(W){return null!=W&&(0,S.Z)(W.length)&&!(0,t.Z)(W)}},9509:(we,oe,L)=>{L.d(oe,{Z:()=>$});var t=L(4131),S=L(7950),D="object"==typeof exports&&exports&&!exports.nodeType&&exports,v=D&&"object"==typeof module&&module&&!module.nodeType&&module,H=v&&v.exports===D?t.Z.Buffer:void 0;const $=(H?H.isBuffer:void 0)||S.Z},4842:(we,oe,L)=>{L.d(oe,{Z:()=>ae});var t=L(3844),S=L(5829);const ae=function ce($){if(!(0,S.Z)($))return!1;var V=(0,t.Z)($);return"[object Function]"==V||"[object GeneratorFunction]"==V||"[object AsyncFunction]"==V||"[object Proxy]"==V}},4018:(we,oe,L)=>{L.d(oe,{Z:()=>D});const D=function S(v){return"number"==typeof v&&v>-1&&v%1==0&&v<=9007199254740991}},5829:(we,oe,L)=>{L.d(oe,{Z:()=>S});const S=function t(D){var v=typeof D;return null!=D&&("object"==v||"function"==v)}},1196:(we,oe,L)=>{L.d(oe,{Z:()=>S});const S=function t(D){return null!=D&&"object"==typeof D}},7106:(we,oe,L)=>{L.d(oe,{Z:()=>W});var t=L(3844),S=L(1196);const W=function v(H){return"symbol"==typeof H||(0,S.Z)(H)&&"[object Symbol]"==(0,t.Z)(H)}},7227:(we,oe,L)=>{L.d(oe,{Z:()=>nt});var t=L(3844),S=L(4018),D=L(1196),et={};et["[object Float32Array]"]=et["[object Float64Array]"]=et["[object Int8Array]"]=et["[object Int16Array]"]=et["[object Int32Array]"]=et["[object Uint8Array]"]=et["[object Uint8ClampedArray]"]=et["[object Uint16Array]"]=et["[object Uint32Array]"]=!0,et["[object Arguments]"]=et["[object Array]"]=et["[object ArrayBuffer]"]=et["[object Boolean]"]=et["[object DataView]"]=et["[object Date]"]=et["[object Error]"]=et["[object Function]"]=et["[object Map]"]=et["[object Number]"]=et["[object Object]"]=et["[object RegExp]"]=et["[object Set]"]=et["[object String]"]=et["[object WeakMap]"]=!1;var Lt=L(8733),re=L(5527),Se=re.Z&&re.Z.isTypedArray;const nt=Se?(0,Lt.Z)(Se):function rn(It){return(0,D.Z)(It)&&(0,S.Z)(It.length)&&!!et[(0,t.Z)(It)]}},2851:(we,oe,L)=>{L.d(oe,{Z:()=>j});var t=L(1668),S=L(5829),D=L(3834);var ce=Object.prototype.hasOwnProperty;const $=function ae(U){if(!(0,S.Z)(U))return function v(U){var z=[];if(null!=U)for(var ee in Object(U))z.push(ee);return z}(U);var z=(0,D.Z)(U),ee=[];for(var de in U)"constructor"==de&&(z||!ce.call(U,de))||ee.push(de);return ee};var V=L(6247);const j=function F(U){return(0,V.Z)(U)?(0,t.Z)(U,!0):$(U)}},4961:(we,oe,L)=>{L.d(oe,{Z:()=>v});var t=L(8410);function D(W,H){if("function"!=typeof W||null!=H&&"function"!=typeof H)throw new TypeError("Expected a function");var ce=function(){var ae=arguments,$=H?H.apply(this,ae):ae[0],V=ce.cache;if(V.has($))return V.get($);var F=W.apply(this,ae);return ce.cache=V.set($,F)||V,F};return ce.cache=new(D.Cache||t.Z),ce}D.Cache=t.Z;const v=D},320:(we,oe,L)=>{L.d(oe,{Z:()=>S});const S=function t(){}},9812:(we,oe,L)=>{L.d(oe,{Z:()=>ce});var t=L(2447),S=L(9774),D=L(7500),v=L(1966),H=(0,t.Z)(function(ae,$){var V=(0,v.Z)($,(0,D.Z)(H));return(0,S.Z)(ae,32,void 0,$,V)});H.placeholder={};const ce=H},8176:(we,oe,L)=>{L.d(oe,{Z:()=>D});var t=L(5985);const D=function S(v,W,H){return null==v?v:(0,t.Z)(v,W,H)}},7950:(we,oe,L)=>{L.d(oe,{Z:()=>S});const S=function t(){return!1}},5932:(we,oe,L)=>{L.d(oe,{Z:()=>W});var t=L(9585),S=1/0;const W=function v(H){return H?(H=(0,t.Z)(H))===S||H===-S?17976931348623157e292*(H<0?-1:1):H==H?H:0:0===H?H:0}},827:(we,oe,L)=>{L.d(oe,{Z:()=>D});var t=L(5932);const D=function S(v){var W=(0,t.Z)(v),H=W%1;return W==W?H?W-H:W:0}},9585:(we,oe,L)=>{L.d(oe,{Z:()=>V});var t=L(4689),S=L(5829),D=L(7106),W=/^[-+]0x[0-9a-f]+$/i,H=/^0b[01]+$/i,ce=/^0o[0-7]+$/i,ae=parseInt;const V=function $(F){if("number"==typeof F)return F;if((0,D.Z)(F))return NaN;if((0,S.Z)(F)){var j="function"==typeof F.valueOf?F.valueOf():F;F=(0,S.Z)(j)?j+"":j}if("string"!=typeof F)return 0===F?F:+F;F=(0,t.Z)(F);var U=H.test(F);return U||ce.test(F)?ae(F.slice(2),U?2:8):W.test(F)?NaN:+F}},5902:(we,oe,L)=>{L.d(oe,{Z:()=>D});var t=L(6066);const D=function S(v){return null==v?"":(0,t.Z)(v)}},4142:(we,oe,L)=>{L.d(oe,{Z:()=>V});var t=L(293),S=L(3934),D=L(7856),v=L(9977),W=L(1196),H=L(92),ae=Object.prototype.hasOwnProperty;function $(F){if((0,W.Z)(F)&&!(0,v.Z)(F)&&!(F instanceof t.Z)){if(F instanceof S.Z)return F;if(ae.call(F,"__wrapped__"))return(0,H.Z)(F)}return new S.Z(F)}($.prototype=D.Z.prototype).constructor=$;const V=$},5861:(we,oe,L)=>{function t(D,v,W,H,ce,ae,$){try{var V=D[ae]($),F=V.value}catch(j){return void W(j)}V.done?v(F):Promise.resolve(F).then(H,ce)}function S(D){return function(){var v=this,W=arguments;return new Promise(function(H,ce){var ae=D.apply(v,W);function $(F){t(ae,H,ce,$,V,"next",F)}function V(F){t(ae,H,ce,$,V,"throw",F)}$(void 0)})}}L.d(oe,{Z:()=>S})}}]);